/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@icloudweb/group-activities/build/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@icloudweb/group-activities/build/index.js ***!
  \*****************************************************************/
/***/ (function(module) {

!function(e,t){ true?module.exports=t():0}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=67)}([,function(e,t,n){"use strict";e.exports=n(49)},,function(e,t,n){e.exports=r;function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function i(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var o={},s={};function a(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=l(e,(0|e)<0?-1:0,!0),i&&(s[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=l(e,e<0?-1:0,!1),i&&(o[e]=n),n)}function c(e,t){if(isNaN(e))return t?m:y;if(t){if(e<0)return m;if(e>=f)return $}else{if(e<=-g)return O;if(e+1>=g)return S}return e<0?c(-e,t).neg():l(e%h|0,e/h|0,t)}function l(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=c,r.fromBits=l;var d=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var i=c(d(n,8)),o=y,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),n);if(a<8){var p=c(d(n,a));o=o.mul(p).add(c(l))}else o=(o=o.mul(i)).add(c(l))}return o.unsigned=t,o}function p(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?u(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=u,r.fromValue=p;var h=4294967296,f=h*h,g=f/2,b=a(1<<24),y=a(0);r.ZERO=y;var m=a(0,!0);r.UZERO=m;var v=a(1);r.ONE=v;var w=a(1,!0);r.UONE=w;var P=a(-1);r.NEG_ONE=P;var S=l(-1,2147483647,!1);r.MAX_VALUE=S;var $=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=$;var O=l(0,-2147483648,!1);r.MIN_VALUE=O;var k=r.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},k.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(O)){var t=c(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=c(d(e,6),this.unsigned),o=this,s="";;){var a=o.div(i),l=(o.sub(a.mul(i)).toInt()>>>0).toString(e);if((o=a).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(O)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return 1==(1&this.low)},k.isEven=function(){return 0==(1&this.low)},k.equals=function(e){return i(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return this.comp(e)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return this.comp(e)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return this.comp(e)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(i(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(O)?O:this.not().add(v)},k.neg=k.negate,k.add=function(e){i(e)||(e=p(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,d=0,u=0,h=0,f=0;return h+=(f+=o+(65535&e.low))>>>16,u+=(h+=r+c)>>>16,d+=(u+=n+a)>>>16,d+=t+s,l((h&=65535)<<16|(f&=65535),(d&=65535)<<16|(u&=65535),this.unsigned)},k.subtract=function(e){return i(e)||(e=p(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return y;if(i(e)||(e=p(e)),e.isZero())return y;if(this.eq(O))return e.isOdd()?O:y;if(e.eq(O))return this.isOdd()?O:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(b)&&e.lt(b))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,d=e.low>>>16,u=65535&e.low,h=0,f=0,g=0,m=0;return g+=(m+=o*u)>>>16,f+=(g+=r*u)>>>16,g&=65535,f+=(g+=o*d)>>>16,h+=(f+=n*u)>>>16,f&=65535,h+=(f+=r*d)>>>16,f&=65535,h+=(f+=o*a)>>>16,h+=t*u+n*d+r*a+o*s,l((g&=65535)<<16|(m&=65535),(h&=65535)<<16|(f&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(e){if(i(e)||(e=p(e)),e.isZero())throw Error("division by zero");var t,n,r;if(this.isZero())return this.unsigned?m:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return m;if(e.gt(this.shru(1)))return w;r=m}else{if(this.eq(O))return e.eq(v)||e.eq(P)?O:e.eq(O)?v:(t=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?v:P:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq(O))return this.unsigned?m:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=y}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),s=o<=48?1:d(2,o-48),a=c(t),l=a.mul(e);l.isNegative()||l.gt(n);)l=(a=c(t-=s,this.unsigned)).mul(e);a.isZero()&&(a=v),r=r.add(a),n=n.sub(l)}return r},k.div=k.divide,k.modulo=function(e){return i(e)||(e=p(e)),this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return l(~this.low,~this.high,this.unsigned)},k.and=function(e){return i(e)||(e=p(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return i(e)||(e=p(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return i(e)||(e=p(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,n){
/**
 * @license
 * Copyright (c) 2018 Apple (http://www.apple.com)
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
/*! Modules included in this bundle:
 * name: webpack
 *   license: MIT
 *   version: 4.46.0
 *   text: 
 *     Copyright JS Foundation and other contributors
 *     
 *     Permission is hereby granted, free of charge, to any person obtaining
 *     a copy of this software and associated documentation files (the
 *     'Software'), to deal in the Software without restriction, including
 *     without limitation the rights to use, copy, modify, merge, publish,
 *     distribute, sublicense, and/or sell copies of the Software, and to
 *     permit persons to whom the Software is furnished to do so, subject to
 *     the following conditions:
 *     
 *     The above copyright notice and this permission notice shall be
 *     included in all copies or substantial portions of the Software.
 *     
 *     THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,
 *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 *     MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 *     IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
 *     CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
 *     TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 *     SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *     
 * 
 */
var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/rtc_reporting/rtcreporting.ts")}({"./node_modules/@marcom/useragent-detect/src/js/defaults.js":
/*!******************************************************************!*\
  !*** ./node_modules/@marcom/useragent-detect/src/js/defaults.js ***!
  \******************************************************************/
/*! no static exports found */function(e,t,n){"use strict";e.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,edgeChromium:!1,version:{string:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{string:"",major:0,minor:0,patch:0}}}},"./node_modules/@marcom/useragent-detect/src/js/dictionary.js":
/*!********************************************************************!*\
  !*** ./node_modules/@marcom/useragent-detect/src/js/dictionary.js ***!
  \********************************************************************/
/*! no static exports found */function(e,t,n){"use strict";e.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(e){return e.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===e.ua}},{name:"edgeChromium",userAgent:"Edge",version:["rv","Edg"],test:function(e){return e.ua.indexOf("Edg")>-1&&-1===e.ua.indexOf("Edge")}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(e){return e.ua.indexOf("Firefox")>-1&&-1===e.ua.indexOf("Opera")},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(e){return e.ua.indexOf("Safari")>-1&&e.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(e){return e.ua.indexOf("IE")>-1||e.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var e=!1;return document.documentMode&&(e=parseInt(document.documentMode,10)),e}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]}],os:[{name:"windows",test:function(e){return e.ua.indexOf("Windows")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(e){return e.ua.indexOf("Macintosh")>-1}},{name:"ios",test:function(e){return e.ua.indexOf("iPhone")>-1||e.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(e){return(e.ua.indexOf("Linux")>-1||e.platform.indexOf("Linux")>-1)&&-1===e.ua.indexOf("Android")}},{name:"fireos",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android",test:function(e){return e.ua.indexOf("Android")>-1}},{name:"chromeos",userAgent:"CrOS"}]}},"./node_modules/@marcom/useragent-detect/src/js/parseUserAgent.js":
/*!************************************************************************!*\
  !*** ./node_modules/@marcom/useragent-detect/src/js/parseUserAgent.js ***!
  \************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";var r=n(/*! ./defaults */"./node_modules/@marcom/useragent-detect/src/js/defaults.js"),i=n(/*! ./dictionary */"./node_modules/@marcom/useragent-detect/src/js/dictionary.js");function o(e,t){if("function"==typeof e.parseVersion)return e.parseVersion(t);var n,r=e.version||e.userAgent;"string"==typeof r&&(r=[r]);for(var i,o=r.length,s=0;s<o;s++)if((i=t.match((n=r[s],new RegExp(n+"[a-zA-Z\\s/:]+([0-9_.]+)","i"))))&&i.length>1)return i[1].replace(/_/g,".");return!1}function s(e,t,n){for(var r,i,s=e.length,a=0;a<s;a++)if("function"==typeof e[a].test?!0===e[a].test(n)&&(r=e[a].name):n.ua.indexOf(e[a].userAgent)>-1&&(r=e[a].name),r){if(t[r]=!0,"string"==typeof(i=o(e[a],n.ua))){var c=i.split(".");t.version.string=i,c&&c.length>0&&(t.version.major=parseInt(c[0]||0),t.version.minor=parseInt(c[1]||0),t.version.patch=parseInt(c[2]||0))}else"edge"===r&&(t.version.string="12.0.0",t.version.major="12",t.version.minor="0",t.version.patch="0");return"function"==typeof e[a].parseDocumentMode&&(t.version.documentMode=e[a].parseDocumentMode()),t}return t}e.exports=function(e){var t={};return t.browser=s(i.browser,r.browser,e),t.os=s(i.os,r.os,e),t}},"./node_modules/@marcom/useragent-detect/src/js/useragent-detect.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@marcom/useragent-detect/src/js/useragent-detect.js ***!
  \**************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";var r={ua:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor};e.exports=n(/*! ./parseUserAgent */"./node_modules/@marcom/useragent-detect/src/js/parseUserAgent.js")(r)},"./node_modules/webpack/buildin/harmony-module.js":
/*!*******************************************!*\
  !*** (webpack)/buildin/harmony-module.js ***!
  \*******************************************/
/*! no static exports found */function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"./src/rtc_reporting/reporting_agent.ts":
/*!**********************************************!*\
  !*** ./src/rtc_reporting/reporting_agent.ts ***!
  \**********************************************/
/*! exports provided: RTCReportingAgent */function(e,t,n){"use strict";n.r(t),n.d(t,"RTCReportingAgent",(function(){return l}));var r=n(/*! ./reporting_reporter */"./src/rtc_reporting/reporting_reporter.ts"),i=n(/*! ./reporting_event */"./src/rtc_reporting/reporting_event.ts"),o=n(/*! ./reporting_storebag */"./src/rtc_reporting/reporting_storebag.ts"),s=n(/*! ./reporting_config */"./src/rtc_reporting/reporting_config.ts"),a=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class c{constructor(e=null){this._objectNotToDestroy=e,this._objectToDestroy=null}addInstantiatedObject(e){this._objectNotToDestroy=this._objectToDestroy=e}get instance(){return this._objectNotToDestroy}destroy(){this._objectToDestroy&&this._objectToDestroy.destroy(),this._objectNotToDestroy=this._objectNotToDestroy=null}}class l{constructor(e={},t=!0,n=console.log.bind(console)){this.logFunc=n,this.logFunc=Object(s.makeLogger)(n),this._sessionInfo={},this._reportingDisabled=!1,this.storebag=new c,this.reporter=null,this.reportingVersion="1",this.fuzzFactor=0,this.sessionStartTime=0,this._initializeReportingAgent(e),t&&this._issueSessionBeginEvent()}static withSamplingUUID(e,t={},n){var r;return a(this,void 0,void 0,(function*(){const i=l._samplingFactorForUUID(e),o=new l(t,!1,n),s=(null===(r=o.storebag.instance)||void 0===r?void 0:r.setupPromise)||Promise.reject("missing storebag!");return Promise.all([i,s]).then(([e])=>(o.reporter.sampleFactor=e,o.logFunc("Sampling factor now",o.reporter.sampleFactor),o._issueSessionBeginEvent(),o))}))}destroy(){this.endSession()}get ReportingAllowed(){return!this._reportingDisabled}static get version(){return"1.1.0-alpha3"}issueReportingEvent(e,t,n=s.RTCReportingAgentEventTypes.BatchEvent,r){let o=null;if(this.ReportingAllowed&&this.reporter){let a=new i.RTCReportingEvent(e,s.RTCReportingSessionEventStatus.EventStatusSessionBegin,t,this._FuzzFactor,n);o=this.reporter.issueReportingEvent(a,this._sessionInfo,r)}else o=new s.RTCReportingError("Reporting not allowed.");return o}endSession(){this.ReportingAllowed&&this.reporter&&(this._issueSessionEndEvent(),this.reporter.flushAllEvents()),this._sessionInfo=null,this.reporter=null,this.storebag.destroy(),this.storebag=null}get SessionInfo(){return this._sessionInfo}get SessionID(){return this._sessionInfo[s.RTCReportingEventMetadataKeys.SessionID]}get ClientName(){return this._sessionInfo[s.RTCReportingAgentConfigKeys.ClientName]}get ServiceName(){return this._sessionInfo[s.RTCReportingAgentConfigKeys.ServiceName]}get _FuzzFactor(){return this.fuzzFactor}_initializeReportingAgent(e={}){const t=Date.now(),{applicationName:n,_clientName:i,sender:a,deviceName:d,osVersion:u,storebagURL:p,reportingDisabled:h,hlsEventEmitter:f,userInfoDict:g,SenderOSVersion:b,reportingStoreBag:y,UseHTTPHeaders:m}=e,v=e._sessionID||l._createSessionID();let w,P,S=e._serviceName;const $={clientName:i,applicationName:n,serviceName:S,sessionID:v};for(const e in $){const t=$[e];if(!t)return void this.logFunc(`Missing required parameter ${e} (${t})!`)}if(g&&(w=g.senderAltConfig,w&&(delete g.senderAltConfig,P=w.ServiceIdentifier,Object.keys(w).length&&Object.assign(g,w))),this._sessionInfo[s.RTCReportingAgentConfigKeys.ClientName]=i,this._sessionInfo[s.RTCReportingAgentConfigKeys.ServiceName]=S,this._sessionInfo[s.RTCReportingAgentConfigKeys.ApplicationName]=n,this._sessionInfo[s.RTCReportingAgentConfigKeys.DeviceName]=d,this._sessionInfo[s.RTCReportingEventMetadataKeys.OSVersion]=u,this._sessionInfo[s.RTCReportingEventMetadataKeys.Sender]=a,this._sessionInfo[s.RTCReportingEventMetadataKeys.RTCSchemeVersion]=this.reportingVersion,this._sessionInfo[s.RTCReportingEventMetadataKeys.RTCReportingVersion]=l.version,this._reportingDisabled=!!h,this._sessionInfo[s.RTCReportingEventMetadataKeys.SessionID]=v,this._sessionInfo[s.RTCReportingEventMetadataKeys.SenderOSVersion]=b,this._addUAToSessionInfo(),n&&S&&(S=S+"."+n),P&&S&&(S=S+"."+P),this._sessionInfo[s.RTCReportingAgentConfigKeys.ServiceName]=S,this.fuzzFactor=t-6e4*Math.floor(t/6e4),this.sessionStartTime=t-this.fuzzFactor,Object.keys(this._sessionInfo).forEach(e=>null==this._sessionInfo[e]&&delete this._sessionInfo[e]),g&&Object.keys(g)&&Object.assign(this._sessionInfo,g),!this._reportingDisabled){if(y)this.storebag=new c(y);else{if(!p)return void this.logFunc("Missing required parameter: storebagURL or reportingStoreBag!");this.storebag.addInstantiatedObject(new o.RTCReportingStoreBag(p,i,S,n,d,void 0,void 0,this.logFunc))}this.reporter=new r.RTCReporter(i,S,a,this.storebag.instance,this.reportingVersion,f,n,P,m,v,void 0,this.logFunc),this.logFunc("Created reporting agent using rtc.js version "+l.version)}}static _findUA(e){for(const t in e)if(!0===e[t])return t;return"unknown"}_addUAToSessionInfo(){if("undefined"!=typeof window){const e=n(/*! @marcom/useragent-detect */"./node_modules/@marcom/useragent-detect/src/js/useragent-detect.js");this._sessionInfo._osName=l._findUA(e.os),this._sessionInfo._osVersion=`${e.os.version.major}.${e.os.version.minor}`,this._sessionInfo._browserName=l._findUA(e.browser),this._sessionInfo._browserVersion=`${e.browser.version.major}.${e.browser.version.minor}`}}_issueSessionBeginEvent(){let e=new i.RTCReportingEvent(s.RTCReportingAgentMethods.ReportingSessionMethod,s.RTCReportingSessionEventStatus.EventStatusSessionBegin,null,this._FuzzFactor,s.RTCReportingAgentEventTypes.BatchEvent);this.reporter&&e&&this.reporter.issueReportingEvent(e,this.SessionInfo)}_issueSessionEndEvent(){let e=new i.RTCReportingEvent(s.RTCReportingAgentMethods.ReportingSessionMethod,s.RTCReportingSessionEventStatus.EventStatusSessionEnd,null,this._FuzzFactor,s.RTCReportingAgentEventTypes.RealTimeEvent);this.reporter&&this.reporter.issueReportingEvent(e,this.SessionInfo)}static _samplingFactorForUUID(e,t=(e=>a(this,void 0,void 0,(function*(){var t;return(null===(t=null===crypto||void 0===crypto?void 0:crypto.subtle)||void 0===t?void 0:t.digest("SHA-256",(new TextEncoder).encode(e)))||Promise.reject("browser does not support crypto.subtle!")})))){return a(this,void 0,void 0,(function*(){if("function"!=typeof BigInt)return Promise.reject("browser does not support BigInt!");const n=yield t(e),r=new DataView(n);let i=BigInt(0);for(let e=0;e<n.byteLength/8;e++){const t=BigInt(r.getUint32(8*e,!0)>>>0);i^=BigInt(r.getUint32(8*e+4,!0)>>>0)<<BigInt(32)|t}const o=i%BigInt(100),s=Number(o)/100;return Promise.resolve(s)}))}static _createSessionID(){let e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=[];for(let e=0;e<256;++e)i[e]=(e<16?"0":"")+e.toString(16);return i[255&e]+i[e>>8&255]+i[e>>16&255]+i[e>>24&255]+"-"+i[255&t]+i[t>>8&255]+"-"+i[t>>8&15|64]+i[t>>16&255]+"-"+i[63&n|128]+i[n>>8&255]+"-"+i[n>>8&255]+i[n>>16&255]+i[255&r]+i[r>>8&255]+i[r>>16&255]+i[r>>24&255]}}},"./src/rtc_reporting/reporting_config.ts":
/*!***********************************************!*\
  !*** ./src/rtc_reporting/reporting_config.ts ***!
  \***********************************************/
/*! exports provided: makeLogger, RTCReportingAgentDefaultConfig, RTCReportingAgentConfigKeys, RTCReportingAgentEventTypes, RTCReportingHTTPHeaderKeys, RTCReportingHTTPHeaderDefault, RTCReportingEventMetadataKeys, RTCReportingStoreBagConfig, RTCReportingReporterConfig, RTCReportingAgentMethods, RTCReportingSessionEventStatus, RTCReportingStoreBagKeys, RTCReportingError, RTCReportingBuildTypes, RTC_REPORTING_EVENTS_DISPATCHED */function(e,t,n){"use strict";n.r(t),n.d(t,"makeLogger",(function(){return a})),n.d(t,"RTCReportingAgentDefaultConfig",(function(){return s})),n.d(t,"RTCReportingAgentConfigKeys",(function(){return c})),n.d(t,"RTCReportingAgentEventTypes",(function(){return l})),n.d(t,"RTCReportingHTTPHeaderKeys",(function(){return r})),n.d(t,"RTCReportingHTTPHeaderDefault",(function(){return i})),n.d(t,"RTCReportingEventMetadataKeys",(function(){return o})),n.d(t,"RTCReportingStoreBagConfig",(function(){return u})),n.d(t,"RTCReportingReporterConfig",(function(){return p})),n.d(t,"RTCReportingAgentMethods",(function(){return d})),n.d(t,"RTCReportingSessionEventStatus",(function(){return h})),n.d(t,"RTCReportingStoreBagKeys",(function(){return f})),n.d(t,"RTCReportingError",(function(){return b})),n.d(t,"RTCReportingBuildTypes",(function(){return g})),n.d(t,"RTC_REPORTING_EVENTS_DISPATCHED",(function(){return y}));const r={ContentType:"ContentType",InternalBuild:"X-RTC-Internal-Build",ClientName:"X-RTC-Client-Name",ServiceName:"X-RTC-Service-Name",ClientVersion:"X-RTC-Client-Version",Sender:"X-RTC-Sender",UserAgent:"User-Agent",SessionID:"X-RTC-Session-ID"},i={ContentTypekey:"application/json;charset=UTF-8"},o={EventID:"_method",EventType:"_eventType",EventNumber:"_eventNumber",EventTime:"eventTime",Sender:"_sender",Status:"_status",ClientTS:"_clientTS",TimeZoneOffset:"_timezoneOffset",PostTime:"postTime",Events:"events",SessionID:"_sessionID",OSVersion:"osVersion",RTCReportingVersion:"_reportVers",StoreBagVersion:"StorebagVersion",RTCSchemeVersion:"_reportScheme",BagSchemeVersion:"StorebagScheme",StoreBagName:"StorebagName",SessionTag:"SessionTag",SenderOSVersion:"SenderOSVersion"},s={RunInlineIfNoWebWorker:!0,BatchEvent:!0,LogMsgPrefix:"[RTC_RA]:"},a=e=>(...t)=>e(s.LogMsgPrefix,...t),c={ClientName:"_clientName",ServiceName:"_serviceName",StorebagURL:"storebagURL",ApplicationName:"applicationName",Sender:"sender",DeviceName:"deviceName",Model:"model",FirmwareVersion:"firmwareVersion",OSVersion:"osVersion",ReportingDisabled:"reportingDisabled",HLSEventEmitter:"hlsEventEmitter",BuildType:"internal",UserInfoDict:"userInfoDict",ReportingStoreBag:"reportingStoreBag",SenderAltConfig:"senderAltConfig",ServiceIdentifier:"ServiceIdentifier",UseHTTPHeaders:"UseHTTPHeaders"};var l;!function(e){e[e.BatchEvent=0]="BatchEvent",e[e.RealTimeEvent=1]="RealTimeEvent"}(l||(l={}));const d={ReportingSessionMethod:0},u={StoreBagFetchSyncMode:0,StoreBagFetchAsyncMode:1,StoreBagVersionSupported:1},p={BatchThreshold:50},h={EventStatusSessionBegin:0,EventStatusSessionEnd:1,EventStatusSessionEndWithError:2},f={Version:"Version",Scheme:"Scheme",BagVersion:"BagVersion",Configurations:"Configurations",ConfigurationList:"ConfigurationList",PostURLs:"PostURLs",Filters:"Filters",BagList:"BagList",MinOSVersionDict:"MinOSVersionDict",ClientName:"ClientName",ServiceName:"ServiceName",ServiceNameList:"ServiceNameList",SenderServiceIDList:"SenderServiceIDList",ApplicationNameList:"ApplicationNameList",DeviceList:"DeviceList",Remove:"Remove",EventThreshold:"EventThreshold",SamplingThreshold:"SamplingThreshold",DeviceWhiteList:"DeviceWhiteList",FlushEventsInterval:"FlushEventsInterval"};var g;!function(e){e[e.BuildTypePublic=0]="BuildTypePublic",e[e.BuildTypeInternal=1]="BuildTypeInternal",e[e.BuildTypeSeed=2]="BuildTypeSeed",e[e.BuildTypeInternalSeed=3]="BuildTypeInternalSeed"}(g||(g={}));class b extends Error{constructor(...e){super(...e),Error.captureStackTrace&&"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}}const y="rtcReportingEventsDispatched"},"./src/rtc_reporting/reporting_event.ts":
/*!**********************************************!*\
  !*** ./src/rtc_reporting/reporting_event.ts ***!
  \**********************************************/
/*! exports provided: RTCReportingEvent */function(e,t,n){"use strict";n.r(t),n.d(t,"RTCReportingEvent",(function(){return i}));var r=n(/*! ./reporting_config */"./src/rtc_reporting/reporting_config.ts");class i{constructor(e,t=0,n={},i=0,o=r.RTCReportingAgentEventTypes.BatchEvent){this.eventID=e,this.eventType=o,this.payload=n||{},this.payload[r.RTCReportingEventMetadataKeys.EventID]=e,this.payload[r.RTCReportingEventMetadataKeys.Status]=t,this.payload[r.RTCReportingEventMetadataKeys.EventType]=o,this.fuzzFactor=i,this.isEventRealTime=o===r.RTCReportingAgentEventTypes.RealTimeEvent,this._addEventMetadata()}prepareEventPayload(e,t,n){Object.keys(e).forEach(t=>{this.payload[t]=e[t]}),this.isEventRealTime&&n&&t&&(this.payload.sizeOfLastBatch=n,this.payload.sizeTillLastBatch=t)}get EventPayload(){return this.payload}get IsEventRealTime(){return this.isEventRealTime}_addEventMetadata(){let e=new Date;this.payload[r.RTCReportingEventMetadataKeys.EventTime]=e.getTime()/1e3,this.payload[r.RTCReportingEventMetadataKeys.TimeZoneOffset]=60*e.getTimezoneOffset()}}},"./src/rtc_reporting/reporting_reporter.ts":
/*!*************************************************!*\
  !*** ./src/rtc_reporting/reporting_reporter.ts ***!
  \*************************************************/
/*! exports provided: RTCReporter, ReportingContentType, ReportingVersion */function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"RTCReporter",(function(){return a})),n.d(t,"ReportingContentType",(function(){return i})),n.d(t,"ReportingVersion",(function(){return o}));var r=n(/*! ./reporting_config */"./src/rtc_reporting/reporting_config.ts");const i="application/json;charset=UTF-8",o="RTCReportingJS/0.314";class s{constructor(t,n,i,o=!1,s=!1){this.logFunc=i,this.logFunc=Object(r.makeLogger)(i),this._eventWriter=null,this._sessionID=n,this._eventDispatcher=t,s&&this.logFunc("uniqueString"),"undefined"!=typeof navigator&&navigator&&void 0!==navigator.sendBeacon&&navigator.sendBeacon||s||this.module===e?this._eventWriter=this._sendEventDataWithHTTPPost:this._eventWriter=this._sendEventDataWithHTTPHeaders,o&&(this._eventWriter=this._sendEventDataWithHTTPHeaders)}sendEventData(e,t,n,i,o,s){this._eventWriter&&(this._eventWriter(e,t,n,i,o,s),this._eventDispatcher&&this._eventDispatcher.emit(r.RTC_REPORTING_EVENTS_DISPATCHED,t))}_sendEventDataUsingBeacon(e,t,n,r,i,o){let s=this._createEventPayloadAsJSON(n,r,i,o),a=new FormData;a.append("headers",s),a.append("payload",t),navigator.sendBeacon(e,a)}_sendEventDataWithHTTPPost(e,t,n,r,i,o){let s=this._createEventPayloadAsJSON(n,r,i,o),a=new FormData;a.append("headers",s),a.append("payload",t);let c=new XMLHttpRequest;c.open("POST",e,!0),c.send(a)}_createEventPayloadAsJSON(e,t,n,i){let o={};return o[r.RTCReportingHTTPHeaderKeys.InternalBuild]=0,o[r.RTCReportingHTTPHeaderKeys.ClientName]=e,o[r.RTCReportingHTTPHeaderKeys.ServiceName]=t,o[r.RTCReportingHTTPHeaderKeys.ClientVersion]=n,o[r.RTCReportingHTTPHeaderKeys.Sender]=i,o[r.RTCReportingHTTPHeaderKeys.ContentType]="application/json;charset=UTF-8",JSON.stringify(o)}_sendEventDataWithHTTPHeaders(e,t,n,s,a,c){let l=new XMLHttpRequest;l.onload=function(){},l.open("POST",e,!0),l.setRequestHeader(r.RTCReportingHTTPHeaderKeys.ContentType,i),l.setRequestHeader(r.RTCReportingHTTPHeaderKeys.InternalBuild,"0"),l.setRequestHeader(r.RTCReportingHTTPHeaderKeys.ClientName,n),l.setRequestHeader(r.RTCReportingHTTPHeaderKeys.ServiceName,s),l.setRequestHeader(r.RTCReportingHTTPHeaderKeys.ClientVersion,a),l.setRequestHeader(r.RTCReportingHTTPHeaderKeys.Sender,String(c)),l.setRequestHeader(r.RTCReportingHTTPHeaderKeys.ClientVersion,o),l.setRequestHeader(r.RTCReportingHTTPHeaderKeys.SessionID,this._sessionID),l.send(t)}}class a{constructor(e,t,n=null,r,i,o=null,a=null,c=null,l=!1,d,u=!1,p=console.log.bind(console)){this.clientName=e,this.serviceName=t,this.sender=n,this.reportingStoreBag=r,this.clientVersion=i,this.hlsEventEmitter=o,this.applicationName=a,this.senderServiceID=c,this.logFunc=p,this.eventList=[],this._storebagStats={},this.storeBag=null,this._count=0,this._eventDispatcher=new s(o,d,p,l,u),this.sampleFactor=Math.random(),this._sizeTillLastBatch=this._sizeOfLastBatch=0,this.checkAndConfigureEventFlushTimeoutOnce=!1}issueReportingEvent(e,t={},n){return e?(this._updateEventMetadata(e),e.prepareEventPayload(t,this._sizeTillLastBatch,this._sizeOfLastBatch),"function"==typeof n&&n(e.payload,e.eventID,e.eventType),this.eventList.push(e),this.checkAndConfigureEventFlushTimeoutOnce||this.canReportEvents()&&this._configureEventFlushTimer(),this.eventList.length>r.RTCReportingReporterConfig.BatchThreshold||e.IsEventRealTime?this.flushAllEvents():null):new r.RTCReportingError("not a valid event to report")}canReportEvents(){var e,t,n;let i;return void 0!==this._canReport?this._canReport:!(this.reportingStoreBag&&!this.storeBag&&(this.storeBag=this.reportingStoreBag.createParsedStoreBag(this.applicationName,this.senderServiceID),!this.storeBag)||(this.storeBag&&this.storeBag.IsValid?(this._canReport=!0,i=this.storeBag.getStoreBagProperty(r.RTCReportingStoreBagKeys.SamplingThreshold),i&&parseFloat(i)<this.sampleFactor&&(this._canReport=!1)):this.storeBag&&this.logFunc(`StoreBag for client ${this.clientName}, service ${this.serviceName}, app ${this.applicationName} senderService ${this.senderServiceID} not valid ${this.storeBag.IsValid} `),this._canReport&&(this._storebagStats[r.RTCReportingStoreBagKeys.SamplingThreshold]=i,this._storebagStats[r.RTCReportingEventMetadataKeys.BagSchemeVersion]=null===(e=this.storeBag)||void 0===e?void 0:e.StoreBagSchemeVersion,this._storebagStats[r.RTCReportingEventMetadataKeys.StoreBagVersion]=null===(t=this.storeBag)||void 0===t?void 0:t.StoreBagVersion,this._storebagStats[r.RTCReportingEventMetadataKeys.StoreBagName]=null===(n=this.storeBag)||void 0===n?void 0:n.StoreBagName),this.logFunc(`Event reporting is ${this._canReport} for client ${this.clientName} service ${this.serviceName}, app ${this.applicationName}, senderService ${this.senderServiceID}`),!this._canReport))}flushEventTimeout(){this.flushAllEvents()}flushAllEvents(){let e=null;return this.canReportEvents()?this._sendAllEvents():e=new r.RTCReportingError("no valid storebag configured or blocked by sampling threshold, ignoring events."),this.eventList=[],e}batchedEventsCount(){return this.eventList.length}get _EventList(){return this.eventList}_updateEventMetadata(e){e.EventPayload[r.RTCReportingEventMetadataKeys.EventNumber]=this._eventCounter(),e.EventPayload[r.RTCReportingEventMetadataKeys.ClientTS]=Date.now()/1e3,e.EventPayload[r.RTCReportingEventMetadataKeys.Sender]=this.sender,e.EventPayload[r.RTCReportingAgentConfigKeys.ClientName]=this.clientName,e.EventPayload[r.RTCReportingAgentConfigKeys.ServiceName]=this.serviceName}_sendAllEvents(){var e,t;const n=this.batchedEventsCount();if(0===n)return;let r=null===(e=this.storeBag)||void 0===e?void 0:e.listOfSupportedBackEnds();if(!r||r.length<=0)return;let i=null===(t=this.storeBag)||void 0===t?void 0:t.listOfKeysToBlock();i&&this.eventList.forEach(e=>{e.prepareEventPayload(this._storebagStats,this._sizeTillLastBatch,this._sizeOfLastBatch),i.forEach((function(t){delete e.EventPayload[t]}))});let o=this._marshallAsJSONString();this._sizeTillLastBatch+=o.length,this._sizeOfLastBatch=o.length,r.forEach(e=>{this._eventDispatcher.sendEventData(e,o,this.clientName,this.serviceName,this.clientVersion,this.sender)}),this.logFunc("events reported:",n)}_marshallAsJSONString(){const e=Date.now()/1e3,t=this.eventList.map(e=>e.EventPayload);return JSON.stringify({[r.RTCReportingEventMetadataKeys.PostTime]:e,[r.RTCReportingEventMetadataKeys.Events]:t})}_eventCounter(){return this._count++}_configureEventFlushTimer(){let e=null;this.checkAndConfigureEventFlushTimeoutOnce=!0,this.storeBag&&this.storeBag.IsValid?e=this.storeBag.getStoreBagProperty(r.RTCReportingStoreBagKeys.FlushEventsInterval):this.logFunc((this.storeBag?"Invalid":"Missing")+" storebag!!!"),e?(e=1e3*parseInt(e,10),e>=1e4?(setInterval(this.flushEventTimeout.bind(this),e),this.logFunc(`set interval for flush timeout: every ${e}ms`)):this.logFunc(`this store bag's flushTimeout is too small (${e/1e3} < 10s!)`)):this.logFunc("this store bag forgot to set a flushTimeout!")}}}.call(this,n(/*! ./../../node_modules/webpack/buildin/harmony-module.js */"./node_modules/webpack/buildin/harmony-module.js")(e))},"./src/rtc_reporting/reporting_storebag.ts":
/*!*************************************************!*\
  !*** ./src/rtc_reporting/reporting_storebag.ts ***!
  \*************************************************/
/*! exports provided: RTCReportingStoreBag, RTCReportingParsedStoreBag */function(e,t,n){"use strict";n.r(t),n.d(t,"RTCReportingStoreBag",(function(){return o})),n.d(t,"RTCReportingParsedStoreBag",(function(){return i}));var r=n(/*! ./reporting_config */"./src/rtc_reporting/reporting_config.ts");class i{constructor(e,t,n,r){this.storeBagConfig=e,this.selectedBagName=t,this.bagVersion=n,this.setupPromise=r}listOfSupportedBackEnds(){return this.getStoreBagProperty(r.RTCReportingStoreBagKeys.PostURLs)}listOfKeysToBlock(){if(!this.storeBagConfig)return null;let e=this.storeBagConfig[r.RTCReportingStoreBagKeys.Filters];return e?e[r.RTCReportingStoreBagKeys.Remove]:null}get IsValid(){return Boolean(this.storeBagConfig)}get StoreBagName(){return this.IsValid?this.selectedBagName:null}get StoreBagVersion(){return this.IsValid?this.bagVersion:null}get StoreBagSchemeVersion(){return r.RTCReportingStoreBagConfig.StoreBagVersionSupported}getStoreBagProperty(e){let t=null;return this.IsValid&&e&&e in this.storeBagConfig&&(t=this.storeBagConfig[e]),t}}class o{constructor(e,t=null,n=null,i=null,o=null,s=r.RTCReportingStoreBagConfig.StoreBagFetchAsyncMode,a=null,c=console.log.bind(console)){this.storebagURL=e,this.clientName=t,this.serviceName=n,this.applicationName=i,this.deviceName=o,this.mode=s,this.storebagAsJSON=a,this.logFunc=c,this.logFunc=Object(r.makeLogger)(c),this.storeBagConfig=null,this.storebagLoader=null,this.selectedBagName=null,this.bagVersion=null,this.setupPromise=this.fetchAndParseStoreBag()}destroy(){this.storebagLoader&&(this.storebagLoader.abort(),this.storebagLoader=null)}fetchAndParseStoreBag(){return this.storebagAsJSON?Promise.resolve():this.storebagURL?this._requestStoreBagAsync():Promise.reject()}createParsedStoreBag(e=this.applicationName,t=null){return this.storebagAsJSON?this._parseAndReturnStoreBag(this.storebagAsJSON,e,t):(this.logFunc("no bag available!"),null)}_parseAndReturnStoreBag(e,t,n){let o=null,s=null,a=null,c=null;return e.forEach(e=>{if(o=null,e[r.RTCReportingStoreBagKeys.Scheme]===r.RTCReportingStoreBagConfig.StoreBagVersionSupported){let i=e[r.RTCReportingStoreBagKeys.BagList];Object.keys(i).some(s=>{let l=i[s];return!!this._canUseBagConfig(l,t,n)&&(o=l,a=s,c=e[r.RTCReportingStoreBagKeys.BagVersion],!1)})}o&&(s=this._fillSelectedBagConfig(o,e))}),s||this.logFunc("Failed to select a storebag."),new i(s,a,c,this.setupPromise)}_requestStoreBagAsync(){return new Promise((e,t)=>{const n=this.storebagLoader=new XMLHttpRequest;n.onabort=t,n.onreadystatechange=()=>{const t=n&&4===n.readyState&&200===n.status&&n.responseText;t&&(this.storebagAsJSON=JSON.parse(t),e(this))},n.open("GET",this.storebagURL,!0),n.send(null)})}_canUseBagConfig(e,t,n){let i=e[r.RTCReportingStoreBagKeys.ClientName];if(i&&i!==this.clientName)return!1;let o=e[r.RTCReportingStoreBagKeys.ServiceNameList],s=e[r.RTCReportingStoreBagKeys.ServiceName];if(o&&o.length>0&&-1===o.indexOf(this.serviceName))return!1;if(!o&&s&&s!==this.serviceName)return!1;let a=e[r.RTCReportingStoreBagKeys.ApplicationNameList];if(a&&a.length>0&&-1===a.indexOf(t))return!1;let c=e[r.RTCReportingStoreBagKeys.DeviceList];if(c&&c.length>0&&-1===c.indexOf(this.deviceName))return!1;let l=e[r.RTCReportingStoreBagKeys.SenderServiceIDList];return!(l&&l.length>0&&-1===l.indexOf(n))}_fillSelectedBagConfig(e,t){let n=null,i=t[r.RTCReportingStoreBagKeys.ConfigurationList];return(e[r.RTCReportingStoreBagKeys.Configurations]||[]).forEach((function(e){let t=i[e];n=n||{},Object.assign(n,t)})),n}}},"./src/rtc_reporting/rtcreporting.ts":
/*!*******************************************!*\
  !*** ./src/rtc_reporting/rtcreporting.ts ***!
  \*******************************************/
/*! exports provided: default, RTCReportingAgent, RTCStorebag, RTCReportingAgentDefaultConfig, RTCReportingAgentConfigKeys, RTCReportingAgentEventTypes, RTCReportingHTTPHeaderDefault, RTCReportingHTTPHeaderKeys, RTCReportingEventMetadataKeys, RTC_REPORTING_EVENTS_DISPATCHED, RTCReportingStoreBagConfig */function(e,t,n){"use strict";n.r(t);var r=n(/*! ./reporting_config */"./src/rtc_reporting/reporting_config.ts");n.d(t,"RTCReportingAgentDefaultConfig",(function(){return r.RTCReportingAgentDefaultConfig})),n.d(t,"RTCReportingAgentConfigKeys",(function(){return r.RTCReportingAgentConfigKeys})),n.d(t,"RTCReportingAgentEventTypes",(function(){return r.RTCReportingAgentEventTypes})),n.d(t,"RTCReportingHTTPHeaderDefault",(function(){return r.RTCReportingHTTPHeaderDefault})),n.d(t,"RTCReportingHTTPHeaderKeys",(function(){return r.RTCReportingHTTPHeaderKeys})),n.d(t,"RTCReportingEventMetadataKeys",(function(){return r.RTCReportingEventMetadataKeys})),n.d(t,"RTC_REPORTING_EVENTS_DISPATCHED",(function(){return r.RTC_REPORTING_EVENTS_DISPATCHED})),n.d(t,"RTCReportingStoreBagConfig",(function(){return r.RTCReportingStoreBagConfig}));var i=n(/*! ./reporting_storebag */"./src/rtc_reporting/reporting_storebag.ts");n.d(t,"RTCStorebag",(function(){return i}));var o=n(/*! ./reporting_agent */"./src/rtc_reporting/reporting_agent.ts");n.d(t,"RTCReportingAgent",(function(){return o.RTCReportingAgent})),t.default={RTCReportingAgent:o.RTCReportingAgent,RTCStorebag:i,RTCReportingAgentDefaultConfig:r.RTCReportingAgentDefaultConfig,RTCReportingAgentConfigKeys:r.RTCReportingAgentConfigKeys,RTCReportingAgentEventTypes:r.RTCReportingAgentEventTypes,RTCReportingHTTPHeaderDefault:r.RTCReportingHTTPHeaderDefault,RTCReportingHTTPHeaderKeys:r.RTCReportingHTTPHeaderKeys,RTCReportingEventMetadataKeys:r.RTCReportingEventMetadataKeys,RTC_REPORTING_EVENTS_DISPATCHED:r.RTC_REPORTING_EVENTS_DISPATCHED,RTCReportingStoreBagConfig:r.RTCReportingStoreBagConfig}}}).default},e.exports=r()},function(e,t,n){"use strict";(function(e){var r=t;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(51),r.base64=n(52),r.EventEmitter=n(53),r.float=n(54),r.inquire=n(55),r.utf8=n(56),r.pool=n(57),r.LongBits=n(58),r.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),r.global=r.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,n(50))},function(e,t,n){"use strict";e.exports=n(47)},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),s=r[0],a=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),d=0,u=a>0?s-4:s;for(n=0;n<u;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[d++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(d(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},,,function(e,t,n){"use strict";e.exports=u;var r,i=n(5),o=i.LongBits,s=i.base64,a=i.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var p=function(){return i.Buffer?function(){return(u.create=function(){return new r})()}:function(){return new u}};function h(e,t,n){t[n]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function b(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}u.create=p(),u.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(u.alloc=i.pool(u.alloc,i.Array.prototype.subarray)),u.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(g,10,o.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=o.from(e);return this._push(g,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(g,t.length(),t)},u.prototype.bool=function(e){return this._push(h,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(b,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=o.from(e);return this._push(b,4,t.lo)._push(b,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var y=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(i.isString(e)){var n=u.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(y,t,e)},u.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(h,1,0)},u.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(l,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},u._configure=function(e){r=e,u.create=p(),r._configure()}},function(e,t,n){"use strict";e.exports=c;var r,i=n(5),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,d="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):d(e)})(e)}:d};function p(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=u(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},function(e,t,n){"use strict";var r=n(64),i=n(65);function o(e,t){if("function"==typeof e.parseVersion)return e.parseVersion(t);var n,r=e.version||e.userAgent;"string"==typeof r&&(r=[r]);for(var i,o=r.length,s=0;s<o;s++)if((i=t.match((n=r[s],new RegExp(n+"[a-zA-Z\\s/:]+([0-9_.]+)","i"))))&&i.length>1)return i[1].replace(/_/g,".");return!1}function s(e,t,n){for(var r,i,s=e.length,a=0;a<s;a++)if("function"==typeof e[a].test?!0===e[a].test(n)&&(r=e[a].name):n.ua.indexOf(e[a].userAgent)>-1&&(r=e[a].name),r){if(t[r]=!0,"string"==typeof(i=o(e[a],n.ua))){var c=i.split(".");t.version.string=i,c&&c.length>0&&(t.version.major=parseInt(c[0]||0),t.version.minor=parseInt(c[1]||0),t.version.patch=parseInt(c[2]||0))}else"edge"===r&&(t.version.string="12.0.0",t.version.major="12",t.version.minor="0",t.version.patch="0");return"function"==typeof e[a].parseDocumentMode&&(t.version.documentMode=e[a].parseDocumentMode()),t}return t}e.exports=function(e){var t={};return t.browser=s(i.browser,r.browser,e),t.os=s(i.os,r.os,e),t}},function(e,t,n){"use strict";e.exports=n(66).PhoneNumber,Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=e.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";
/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(48),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,c=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,d=i?Symbol.for("react.provider"):60109,u=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,b="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function w(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}function P(){}function S(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},P.prototype=w.prototype;var $=S.prototype=new P;$.constructor=S,r($,w.prototype),$.isPureReactComponent=!0;var O={current:null},k=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var r,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)k.call(t,r)&&!I.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var l=Array(c),d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===i[r]&&(i[r]=c[r]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:O.current}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var M=/\/+/g,T=[];function D(e,t,n,r){if(T.length){var i=T.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function E(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>T.length&&T.push(e)}function A(e,t,n){return null==e?0:function e(t,n,r,i){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var c=!1;if(null===t)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case o:case s:c=!0}}if(c)return r(i,t,""===n?"."+j(t,0):n),1;if(c=0,n=""===n?".":n+":",Array.isArray(t))for(var l=0;l<t.length;l++){var d=n+j(a=t[l],l);c+=e(a,d,r,i)}else if(null===t||"object"!=typeof t?d=null:d="function"==typeof(d=b&&t[b]||t["@@iterator"])?d:null,"function"==typeof d)for(t=d.call(t),l=0;!(a=t.next()).done;)c+=e(a=a.value,d=n+j(a,l++),r,i);else if("object"===a)throw r=""+t,Error(y(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return c}(e,"",t,n)}function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function N(e,t){e.func.call(e.context,t,e.count++)}function B(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?_(e,r,n,(function(e){return e})):null!=e&&(R(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(M,"$&/")+"/")+n)),r.push(e))}function _(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(M,"$&/")+"/"),A(e,B,t=D(t,o,r,i)),E(t)}var x={current:null};function U(){var e=x.current;if(null===e)throw Error(y(321));return e}var L={ReactCurrentDispatcher:x,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:O,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return _(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;A(e,N,t=D(null,null,t,n)),E(t)},count:function(e){return A(e,(function(){return null}),null)},toArray:function(e){var t=[];return _(e,t,null,(function(e){return e})),t},only:function(e){if(!R(e))throw Error(y(143));return e}},t.Component=w,t.Fragment=a,t.Profiler=l,t.PureComponent=S,t.StrictMode=c,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null==e)throw Error(y(267,e));var i=r({},e.props),s=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=O.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)k.call(t,d)&&!I.hasOwnProperty(d)&&(i[d]=void 0===t[d]&&void 0!==l?l[d]:t[d])}var d=arguments.length-2;if(1===d)i.children=n;else if(1<d){l=Array(d);for(var u=0;u<d;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:o,type:e.type,key:s,ref:a,props:i,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:d,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:p,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return U().useCallback(e,t)},t.useContext=function(e,t){return U().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return U().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return U().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return U().useLayoutEffect(e,t)},t.useMemo=function(e,t){return U().useMemo(e,t)},t.useReducer=function(e,t,n){return U().useReducer(e,t,n)},t.useRef=function(e){return U().useRef(e)},t.useState=function(e){return U().useState(e)},t.version="16.14.0"},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,c=s(e),l=1;l<arguments.length;l++){for(var d in n=Object(arguments[l]))i.call(n,d)&&(c[d]=n[d]);if(r){a=r(n);for(var u=0;u<a.length;u++)o.call(n,a[u])&&(c[a[u]]=n[a[u]])}}return c}},function(e,t,n){"use strict";var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(10),r.BufferWriter=n(59),r.Reader=n(11),r.BufferReader=n(60),r.util=n(5),r.rpc=n(61),r.roots=n(63),r.configure=i,i()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),r=0,i=2,o=!0;for(;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))}},function(e,t,n){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,n){for(var r,o=null,s=[],a=0,c=0;t<n;){var l=e[t++];switch(c){case 0:s[a++]=i[l>>2],r=(3&l)<<4,c=1;break;case 1:s[a++]=i[r|l>>4],r=(15&l)<<2,c=2;break;case 2:s[a++]=i[r|l>>6],s[a++]=i[63&l],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=i[r],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};r.decode=function(e,t,n){for(var r,i=n,s=0,a=0;a<e.length;){var c=e.charCodeAt(a++);if(61===c&&s>1)break;if(void 0===(c=o[c]))throw Error("invalid encoding");switch(s){case 0:r=c,s=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,s=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,s=3;break;case 3:t[n++]=(3&r)<<6|c,s=0}}if(1===s)throw Error("invalid encoding");return n-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function r(){this._listeners={}}e.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},function(e,t,n){"use strict";function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,s),e.readFloatBE=n.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,i,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function n(e,t,n,r,i){var o=e(r,i+t),s=e(r,i+n),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,a,4,0)}(),e}function i(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){"use strict";var r=t;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],s=0;t<n;)(r=e[t++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return e(n);s+n>r&&(o=e(r),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},function(e,t,n){"use strict";e.exports=i;var r=n(5);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=o;var r=n(10);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(5);function o(){r.call(this)}function s(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},function(e,t,n){"use strict";e.exports=o;var r=n(11);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(5);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},function(e,t,n){"use strict";t.Service=n(62)},function(e,t,n){"use strict";e.exports=i;var r=n(5);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";e.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,edgeChromium:!1,samsung:!1,version:{string:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{string:"",major:0,minor:0,patch:0}}}},function(e,t,n){"use strict";e.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(e){return e.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===e.ua}},{name:"edgeChromium",userAgent:"Edge",version:["rv","Edg"],test:function(e){return e.ua.indexOf("Edg")>-1&&-1===e.ua.indexOf("Edge")}},{name:"samsung",userAgent:"SamsungBrowser"},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(e){return e.ua.indexOf("Firefox")>-1&&-1===e.ua.indexOf("Opera")},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(e){return e.ua.indexOf("Safari")>-1&&e.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(e){return e.ua.indexOf("IE")>-1||e.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var e=!1;return document.documentMode&&(e=parseInt(document.documentMode,10)),e}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]}],os:[{name:"windows",test:function(e){return e.ua.indexOf("Windows")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(e){return e.ua.indexOf("Macintosh")>-1}},{name:"ios",test:function(e){return e.ua.indexOf("iPhone")>-1||e.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(e){return(e.ua.indexOf("Linux")>-1||e.platform.indexOf("Linux")>-1)&&-1===e.ua.indexOf("Android")}},{name:"fireos",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android",test:function(e){return e.ua.indexOf("Android")>-1}},{name:"chromeos",userAgent:"CrOS"}]}},function(e,t,n){!function(){var e,n=this;function r(e){return"string"==typeof e}function i(e,t){e=e.split(".");var r,i=n;e[0]in i||!i.execScript||i.execScript("var "+e[0]);for(;e.length&&(r=e.shift());)e.length||void 0===t?i=i[r]&&i[r]!==Object.prototype[r]?i[r]:i[r]={}:i[r]=t}function o(e,t){function n(){}n.prototype=t.prototype,e.ya=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ea=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function s(e,t){null!=e&&this.a.apply(this,arguments)}function a(e){e.b=""}s.prototype.b="",s.prototype.set=function(e){this.b=""+e},s.prototype.a=function(e,t,n){if(this.b+=String(e),null!=t)for(var r=1;r<arguments.length;r++)this.b+=arguments[r];return this},s.prototype.toString=function(){return this.b};var c=Array.prototype.indexOf?function(e,t,n){return Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,r(e))return r(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},l=Array.prototype.filter?function(e,t,n){return Array.prototype.filter.call(e,t,n)}:function(e,t,n){for(var i=e.length,o=[],s=0,a=r(e)?e.split(""):e,c=0;c<i;c++)if(c in a){var l=a[c];t.call(n,l,c,e)&&(o[s++]=l)}return o},d=Array.prototype.map?function(e,t,n){return Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var i=e.length,o=Array(i),s=r(e)?e.split(""):e,a=0;a<i;a++)a in s&&(o[a]=t.call(n,s[a],a,e));return o};function u(e,t){e.sort(t||p)}function p(e,t){return e>t?1:e<t?-1:0}function h(e,t){for(this.b=e,this.a={},e=0;e<t.length;e++){var n=t[e];this.a[n.a]=n}}function f(e,t){switch(this.a=e,this.g=!!t.w,this.b=t.c,this.j=t.type,this.i=!1,this.b){case y:case m:case v:case w:case P:case b:case g:this.i=!0}this.f=t.defaultValue}var g=1,b=2,y=3,m=4,v=6,w=16,P=18;function S(){this.b={},this.f=this.h().a,this.a=this.g=null}function $(e,t){for(var n=function(e){return u(e=function(e){var t,n=[],r=0;for(t in e)n[r++]=e[t];return n}(e.a),(function(e,t){return e.a-t.a})),e}(e.h()),r=0;r<n.length;r++){var i=n[r],o=i.a;if(O(t,o)){e.a&&delete e.a[i.a];var s=11==i.b||10==i.b;if(i.g){i=R(t,o);for(var a=0;a<i.length;a++)D(e,o,s?i[a].clone():i[a])}else i=k(t,o),s?(s=k(e,o))?$(s,i):T(e,o,i.clone()):T(e,o,i)}}}function O(e,t){return null!=e.b[t]}function k(e,t){var n=e.b[t];if(null==n)return null;if(e.g){if(!(t in e.a)){var r=e.g,i=e.f[t];if(null!=n)if(i.g){for(var o=[],s=0;s<n.length;s++)o[s]=r.b(i,n[s]);n=o}else n=r.b(i,n);return e.a[t]=n}return e.a[t]}return n}function I(e,t,n){var r=k(e,t);return e.f[t].g?r[n||0]:r}function C(e,t){if(O(e,t))e=I(e,t,void 0);else e:{if(void 0===(e=e.f[t]).f)if((t=e.j)===Boolean)e.f=!1;else if(t===Number)e.f=0;else{if(t!==String){e=new t;break e}e.f=e.i?"0":""}e=e.f}return e}function R(e,t){return k(e,t)||[]}function M(e,t){return e.f[t].g?O(e,t)?e.b[t].length:0:O(e,t)?1:0}function T(e,t,n){e.b[t]=n,e.a&&(e.a[t]=n)}function D(e,t,n){e.b[t]||(e.b[t]=[]),e.b[t].push(n),e.a&&delete e.a[t]}function E(e,t){var n,r=[];for(n in t)0!=n&&r.push(new f(n,t[n]));return new h(e,r)}function A(){S.call(this)}(e=S.prototype).has=function(e){return O(this,e.a)},e.get=function(e,t){return I(this,e.a,t)},e.set=function(e,t){T(this,e.a,t)},e.add=function(e,t){D(this,e.a,t)},e.clone=function(){var e=new this.constructor;return e!=this&&(e.b={},e.a&&(e.a={}),$(e,this)),e},o(A,S);var j=null;function N(){S.call(this)}o(N,S);var B=null;function _(){S.call(this)}o(_,S);var x=null;function U(){}A.prototype.h=function(){var e=j;return e||(j=e=E(A,{0:{name:"NumberFormat",ga:"i18n.phonenumbers.NumberFormat"},1:{name:"pattern",required:!0,c:9,type:String},2:{name:"format",required:!0,c:9,type:String},3:{name:"leading_digits_pattern",w:!0,c:9,type:String},4:{name:"national_prefix_formatting_rule",c:9,type:String},6:{name:"national_prefix_optional_when_formatting",c:8,defaultValue:!1,type:Boolean},5:{name:"domestic_carrier_code_formatting_rule",c:9,type:String}})),e},A.h=A.prototype.h,N.prototype.h=function(){var e=B;return e||(B=e=E(N,{0:{name:"PhoneNumberDesc",ga:"i18n.phonenumbers.PhoneNumberDesc"},2:{name:"national_number_pattern",c:9,type:String},9:{name:"possible_length",w:!0,c:5,type:Number},10:{name:"possible_length_local_only",w:!0,c:5,type:Number},6:{name:"example_number",c:9,type:String}})),e},N.h=N.prototype.h,_.prototype.h=function(){var e=x;return e||(x=e=E(_,{0:{name:"PhoneMetadata",ga:"i18n.phonenumbers.PhoneMetadata"},1:{name:"general_desc",c:11,type:N},2:{name:"fixed_line",c:11,type:N},3:{name:"mobile",c:11,type:N},4:{name:"toll_free",c:11,type:N},5:{name:"premium_rate",c:11,type:N},6:{name:"shared_cost",c:11,type:N},7:{name:"personal_number",c:11,type:N},8:{name:"voip",c:11,type:N},21:{name:"pager",c:11,type:N},25:{name:"uan",c:11,type:N},27:{name:"emergency",c:11,type:N},28:{name:"voicemail",c:11,type:N},29:{name:"short_code",c:11,type:N},30:{name:"standard_rate",c:11,type:N},31:{name:"carrier_specific",c:11,type:N},33:{name:"sms_services",c:11,type:N},24:{name:"no_international_dialling",c:11,type:N},9:{name:"id",required:!0,c:9,type:String},10:{name:"country_code",c:5,type:Number},11:{name:"international_prefix",c:9,type:String},17:{name:"preferred_international_prefix",c:9,type:String},12:{name:"national_prefix",c:9,type:String},13:{name:"preferred_extn_prefix",c:9,type:String},15:{name:"national_prefix_for_parsing",c:9,type:String},16:{name:"national_prefix_transform_rule",c:9,type:String},18:{name:"same_mobile_and_fixed_line_pattern",c:8,defaultValue:!1,type:Boolean},19:{name:"number_format",w:!0,c:11,type:A},20:{name:"intl_number_format",w:!0,c:11,type:A},22:{name:"main_country_for_code",c:8,defaultValue:!1,type:Boolean},23:{name:"leading_digits",c:9,type:String},26:{name:"leading_zero_possible",c:8,defaultValue:!1,type:Boolean}})),e},_.h=_.prototype.h,U.prototype.a=function(e){throw new e.b,Error("Unimplemented")},U.prototype.b=function(e,t){if(11==e.b||10==e.b)return t instanceof S?t:this.a(e.j.prototype.h(),t);if(14==e.b)return r(t)&&L.test(t)&&0<(e=Number(t))?e:t;if(!e.i)return t;if((e=e.j)===String){if("number"==typeof t)return String(t)}else if(e===Number&&r(t)&&("Infinity"===t||"-Infinity"===t||"NaN"===t||L.test(t)))return Number(t);return t};var L=/^-?[0-9]+$/;function K(){}function q(){}function V(){S.call(this)}o(K,U),K.prototype.a=function(e,t){return(e=new e.b).g=this,e.b=t,e.a={},e},o(q,K),q.prototype.b=function(e,t){return 8==e.b?!!t:U.prototype.b.apply(this,arguments)},q.prototype.a=function(e,t){return q.ya.a.call(this,e,t)},o(V,S);var F=null,G={Da:0,Ca:1,Ba:5,Aa:10,za:20};V.prototype.h=function(){var e=F;return e||(F=e=E(V,{0:{name:"PhoneNumber",ga:"i18n.phonenumbers.PhoneNumber"},1:{name:"country_code",required:!0,c:5,type:Number},2:{name:"national_number",required:!0,c:4,type:Number},3:{name:"extension",c:9,type:String},4:{name:"italian_leading_zero",c:8,type:Boolean},8:{name:"number_of_leading_zeros",c:5,defaultValue:1,type:Number},5:{name:"raw_input",c:9,type:String},6:{name:"country_code_source",c:14,defaultValue:0,type:G},7:{name:"preferred_domestic_carrier_code",c:9,type:String}})),e},V.ctor=V,V.ctor.h=V.prototype.h;var H={1:"US AG AI AS BB BM BS CA DM DO GD GU JM KN KY LC MP MS PR SX TC TT VC VG VI".split(" "),7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],800:["001"],808:["001"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],870:["001"],878:["001"],880:["BD"],881:["001"],882:["001"],883:["001"],886:["TW"],888:["001"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],979:["001"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},W={AC:[,[,,"(?:[01589]\\d|[46])\\d{4}",,,,,,,[5,6]],[,,"6[2-467]\\d{3}",,,,"62889",,,[5]],[,,"4\\d{4}",,,,"40123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AC",247,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:0[1-9]|[1589]\\d)\\d{4}",,,,"542011",,,[6]],,,[,,,,,,,,,[-1]]],AD:[,[,,"(?:1|6\\d)\\d{7}|[135-9]\\d{5}",,,,,,,[6,8,9]],[,,"[78]\\d{5}",,,,"712345",,,[6]],[,,"690\\d{6}|[356]\\d{5}",,,,"312345",,,[6,9]],[,,"180[02]\\d{4}",,,,"18001234",,,[8]],[,,"[19]\\d{5}",,,,"912345",,,[6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AD",376,"00",,,,,,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],[,"(\\d{4})(\\d{4})","$1 $2",["1"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],,[,,,,,,,,,[-1]],,,[,,"1800\\d{4}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AE:[,[,,"(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"[2-4679][2-8]\\d{6}",,,,"22345678",,,[8],[7]],[,,"5[024-68]\\d{7}",,,,"501234567",,,[9]],[,,"400\\d{6}|800\\d{2,9}",,,,"800123456"],[,,"900[02]\\d{5}",,,,"900234567",,,[9]],[,,"700[05]\\d{5}",,,,"700012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AE",971,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],[,"(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"600[25]\\d{5}",,,,"600212345",,,[9]],,,[,,,,,,,,,[-1]]],AF:[,[,,"[2-7]\\d{8}",,,,,,,[9],[7]],[,,"(?:[25][0-8]|[34][0-4]|6[0-5])[2-9]\\d{6}",,,,"234567890",,,,[7]],[,,"7\\d{8}",,,,"701234567",,,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AF",93,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[1-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AG:[,[,,"(?:268|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"268(?:4(?:6[0-38]|84)|56[0-2])\\d{4}",,,,"2684601234",,,,[7]],[,,"268(?:464|7(?:1[3-9]|[28]\\d|3[0246]|64|7[0-689]))\\d{4}",,,,"2684641234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"26848[01]\\d{4}",,,,"2684801234",,,,[7]],"AG",1,"011","1",,,"1|([457]\\d{6})$","268$1",,,,,[,,"26840[69]\\d{4}",,,,"2684061234",,,,[7]],,"268",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AI:[,[,,"(?:264|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"264(?:292|4(?:6[12]|9[78]))\\d{4}",,,,"2644612345",,,,[7]],[,,"264(?:235|4(?:69|76)|5(?:3[6-9]|8[1-4])|7(?:29|72))\\d{4}",,,,"2642351234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"AI",1,"011","1",,,"1|([2457]\\d{6})$","264$1",,,,,[,,"264724\\d{4}",,,,"2647241234",,,,[7]],,"264",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AL:[,[,,"(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",,,,,,,[6,7,8,9],[5]],[,,"4505[0-2]\\d{3}|(?:[2358][16-9]\\d[2-9]|4410)\\d{4}|(?:[2358][2-5][2-9]|4(?:[2-57-9][2-9]|6\\d))\\d{5}",,,,"22345678",,,[8],[5,6,7]],[,,"6(?:[78][2-9]|9\\d)\\d{6}",,,,"672123456",,,[9]],[,,"800\\d{4}",,,,"8001234",,,[7]],[,,"900[1-9]\\d\\d",,,,"900123",,,[6]],[,,"808[1-9]\\d\\d",,,,"808123",,,[6]],[,,"700[2-9]\\d{4}",,,,"70021234",,,[8]],[,,,,,,,,,[-1]],"AL",355,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],[,"(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AM:[,[,,"(?:[1-489]\\d|55|60|77)\\d{6}",,,,,,,[8],[5,6]],[,,"(?:(?:1[0-25]|47)\\d|2(?:2[2-46]|3[1-8]|4[2-69]|5[2-7]|6[1-9]|8[1-7])|3[12]2)\\d{5}",,,,"10123456",,,,[5,6]],[,,"(?:33|4[1349]|55|77|88|9[13-9])\\d{6}",,,,"77123456"],[,,"800\\d{5}",,,,"80012345"],[,,"90[016]\\d{5}",,,,"90012345"],[,,"80[1-4]\\d{5}",,,,"80112345"],[,,,,,,,,,[-1]],[,,"60(?:2[78]|3[5-9]|4[02-9]|5[0-46-9]|[6-8]\\d|90)\\d{4}",,,,"60271234"],"AM",374,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],[,"(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AO:[,[,,"[29]\\d{8}",,,,,,,[9]],[,,"2\\d(?:[0134][25-9]|[25-9]\\d)\\d{5}",,,,"222123456"],[,,"9[1-49]\\d{7}",,,,"923123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AO",244,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AR:[,[,,"(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",,,,,,,[10,11],[6,7,8]],[,,"3888[013-9]\\d{5}|(?:29(?:54|66)|3(?:777|865))[2-8]\\d{5}|3(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|473|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|(?:2(?:284|302|657|920)|3(?:4(?:8[27]|92)|541|755|878))[2-7]\\d{5}|(?:2(?:(?:26|62)2|32[03]|477|9(?:42|83))|3(?:329|4(?:[47]6|62|89)|564))[2-6]\\d{5}|(?:(?:11[1-8]|670)\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-7]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-7]|[235][4-6]|84)|5(?:1[2-8]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:[03][45]|[17][2-6]|[58][3-6])))\\d{6}|2(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|475|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|(?:2(?:2(?:57|81)|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|71)|5(?:25|37|4[347]|71)|7(?:18|5[17])))[3-6]\\d{5}|(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[03-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[145]|4[13]|5[468]|7[2-5]|8[26])|8(?:2[5-7]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",,,,"1123456789",,,[10],[6,7,8]],[,,"93888[013-9]\\d{5}|9(?:29(?:54|66)|3(?:777|865))[2-8]\\d{5}|93(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|9(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|473|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|9(?:2(?:284|302|657|920)|3(?:4(?:8[27]|92)|541|755|878))[2-7]\\d{5}|9(?:2(?:(?:26|62)2|32[03]|477|9(?:42|83))|3(?:329|4(?:[47]6|62|89)|564))[2-6]\\d{5}|(?:675\\d|9(?:11[1-8]\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-7]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-7]|[235][4-6]|84)|5(?:1[2-8]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:[03][45]|[17][2-6]|[58][3-6]))))\\d{6}|92(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|475|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|9(?:2(?:2(?:57|81)|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|71)|5(?:25|37|4[347]|71)|7(?:18|5[17])))[3-6]\\d{5}|9(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[03-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[145]|4[13]|5[468]|7[2-5]|8[26])|8(?:2[5-7]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",,,,"91123456789",,,,[6,7,8]],[,,"800\\d{7,8}",,,,"8001234567"],[,,"60[04579]\\d{7}",,,,"6001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AR",54,"00","0",,,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1",,,[[,"(\\d{3})","$1",["0|1(?:0[0-35-7]|1[02-5]|2[015]|3[47]|4[478])|911"]],[,"(\\d{2})(\\d{4})","$1-$2",["[1-9]"]],[,"(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],[,"(\\d{4})(\\d{4})","$1-$2",["[1-8]"]],[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",,1],[,"(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1"],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1"]],[[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",,1],[,"(\\d)(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"]],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3-$4",["91"]],[,"(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3-$4",["9"]]],[,,,,,,,,,[-1]],,,[,,"810\\d{7}",,,,,,,[10]],[,,"810\\d{7}",,,,"8101234567",,,[10]],,,[,,,,,,,,,[-1]]],AS:[,[,,"(?:[58]\\d\\d|684|900)\\d{7}",,,,,,,[10],[7]],[,,"6846(?:22|33|44|55|77|88|9[19])\\d{4}",,,,"6846221234",,,,[7]],[,,"684(?:2(?:48|5[2468]|72)|7(?:3[13]|70|82))\\d{4}",,,,"6847331234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"AS",1,"011","1",,,"1|([267]\\d{6})$","684$1",,,,,[,,,,,,,,,[-1]],,"684",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AT:[,[,,"1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",,,,,,,[4,5,6,7,8,9,10,11,12,13],[3]],[,,"1(?:11\\d|[2-9]\\d{3,11})|(?:316|463|(?:51|66|73)2)\\d{3,10}|(?:2(?:1[467]|2[13-8]|5[2357]|6[1-46-8]|7[1-8]|8[124-7]|9[1458])|3(?:1[1-578]|3[23568]|4[5-7]|5[1378]|6[1-38]|8[3-68])|4(?:2[1-8]|35|7[1368]|8[2457])|5(?:2[1-8]|3[357]|4[147]|5[12578]|6[37])|6(?:13|2[1-47]|4[135-8]|5[468])|7(?:2[1-8]|35|4[13478]|5[68]|6[16-8]|7[1-6]|9[45]))\\d{4,10}",,,,"1234567890",,,,[3]],[,,"6(?:5[0-3579]|6[013-9]|[7-9]\\d)\\d{4,10}",,,,"664123456",,,[7,8,9,10,11,12,13]],[,,"800\\d{6,10}",,,,"800123456",,,[9,10,11,12,13]],[,,"9(?:0[01]|3[019])\\d{6,10}",,,,"900123456",,,[9,10,11,12,13]],[,,"8(?:10|2[018])\\d{6,10}|828\\d{5}",,,,"810123456",,,[8,9,10,11,12,13]],[,,,,,,,,,[-1]],[,,"5(?:0[1-9]|17|[79]\\d)\\d{2,10}|7[28]0\\d{6,10}",,,,"780123456",,,[5,6,7,8,9,10,11,12,13]],"AT",43,"00","0",,,"0",,,,[[,"(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],[,"(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],[,"(\\d{6})","$1",["1"]],[,"(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],[,"(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],[[,"(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],[,"(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],[,"(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],[,"(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AU:[,[,,"1(?:[0-79]\\d{7,8}|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",,,,,,,[5,6,7,8,9,10]],[,,"(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8]))\\d{3}|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4]))|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",,,,"212345678",,,[9],[8]],[,,"4(?:83[0-38]|93[0-4])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",,,,"1300123456",,,[6,8,10]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"AU",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"0|(183[12])",,"0011",,[[,"(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["13"]],[,"(\\d{3})(\\d{3})","$1 $2",["19"]],[,"(\\d{3})(\\d{4})","$1 $2",["180","1802"]],[,"(\\d{4})(\\d{3,4})","$1 $2",["19"]],[,"(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)","$CC ($1)"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],[[,"(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)","$CC ($1)"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],[,,"163\\d{2,6}",,,,"1631234",,,[5,6,7,8,9]],1,,[,,"1[38]00\\d{6}|1(?:345[0-4]|802)\\d{3}|13\\d{4}",,,,,,,[6,7,8,10]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AW:[,[,,"(?:[25-79]\\d\\d|800)\\d{4}",,,,,,,[7]],[,,"5(?:2\\d|8[1-9])\\d{4}",,,,"5212345"],[,,"(?:290|5[69]\\d|6(?:[03]0|22|4[0-2]|[69]\\d)|7(?:[34]\\d|7[07])|9(?:6[45]|9[4-8]))\\d{4}",,,,"5601234"],[,,"800\\d{4}",,,,"8001234"],[,,"900\\d{4}",,,,"9001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:28\\d|501)\\d{4}",,,,"5011234"],"AW",297,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AX:[,[,,"2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"18[1-8]\\d{3,6}",,,,"181234567",,,[6,7,8,9]],[,,"4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}",,,,"412345678",,,[6,7,8,9,10]],[,,"800\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"[67]00\\d{5,6}",,,,"600123456",,,[8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AX",358,"00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","0",,,"0",,"00",,,,[,,,,,,,,,[-1]],,"18",[,,,,,,,,,[-1]],[,,"20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}",,,,"10112345"],,,[,,,,,,,,,[-1]]],AZ:[,[,,"365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",,,,,,,[9],[7]],[,,"(?:222[0-79]\\d|365(?:[0-46-9]\\d|5[0-35-9]))\\d{4}|(?:(?:1[28]|46)\\d|2(?:[045]2|1[24]|2[34]|33|6[23]))\\d{6}",,,,"123123456",,,,[7]],[,,"(?:36554|99[2-9]\\d\\d)\\d{4}|(?:[16]0|4[04]|5[015]|7[07])\\d{7}",,,,"401234567"],[,,"88\\d{7}",,,,"881234567"],[,,"900200\\d{3}",,,,"900200123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AZ",994,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[1-9]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365|46","1[28]|2|365(?:[0-46-9]|5[0-35-9])|46"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365|46","1[28]|2|365(?:[0-46-9]|5[0-35-9])|46"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BA:[,[,,"6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",,,,,,,[8,9],[6]],[,,"(?:3(?:[05-79][2-9]|1[4579]|[23][24-9]|4[2-4689]|8[2457-9])|49[2-579]|5(?:0[2-49]|[13][2-9]|[268][2-4679]|4[4689]|5[2-79]|7[2-69]|9[2-4689]))\\d{5}",,,,"30212345",,,[8],[6]],[,,"6040\\d{5}|6(?:03|[1-356]|44|7\\d)\\d{6}",,,,"61123456"],[,,"8[08]\\d{6}",,,,"80123456",,,[8]],[,,"9[0246]\\d{6}",,,,"90123456",,,[8]],[,,"8[12]\\d{6}",,,,"82123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BA",387,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})","$1-$2",["[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"703[235]0\\d{3}|70(?:2[0-5]|3[0146]|[56]0)\\d{4}",,,,"70341234",,,[8]],,,[,,,,,,,,,[-1]]],BB:[,[,,"(?:246|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"246(?:2(?:2[78]|7[0-4])|4(?:1[024-6]|2\\d|3[2-9])|5(?:20|[34]\\d|54|7[1-3])|6(?:2\\d|38)|7[35]7|9(?:1[89]|63))\\d{4}",,,,"2464123456",,,,[7]],[,,"246(?:2(?:[3568]\\d|4[0-57-9])|45\\d|69[5-7]|8(?:[2-5]\\d|83))\\d{4}",,,,"2462501234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"(?:246976|900[2-9]\\d\\d)\\d{4}",,,,"9002123456",,,,[7]],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"24631\\d{5}",,,,"2463101234",,,,[7]],"BB",1,"011","1",,,"1|([2-9]\\d{6})$","246$1",,,,,[,,,,,,,,,[-1]],,"246",[,,,,,,,,,[-1]],[,,"246(?:292|367|4(?:1[7-9]|3[01]|44|67)|7(?:36|53))\\d{4}",,,,"2464301234",,,,[7]],,,[,,,,,,,,,[-1]]],BD:[,[,,"1\\d{9}|2\\d{7,8}|88\\d{4,6}|(?:8[0-79]|9\\d)\\d{4,8}|(?:[346]\\d|[57])\\d{5,8}",,,,,,,[6,7,8,9,10]],[,,"(?:4(?:31\\d\\d|423)|5222)\\d{3}(?:\\d{2})?|8332[6-9]\\d\\d|(?:3(?:03[56]|224)|4(?:22[25]|653))\\d{3,4}|(?:3(?:42[47]|529|823)|4(?:027|525|65(?:28|8))|562|6257|7(?:1(?:5[3-5]|6[12]|7[156]|89)|22[589]56|32|42675|52(?:[25689](?:56|8)|[347]8)|71(?:6[1267]|75|89)|92374)|82(?:2[59]|32)56|9(?:03[23]56|23(?:256|373)|31|5(?:1|2[4589]56)))\\d{3}|(?:3(?:02[348]|22[35]|324|422)|4(?:22[67]|32[236-9]|6(?:2[46]|5[57])|953)|5526|6(?:024|6655)|81)\\d{4,5}|(?:2(?:7(?:1[0-267]|2[0-289]|3[0-29]|4[01]|5[1-3]|6[013]|7[0178]|91)|8(?:0[125]|1[1-6]|2[0157-9]|3[1-69]|41|6[1-35]|7[1-5]|8[1-8]|9[0-6])|9(?:0[0-2]|1[0-4]|2[568]|3[3-6]|5[5-7]|6[0136-9]|7[0-7]|8[014-9]))|3(?:0(?:2[025-79]|3[2-4])|181|22[12]|32[2356]|824)|4(?:02[09]|22[348]|32[045]|523|6(?:27|54))|666(?:22|53)|7(?:22[57-9]|42[56]|82[35])8|8(?:0[124-9]|2(?:181|2[02-4679]8)|4[12]|[5-7]2)|9(?:[04]2|2(?:2|328)|81))\\d{4}|(?:2[45]\\d\\d|3(?:1(?:2[5-7]|[5-7])|425|822)|4(?:033|1\\d|[257]1|332|4(?:2[246]|5[25])|6(?:2[35]|56|62)|8(?:23|54)|92[2-5])|5(?:02[03489]|22[457]|32[35-79]|42[46]|6(?:[18]|53)|724|826)|6(?:023|2(?:2[2-5]|5[3-5]|8)|32[3478]|42[34]|52[47]|6(?:[18]|6(?:2[34]|5[24]))|[78]2[2-5]|92[2-6])|7(?:02|21\\d|[3-589]1|6[12]|72[24])|8(?:217|3[12]|[5-7]1)|9[24]1)\\d{5}|(?:(?:3[2-8]|5[2-57-9]|6[03-589])1|4[4689][18])\\d{5}|[59]1\\d{5}",,,,"27111234"],[,,"(?:1[13-9]\\d|644)\\d{7}|(?:3[78]|44|66)[02-9]\\d{7}",,,,"1812345678",,,[10]],[,,"80[03]\\d{7}",,,,"8001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"96(?:0[469]|1[0-47]|3[389]|6[69]|7[78])\\d{6}",,,,"9604123456",,,[10]],"BD",880,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],[,"(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:28|4[14]|5)|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],[,"(\\d{4})(\\d{3,6})","$1-$2",["[13-9]"],"0$1"],[,"(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BE:[,[,,"4\\d{8}|[1-9]\\d{7}",,,,,,,[8,9]],[,,"80[2-8]\\d{5}|(?:1[0-69]|[23][2-8]|4[23]|5\\d|6[013-57-9]|71|8[1-79]|9[2-4])\\d{6}",,,,"12345678",,,[8]],[,,"4[5-9]\\d{7}",,,,"470123456",,,[9]],[,,"800[1-9]\\d{4}",,,,"80012345",,,[8]],[,,"(?:70(?:2[0-57]|3[0457]|44|69|7[0579])|90(?:0[0-35-8]|1[36]|2[0-3568]|3[0135689]|4[2-68]|5[1-68]|6[0-378]|7[23568]|9[34679]))\\d{4}",,,,"90012345",,,[8]],[,,"7879\\d{4}",,,,"78791234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BE",32,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"78(?:0[57]|1[0458]|2[25]|3[15-8]|48|[56]0|7[078])\\d{4}",,,,"78102345",,,[8]],,,[,,,,,,,,,[-1]]],BF:[,[,,"[025-7]\\d{7}",,,,,,,[8]],[,,"2(?:0(?:49|5[23]|6[56]|9[016-9])|4(?:4[569]|5[4-6]|6[56]|7[0179])|5(?:[34]\\d|50|6[5-7]))\\d{4}",,,,"20491234"],[,,"(?:0[1267]|5[1-8]|[67]\\d)\\d{6}",,,,"70123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BF",226,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BG:[,[,,"[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",,,,,,,[6,7,8,9],[4,5]],[,,"2\\d{5,7}|(?:43[1-6]|70[1-9])\\d{4,5}|(?:[36]\\d|4[124-7]|[57][1-9]|8[1-6]|9[1-7])\\d{5,6}",,,,"2123456",,,[6,7,8],[4,5]],[,,"43[07-9]\\d{5}|(?:48|8[7-9]\\d|9(?:8\\d|9[69]))\\d{6}",,,,"48123456",,,[8,9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"90\\d{6}",,,,"90123456",,,[8]],[,,"700\\d{5}",,,,"70012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BG",359,"00","0",,,"0",,,,[[,"(\\d{6})","$1",["1"]],[,"(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],[[,"(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BH:[,[,,"[136-9]\\d{7}",,,,,,,[8]],[,,"(?:1(?:3[1356]|6[0156]|7\\d)\\d|6(?:1[16]\\d|500|6(?:0\\d|3[12]|44|7[7-9]|88)|9[69][69])|7(?:1(?:11|78)|7\\d\\d))\\d{4}",,,,"17001234"],[,,"(?:3(?:[1-79]\\d|8[0-47-9])\\d|6(?:3(?:00|33|6[16])|6(?:3[03-9]|[69]\\d|7[0-6])))\\d{4}",,,,"36001234"],[,,"80\\d{6}",,,,"80123456"],[,,"(?:87|9[014578])\\d{6}",,,,"90123456"],[,,"84\\d{6}",,,,"84123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BH",973,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[13679]|8[047]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BI:[,[,,"(?:[267]\\d|31)\\d{6}",,,,,,,[8]],[,,"22\\d{6}",,,,"22201234"],[,,"(?:29|31|6[1289]|7[125-9])\\d{6}",,,,"79561234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BI",257,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BJ:[,[,,"[25689]\\d{7}",,,,,,,[8]],[,,"2(?:02|1[037]|2[45]|3[68])\\d{5}",,,,"20211234"],[,,"(?:5[1-35-8]|6\\d|9[013-9])\\d{6}",,,,"90011234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"857[58]\\d{4}",,,,"85751234"],"BJ",229,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[25689]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"81\\d{6}",,,,"81123456"],,,[,,,,,,,,,[-1]]],BL:[,[,,"(?:590|(?:69|80)\\d|976)\\d{6}",,,,,,,[9]],[,,"590(?:2[7-9]|5[12]|87)\\d{4}",,,,"590271234"],[,,"69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}",,,,"690001234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976[01]\\d{5}",,,,"976012345"],"BL",590,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BM:[,[,,"(?:441|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"441(?:[46]\\d\\d|5(?:4\\d|60|89))\\d{4}",,,,"4414123456",,,,[7]],[,,"441(?:[2378]\\d|5[0-39])\\d{5}",,,,"4413701234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"BM",1,"011","1",,,"1|([2-8]\\d{6})$","441$1",,,,,[,,,,,,,,,[-1]],,"441",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BN:[,[,,"[2-578]\\d{6}",,,,,,,[7]],[,,"22[0-7]\\d{4}|(?:2[013-9]|[34]\\d|5[0-25-9])\\d{5}",,,,"2345678"],[,,"(?:22[89]|[78]\\d\\d)\\d{4}",,,,"7123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[34]\\d{5}",,,,"5345678"],"BN",673,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BO:[,[,,"(?:[2-467]\\d\\d|8001)\\d{5}",,,,,,,[8,9],[7]],[,,"(?:2(?:2\\d\\d|5(?:11|[258]\\d|9[67])|6(?:12|2\\d|9[34])|8(?:2[34]|39|62))|3(?:3\\d\\d|4(?:6\\d|8[24])|8(?:25|42|5[257]|86|9[25])|9(?:[27]\\d|3[2-4]|4[248]|5[24]|6[2-6]))|4(?:4\\d\\d|6(?:11|[24689]\\d|72)))\\d{4}",,,,"22123456",,,[8],[7]],[,,"[67]\\d{7}",,,,"71234567",,,[8]],[,,"8001[07]\\d{4}",,,,"800171234",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BO",591,"00(?:1\\d)?","0",,,"0(1\\d)?",,,,[[,"(\\d)(\\d{7})","$1 $2",["[23]|4[46]"],,"0$CC $1"],[,"(\\d{8})","$1",["[67]"],,"0$CC $1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"],,"0$CC $1"]],,[,,,,,,,,,[-1]],,,[,,"8001[07]\\d{4}",,,,,,,[9]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BQ:[,[,,"(?:[34]1|7\\d)\\d{5}",,,,,,,[7]],[,,"(?:318[023]|41(?:6[023]|70)|7(?:1[578]|2[05]|50)\\d)\\d{3}",,,,"7151234"],[,,"(?:31(?:8[14-8]|9[14578])|416[14-9]|7(?:0[01]|7[07]|8\\d|9[056])\\d)\\d{3}",,,,"3181234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BQ",599,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"[347]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BR:[,[,,"(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-24679]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",,,,,,,[8,9,10,11]],[,,"(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-5]\\d{7}",,,,"1123456789",,,[10],[8]],[,,"(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])(?:7|9\\d)\\d{7}",,,,"11961234567",,,[10,11],[8,9]],[,,"800\\d{6,7}",,,,"800123456",,,[9,10]],[,,"300\\d{6}|[59]00\\d{6,7}",,,,"300123456",,,[9,10]],[,,"300\\d{7}|[34]00\\d{5}|4(?:02|37)0\\d{4}",,,,"40041234",,,[8,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BR",55,"00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","0",,,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2",,,[[,"(\\d{3,6})","$1",["1(?:1[25-8]|2[357-9]|3[02-68]|4[12568]|5|6[0-8]|8[015]|9[0-47-9])|321|610"]],[,"(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],[,"(\\d{4})(\\d{4})","$1-$2",["[2-57]","[2357]|4(?:[0-24-9]|3(?:[0-689]|7[1-9]))"]],[,"(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],[,"(\\d{5})(\\d{4})","$1-$2",["9"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)","0 $CC ($1)"],[,"(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)","0 $CC ($1)"]],[[,"(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],[,"(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)","0 $CC ($1)"],[,"(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)","0 $CC ($1)"]],[,,,,,,,,,[-1]],,,[,,"4020\\d{4}|[34]00\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BS:[,[,,"(?:242|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"242(?:3(?:02|[236][1-9]|4[0-24-9]|5[0-68]|7[347]|8[0-4]|9[2-467])|461|502|6(?:0[1-4]|12|2[013]|[45]0|7[67]|8[78]|9[89])|7(?:02|88))\\d{4}",,,,"2423456789",,,,[7]],[,,"242(?:3(?:5[79]|7[56]|95)|4(?:[23][1-9]|4[1-35-9]|5[1-8]|6[2-8]|7\\d|81)|5(?:2[45]|3[35]|44|5[1-46-9]|65|77)|6[34]6|7(?:27|38)|8(?:0[1-9]|1[02-9]|2\\d|[89]9))\\d{4}",,,,"2423591234",,,,[7]],[,,"242300\\d{4}|8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456",,,,[7]],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"BS",1,"011","1",,,"1|([3-8]\\d{6})$","242$1",,,,,[,,,,,,,,,[-1]],,"242",[,,,,,,,,,[-1]],[,,"242225\\d{4}",,,,"2422250123"],,,[,,,,,,,,,[-1]]],BT:[,[,,"[17]\\d{7}|[2-8]\\d{6}",,,,,,,[7,8],[6]],[,,"(?:2[3-6]|[34][5-7]|5[236]|6[2-46]|7[246]|8[2-4])\\d{5}",,,,"2345678",,,[7],[6]],[,,"(?:1[67]|77)\\d{6}",,,,"17123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BT",975,"00",,,,,,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[2-7]"]],[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]],[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BW:[,[,,"(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",,,,,,,[7,8,10]],[,,"(?:2(?:4[0-48]|6[0-24]|9[0578])|3(?:1[0-35-9]|55|[69]\\d|7[013])|4(?:6[03]|7[1267]|9[0-5])|5(?:3[03489]|4[0489]|7[1-47]|88|9[0-49])|6(?:2[1-35]|5[149]|8[067]))\\d{4}",,,,"2401234",,,[7]],[,,"77200\\d{3}|(?:321|7(?:[1-6]\\d|7[013-9]|8[01]))\\d{5}",,,,"71123456",,,[8]],[,,"(?:0800|800\\d)\\d{6}",,,,"0800012345",,,[10]],[,,"90\\d{5}",,,,"9012345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"79(?:1(?:[01]\\d|20)|2[0-2]\\d)\\d{3}",,,,"79101234",,,[8]],"BW",267,"00",,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["90"]],[,"(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-79]"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BY:[,[,,"(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",,,,,,,[6,7,8,9,10,11],[5]],[,,"(?:1(?:5(?:1[1-5]|[24]\\d|6[2-4]|9[1-7])|6(?:[235]\\d|4[1-7])|7\\d\\d)|2(?:1(?:[246]\\d|3[0-35-9]|5[1-9])|2(?:[235]\\d|4[0-8])|3(?:[26]\\d|3[02-79]|4[024-7]|5[03-7])))\\d{5}",,,,"152450911",,,[9],[5,6,7]],[,,"(?:2(?:5[5-79]|9[1-9])|(?:33|44)\\d)\\d{6}",,,,"294911911",,,[9]],[,,"800\\d{3,7}|8(?:0[13]|20\\d)\\d{7}",,,,"8011234567"],[,,"(?:810|902)\\d{7}",,,,"9021234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"249\\d{6}",,,,"249123456",,,[9]],"BY",375,"810","8",,,"0|80?",,"8~10",,[[,"(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],[,"(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],[,"(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,"800\\d{3,7}|(?:8(?:0[13]|10|20\\d)|902)\\d{7}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BZ:[,[,,"(?:0800\\d|[2-8])\\d{6}",,,,,,,[7,11]],[,,"(?:2(?:[02]\\d|36|[68]0)|[3-58](?:[02]\\d|[68]0)|7(?:[02]\\d|32|[68]0))\\d{4}",,,,"2221234",,,[7]],[,,"6[0-35-7]\\d{5}",,,,"6221234",,,[7]],[,,"0800\\d{7}",,,,"08001234123",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BZ",501,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],[,"(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CA:[,[,,"(?:[2-8]\\d|90)\\d{8}",,,,,,,[10],[7]],[,,"(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|6[578])|4(?:03|1[68]|3[178]|50|74)|5(?:06|1[49]|48|79|8[17])|6(?:04|13|39|47|72)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",,,,"5062345678",,,,[7]],[,,"(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|6[578])|4(?:03|1[68]|3[178]|50|74)|5(?:06|1[49]|48|79|8[17])|6(?:04|13|39|47|72)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",,,,"5062345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[12]|33|44|66|77|88)|622)[2-9]\\d{6}",,,,"5002345678"],[,,"600[2-9]\\d{6}",,,,"6002012345"],"CA",1,"011","1",,,"1",,,1,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CC:[,[,,"1(?:[0-79]\\d|8[0-24-9])\\d{7}|[148]\\d{8}|1\\d{5,7}",,,,,,,[6,7,8,9,10]],[,,"8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",,,,"891621234",,,[9],[8]],[,,"4(?:83[0-38]|93[0-4])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",,,,"1300123456",,,[6,8,10]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"CC",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"0|([59]\\d{7})$","8$1","0011",,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CD:[,[,,"[189]\\d{8}|[1-68]\\d{6}",,,,,,,[7,9]],[,,"12\\d{7}|[1-6]\\d{6}",,,,"1234567"],[,,"88\\d{5}|(?:8[0-59]|9[017-9])\\d{7}",,,,"991234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CD",243,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],[,"(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CF:[,[,,"(?:[27]\\d{3}|8776)\\d{4}",,,,,,,[8]],[,,"2[12]\\d{6}",,,,"21612345"],[,,"7[0257]\\d{6}",,,,"70012345"],[,,,,,,,,,[-1]],[,,"8776\\d{4}",,,,"87761234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CF",236,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CG:[,[,,"222\\d{6}|(?:0\\d|80)\\d{7}",,,,,,,[9]],[,,"222[1-589]\\d{5}",,,,"222123456"],[,,"026(?:1[0-5]|6[6-9])\\d{4}|0(?:[14-6]\\d\\d|2(?:40|5[5-8]|6[07-9]))\\d{5}",,,,"061234567"],[,,,,,,,,,[-1]],[,,"80(?:0\\d\\d|11[0-4])\\d{4}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CG",242,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["801"]],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CH:[,[,,"8\\d{11}|[2-9]\\d{8}",,,,,,,[9,12]],[,,"(?:2[12467]|3[1-4]|4[134]|5[256]|6[12]|[7-9]1)\\d{7}",,,,"212345678",,,[9]],[,,"7[35-9]\\d{7}",,,,"781234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"90[016]\\d{6}",,,,"900123456",,,[9]],[,,"84[0248]\\d{6}",,,,"840123456",,,[9]],[,,"878\\d{6}",,,,"878123456",,,[9]],[,,,,,,,,,[-1]],"CH",41,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],,[,,"74[0248]\\d{6}",,,,"740123456",,,[9]],,,[,,,,,,,,,[-1]],[,,"5[18]\\d{7}",,,,"581234567",,,[9]],,,[,,"860\\d{9}",,,,"860123456789",,,[12]]],CI:[,[,,"[02]\\d{9}",,,,,,,[10]],[,,"2(?:[15]\\d{3}|7(?:2(?:0[23]|1[2357]|[23][45]|4[3-5])|3(?:06|1[69]|[2-6]7)))\\d{5}",,,,"2123456789"],[,,"0(?:[15]\\d\\d|7(?:[04-8][7-9]|9[78]))\\d{6}",,,,"0123456789"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CI",225,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CK:[,[,,"[2-578]\\d{4}",,,,,,,[5]],[,,"(?:2\\d|3[13-7]|4[1-5])\\d{3}",,,,"21234"],[,,"[578]\\d{4}",,,,"71234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CK",682,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CL:[,[,,"12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",,,,,,,[9,10,11]],[,,"2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|3(?:2\\d\\d|3(?:[034]\\d|1[0-35-9]|2[1-9]|5[0-2])|600))|80[1-9]\\d\\d|9(?:3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|7[1-9]\\d\\d|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}|(?:22|3[2-5]|[47][1-35]|5[1-3578]|6[13-57]|8[1-9]|9[2458])\\d{7}",,,,"221234567",,,[9]],[,,"2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|3(?:2\\d\\d|3(?:[034]\\d|1[0-35-9]|2[1-9]|5[0-2])|600))|80[1-9]\\d\\d|9(?:3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|7[1-9]\\d\\d|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}|(?:22|3[2-5]|[47][1-35]|5[1-3578]|6[13-57]|8[1-9]|9[2458])\\d{7}",,,,"221234567",,,[9]],[,,"(?:123|8)00\\d{6}",,,,"800123456",,,[9,11]],[,,,,,,,,,[-1]],[,,"600\\d{7,8}",,,,"6001234567",,,[10,11]],[,,,,,,,,,[-1]],[,,"44\\d{7}",,,,"441234567",,,[9]],"CL",56,"(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0",,,,,,,1,[[,"(\\d{4})","$1",["1(?:[03-589]|21)|[29]0|78"]],[,"(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-3]"],"($1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]],[[,"(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-3]"],"($1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]],[,,,,,,,,,[-1]],,,[,,"600\\d{7,8}",,,,,,,[10,11]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CM:[,[,,"[26]\\d{8}|88\\d{6,7}",,,,,,,[8,9]],[,,"2(?:22|33)\\d{6}",,,,"222123456",,,[9]],[,,"(?:24[23]|6[5-9]\\d)\\d{6}",,,,"671234567",,,[9]],[,,"88\\d{6,7}",,,,"88012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CM",237,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CN:[,[,,"1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",,,,,,,[7,8,9,10,11,12],[5,6]],[,,"(?:10(?:[02-79]\\d\\d|[18](?:0[1-9]|[1-9]\\d))|21(?:[18](?:0[1-9]|[1-9]\\d)|[2-79]\\d\\d))\\d{5}|(?:43[35]|754)\\d{7,8}|8(?:078\\d{7}|51\\d{7,8})|(?:10|(?:2|85)1|43[35]|754)(?:100\\d\\d|95\\d{3,4})|(?:2[02-57-9]|3(?:11|7[179])|4(?:[15]1|3[12])|5(?:1\\d|2[37]|3[12]|51|7[13-79]|9[15])|7(?:[39]1|5[57]|6[09])|8(?:71|98))(?:[02-8]\\d{7}|1(?:0(?:0\\d\\d(?:\\d{3})?|[1-9]\\d{5})|[1-9]\\d{6})|9(?:[0-46-9]\\d{6}|5\\d{3}(?:\\d(?:\\d{2})?)?))|(?:3(?:1[02-9]|35|49|5\\d|7[02-68]|9[1-68])|4(?:1[02-9]|2[179]|3[46-9]|5[2-9]|6[47-9]|7\\d|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[17]\\d|2[248]|3[04-9]|4[3-6]|5[0-3689]|6[2368]|9[02-9])|8(?:1[236-8]|2[5-7]|3\\d|5[2-9]|7[02-9]|8[36-8]|9[1-7])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[02-8]\\d{6}|1(?:0(?:0\\d\\d(?:\\d{2})?|[1-9]\\d{4})|[1-9]\\d{5})|9(?:[0-46-9]\\d{5}|5\\d{3,5}))",,,,"1012345678",,,[7,8,9,10,11],[5,6]],[,,"1740[0-5]\\d{6}|1(?:[38]\\d|4[57]|5[0-35-9]|6[25-7]|7[0-35-8]|9[0135-9])\\d{8}",,,,"13123456789",,,[11]],[,,"(?:(?:10|21)8|8)00\\d{7}",,,,"8001234567",,,[10,12]],[,,"16[08]\\d{5}",,,,"16812345",,,[8]],[,,"400\\d{7}|950\\d{7,8}|(?:10|2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))96\\d{3,4}",,,,"4001234567",,,[7,8,9,10,11],[5,6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CN",86,"00|1(?:[12]\\d|79)\\d\\d00","0",,,"0|(1(?:[12]\\d|79)\\d\\d)",,"00",,[[,"(\\d{5,6})","$1",["96"]],[,"(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{4})","$1 $2",["[1-9]","1[1-9]|26|[3-9]|(?:10|2[0-57-9])(?:[0-8]|9[0-47-9])","1[1-9]|26|[3-9]|(?:10|2[0-57-9])(?:[02-8]|1(?:0[1-9]|[1-9])|9[0-47-9])"]],[,"(\\d{4})(\\d{4})","$1 $2",["16[08]"]],[,"(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{4})(\\d{4})","$1 $2",["[1-9]","1[1-9]|26|[3-9]|(?:10|2[0-57-9])(?:[0-8]|9[0-47-9])","26|3(?:[0268]|9[079])|4(?:[049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(?:0|2[0-24-689]|4[0-2457-9]|6[057-9]|90)|6(?:[0-24578]|6[14-79]|9[03-9])|7(?:0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8(?:[046]|1[01459]|2[0-489]|50|8[0-2459]|9[09])|9(?:0[0457]|1[08]|[268]|4[024-9])|(?:34|85[23])[0-8]|(?:1|58)[1-9]|(?:63|95)[06-9]|(?:33|85[23]9)[0-46-9]|(?:10|2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[0-8]|9[0-47-9])","26|3(?:[0268]|3[0-46-9]|4[0-8]|9[079])|4(?:[049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(?:0|2[0-24-689]|4[0-2457-9]|6[057-9]|90)|6(?:[0-24578]|3[06-9]|6[14-79]|9[03-9])|7(?:0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8(?:[046]|1[01459]|2[0-489]|5(?:0|[23](?:[02-8]|1[1-9]|9[0-46-9]))|8[0-2459]|9[09])|9(?:0[0457]|1[08]|[268]|4[024-9]|5[06-9])|(?:1|58|85[23]10)[1-9]|(?:10|2[0-57-9])(?:[0-8]|9[0-47-9])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[02-8]|1(?:0[1-9]|[1-9])|9[0-47-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{7,8})","$1 $2",["9"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"],,"$CC $1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",,1]],[[,"(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{7,8})","$1 $2",["9"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"],,"$CC $1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",,1]],[,,,,,,,,,[-1]],,,[,,"(?:(?:10|21)8|[48])00\\d{7}|950\\d{7,8}",,,,,,,[10,11,12]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CO:[,[,,"(?:1\\d|3)\\d{9}|[124-8]\\d{7}",,,,,,,[8,10,11],[7]],[,,"[124-8][2-9]\\d{6}",,,,"12345678",,,[8],[7]],[,,"3333(?:0(?:0\\d|1[0-5])|[4-9]\\d\\d)\\d{3}|3(?:24[2-6]|3(?:00|3[0-24-9]))\\d{6}|3(?:0[0-5]|1\\d|2[0-3]|5[01]|70)\\d{7}",,,,"3211234567",,,[10]],[,,"1800\\d{7}",,,,"18001234567",,,[11]],[,,"19(?:0[01]|4[78])\\d{7}",,,,"19001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CO",57,"00(?:4(?:[14]4|56)|[579])","0",,,"0([3579]|4(?:[14]4|56))?",,,,[[,"(\\d)(\\d{7})","$1 $2",["[14][2-9]|[25-8]"],"($1)","0$CC $1"],[,"(\\d{3})(\\d{7})","$1 $2",["3"],,"0$CC $1"],[,"(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1"]],[[,"(\\d)(\\d{7})","$1 $2",["[14][2-9]|[25-8]"],"($1)","0$CC $1"],[,"(\\d{3})(\\d{7})","$1 $2",["3"],,"0$CC $1"],[,"(\\d)(\\d{3})(\\d{7})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CR:[,[,,"(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",,,,,,,[8,10]],[,,"210[7-9]\\d{4}|2(?:[024-7]\\d|1[1-9])\\d{5}",,,,"22123456",,,[8]],[,,"(?:3005\\d|6500[01])\\d{3}|(?:5[07]|6[0-4]|7[0-3]|8[3-9])\\d{6}",,,,"83123456",,,[8]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"90[059]\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:210[0-6]|4\\d{3}|5100)\\d{4}",,,,"40001234",,,[8]],"CR",506,"00",,,,"(19(?:0[0-2468]|1[09]|20|66|77|99))",,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CU:[,[,,"[27]\\d{6,7}|[34]\\d{5,7}|(?:5|8\\d\\d)\\d{7}",,,,,,,[6,7,8,10],[4,5]],[,,"(?:3[23]|48)\\d{4,6}|(?:31|4[36]|8(?:0[25]|78)\\d)\\d{6}|(?:2[1-4]|4[1257]|7\\d)\\d{5,6}",,,,"71234567",,,,[4,5]],[,,"5\\d{7}",,,,"51234567",,,[8]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,,,,,,,,[-1]],[,,"807\\d{7}",,,,"8071234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CU",53,"119","0",,,"0",,,,[[,"(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],[,"(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],[,"(\\d)(\\d{7})","$1 $2",["5"],"0$1"],[,"(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CV:[,[,,"(?:[2-59]\\d\\d|800)\\d{4}",,,,,,,[7]],[,,"2(?:2[1-7]|3[0-8]|4[12]|5[1256]|6\\d|7[1-3]|8[1-5])\\d{4}",,,,"2211234"],[,,"(?:[34][36]|5[1-389]|9\\d)\\d{5}",,,,"9911234"],[,,"800\\d{4}",,,,"8001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CV",238,"0",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CW:[,[,,"(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",,,,,,,[7,8]],[,,"9(?:4(?:3[0-5]|4[14]|6\\d)|50\\d|7(?:2[014]|3[02-9]|4[4-9]|6[357]|77|8[7-9])|8(?:3[39]|[46]\\d|7[01]|8[57-9]))\\d{4}",,,,"94351234"],[,,"953[01]\\d{4}|9(?:5[12467]|6[5-9])\\d{5}",,,,"95181234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"60[0-2]\\d{4}",,,,"6001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CW",599,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[3467]"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],,[,,"955\\d{5}",,,,"95581234",,,[8]],1,"[69]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CX:[,[,,"1(?:[0-79]\\d|8[0-24-9])\\d{7}|[148]\\d{8}|1\\d{5,7}",,,,,,,[6,7,8,9,10]],[,,"8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",,,,"891641234",,,[9],[8]],[,,"4(?:83[0-38]|93[0-4])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",,,,"1300123456",,,[6,8,10]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"CX",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"0|([59]\\d{7})$","8$1","0011",,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CY:[,[,,"(?:[279]\\d|[58]0)\\d{6}",,,,,,,[8]],[,,"2[2-6]\\d{6}",,,,"22345678"],[,,"9[4-79]\\d{6}",,,,"96123456"],[,,"800\\d{5}",,,,"80001234"],[,,"90[09]\\d{5}",,,,"90012345"],[,,"80[1-9]\\d{5}",,,,"80112345"],[,,"700\\d{5}",,,,"70012345"],[,,,,,,,,,[-1]],"CY",357,"00",,,,,,,,[[,"(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:50|77)\\d{6}",,,,"77123456"],,,[,,,,,,,,,[-1]]],CZ:[,[,,"(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",,,,,,,[9,10,11,12]],[,,"(?:2\\d|3[1257-9]|4[16-9]|5[13-9])\\d{7}",,,,"212345678",,,[9]],[,,"(?:60[1-8]|7(?:0[2-5]|[2379]\\d))\\d{6}",,,,"601123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"9(?:0[05689]|76)\\d{6}",,,,"900123456",,,[9]],[,,"8[134]\\d{7}",,,,"811234567",,,[9]],[,,"70[01]\\d{6}",,,,"700123456",,,[9]],[,,"9[17]0\\d{6}",,,,"910123456",,,[9]],"CZ",420,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"9(?:5\\d|7[2-4])\\d{6}",,,,"972123456",,,[9]],,,[,,"9(?:3\\d{9}|6\\d{7,10})",,,,"93123456789"]],DE:[,[,,"[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:[12]\\d|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[05]\\d|31|[46][1-8])\\d{1,9}",,,,,,,[4,5,6,7,8,9,10,11,12,13,14,15],[2,3]],[,,"32\\d{9,11}|49[3-6]\\d{10}|49[0-7]\\d{3,9}|(?:[34]0|[68]9)\\d{3,13}|(?:2(?:0[1-689]|[1-3569]\\d|4[0-8]|7[1-7]|8[0-7])|3(?:[3569]\\d|4[0-79]|7[1-7]|8[1-8])|4(?:1[02-9]|[2-48]\\d|5[0-6]|6[0-8]|7[0-79])|5(?:0[2-8]|[124-6]\\d|[38][0-8]|[79][0-7])|6(?:0[02-9]|[1-358]\\d|[47][0-8]|6[1-9])|7(?:0[2-8]|1[1-9]|[27][0-7]|3\\d|[4-6][0-8]|8[0-5]|9[013-7])|8(?:0[2-9]|1[0-79]|2\\d|3[0-46-9]|4[0-6]|5[013-9]|6[1-8]|7[0-8]|8[0-24-6])|9(?:0[6-9]|[1-4]\\d|[589][0-7]|6[0-8]|7[0-467]))\\d{3,12}",,,,"30123456",,,[5,6,7,8,9,10,11,12,13,14,15],[2,3,4]],[,,"15[0-25-9]\\d{8}|1(?:6[023]|7\\d)\\d{7,8}",,,,"15123456789",,,[10,11]],[,,"800\\d{7,12}",,,,"8001234567890",,,[10,11,12,13,14,15]],[,,"(?:137[7-9]|900(?:[135]|9\\d))\\d{6}",,,,"9001234567",,,[10,11]],[,,"180\\d{5,11}|13(?:7[1-6]\\d\\d|8)\\d{4}",,,,"18012345",,,[7,8,9,10,11,12,13,14]],[,,"700\\d{8}",,,,"70012345678",,,[11]],[,,,,,,,,,[-1]],"DE",49,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],[,"(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],[,"(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],[,"(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],[,"(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],[,"(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],[,"(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],[,"(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],[,"(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],[,"(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],[,"(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],[,"(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],[,"(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],,[,,"16(?:4\\d{1,10}|[89]\\d{1,11})",,,,"16412345",,,[4,5,6,7,8,9,10,11,12,13,14]],,,[,,,,,,,,,[-1]],[,,"18(?:1\\d{5,11}|[2-9]\\d{8})",,,,"18500123456",,,[8,9,10,11,12,13,14]],,,[,,"1(?:6(?:013|255|399)|7(?:(?:[015]1|[69]3)3|[2-4]55|[78]99))\\d{7,8}|15(?:(?:[03-68]00|113)\\d|2\\d55|7\\d99|9\\d33)\\d{7}",,,,"177991234567",,,[12,13]]],DJ:[,[,,"(?:2\\d|77)\\d{6}",,,,,,,[8]],[,,"2(?:1[2-5]|7[45])\\d{5}",,,,"21360003"],[,,"77\\d{6}",,,,"77831001"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"DJ",253,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DK:[,[,,"[2-9]\\d{7}",,,,,,,[8]],[,,"(?:[2-7]\\d|8[126-9]|9[1-46-9])\\d{6}",,,,"32123456"],[,,"(?:[2-7]\\d|8[126-9]|9[1-46-9])\\d{6}",,,,"32123456"],[,,"80\\d{6}",,,,"80123456"],[,,"90\\d{6}",,,,"90123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"DK",45,"00",,,,,,,1,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DM:[,[,,"(?:[58]\\d\\d|767|900)\\d{7}",,,,,,,[10],[7]],[,,"767(?:2(?:55|66)|4(?:2[01]|4[0-25-9])|50[0-4])\\d{4}",,,,"7674201234",,,,[7]],[,,"767(?:2(?:[2-4689]5|7[5-7])|31[5-7]|61[1-8]|70[1-6])\\d{4}",,,,"7672251234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"DM",1,"011","1",,,"1|([2-7]\\d{6})$","767$1",,,,,[,,,,,,,,,[-1]],,"767",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DO:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"8(?:[04]9[2-9]\\d\\d|29(?:2(?:[0-59]\\d|6[04-9]|7[0-27]|8[0237-9])|3(?:[0-35-9]\\d|4[7-9])|[45]\\d\\d|6(?:[0-27-9]\\d|[3-5][1-9]|6[0135-8])|7(?:0[013-9]|[1-37]\\d|4[1-35689]|5[1-4689]|6[1-57-9]|8[1-79]|9[1-8])|8(?:0[146-9]|1[0-48]|[248]\\d|3[1-79]|5[01589]|6[013-68]|7[124-8]|9[0-8])|9(?:[0-24]\\d|3[02-46-9]|5[0-79]|60|7[0169]|8[57-9]|9[02-9])))\\d{4}",,,,"8092345678",,,,[7]],[,,"8[024]9[2-9]\\d{6}",,,,"8092345678",,,,[7]],[,,"8(?:00(?:14|[2-9]\\d)|(?:33|44|55|66|77|88)[2-9]\\d)\\d{5}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"DO",1,"011","1",,,"1",,,,,,[,,,,,,,,,[-1]],,"8001|8[024]9",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DZ:[,[,,"(?:[1-4]|[5-79]\\d|80)\\d{7}",,,,,,,[8,9]],[,,"9619\\d{5}|(?:1\\d|2[013-79]|3[0-8]|4[0135689])\\d{6}",,,,"12345678"],[,,"(?:5(?:4[0-29]|5\\d|6[0-2])|6(?:[569]\\d|7[0-6])|7[7-9]\\d)\\d{6}",,,,"551234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"80[3-689]1\\d{5}",,,,"808123456",,,[9]],[,,"80[12]1\\d{5}",,,,"801123456",,,[9]],[,,,,,,,,,[-1]],[,,"98[23]\\d{6}",,,,"983123456",,,[9]],"DZ",213,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EC:[,[,,"1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",,,,,,,[8,9,10,11],[7]],[,,"[2-7][2-7]\\d{6}",,,,"22123456",,,[8],[7]],[,,"964[0-2]\\d{5}|9(?:39|[57][89]|6[0-36-9]|[89]\\d)\\d{6}",,,,"991234567",,,[9]],[,,"1800\\d{7}|1[78]00\\d{6}",,,,"18001234567",,,[10,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[2-7]890\\d{4}",,,,"28901234",,,[8]],"EC",593,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-7]"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],[[,"(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-7]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EE:[,[,,"8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",,,,,,,[7,8,10]],[,,"(?:3[23589]|4[3-8]|6\\d|7[1-9]|88)\\d{5}",,,,"3212345",,,[7]],[,,"5(?:[0-35-9]\\d{6}|4(?:[0-57-9]\\d{5}|6(?:[0-24-9]\\d{4}|3(?:[0-35-9]\\d{3}|4000))))|8(?:1(?:0(?:000|[3-9]\\d\\d)|(?:1(?:0[236]|1\\d)|(?:23|[3-79]\\d)\\d)\\d)|2(?:0(?:000|(?:19|[24-7]\\d)\\d)|(?:(?:[124-6]\\d|3[5-9]|8[2-4])\\d|7(?:[679]\\d|8[13-9]))\\d)|[349]\\d{4})\\d\\d|5(?:(?:[02]\\d|5[0-478])\\d|1(?:[0-8]\\d|95)|6(?:4[0-4]|5[1-589]))\\d{3}",,,,"51234567",,,[7,8]],[,,"800(?:(?:0\\d\\d|1)\\d|[2-9])\\d{3}",,,,"80012345"],[,,"(?:40\\d\\d|900)\\d{4}",,,,"9001234",,,[7,8]],[,,,,,,,,,[-1]],[,,"70[0-2]\\d{5}",,,,"70012345",,,[8]],[,,,,,,,,,[-1]],"EE",372,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],[,"(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,"800[2-9]\\d{3}",,,,,,,[7]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EG:[,[,,"[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",,,,,,,[8,9,10],[6,7]],[,,"13[23]\\d{6}|(?:15|57)\\d{6,7}|(?:2[2-4]|3|4[05-8]|5[05]|6[24-689]|8[2468]|9[235-7])\\d{7}",,,,"234567890",,,[8,9],[6,7]],[,,"1[0-25]\\d{8}",,,,"1001234567",,,[10]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"EG",20,"00","0",,,"0",,,,[[,"(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],[,"(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[189]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EH:[,[,,"[5-8]\\d{8}",,,,,,,[9]],[,,"528[89]\\d{5}",,,,"528812345"],[,,"(?:6(?:[0-79]\\d|8[0-247-9])|7(?:0\\d|1[0-2]|6[1267]|7[0-57]))\\d{6}",,,,"650123456"],[,,"80\\d{7}",,,,"801234567"],[,,"89\\d{7}",,,,"891234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"592(?:4[0-2]|93)\\d{4}",,,,"592401234"],"EH",212,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,"528[89]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ER:[,[,,"[178]\\d{6}",,,,,,,[7],[6]],[,,"(?:1(?:1[12568]|[24]0|55|6[146])|8\\d\\d)\\d{4}",,,,"8370362",,,,[6]],[,,"(?:17[1-3]|7\\d\\d)\\d{4}",,,,"7123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ER",291,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ES:[,[,,"[5-9]\\d{8}",,,,,,,[9]],[,,"96906(?:0[0-8]|1[1-9]|[2-9]\\d)\\d\\d|9(?:69(?:0[0-57-9]|[1-9]\\d)|73(?:[0-8]\\d|9[1-9]))\\d{4}|(?:8(?:[1356]\\d|[28][0-8]|[47][1-9])|9(?:[135]\\d|[268][0-8]|4[1-9]|7[124-9]))\\d{6}",,,,"810123456"],[,,"(?:590[16]00\\d|9(?:6906(?:09|10)|7390\\d\\d))\\d\\d|(?:6\\d|7[1-48])\\d{7}",,,,"612345678"],[,,"[89]00\\d{6}",,,,"800123456"],[,,"80[367]\\d{6}",,,,"803123456"],[,,"90[12]\\d{6}",,,,"901123456"],[,,"70\\d{7}",,,,"701234567"],[,,,,,,,,,[-1]],"ES",34,"00",,,,,,,,[[,"(\\d{4})","$1",["905"]],[,"(\\d{6})","$1",["[79]9"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"51\\d{7}",,,,"511234567"],,,[,,,,,,,,,[-1]]],ET:[,[,,"(?:11|[2-59]\\d)\\d{7}",,,,,,,[9],[7]],[,,"11667[01]\\d{3}|(?:11(?:1(?:1[124]|2[2-7]|3[1-5]|5[5-8]|8[6-8])|2(?:13|3[6-8]|5[89]|7[05-9]|8[2-6])|3(?:2[01]|3[0-289]|4[1289]|7[1-4]|87)|4(?:1[69]|3[2-49]|4[0-3]|6[5-8])|5(?:1[578]|44|5[0-4])|6(?:1[78]|2[69]|39|4[5-7]|5[1-5]|6[0-59]|8[015-8]))|2(?:2(?:11[1-9]|22[0-7]|33\\d|44[1467]|66[1-68])|5(?:11[124-6]|33[2-8]|44[1467]|55[14]|66[1-3679]|77[124-79]|880))|3(?:3(?:11[0-46-8]|(?:22|55)[0-6]|33[0134689]|44[04]|66[01467])|4(?:44[0-8]|55[0-69]|66[0-3]|77[1-5]))|4(?:6(?:119|22[0-24-7]|33[1-5]|44[13-69]|55[14-689]|660|88[1-4])|7(?:(?:11|22)[1-9]|33[13-7]|44[13-6]|55[1-689]))|5(?:7(?:227|55[05]|(?:66|77)[14-8])|8(?:11[149]|22[013-79]|33[0-68]|44[013-8]|550|66[1-5]|77\\d)))\\d{4}",,,,"111112345",,,,[7]],[,,"9\\d{8}",,,,"911234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ET",251,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-59]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FI:[,[,,"[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"(?:1[3-79][1-8]|[235689][1-8]\\d)\\d{2,6}",,,,"131234567",,,[5,6,7,8,9]],[,,"4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}",,,,"412345678",,,[6,7,8,9,10]],[,,"800\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"[67]00\\d{5,6}",,,,"600123456",,,[8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FI",358,"00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","0",,,"0",,"00",,[[,"(\\d{5})","$1",["75[12]"],"0$1"],[,"(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],[,"(\\d{6})","$1",["11"]],[,"(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],[,"(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],[,"(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],[[,"(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],[,"(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],[,"(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],[,"(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],[,,,,,,,,,[-1]],1,"1[03-79]|[2-9]",[,,"20(?:2[023]|9[89])\\d{1,6}|(?:60[12]\\d|7099)\\d{4,5}|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:[1-3]00|7(?:0[1-5]\\d\\d|5[03-9]))\\d{3,7}"],[,,"20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}",,,,"10112345"],,,[,,,,,,,,,[-1]]],FJ:[,[,,"45\\d{5}|(?:0800\\d|[235-9])\\d{6}",,,,,,,[7,11]],[,,"603\\d{4}|(?:3[0-5]|6[25-7]|8[58])\\d{5}",,,,"3212345",,,[7]],[,,"(?:[279]\\d|45|5[01568]|8[034679])\\d{5}",,,,"7012345",,,[7]],[,,"0800\\d{7}",,,,"08001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FJ",679,"0(?:0|52)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FK:[,[,,"[2-7]\\d{4}",,,,,,,[5]],[,,"[2-47]\\d{4}",,,,"31234"],[,,"[56]\\d{4}",,,,"51234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FK",500,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FM:[,[,,"(?:[39]\\d\\d|820)\\d{4}",,,,,,,[7]],[,,"31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-6]\\d)\\d)\\d{3}",,,,"3201234"],[,,"31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-7]\\d)\\d)\\d{3}",,,,"3501234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FM",691,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[389]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FO:[,[,,"[2-9]\\d{5}",,,,,,,[6]],[,,"(?:20|[34]\\d|8[19])\\d{4}",,,,"201234"],[,,"(?:[27][1-9]|5\\d|91)\\d{4}",,,,"211234"],[,,"80[257-9]\\d{3}",,,,"802123"],[,,"90(?:[13-5][15-7]|2[125-7]|9\\d)\\d\\d",,,,"901123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:6[0-36]|88)\\d{4}",,,,"601234"],"FO",298,"00",,,,"(10(?:01|[12]0|88))",,,,[[,"(\\d{6})","$1",["[2-9]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FR:[,[,,"[1-9]\\d{8}",,,,,,,[9]],[,,"(?:[1-35]\\d|4[1-9])\\d{7}",,,,"123456789"],[,,"(?:6(?:[0-24-8]\\d|3[0-8]|9[589])|7(?:00|[3-9]\\d))\\d{6}",,,,"612345678"],[,,"80[0-5]\\d{6}",,,,"801234567"],[,,"836(?:0[0-36-9]|[1-9]\\d)\\d{4}|8(?:1[2-9]|2[2-47-9]|3[0-57-9]|[569]\\d|8[0-35-9])\\d{6}",,,,"891123456"],[,,"8(?:1[01]|2[0156]|84)\\d{6}",,,,"884012345"],[,,,,,,,,,[-1]],[,,"9\\d{8}",,,,"912345678"],"FR",33,"00","0",,,"0",,,,[[,"(\\d{4})","$1",["10"]],[,"(\\d{3})(\\d{3})","$1 $2",["1"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"80[6-9]\\d{6}",,,,"806123456"],,,[,,,,,,,,,[-1]]],GA:[,[,,"(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",,,,,,,[7,8]],[,,"[01]1\\d{6}",,,,"01441234",,,[8]],[,,"(?:0[2-7]|6[256]|7[47])\\d{6}|[2-7]\\d{6}",,,,"06031234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GA",241,"00",,,,"0(11\\d{6}|6[256]\\d{6}|7[47]\\d{6})","$1",,,[[,"(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GB:[,[,,"[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",,,,,,,[7,9,10],[4,5,6,8]],[,,"(?:1(?:1(?:3(?:[0-58]\\d\\d|73[023])|4(?:[0-5]\\d\\d|69[7-9]|70[059])|(?:5[0-26-9]|[78][0-49])\\d\\d|6(?:[0-4]\\d\\d|50[259]))|2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d\\d|1(?:[0-7]\\d\\d|8(?:[02]\\d|1[278])))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",,,,"1212345678",,,[9,10],[4,5,6,7,8]],[,,"7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",,,,"7400123456",,,[10]],[,,"80[08]\\d{7}|800\\d{6}|8001111",,,,"8001234567"],[,,"(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",,,,"9012345678",,,[7,10]],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,"56\\d{8}",,,,"5612345678",,,[10]],"GB",44,"00","0"," x",,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],[,"(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],[,"(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],[,"(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],,[,,"76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[139])\\d{6}",,,,"7640123456",,,[10]],1,,[,,,,,,,,,[-1]],[,,"(?:3[0347]|55)\\d{8}",,,,"5512345678",,,[10]],,,[,,,,,,,,,[-1]]],GD:[,[,,"(?:473|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"473(?:2(?:3[0-2]|69)|3(?:2[89]|86)|4(?:[06]8|3[5-9]|4[0-49]|5[5-79]|73|90)|63[68]|7(?:58|84)|800|938)\\d{4}",,,,"4732691234",,,,[7]],[,,"473(?:4(?:0[2-79]|1[04-9]|2[0-5]|58)|5(?:2[01]|3[3-8])|901)\\d{4}",,,,"4734031234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"GD",1,"011","1",,,"1|([2-9]\\d{6})$","473$1",,,,,[,,,,,,,,,[-1]],,"473",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GE:[,[,,"(?:[3-57]\\d\\d|800)\\d{6}",,,,,,,[9],[6,7]],[,,"(?:3(?:[256]\\d|4[124-9]|7[0-4])|4(?:1\\d|2[2-7]|3[1-79]|4[2-8]|7[239]|9[1-7]))\\d{6}",,,,"322123456",,,,[6,7]],[,,"5(?:0555[5-9]|757(?:7[7-9]|8[01]))\\d{3}|5(?:0070|[25]222|3333)[0-4]\\d{3}|5(?:00(?:0\\d|50)|111\\d|(?:52|75)00|8(?:58[89]|8(?:55|88)))\\d{4}|(?:5(?:[14]4|5[0157-9]|68|7[0147-9]|9[1-35-9])|790)\\d{6}",,,,"555123456"],[,,"800\\d{6}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"70[67]\\d{6}",,,,"706123456"],"GE",995,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"70[67]\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GF:[,[,,"(?:[56]94|80\\d|976)\\d{6}",,,,,,,[9]],[,,"594(?:[023]\\d|1[01]|4[03-9]|5[6-9]|6[0-3]|80|9[014])\\d{4}",,,,"594101234"],[,,"694(?:[0-249]\\d|3[0-48])\\d{4}",,,,"694201234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976\\d{6}",,,,"976012345"],"GF",594,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GG:[,[,,"(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",,,,,,,[7,9,10],[6]],[,,"1481[25-9]\\d{5}",,,,"1481256789",,,[10],[6]],[,,"7(?:(?:781|839)\\d|911[17])\\d{5}",,,,"7781123456",,,[10]],[,,"80[08]\\d{7}|800\\d{6}|8001111",,,,"8001234567"],[,,"(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",,,,"9012345678",,,[7,10]],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,"56\\d{8}",,,,"5612345678",,,[10]],"GG",44,"00","0",,,"0|([25-9]\\d{5})$","1481$1",,,,,[,,"76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[139])\\d{6}",,,,"7640123456",,,[10]],,,[,,,,,,,,,[-1]],[,,"(?:3[0347]|55)\\d{8}",,,,"5512345678",,,[10]],,,[,,,,,,,,,[-1]]],GH:[,[,,"(?:[235]\\d{3}|800)\\d{5}",,,,,,,[8,9],[7]],[,,"3082[0-5]\\d{4}|3(?:0(?:[237]\\d|8[01])|[167](?:2[0-6]|7\\d|80)|2(?:2[0-5]|7\\d|80)|3(?:2[0-3]|7\\d|80)|4(?:2[013-9]|3[01]|7\\d|80)|5(?:2[0-7]|7\\d|80)|8(?:2[0-2]|7\\d|80)|9(?:[28]0|7\\d))\\d{5}",,,,"302345678",,,[9],[7]],[,,"(?:2(?:[0346-8]\\d|5[67])|5(?:[0457]\\d|6[01]|9[1-9]))\\d{6}",,,,"231234567",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GH",233,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[237]|8[0-2]"]],[,"(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],[[,"(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"800\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GI:[,[,,"(?:[25]\\d\\d|606)\\d{5}",,,,,,,[8]],[,,"21(?:6[24-7]\\d|90[0-2])\\d{3}|2(?:00|2[25])\\d{5}",,,,"20012345"],[,,"(?:5[146-8]\\d|606)\\d{5}",,,,"57123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GI",350,"00",,,,,,,,[[,"(\\d{3})(\\d{5})","$1 $2",["2"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GL:[,[,,"(?:19|[2-689]\\d)\\d{4}",,,,,,,[6]],[,,"(?:19|3[1-7]|6[14689]|8[14-79]|9\\d)\\d{4}",,,,"321000"],[,,"[245]\\d{5}",,,,"221234"],[,,"80\\d{4}",,,,"801234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3[89]\\d{4}",,,,"381234"],"GL",299,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-689]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GM:[,[,,"[2-9]\\d{6}",,,,,,,[7]],[,,"(?:4(?:[23]\\d\\d|4(?:1[024679]|[6-9]\\d))|5(?:5(?:3\\d|4[0-7])|6[67]\\d|7(?:1[04]|2[035]|3[58]|48))|8\\d{3})\\d{3}",,,,"5661234"],[,,"(?:[23679]\\d|5[0-389])\\d{5}",,,,"3012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GM",220,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GN:[,[,,"722\\d{6}|(?:3|6\\d)\\d{7}",,,,,,,[8,9]],[,,"3(?:0(?:24|3[12]|4[1-35-7]|5[13]|6[189]|[78]1|9[1478])|1\\d\\d)\\d{4}",,,,"30241234",,,[8]],[,,"6[0-356]\\d{7}",,,,"601123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"722\\d{6}",,,,"722123456",,,[9]],"GN",224,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GP:[,[,,"(?:590|(?:69|80)\\d|976)\\d{6}",,,,,,,[9]],[,,"590(?:0[1-68]|1[0-2]|2[0-68]|3[1289]|4[0-24-9]|5[3-579]|6[0189]|7[08]|8[0-689]|9\\d)\\d{4}",,,,"590201234"],[,,"69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}",,,,"690001234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976[01]\\d{5}",,,,"976012345"],"GP",590,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GQ:[,[,,"222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",,,,,,,[9]],[,,"33[0-24-9]\\d[46]\\d{4}|3(?:33|5\\d)\\d[7-9]\\d{4}",,,,"333091234"],[,,"(?:222|55\\d)\\d{6}",,,,"222123456"],[,,"80\\d[1-9]\\d{5}",,,,"800123456"],[,,"90\\d[1-9]\\d{5}",,,,"900123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GQ",240,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],[,"(\\d{3})(\\d{6})","$1 $2",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GR:[,[,,"5005000\\d{3}|8\\d{9,10}|(?:[269]\\d|70)\\d{8}",,,,,,,[10,11]],[,,"2(?:1\\d\\d|2(?:2[1-46-9]|[36][1-8]|4[1-7]|5[1-4]|7[1-5]|[89][1-9])|3(?:1\\d|2[1-57]|[35][1-3]|4[13]|7[1-7]|8[124-6]|9[1-79])|4(?:1\\d|2[1-8]|3[1-4]|4[13-5]|6[1-578]|9[1-5])|5(?:1\\d|[29][1-4]|3[1-5]|4[124]|5[1-6])|6(?:1\\d|[269][1-6]|3[1245]|4[1-7]|5[13-9]|7[14]|8[1-5])|7(?:1\\d|2[1-5]|3[1-6]|4[1-7]|5[1-57]|6[135]|9[125-7])|8(?:1\\d|2[1-5]|[34][1-4]|9[1-57]))\\d{6}",,,,"2123456789",,,[10]],[,,"68[57-9]\\d{7}|(?:69|94)\\d{8}",,,,"6912345678",,,[10]],[,,"800\\d{7,8}",,,,"8001234567"],[,,"90[19]\\d{7}",,,,"9091234567",,,[10]],[,,"8(?:0[16]|12|[27]5|50)\\d{7}",,,,"8011234567",,,[10]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,,,,,,,,[-1]],"GR",30,"00",,,,,,,,[[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],[,"(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"5005000\\d{3}",,,,"5005000123",,,[10]],,,[,,,,,,,,,[-1]]],GT:[,[,,"(?:1\\d{3}|[2-7])\\d{7}",,,,,,,[8,11]],[,,"[267][2-9]\\d{6}",,,,"22456789",,,[8]],[,,"[3-5]\\d{7}",,,,"51234567",,,[8]],[,,"18[01]\\d{8}",,,,"18001112222",,,[11]],[,,"19\\d{9}",,,,"19001112222",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GT",502,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GU:[,[,,"(?:[58]\\d\\d|671|900)\\d{7}",,,,,,,[10],[7]],[,,"671(?:3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[0236-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[48])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",,,,"6713001234",,,,[7]],[,,"671(?:3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[0236-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[48])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",,,,"6713001234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"GU",1,"011","1",,,"1|([3-9]\\d{6})$","671$1",,1,,,[,,,,,,,,,[-1]],,"671",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GW:[,[,,"[49]\\d{8}|4\\d{6}",,,,,,,[7,9]],[,,"443\\d{6}",,,,"443201234",,,[9]],[,,"9(?:5\\d|6[569]|77)\\d{6}",,,,"955012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"40\\d{5}",,,,"4012345",,,[7]],"GW",245,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["40"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GY:[,[,,"(?:862\\d|9008)\\d{3}|(?:[2-46]\\d|77)\\d{5}",,,,,,,[7]],[,,"(?:2(?:1[6-9]|2[0-35-9]|3[1-4]|5[3-9]|6\\d|7[0-24-79])|3(?:2[25-9]|3\\d)|4(?:4[0-24]|5[56])|77[1-57])\\d{4}",,,,"2201234"],[,,"6\\d{6}",,,,"6091234"],[,,"(?:289|862)\\d{4}",,,,"2891234"],[,,"9008\\d{3}",,,,"9008123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GY",592,"001",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-46-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HK:[,[,,"8[0-46-9]\\d{6,7}|9\\d{4}(?:\\d(?:\\d(?:\\d{4})?)?)?|(?:[235-79]\\d|46)\\d{6}",,,,,,,[5,6,7,8,9,11]],[,,"(?:2(?:[13-9]\\d|2[013-9])\\d|3(?:(?:[1569][0-24-9]|4[0-246-9]|7[0-24-69])\\d|8(?:4[0-6]|5[0-5]|9\\d))|58(?:0[1-8]|1[2-9]))\\d{4}",,,,"21234567",,,[8]],[,,"(?:46(?:0[0-7]|1[0-6]|4[0-57-9]|5[0-8]|6[0-4])|5730|6(?:26[013-7]|66[0-3])|70(?:7[1-5]|8[0-4])|848[015-9]|929[03-9])\\d{4}|(?:46[23]|5(?:[1-59][0-46-9]|6[0-4689]|7[0-2469])|6(?:0[1-9]|[13-59]\\d|[268][0-57-9]|7[0-79])|849|9(?:0[1-9]|1[02-9]|[2358][0-8]|[467]\\d))\\d{5}",,,,"51234567",,,[8]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"900(?:[0-24-9]\\d{7}|3\\d{1,4})",,,,"90012345678",,,[5,6,7,8,11]],[,,,,,,,,,[-1]],[,,"8(?:1[0-4679]\\d|2(?:[0-36]\\d|7[0-4])|3(?:[034]\\d|2[09]|70))\\d{4}",,,,"81123456",,,[8]],[,,,,,,,,,[-1]],"HK",852,"00(?:30|5[09]|[126-9]?)",,,,,,"00",,[[,"(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],,[,,"7(?:1(?:0[0-38]|1[0-3679]|3[013]|69|9[0136])|2(?:[02389]\\d|1[18]|7[27-9])|3(?:[0-38]\\d|7[0-369]|9[2357-9])|47\\d|5(?:[178]\\d|5[0-5])|6(?:0[0-7]|2[236-9]|[35]\\d)|7(?:[27]\\d|8[7-9])|8(?:[23689]\\d|7[1-9])|9(?:[025]\\d|6[0-246-8]|7[0-36-9]|8[238]))\\d{4}",,,,"71123456",,,[8]],,,[,,,,,,,,,[-1]],[,,"30(?:0[1-9]|[15-7]\\d|2[047]|89)\\d{4}",,,,"30161234",,,[8]],,,[,,,,,,,,,[-1]]],HN:[,[,,"8\\d{10}|[237-9]\\d{7}",,,,,,,[8,11]],[,,"2(?:2(?:0[0-39]|1[1-367]|[23]\\d|4[03-6]|5[57]|6[245]|7[0135689]|8[01346-9]|9[0-2])|4(?:0[78]|2[3-59]|3[13-9]|4[0-68]|5[1-35])|5(?:0[7-9]|16|4[03-5]|5\\d|6[014-6]|74|80)|6(?:[056]\\d|17|2[07]|3[04]|4[0-378]|[78][0-8]|9[01])|7(?:6[46-9]|7[02-9]|8[034]|91)|8(?:79|8[0-357-9]|9[1-57-9]))\\d{4}",,,,"22123456",,,[8]],[,,"[37-9]\\d{7}",,,,"91234567",,,[8]],[,,"8002\\d{7}",,,,"80021234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"HN",504,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1-$2",["[237-9]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["8"]]],[[,"(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]],[,,,,,,,,,[-1]],,,[,,"8002\\d{7}",,,,,,,[11]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HR:[,[,,"(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",,,,,,,[6,7,8,9]],[,,"1\\d{7}|(?:2[0-3]|3[1-5]|4[02-47-9]|5[1-3])\\d{6,7}",,,,"12345678",,,[8,9],[6,7]],[,,"9(?:751\\d{5}|8\\d{6,7})|9(?:0[1-9]|[1259]\\d|7[0679])\\d{6}",,,,"921234567",,,[8,9]],[,,"80[01]\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"6[01459]\\d{6}|6[01]\\d{4,5}",,,,"611234",,,[6,7,8]],[,,,,,,,,,[-1]],[,,"7[45]\\d{6}",,,,"74123456",,,[8]],[,,,,,,,,,[-1]],"HR",385,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"62\\d{6,7}|72\\d{6}",,,,"62123456",,,[8,9]],,,[,,,,,,,,,[-1]]],HT:[,[,,"[2-489]\\d{7}",,,,,,,[8]],[,,"2(?:2\\d|5[1-5]|81|9[149])\\d{5}",,,,"22453300"],[,,"[34]\\d{7}",,,,"34101234"],[,,"8\\d{7}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:[67][0-4]|8[0-3589]|9\\d)\\d{5}",,,,"98901234"],"HT",509,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-489]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HU:[,[,,"[235-7]\\d{8}|[1-9]\\d{7}",,,,,,,[8,9],[6,7]],[,,"(?:1\\d|[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6[23689]|8[2-57-9]|9[2-69])\\d{6}",,,,"12345678",,,[8],[6,7]],[,,"(?:[257]0|3[01])\\d{7}",,,,"201234567",,,[9]],[,,"(?:[48]0\\d|6802)\\d{5}",,,,"80123456"],[,,"9[01]\\d{6}",,,,"90123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"21\\d{7}",,,,"211234567",,,[9]],"HU",36,"00","06",,,"06",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],,[,,,,,,,,,[-1]],,,[,,"(?:[48]0\\d|6802)\\d{5}"],[,,"38\\d{7}",,,,"381234567",,,[9]],,,[,,,,,,,,,[-1]]],ID:[,[,,"(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",,,,,,,[7,8,9,10,11,12,13],[5,6]],[,,"2[124]\\d{7,8}|619\\d{8}|2(?:1(?:14|500)|2\\d{3})\\d{3}|61\\d{5,8}|(?:2(?:[35][1-4]|6[0-8]|7[1-6]|8\\d|9[1-8])|3(?:1|[25][1-8]|3[1-68]|4[1-3]|6[1-3568]|7[0-469]|8\\d)|4(?:0[1-589]|1[01347-9]|2[0-36-8]|3[0-24-68]|43|5[1-378]|6[1-5]|7[134]|8[1245])|5(?:1[1-35-9]|2[25-8]|3[124-9]|4[1-3589]|5[1-46]|6[1-8])|6(?:[25]\\d|3[1-69]|4[1-6])|7(?:02|[125][1-9]|[36]\\d|4[1-8]|7[0-36-9])|9(?:0[12]|1[013-8]|2[0-479]|5[125-8]|6[23679]|7[159]|8[01346]))\\d{5,8}",,,,"218350123",,,[7,8,9,10,11],[5,6]],[,,"8[1-35-9]\\d{7,10}",,,,"812345678",,,[9,10,11,12]],[,,"00[17]803\\d{7}|(?:177\\d|800)\\d{5,7}|001803\\d{6}",,,,"8001234567",,,[8,9,10,11,12,13]],[,,"809\\d{7}",,,,"8091234567",,,[10]],[,,"804\\d{7}",,,,"8041234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ID",62,"00[89]","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],[,"(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],[,"(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],[,"(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],[,"(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],[,"(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],[,"(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["001"]],[,"(\\d{2})(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],[,"(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],[,"(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],[,"(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],[,"(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],[,"(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],[,"(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"001803\\d{6,7}|(?:007803\\d|8071)\\d{6}",,,,,,,[10,12,13]],[,,"(?:1500|8071\\d{3})\\d{3}",,,,"8071123456",,,[7,10]],,,[,,,,,,,,,[-1]]],IE:[,[,,"(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",,,,,,,[7,8,9,10],[5,6]],[,,"(?:1\\d|21)\\d{6,7}|(?:2[24-9]|4(?:0[24]|5\\d|7)|5(?:0[45]|1\\d|8)|6(?:1\\d|[237-9])|9(?:1\\d|[35-9]))\\d{5}|(?:23|4(?:[1-469]|8\\d)|5[23679]|6[4-6]|7[14]|9[04])\\d{7}",,,,"2212345",,,,[5,6]],[,,"8(?:22|[35-9]\\d)\\d{6}",,,,"850123456",,,[9]],[,,"1800\\d{6}",,,,"1800123456",,,[10]],[,,"15(?:1[2-8]|[2-8]0|9[089])\\d{6}",,,,"1520123456",,,[10]],[,,"18[59]0\\d{6}",,,,"1850123456",,,[10]],[,,"700\\d{6}",,,,"700123456",,,[9]],[,,"76\\d{7}",,,,"761234567",,,[9]],"IE",353,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],[,"(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],[,"(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],[,"(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"18[59]0\\d{6}",,,,,,,[10]],[,,"818\\d{6}",,,,"818123456",,,[9]],,,[,,"88210[1-9]\\d{4}|8(?:[35-79]5\\d\\d|8(?:[013-9]\\d\\d|2(?:[01][1-9]|[2-9]\\d)))\\d{5}",,,,"8551234567",,,[10]]],IL:[,[,,"1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",,,,,,,[7,8,9,10,11,12]],[,,"153\\d{8,9}|29[1-9]\\d{5}|(?:2[0-8]|[3489]\\d)\\d{6}",,,,"21234567",,,[8,11,12],[7]],[,,"5(?:(?:[02368]\\d|[19][2-9]|4[1-9])\\d|5(?:01|1[79]|2[2-9]|3[0-3]|4[34]|5[015689]|6[6-8]|7[0-267]|8[7-9]|9[1-9]))\\d{5}",,,,"502345678",,,[9]],[,,"1(?:255|80[019]\\d{3})\\d{3}",,,,"1800123456",,,[7,10]],[,,"1212\\d{4}|1(?:200|9(?:0[01]|19))\\d{6}",,,,"1919123456",,,[8,10]],[,,"1700\\d{6}",,,,"1700123456",,,[10]],[,,,,,,,,,[-1]],[,,"7(?:380|8(?:33|55|77|81))\\d{5}|7(?:18|2[23]|3[237]|47|6[58]|7\\d|82|9[235-9])\\d{6}",,,,"771234567",,,[9]],"IL",972,"0(?:0|1[2-9])","0",,,"0",,,,[[,"(\\d{4})(\\d{3})","$1-$2",["125"]],[,"(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],[,"(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],[,"(\\d{4})(\\d{6})","$1-$2",["159"]],[,"(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],[,"(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],,[,,,,,,,,,[-1]],,,[,,"1700\\d{6}",,,,,,,[10]],[,,"1599\\d{6}",,,,"1599123456",,,[10]],,,[,,"151\\d{8,9}",,,,"15112340000",,,[11,12]]],IM:[,[,,"1624\\d{6}|(?:[3578]\\d|90)\\d{8}",,,,,,,[10],[6]],[,,"1624(?:230|[5-8]\\d\\d)\\d{3}",,,,"1624756789",,,,[6]],[,,"76245[06]\\d{4}|7(?:4576|[59]24\\d|624[0-4689])\\d{5}",,,,"7924123456"],[,,"808162\\d{4}",,,,"8081624567"],[,,"8(?:440[49]06|72299\\d)\\d{3}|(?:8(?:45|70)|90[0167])624\\d{4}",,,,"9016247890"],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678"],[,,"56\\d{8}",,,,"5612345678"],"IM",44,"00","0",,,"0|([25-8]\\d{5})$","1624$1",,,,,[,,,,,,,,,[-1]],,"74576|(?:16|7[56])24",[,,,,,,,,,[-1]],[,,"3440[49]06\\d{3}|(?:3(?:08162|3\\d{4}|45624|7(?:0624|2299))|55\\d{4})\\d{4}",,,,"5512345678"],,,[,,,,,,,,,[-1]]],IN:[,[,,"(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",,,,,,,[8,9,10,11,12,13],[6,7]],[,,"2717(?:[2-7]\\d|95)\\d{4}|(?:271[0-689]|782[0-6])[2-7]\\d{5}|(?:170[24]|2(?:(?:[02][2-79]|90)\\d|80[13468])|(?:3(?:23|80)|683|79[1-7])\\d|4(?:20[24]|72[2-8])|552[1-7])\\d{6}|(?:11|33|4[04]|80)[2-7]\\d{7}|(?:342|674|788)(?:[0189][2-7]|[2-7]\\d)\\d{5}|(?:1(?:2[0-249]|3[0-25]|4[145]|[59][14]|6[014]|7[1257]|8[01346])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(?:26|4[13]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[014-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|2[14]|3[134]|4[47]|5[15]|[67]1)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91))[2-7]\\d{6}|(?:1(?:2[35-8]|3[346-9]|4[236-9]|[59][0235-9]|6[235-9]|7[34689]|8[257-9])|2(?:1[134689]|3[24-8]|4[2-8]|5[25689]|6[2-4679]|7[3-79]|8[2-479]|9[235-9])|3(?:01|1[79]|2[1245]|4[5-8]|5[125689]|6[235-7]|7[157-9]|8[2-46-8])|4(?:1[14578]|2[5689]|3[2-467]|5[4-7]|6[35]|73|8[2689]|9[2389])|5(?:[16][146-9]|2[14-8]|3[1346]|4[14-69]|5[46]|7[2-4]|8[2-8]|9[246])|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])|7(?:1[013-9]|2[0235-9]|3[2679]|4[1-35689]|5[2-46-9]|[67][02-9]|8[013-7]|9[089])|8(?:1[1357-9]|2[235-8]|3[03-57-9]|4[0-24-9]|5\\d|6[2457-9]|7[1-6]|8[1256]|9[2-4]))\\d[2-7]\\d{5}",,,,"7410410123",,,[10],[6,7,8]],[,,"(?:61279|7(?:887[02-9]|9(?:313|79[07-9]))|8(?:079[04-9]|(?:84|91)7[02-8]))\\d{5}|(?:6(?:12|[2-47]1|5[17]|6[13]|80)[0189]|7(?:1(?:2[0189]|9[0-5])|2(?:[14][017-9]|8[0-59])|3(?:2[5-8]|[34][017-9]|9[016-9])|4(?:1[015-9]|[29][89]|39|8[389])|5(?:[15][017-9]|2[04-9]|9[7-9])|6(?:0[0-47]|1[0-257-9]|2[0-4]|3[19]|5[4589])|70[0289]|88[089]|97[02-8])|8(?:0(?:6[67]|7[02-8])|70[017-9]|84[01489]|91[0-289]))\\d{6}|(?:7(?:31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[0189]\\d|7[02-8])\\d{5}|(?:6(?:[09]\\d|1[04679]|2[03689]|3[05-9]|4[0489]|50|6[069]|7[07]|8[7-9])|7(?:0\\d|2[0235-79]|3[05-8]|40|5[0346-8]|6[6-9]|7[1-9]|8[0-79]|9[089])|8(?:0[01589]|1[0-57-9]|2[235-9]|3[03-57-9]|[45]\\d|6[02457-9]|7[1-69]|8[0-25-9]|9[02-9])|9\\d\\d)\\d{7}|(?:6(?:(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|8[124-6])\\d|7(?:[235689]\\d|4[0189]))|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-5])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]|881))[0189]\\d{5}",,,,"8123456789",,,[10]],[,,"000800\\d{7}|1(?:600\\d{6}|80(?:0\\d{4,9}|3\\d{9}))",,,,"1800123456"],[,,"186[12]\\d{9}",,,,"1861123456789",,,[13]],[,,"1860\\d{7}",,,,"18603451234",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IN",91,"00","0",,,"0",,,,[[,"(\\d{7})","$1",["575"]],[,"(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],,,1],[,"(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],,,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",,1],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",,1],[,"(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",,1],[,"(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],,,1],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]],[,"(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],,,1]],[[,"(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],,,1],[,"(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],,,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",,1],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",,1],[,"(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",,1],[,"(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],,,1],[,"(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],,,1]],[,,,,,,,,,[-1]],,,[,,"1(?:600\\d{6}|800\\d{4,9})|(?:000800|18(?:03\\d\\d|6(?:0|[12]\\d\\d)))\\d{7}"],[,,"140\\d{7}",,,,"1409305260",,,[10]],,,[,,,,,,,,,[-1]]],IO:[,[,,"3\\d{6}",,,,,,,[7]],[,,"37\\d{5}",,,,"3709100"],[,,"38\\d{5}",,,,"3801234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IO",246,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["3"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],IQ:[,[,,"(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",,,,,,,[8,9,10],[6,7]],[,,"1\\d{7}|(?:2[13-5]|3[02367]|4[023]|5[03]|6[026])\\d{6,7}",,,,"12345678",,,[8,9],[6,7]],[,,"7[3-9]\\d{8}",,,,"7912345678",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IQ",964,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],IR:[,[,,"[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",,,,,,,[4,5,6,7,10],[8]],[,,"(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])(?:[03-57]\\d{7}|[16]\\d{3}(?:\\d{4})?|[289]\\d{3}(?:\\d(?:\\d{3})?)?)|94(?:000[09]|2(?:121|[2689]0\\d)|30[0-2]\\d|4(?:111|40\\d))\\d{4}",,,,"2123456789",,,[6,7,10],[4,5,8]],[,,"9(?:(?:0(?:[0-35]\\d|4[4-6])|(?:[13]\\d|2[0-3])\\d)\\d|9(?:(?:[0-2]\\d|3[01]|4[0145])\\d|5[15]0|8(?:1\\d|88)|9(?:0[013]|[19]\\d|21|77|8[7-9])))\\d{5}",,,,"9123456789",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"993[2-9]\\d{6}",,,,"9932123456",,,[10]],"IR",98,"00","0",,,"0",,,,[[,"(\\d{4,5})","$1",["96"],"0$1"],[,"(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"9(?:4440\\d{5}|6(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19]))",,,,,,,[4,5,10]],[,,"96(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19])",,,,"9601",,,[4,5]],,,[,,,,,,,,,[-1]]],IS:[,[,,"(?:38\\d|[4-9])\\d{6}",,,,,,,[7,9]],[,,"(?:4(?:1[0-24-69]|2[0-7]|[37][0-8]|4[0-245]|5[0-68]|6\\d|8[0-36-8])|5(?:05|[156]\\d|2[02578]|3[0-579]|4[03-7]|7[0-2578]|8[0-35-9]|9[013-689])|872)\\d{4}",,,,"4101234",,,[7]],[,,"(?:38[589]\\d\\d|6(?:1[1-8]|2[0-6]|3[027-9]|4[014679]|5[0159]|6[0-69]|70|8[06-8]|9\\d)|7(?:5[057]|[6-9]\\d)|8(?:2[0-59]|[3-69]\\d|8[28]))\\d{4}",,,,"6111234"],[,,"80[08]\\d{4}",,,,"8001234",,,[7]],[,,"90(?:0\\d|1[5-79]|2[015-79]|3[135-79]|4[125-7]|5[25-79]|7[1-37]|8[0-35-7])\\d{3}",,,,"9001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"49[0-24-79]\\d{4}",,,,"4921234",,,[7]],"IS",354,"00|1(?:0(?:01|[12]0)|100)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"809\\d{4}",,,,"8091234",,,[7]],,,[,,"(?:689|8(?:7[18]|80)|95[48])\\d{4}",,,,"6891234",,,[7]]],IT:[,[,,"0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",,,,,,,[6,7,8,9,10,11,12]],[,,"0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",,,,"0212345678",,,[6,7,8,9,10,11]],[,,"3[1-9]\\d{8}|3[2-9]\\d{7}",,,,"3123456789",,,[9,10]],[,,"80(?:0\\d{3}|3)\\d{3}",,,,"800123456",,,[6,9]],[,,"(?:0878\\d\\d|89(?:2|4[5-9]\\d))\\d{3}|89[45][0-4]\\d\\d|(?:1(?:44|6[346])|89(?:5[5-9]|9))\\d{6}",,,,"899123456",,,[6,8,9,10]],[,,"84(?:[08]\\d{3}|[17])\\d{3}",,,,"848123456",,,[6,9]],[,,"1(?:78\\d|99)\\d{6}",,,,"1781234567",,,[9,10]],[,,"55\\d{8}",,,,"5512345678",,,[10]],"IT",39,"00",,,,,,,,[[,"(\\d{4,5})","$1",["1(?:0|9[246])","1(?:0|9(?:2[2-9]|[46]))"]],[,"(\\d{6})","$1",["1(?:1|92)"]],[,"(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],[,"(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[245])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|[45][0-4]))"]],[,"(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],[,"(\\d{4})(\\d{4})","$1 $2",["894"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1[4679]|[38]"]],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]"]],[,"(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],[[,"(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],[,"(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[245])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|[45][0-4]))"]],[,"(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],[,"(\\d{4})(\\d{4})","$1 $2",["894"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1[4679]|[38]"]],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]"]],[,"(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],[,,,,,,,,,[-1]],1,,[,,"848\\d{6}",,,,,,,[9]],[,,,,,,,,,[-1]],,,[,,"3[2-8]\\d{9,10}",,,,"33101234501",,,[11,12]]],JE:[,[,,"1534\\d{6}|(?:[3578]\\d|90)\\d{8}",,,,,,,[10],[6]],[,,"1534[0-24-8]\\d{5}",,,,"1534456789",,,,[6]],[,,"7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}",,,,"7797712345"],[,,"80(?:07(?:35|81)|8901)\\d{4}",,,,"8007354567"],[,,"(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}",,,,"9018105678"],[,,,,,,,,,[-1]],[,,"701511\\d{4}",,,,"7015115678"],[,,"56\\d{8}",,,,"5612345678"],"JE",44,"00","0",,,"0|([0-24-8]\\d{5})$","1534$1",,,,,[,,"76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[139])\\d{6}",,,,"7640123456"],,,[,,,,,,,,,[-1]],[,,"(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}",,,,"5512345678"],,,[,,,,,,,,,[-1]]],JM:[,[,,"(?:[58]\\d\\d|658|900)\\d{7}",,,,,,,[10],[7]],[,,"8766060\\d{3}|(?:658(?:2(?:[0-8]\\d|9[0-46-9])|[3-9]\\d\\d)|876(?:52[35]|6(?:0[1-3579]|1[0237-9]|[23]\\d|40|5[06]|6[2-589]|7[05]|8[04]|9[4-9])|7(?:0[2-689]|[1-6]\\d|8[056]|9[45])|9(?:0[1-8]|1[02378]|[2-8]\\d|9[2-468])))\\d{4}",,,,"8765230123",,,,[7]],[,,"(?:658295|876(?:2(?:0[6-9]|[14-9]\\d|2[013-9]|3[7-9])|[348]\\d\\d|5(?:0[1-9]|[1-9]\\d)|6(?:4[89]|6[67])|7(?:0[07]|7\\d|8[1-47-9]|9[0-36-9])|9(?:[01]9|9[0579])))\\d{4}",,,,"8762101234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"JM",1,"011","1",,,"1",,,,,,[,,,,,,,,,[-1]],,"658|876",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],JO:[,[,,"(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",,,,,,,[8,9]],[,,"87(?:000|90[01])\\d{3}|(?:2(?:6(?:2[0-35-9]|3[0-578]|4[24-7]|5[0-24-8]|[6-8][023]|9[0-3])|7(?:0[1-79]|10|2[014-7]|3[0-689]|4[019]|5[0-3578]))|32(?:0[1-69]|1[1-35-7]|2[024-7]|3\\d|4[0-3]|[5-7][023])|53(?:0[0-3]|[13][023]|2[0-59]|49|5[0-35-9]|6[15]|7[45]|8[1-6]|9[0-36-9])|6(?:2(?:[05]0|22)|3(?:00|33)|4(?:0[0-25]|1[2-7]|2[0569]|[38][07-9]|4[025689]|6[0-589]|7\\d|9[0-2])|5(?:[01][056]|2[034]|3[0-57-9]|4[178]|5[0-69]|6[0-35-9]|7[1-379]|8[0-68]|9[0239]))|87(?:20|7[078]|99))\\d{4}",,,,"62001234",,,[8]],[,,"7(?:[78][0-25-9]|9\\d)\\d{6}",,,,"790123456",,,[9]],[,,"80\\d{6}",,,,"80012345",,,[8]],[,,"9\\d{7}",,,,"90012345",,,[8]],[,,"85\\d{6}",,,,"85012345",,,[8]],[,,"70\\d{7}",,,,"700123456",,,[9]],[,,,,,,,,,[-1]],"JO",962,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],[,"(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],,[,,"74(?:66|77)\\d{5}",,,,"746612345",,,[9]],,,[,,,,,,,,,[-1]],[,,"8(?:10|8\\d)\\d{5}",,,,"88101234",,,[8]],,,[,,,,,,,,,[-1]]],JP:[,[,,"00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",,,,,,,[8,9,10,11,12,13,14,15,16,17]],[,,"(?:1(?:1[235-8]|2[3-6]|3[3-9]|4[2-6]|[58][2-8]|6[2-7]|7[2-9]|9[1-9])|(?:2[2-9]|[36][1-9])\\d|4(?:[2-578]\\d|6[02-8]|9[2-59])|5(?:[2-589]\\d|6[1-9]|7[2-8])|7(?:[25-9]\\d|3[4-9]|4[02-9])|8(?:[2679]\\d|3[2-9]|4[5-9]|5[1-9]|8[03-9])|9(?:[2-58]\\d|[679][1-9]))\\d{6}",,,,"312345678",,,[9]],[,,"[7-9]0[1-9]\\d{7}",,,,"9012345678",,,[10]],[,,"00777(?:[01]|5\\d)\\d\\d|(?:00(?:7778|882[1245])|(?:120|800\\d)\\d\\d)\\d{4}|00(?:37|66|78)\\d{6,13}",,,,"120123456"],[,,"990\\d{6}",,,,"990123456",,,[9]],[,,,,,,,,,[-1]],[,,"60\\d{7}",,,,"601234567",,,[9]],[,,"50[1-9]\\d{7}",,,,"5012345678",,,[10]],"JP",81,"010","0",,,"0",,,,[[,"(\\d{4})(\\d{4})","$1-$2",["007","0077","00777","00777[01]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],[,"(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9]|636)|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9]|636[457-9])|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[27-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|51|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],[,"(\\d{4})(\\d{2})(\\d{3,4})","$1-$2-$3",["007","0077"]],[,"(\\d{4})(\\d{2})(\\d{4})","$1-$2-$3",["008"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{4})(\\d{4,5})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{5})(\\d{5,6})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{6})(\\d{6,7})","$1-$2-$3",["0"]]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],[,"(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9]|636)|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9]|636[457-9])|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[27-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|51|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],[,,"20\\d{8}",,,,"2012345678",,,[10]],,,[,,"00(?:777(?:[01]|(?:5|8\\d)\\d)|882[1245]\\d\\d)\\d\\d|00(?:37|66|78)\\d{6,13}"],[,,"570\\d{6}",,,,"570123456",,,[9]],,,[,,,,,,,,,[-1]]],KE:[,[,,"(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",,,,,,,[7,8,9,10]],[,,"(?:4[245]|5[1-79]|6[01457-9])\\d{5,7}|(?:4[136]|5[08]|62)\\d{7}|(?:[24]0|66)\\d{6,7}",,,,"202012345",,,[7,8,9]],[,,"(?:1(?:0[0-6]|1[0-5]|2[014])|7\\d\\d)\\d{6}",,,,"712123456",,,[9]],[,,"800[24-8]\\d{5,6}",,,,"800223456",,,[9,10]],[,,"900[02-9]\\d{5}",,,,"900223456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KE",254,"000","0",,,"0",,,,[[,"(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KG:[,[,,"8\\d{9}|(?:[235-8]\\d|99)\\d{7}",,,,,,,[9,10],[5,6]],[,,"312(?:5[0-79]\\d|9(?:[0-689]\\d|7[0-24-9]))\\d{3}|(?:3(?:1(?:2[0-46-8]|3[1-9]|47|[56]\\d)|2(?:22|3[0-479]|6[0-7])|4(?:22|5[6-9]|6\\d)|5(?:22|3[4-7]|59|6\\d)|6(?:22|5[35-7]|6\\d)|7(?:22|3[468]|4[1-9]|59|[67]\\d)|9(?:22|4[1-8]|6\\d))|6(?:09|12|2[2-4])\\d)\\d{5}",,,,"312123456",,,[9],[5,6]],[,,"312(?:58\\d|973)\\d{3}|(?:2(?:0[0-35]|2\\d)|5[0-24-7]\\d|7(?:[07]\\d|55)|880|99[05-9])\\d{6}",,,,"700123456",,,[9]],[,,"800\\d{6,7}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KG",996,"00","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],[,"(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KH:[,[,,"1\\d{9}|[1-9]\\d{7,8}",,,,,,,[8,9,10],[6,7]],[,,"23(?:4(?:[2-4]|[56]\\d)|[568]\\d\\d)\\d{4}|23[236-9]\\d{5}|(?:2[4-6]|3[2-6]|4[2-4]|[5-7][2-5])(?:(?:[237-9]|4[56]|5\\d)\\d{5}|6\\d{5,6})",,,,"23756789",,,[8,9],[6,7]],[,,"(?:(?:1[28]|3[18]|9[67])\\d|6[016-9]|7(?:[07-9]|[16]\\d)|8(?:[013-79]|8\\d))\\d{6}|(?:1\\d|9[0-57-9])\\d{6}|(?:2[3-6]|3[2-6]|4[2-4]|[5-7][2-5])48\\d{5}",,,,"91234567",,,[8,9]],[,,"1800(?:1\\d|2[019])\\d{4}",,,,"1800123456",,,[10]],[,,"1900(?:1\\d|2[09])\\d{4}",,,,"1900123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KH",855,"00[14-9]","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KI:[,[,,"(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",,,,,,,[5,8]],[,,"(?:[24]\\d|3[1-9]|50|65(?:02[12]|12[56]|22[89]|[3-5]00)|7(?:27\\d\\d|3100|5(?:02[12]|12[56]|22[89]|[34](?:00|81)|500))|8[0-5])\\d{3}",,,,"31234"],[,,"(?:63\\d{3}|73(?:0[0-5]\\d|140))\\d{3}|[67]200[01]\\d{3}",,,,"72001234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"30(?:0[01]\\d\\d|12(?:11|20))\\d\\d",,,,"30010000",,,[8]],"KI",686,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KM:[,[,,"[3478]\\d{6}",,,,,,,[7],[4]],[,,"7[4-7]\\d{5}",,,,"7712345",,,,[4]],[,,"[34]\\d{6}",,,,"3212345"],[,,,,,,,,,[-1]],[,,"8\\d{6}",,,,"8001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KM",269,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KN:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"869(?:2(?:29|36)|302|4(?:6[015-9]|70)|56[5-7])\\d{4}",,,,"8692361234",,,,[7]],[,,"869(?:48[89]|55[6-8]|66\\d|76[02-7])\\d{4}",,,,"8697652917",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"KN",1,"011","1",,,"1|([2-7]\\d{6})$","869$1",,,,,[,,,,,,,,,[-1]],,"869",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KP:[,[,,"85\\d{6}|(?:19\\d|[2-7])\\d{7}",,,,,,,[8,10],[6,7]],[,,"(?:(?:195|2)\\d|3[19]|4[159]|5[37]|6[17]|7[39]|85)\\d{6}",,,,"21234567",,,,[6,7]],[,,"19[1-3]\\d{7}",,,,"1921234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KP",850,"00|99","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"238[02-9]\\d{4}|2(?:[0-24-9]\\d|3[0-79])\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KR:[,[,,"00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",,,,,,,[5,6,8,9,10,11,12,13,14],[3,4,7]],[,,"(?:2|3[1-3]|[46][1-4]|5[1-5])[1-9]\\d{6,7}|(?:3[1-3]|[46][1-4]|5[1-5])1\\d{2,3}",,,,"22123456",,,[5,6,8,9,10],[3,4,7]],[,,"1(?:05(?:[0-8]\\d|9[0-6])|22[13]\\d)\\d{4,5}|1(?:0[1-46-9]|[16-9]\\d|2[013-9])\\d{6,7}",,,,"1020000000",,,[9,10]],[,,"00(?:308\\d{6,7}|798\\d{7,9})|(?:00368|80)\\d{7}",,,,"801234567",,,[9,11,12,13,14]],[,,"60[2-9]\\d{6}",,,,"602345678",,,[9]],[,,,,,,,,,[-1]],[,,"50\\d{8,9}",,,,"5012345678",,,[10,11]],[,,"70\\d{8}",,,,"7012345678",,,[10]],"KR",82,"00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","0",,,"0(8(?:[1-46-8]|5\\d\\d))?",,,,[[,"(\\d{5})","$1",["1[016-9]1","1[016-9]11","1[016-9]114"],"0$1"],[,"(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1","0$CC-$1"],[,"(\\d{4})(\\d{4})","$1-$2",["1"]],[,"(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1","0$CC-$1"],[,"(\\d{5})(\\d{3})(\\d{3})","$1 $2 $3",["003","0030"]],[,"(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1","0$CC-$1"],[,"(\\d{5})(\\d{3,4})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{5})(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],[[,"(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1","0$CC-$1"],[,"(\\d{4})(\\d{4})","$1-$2",["1"]],[,"(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1","0$CC-$1"]],[,,"15\\d{7,8}",,,,"1523456789",,,[9,10]],,,[,,"00(?:3(?:08\\d{6,7}|68\\d{7})|798\\d{7,9})",,,,,,,[11,12,13,14]],[,,"1(?:5(?:22|44|66|77|88|99)|6(?:[07]0|44|6[16]|88)|8(?:00|33|55|77|99))\\d{4}",,,,"15441234",,,[8]],,,[,,,,,,,,,[-1]]],KW:[,[,,"(?:18|[2569]\\d\\d)\\d{5}",,,,,,,[7,8]],[,,"2(?:[23]\\d\\d|4(?:[1-35-9]\\d|44)|5(?:0[034]|[2-46]\\d|5[1-3]|7[1-7]))\\d{4}",,,,"22345678",,,[8]],[,,"(?:5(?:2(?:22|5[25])|88[58])|6(?:222|333|444|70[013-9]|888|93[039])|9(?:11[01]|3(?:00|33)|500))\\d{4}|(?:5(?:[05]\\d|1[0-7]|6[56])|6(?:0[034679]|5[015-9]|6\\d|7[67]|9[069])|9(?:0[09]|22|[4679]\\d|55|8[057-9]))\\d{5}",,,,"50012345",,,[8]],[,,"18\\d{5}",,,,"1801234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KW",965,"00",,,,,,,,[[,"(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],[,"(\\d{3})(\\d{5})","$1 $2",["[25]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KY:[,[,,"(?:345|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"345(?:2(?:22|3[23]|44|66)|333|444|6(?:23|38|40)|7(?:30|4[35-79]|6[6-9]|77)|8(?:00|1[45]|25|[48]8)|9(?:14|4[035-9]))\\d{4}",,,,"3452221234",,,,[7]],[,,"345(?:32[1-9]|42[0-4]|5(?:1[67]|2[5-79]|4[6-9]|50|76)|649|9(?:1[679]|2[2-9]|3[06-9]|90))\\d{4}",,,,"3453231234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"(?:345976|900[2-9]\\d\\d)\\d{4}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"KY",1,"011","1",,,"1|([2-9]\\d{6})$","345$1",,,,,[,,"345849\\d{4}",,,,"3458491234"],,"345",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KZ:[,[,,"33622\\d{5}|(?:7\\d|80)\\d{8}",,,,,,,[10],[5,6,7]],[,,"(?:33622|7(?:1(?:0(?:[23]\\d|4[0-3]|59|63)|1(?:[23]\\d|4[0-79]|59)|2(?:[23]\\d|59)|3(?:2\\d|3[0-79]|4[0-35-9]|59)|4(?:[24]\\d|3[013-9]|5[1-9])|5(?:2\\d|3[1-9]|4[0-7]|59)|6(?:[2-4]\\d|5[19]|61)|72\\d|8(?:[27]\\d|3[1-46-9]|4[0-5]))|2(?:1(?:[23]\\d|4[46-9]|5[3469])|2(?:2\\d|3[0679]|46|5[12679])|3(?:[2-4]\\d|5[139])|4(?:2\\d|3[1-35-9]|59)|5(?:[23]\\d|4[0-246-8]|59|61)|6(?:2\\d|3[1-9]|4[0-4]|59)|7(?:[2379]\\d|40|5[279])|8(?:[23]\\d|4[0-3]|59)|9(?:2\\d|3[124578]|59))))\\d{5}",,,,"7123456789",,,,[5,6,7]],[,,"7(?:0[0-25-8]|47|6[0-4]|7[15-8]|85)\\d{7}",,,,"7710009998"],[,,"800\\d{7}",,,,"8001234567"],[,,"809\\d{7}",,,,"8091234567"],[,,,,,,,,,[-1]],[,,"808\\d{7}",,,,"8081234567"],[,,"751\\d{7}",,,,"7511234567"],"KZ",7,"810","8",,,"8",,"8~10",,,,[,,,,,,,,,[-1]],,"33|7",[,,"751\\d{7}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LA:[,[,,"[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",,,,,,,[8,9,10],[6]],[,,"(?:2[13]|[35-7][14]|41|8[1468])\\d{6}",,,,"21212862",,,[8],[6]],[,,"(?:20(?:[239]\\d|5[24-9]|7[6-8])|302\\d)\\d{6}",,,,"2023123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LA",856,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"30[013-9]\\d{6}",,,,"301234567",,,[9]],,,[,,,,,,,,,[-1]]],LB:[,[,,"[27-9]\\d{7}|[13-9]\\d{6}",,,,,,,[7,8]],[,,"7(?:62|8[0-7]|9[04-9])\\d{4}|(?:[14-69]\\d|2(?:[14-69]\\d|[78][1-9])|7[2-57]|8[02-9])\\d{5}",,,,"1123456"],[,,"793(?:[01]\\d|2[0-4])\\d{3}|(?:(?:3|81)\\d|7(?:[01]\\d|6[013-9]|8[89]|9[12]))\\d{5}",,,,"71123456"],[,,,,,,,,,[-1]],[,,"9[01]\\d{6}",,,,"90123456",,,[8]],[,,"80\\d{6}",,,,"80123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LB",961,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LC:[,[,,"(?:[58]\\d\\d|758|900)\\d{7}",,,,,,,[10],[7]],[,,"758(?:234|4(?:30|5\\d|6[2-9]|8[0-2])|57[0-2]|(?:63|75)8)\\d{4}",,,,"7584305678",,,,[7]],[,,"758(?:28[4-7]|384|4(?:6[01]|8[4-9])|5(?:1[89]|20|84)|7(?:1[2-9]|2\\d|3[0-3])|812)\\d{4}",,,,"7582845678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"LC",1,"011","1",,,"1|([2-8]\\d{6})$","758$1",,,,,[,,,,,,,,,[-1]],,"758",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LI:[,[,,"90\\d{5}|(?:[2378]|6\\d\\d)\\d{6}",,,,,,,[7,9]],[,,"(?:2(?:01|1[27]|2[02]|3\\d|6[02-578]|96)|3(?:[24]0|33|7[0135-7]|8[048]|9[0269]))\\d{4}",,,,"2345678",,,[7]],[,,"(?:6(?:4(?:69|[7-9]\\d)|5[0-4]\\d|6(?:[024]\\d|[17]0|3[7-9]))\\d|7(?:[37-9]\\d|42|56))\\d{4}",,,,"660234567"],[,,"80(?:02[28]|9\\d\\d)\\d\\d",,,,"8002222",,,[7]],[,,"90(?:02[258]|1(?:23|3[14])|66[136])\\d\\d",,,,"9002222",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LI",423,"00","0",,,"0|(1001)",,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[237-9]"],,"$CC $1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"870(?:28|87)\\d\\d",,,,"8702812",,,[7]],,,[,,"697(?:42|56|[78]\\d)\\d{4}",,,,"697861234",,,[9]]],LK:[,[,,"[1-9]\\d{8}",,,,,,,[9],[7]],[,,"(?:12[2-9]|602|8[12]\\d|9(?:1\\d|22|9[245]))\\d{6}|(?:11|2[13-7]|3[1-8]|4[157]|5[12457]|6[35-7])[2-57]\\d{6}",,,,"112345678",,,,[7]],[,,"7(?:[0-25-8]\\d|4[01])\\d{6}",,,,"712345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LK",94,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"1973\\d{5}",,,,"197312345"],,,[,,,,,,,,,[-1]]],LR:[,[,,"(?:2|33|5\\d|77|88)\\d{7}|[4-6]\\d{6}",,,,,,,[7,8,9]],[,,"(?:2\\d{3}|33333)\\d{4}",,,,"21234567",,,[8,9]],[,,"(?:(?:330|555|(?:77|88)\\d)\\d|4[67])\\d{5}|[56]\\d{6}",,,,"770123456",,,[7,9]],[,,,,,,,,,[-1]],[,,"332(?:02|[34]\\d)\\d{4}",,,,"332021234",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LR",231,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3578]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LS:[,[,,"(?:[256]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"2\\d{7}",,,,"22123456"],[,,"[56]\\d{7}",,,,"50123456"],[,,"800[256]\\d{4}",,,,"80021234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LS",266,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2568]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LT:[,[,,"(?:[3469]\\d|52|[78]0)\\d{6}",,,,,,,[8]],[,,"(?:3[1478]|4[124-6]|52)\\d{6}",,,,"31234567"],[,,"6\\d{7}",,,,"61234567"],[,,"80[02]\\d{5}",,,,"80012345"],[,,"9(?:0[0239]|10)\\d{5}",,,,"90012345"],[,,"808\\d{5}",,,,"80812345"],[,,"70[05]\\d{5}",,,,"70012345"],[,,"[89]01\\d{5}",,,,"80123456"],"LT",370,"00","8",,,"[08]",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",,1],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",,1],[,"(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",,1],[,"(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",,1]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"70[67]\\d{5}",,,,"70712345"],,,[,,,,,,,,,[-1]]],LU:[,[,,"35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",,,,,,,[4,5,6,7,8,9,10,11]],[,,"(?:35[013-9]|80[2-9]|90[89])\\d{1,8}|(?:2[2-9]|3[0-46-9]|[457]\\d|8[13-9]|9[2-579])\\d{2,9}",,,,"27123456"],[,,"6(?:[269][18]|5[1568]|7[189]|81)\\d{6}",,,,"628123456",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"90[015]\\d{5}",,,,"90012345",,,[8]],[,,"801\\d{5}",,,,"80112345",,,[8]],[,,,,,,,,,[-1]],[,,"20(?:1\\d{5}|[2-689]\\d{1,7})",,,,"20201234",,,[4,5,6,7,8,9,10]],"LU",352,"00",,,,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)",,,,[[,"(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"],,"$CC $1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LV:[,[,,"(?:[268]\\d|90)\\d{6}",,,,,,,[8]],[,,"6\\d{7}",,,,"63123456"],[,,"2\\d{7}",,,,"21234567"],[,,"80\\d{6}",,,,"80123456"],[,,"90\\d{6}",,,,"90123456"],[,,"81\\d{6}",,,,"81123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LV",371,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LY:[,[,,"[2-9]\\d{8}",,,,,,,[9],[7]],[,,"(?:2(?:0[56]|[1-6]\\d|7[124579]|8[124])|3(?:1\\d|2[2356])|4(?:[17]\\d|2[1-357]|5[2-4]|8[124])|5(?:[1347]\\d|2[1-469]|5[13-5]|8[1-4])|6(?:[1-479]\\d|5[2-57]|8[1-5])|7(?:[13]\\d|2[13-79])|8(?:[124]\\d|5[124]|84))\\d{6}",,,,"212345678",,,,[7]],[,,"9[1-6]\\d{7}",,,,"912345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LY",218,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MA:[,[,,"[5-8]\\d{8}",,,,,,,[9]],[,,"5(?:29(?:[189][05]|2[29]|3[01])|38[89][05])\\d{4}|5(?:2(?:[0-25-7]\\d|3[1-578]|4[02-46-8]|8[0235-7]|90)|3(?:[0-47]\\d|5[02-9]|6[02-8]|80|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}",,,,"520123456"],[,,"(?:6(?:[0-79]\\d|8[0-247-9])|7(?:0\\d|1[0-2]|6[1267]|7[0-57]))\\d{6}",,,,"650123456"],[,,"80\\d{7}",,,,"801234567"],[,,"89\\d{7}",,,,"891234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"592(?:4[0-2]|93)\\d{4}",,,,"592401234"],"MA",212,"00","0",,,"0",,,,[[,"(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29|38)[89]","5(?:29|38)[89]0"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],[,"(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],[,"(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],[,"(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],,[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MC:[,[,,"(?:[3489]|6\\d)\\d{7}",,,,,,,[8,9]],[,,"(?:870|9[2-47-9]\\d)\\d{5}",,,,"99123456",,,[8]],[,,"4(?:[46]\\d|5[1-9])\\d{5}|(?:3|6\\d)\\d{7}",,,,"612345678"],[,,"(?:800|90\\d)\\d{5}",,,,"90123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MC",377,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["87"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"8[07]0\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MD:[,[,,"(?:[235-7]\\d|[89]0)\\d{6}",,,,,,,[8]],[,,"(?:(?:2[1-9]|3[1-79])\\d|5(?:33|5[257]))\\d{5}",,,,"22212345"],[,,"562\\d{5}|(?:6\\d|7[16-9])\\d{6}",,,,"62112345"],[,,"800\\d{5}",,,,"80012345"],[,,"90[056]\\d{5}",,,,"90012345"],[,,"808\\d{5}",,,,"80812345"],[,,,,,,,,,[-1]],[,,"3[08]\\d{6}",,,,"30123456"],"MD",373,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"803\\d{5}",,,,"80312345"],,,[,,,,,,,,,[-1]]],ME:[,[,,"(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",,,,,,,[8,9],[6]],[,,"(?:20[2-8]|3(?:[0-2][2-7]|3[24-7])|4(?:0[2-467]|1[2467])|5(?:0[2467]|1[24-7]|2[2-467]))\\d{5}",,,,"30234567",,,[8],[6]],[,,"6(?:[07-9]\\d|3[024]|6[0-25])\\d{5}",,,,"67622901",,,[8]],[,,"80(?:[0-2578]|9\\d)\\d{5}",,,,"80080002"],[,,"9(?:4[1568]|5[178])\\d{5}",,,,"94515151",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"78[1-49]\\d{5}",,,,"78108780",,,[8]],"ME",382,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"77[1-9]\\d{5}",,,,"77273012",,,[8]],,,[,,,,,,,,,[-1]]],MF:[,[,,"(?:590|(?:69|80)\\d|976)\\d{6}",,,,,,,[9]],[,,"590(?:0[079]|[14]3|[27][79]|30|5[0-268]|87)\\d{4}",,,,"590271234"],[,,"69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}",,,,"690001234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976[01]\\d{5}",,,,"976012345"],"MF",590,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MG:[,[,,"[23]\\d{8}",,,,,,,[9],[7]],[,,"2072[29]\\d{4}|20(?:2\\d|4[47]|5[3467]|6[279]|7[35]|8[268]|9[245])\\d{5}",,,,"202123456",,,,[7]],[,,"3[2-49]\\d{7}",,,,"321234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"22\\d{7}",,,,"221234567"],"MG",261,"00","0",,,"0|([24-9]\\d{6})$","20$1",,,[[,"(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MH:[,[,,"329\\d{4}|(?:[256]\\d|45)\\d{5}",,,,,,,[7]],[,,"(?:247|528|625)\\d{4}",,,,"2471234"],[,,"(?:(?:23|54)5|329|45[56])\\d{4}",,,,"2351234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"635\\d{4}",,,,"6351234"],"MH",692,"011","1",,,"1",,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MK:[,[,,"[2-578]\\d{7}",,,,,,,[8],[6,7]],[,,"(?:2(?:[23]\\d|5[0-24578]|6[01]|82)|3(?:1[3-68]|[23][2-68]|4[23568])|4(?:[23][2-68]|4[3-68]|5[2568]|6[25-8]|7[24-68]|8[4-68]))\\d{5}",,,,"22012345",,,,[6,7]],[,,"7(?:3555|4(?:60\\d|747)|94(?:[01]\\d|2[0-4]))\\d{3}|7(?:[0-25-8]\\d|3[2-4]|42|9[23])\\d{5}",,,,"72345678"],[,,"800\\d{5}",,,,"80012345"],[,,"5[02-9]\\d{6}",,,,"50012345"],[,,"8(?:0[1-9]|[1-9]\\d)\\d{5}",,,,"80123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MK",389,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],[,"(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ML:[,[,,"[24-9]\\d{7}",,,,,,,[8]],[,,"2(?:07[0-8]|12[67])\\d{4}|(?:2(?:02|1[4-689])|4(?:0[0-4]|4[1-39]))\\d{5}",,,,"20212345"],[,,"2(?:0(?:01|79)|17\\d)\\d{4}|(?:5[01]|[679]\\d|8[239])\\d{6}",,,,"65012345"],[,,"80\\d{6}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ML",223,"00",,,,,,,,[[,"(\\d{4})","$1",["67[057-9]|74[045]","67(?:0[09]|[59]9|77|8[89])|74(?:0[02]|44|55)"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]],[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]],[,,,,,,,,,[-1]],,,[,,"80\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MM:[,[,,"1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",,,,,,,[6,7,8,9,10],[5]],[,,"(?:1(?:(?:2\\d|3[56]|[89][0-6])\\d|4(?:2[2-469]|39|46|6[25]|7[0-3]|83)|6)|2(?:2(?:00|8[34])|4(?:0\\d|2[246]|39|46|62|7[0-3]|83)|51\\d\\d)|4(?:2(?:2\\d\\d|48[0-3])|3(?:20\\d|4(?:70|83)|56)|420\\d|5470)|6(?:0(?:[23]|88\\d)|(?:124|[56]2\\d)\\d|247[23]|3(?:20\\d|470)|4(?:2[04]\\d|47[23])|7(?:(?:3\\d|8[01459])\\d|4(?:39|60|7[013]))))\\d{4}|5(?:2(?:2\\d{5,6}|47[023]\\d{4})|(?:347[23]|4(?:2(?:1|86)|470)|522\\d|6(?:20\\d|483)|7(?:20\\d|48[0-2])|8(?:20\\d|47[02])|9(?:20\\d|47[01]))\\d{4})|7(?:(?:0470|4(?:25\\d|470)|5(?:202|470|96\\d))\\d{4}|1(?:20\\d{4,5}|4(?:70|83)\\d{4}))|8(?:1(?:2\\d{5,6}|4(?:10|7[01]\\d)\\d{3})|2(?:2\\d{5,6}|(?:320|490\\d)\\d{3})|(?:3(?:2\\d\\d|470)|4[24-7]|5(?:2\\d|4[1-9]|51)\\d|6[23])\\d{4})|(?:1[2-6]\\d|4(?:2[24-8]|3[2-7]|[46][2-6]|5[3-5])|5(?:[27][2-8]|3[2-68]|4[24-8]|5[23]|6[2-4]|8[24-7]|9[2-7])|6(?:[19]20|42[03-6]|(?:52|7[45])\\d)|7(?:[04][24-8]|[15][2-7]|22|3[2-4])|8(?:1[2-689]|2[2-8]|[35]2\\d))\\d{4}|25\\d{5,6}|(?:2[2-9]|6(?:1[2356]|[24][2-6]|3[24-6]|5[2-4]|6[2-8]|7[235-7]|8[245]|9[24])|8(?:3[24]|5[245]))\\d{4}",,,,"1234567",,,[6,7,8,9],[5]],[,,"(?:17[01]|9(?:2(?:[0-4]|[56]\\d\\d)|(?:3(?:[0-36]|4\\d)|(?:6\\d|8[89]|9[4-8])\\d|7(?:3|40|[5-9]\\d))\\d|4(?:(?:[0245]\\d|[1379])\\d|88)|5[0-6])\\d)\\d{4}|9[69]1\\d{6}|9(?:[68]\\d|9[089])\\d{5}",,,,"92123456",,,[7,8,9,10]],[,,"80080(?:[01][1-9]|2\\d)\\d{3}",,,,"8008001234",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"1333\\d{4}|[12]468\\d{4}",,,,"13331234",,,[8]],"MM",95,"00","0",,,"0",,,,[[,"(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],[,"(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],[,"(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MN:[,[,,"[12]\\d{7,9}|[57-9]\\d{7}",,,,,,,[8,9,10],[4,5,6]],[,,"[12]2[1-3]\\d{5,6}|7(?:0[0-5]\\d|128)\\d{4}|(?:[12](?:1|27)|5[368])\\d{6}|[12](?:3[2-8]|4[2-68]|5[1-4689])\\d{6,7}",,,,"53123456",,,,[4,5,6]],[,,"(?:83[01]|920)\\d{5}|(?:5[05]|8[05689]|9[013-9])\\d{6}",,,,"88123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"712[0-79]\\d{4}|7(?:1[013-9]|[5-8]\\d)\\d{5}",,,,"75123456",,,[8]],"MN",976,"001","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],[,"(\\d{4})(\\d{4})","$1 $2",["[57-9]"]],[,"(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],[,"(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],[,"(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MO:[,[,,"(?:28|[68]\\d)\\d{6}",,,,,,,[8]],[,,"(?:28[2-9]|8(?:11|[2-57-9]\\d))\\d{5}",,,,"28212345"],[,,"6800[0-79]\\d{3}|6(?:[235]\\d\\d|6(?:0[0-5]|[1-9]\\d)|8(?:0[1-9]|[14-8]\\d|2[5-9]|[39][0-4]))\\d{4}",,,,"66123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MO",853,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[268]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MP:[,[,,"[58]\\d{9}|(?:67|90)0\\d{7}",,,,,,,[10],[7]],[,,"670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",,,,"6702345678",,,,[7]],[,,"670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",,,,"6702345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"MP",1,"011","1",,,"1|([2-9]\\d{6})$","670$1",,1,,,[,,,,,,,,,[-1]],,"670",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MQ:[,[,,"(?:69|80)\\d{7}|(?:59|97)6\\d{6}",,,,,,,[9]],[,,"596(?:0[0-8]|10|2[7-9]|3[04-9]|[4-7]\\d|8[09]|9[4-9])\\d{4}",,,,"596301234"],[,,"69(?:6(?:[0-46-9]\\d|5[0-6])|727)\\d{4}",,,,"696201234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976(?:6\\d|7[0-367])\\d{4}",,,,"976612345"],"MQ",596,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MR:[,[,,"(?:[2-4]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"(?:25[08]|35\\d|45[1-7])\\d{5}",,,,"35123456"],[,,"[2-4][0-46-9]\\d{6}",,,,"22123456"],[,,"800\\d{5}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MR",222,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MS:[,[,,"(?:[58]\\d\\d|664|900)\\d{7}",,,,,,,[10],[7]],[,,"6644(?:1[0-3]|91)\\d{4}",,,,"6644912345",,,,[7]],[,,"664(?:3(?:49|9[1-6])|49[2-6])\\d{4}",,,,"6644923456",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"MS",1,"011","1",,,"1|([34]\\d{6})$","664$1",,,,,[,,,,,,,,,[-1]],,"664",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MT:[,[,,"3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"2(?:0(?:[19]\\d|3[1-4]|6[059])|[1-357]\\d\\d)\\d{4}",,,,"21001234"],[,,"(?:7(?:210|[79]\\d\\d)|9(?:[29]\\d\\d|69[67]|8(?:1[1-3]|89|97)))\\d{4}",,,,"96961234"],[,,"800[3467]\\d{4}",,,,"80071234"],[,,"5(?:0(?:0(?:37|43)|(?:6\\d|70|9[0168])\\d)|[12]\\d0[1-5])\\d{3}",,,,"50037123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3550\\d{4}",,,,"35501234"],"MT",356,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]],,[,,"7117\\d{4}",,,,"71171234"],,,[,,,,,,,,,[-1]],[,,"501\\d{5}",,,,"50112345"],,,[,,,,,,,,,[-1]]],MU:[,[,,"(?:[2-468]|5\\d)\\d{6}",,,,,,,[7,8]],[,,"(?:2(?:[0346-8]\\d|1[0-7])|4(?:[013568]\\d|2[4-7])|54(?:[3-5]\\d|71)|6\\d\\d|8(?:14|3[129]))\\d{4}",,,,"54480123"],[,,"5(?:4(?:2[1-389]|7[1-9])|87[15-8])\\d{4}|5(?:2[5-9]|4[3-589]|[57]\\d|8[0-689]|9[0-8])\\d{5}",,,,"52512345",,,[8]],[,,"80[0-2]\\d{4}",,,,"8001234",,,[7]],[,,"30\\d{5}",,,,"3012345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3(?:20|9\\d)\\d{4}",,,,"3201234",,,[7]],"MU",230,"0(?:0|[24-7]0|3[03])",,,,,,"020",,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],[,"(\\d{4})(\\d{4})","$1 $2",["5"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MV:[,[,,"(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",,,,,,,[7,10]],[,,"(?:3(?:0[0-3]|3[0-59])|6(?:[57][02468]|6[024-68]|8[024689]))\\d{4}",,,,"6701234",,,[7]],[,,"46[46]\\d{4}|(?:7\\d|9[13-9])\\d{5}",,,,"7712345",,,[7]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MV",960,"0(?:0|19)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1-$2",["[3467]|9[13-9]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"4[05]0\\d{4}",,,,"4001234",,,[7]],,,[,,,,,,,,,[-1]]],MW:[,[,,"1\\d{6}(?:\\d{2})?|(?:[23]1|77|88|99)\\d{7}",,,,,,,[7,9]],[,,"(?:1[2-9]|21\\d\\d)\\d{5}",,,,"1234567"],[,,"111\\d{6}|(?:31|77|88|99)\\d{7}",,,,"991234567",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MW",265,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MX:[,[,,"(?:1(?:[01467]\\d|[2359][1-9]|8[1-79])|[2-9]\\d)\\d{8}",,,,,,,[10,11],[7,8]],[,,"(?:2(?:0[01]|2[1-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[24-7][1-9]|3[1-8]|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1-467][1-9]|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69][1-9]|7[12]|8[1-8]))\\d{7}",,,,"2001234567",,,[10],[7,8]],[,,"(?:1(?:2(?:2[1-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[24-7][1-9]|3[1-8]|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1-467][1-9]|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69][1-9]|7[12]|8[1-8]))|2(?:2[1-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[24-7][1-9]|3[1-8]|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1-467][1-9]|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69][1-9]|7[12]|8[1-8]))\\d{7}",,,,"12221234567",,,,[7,8]],[,,"8(?:00|88)\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,"300\\d{7}",,,,"3001234567",,,[10]],[,,"500\\d{7}",,,,"5001234567",,,[10]],[,,,,,,,,,[-1]],"MX",52,"0[09]","01",,,"0(?:[12]|4[45])|1",,"00",,[[,"(\\d{5})","$1",["53"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],,,1],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],,,1],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],,,1]],[[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],,,1],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],,,1],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],,,1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MY:[,[,,"1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",,,,,,,[8,9,10],[6,7]],[,,"(?:3(?:2[0-36-9]|3[0-368]|4[0-278]|5[0-24-8]|6[0-467]|7[1246-9]|8\\d|9[0-57])\\d|4(?:2[0-689]|[3-79]\\d|8[1-35689])|5(?:2[0-589]|[3468]\\d|5[0-489]|7[1-9]|9[23])|6(?:2[2-9]|3[1357-9]|[46]\\d|5[0-6]|7[0-35-9]|85|9[015-8])|7(?:[2579]\\d|3[03-68]|4[0-8]|6[5-9]|8[0-35-9])|8(?:[24][2-8]|3[2-5]|5[2-7]|6[2-589]|7[2-578]|[89][2-9])|9(?:0[57]|13|[25-7]\\d|[3489][0-8]))\\d{5}",,,,"323856789",,,[8,9],[6,7]],[,,"1(?:1888[69]|4400|8(?:47|8[27])[0-4])\\d{4}|1(?:0(?:[23568]\\d|4[0-6]|7[016-9]|9[0-8])|1(?:[1-5]\\d\\d|6(?:0[5-9]|[1-9]\\d)|7(?:[0134]\\d|2[1-9]|5[0-6]))|(?:(?:[269]|59)\\d|[37][1-9]|4[235-9])\\d|8(?:1[23]|[236]\\d|4[06]|5[7-9]|7[016-9]|8[01]|9[0-8]))\\d{5}",,,,"123456789",,,[9,10]],[,,"1[378]00\\d{6}",,,,"1300123456",,,[10]],[,,"1600\\d{6}",,,,"1600123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"15(?:4(?:6[0-4]\\d|8(?:0[125]|[17]\\d|21|3[01]|4[01589]|5[014]|6[02]))|6(?:32[0-6]|78\\d))\\d{4}",,,,"1546012345",,,[10]],"MY",60,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9])|8"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1[36-8]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MZ:[,[,,"(?:2|8\\d)\\d{7}",,,,,,,[8,9]],[,,"2(?:[1346]\\d|5[0-2]|[78][12]|93)\\d{5}",,,,"21123456",,,[8]],[,,"8[2-79]\\d{7}",,,,"821234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MZ",258,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NA:[,[,,"[68]\\d{7,8}",,,,,,,[8,9]],[,,"64426\\d{3}|6(?:1(?:2[2-7]|3[01378]|4[0-4])|254|32[0237]|4(?:27|41|5[25])|52[236-8]|626|7(?:2[2-4]|30))\\d{4,5}|6(?:1(?:(?:0\\d|2[0189]|3[24-69]|4[5-9])\\d|17|69|7[014])|2(?:17|5[0-36-8]|69|70)|3(?:17|2[14-689]|34|6[289]|7[01]|81)|4(?:17|2[0-2]|4[06]|5[0137]|69|7[01])|5(?:17|2[0459]|69|7[01])|6(?:17|25|38|42|69|7[01])|7(?:17|2[569]|3[13]|6[89]|7[01]))\\d{4}",,,,"61221234"],[,,"(?:60|8[1245])\\d{7}",,,,"811234567",,,[9]],[,,"80\\d{7}",,,,"800123456",,,[9]],[,,"8701\\d{5}",,,,"870123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"8(?:3\\d\\d|86)\\d{5}",,,,"88612345"],"NA",264,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NC:[,[,,"[2-57-9]\\d{5}",,,,,,,[6]],[,,"(?:2[03-9]|3[0-5]|4[1-7]|88)\\d{4}",,,,"201234"],[,,"(?:5[0-4]|[79]\\d|8[0-79])\\d{4}",,,,"751234"],[,,,,,,,,,[-1]],[,,"36\\d{4}",,,,"366711"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NC",687,"00",,,,,,,,[[,"(\\d{3})","$1",["5[6-8]"]],[,"(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[2-57-9]"]]],[[,"(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[2-57-9]"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NE:[,[,,"[027-9]\\d{7}",,,,,,,[8]],[,,"2(?:0(?:20|3[1-8]|4[13-5]|5[14]|6[14578]|7[1-578])|1(?:4[145]|5[14]|6[14-68]|7[169]|88))\\d{4}",,,,"20201234"],[,,"(?:23|7[04]|[89]\\d)\\d{6}",,,,"93123456"],[,,"08\\d{6}",,,,"08123456"],[,,"09\\d{6}",,,,"09123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NE",227,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[04]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NF:[,[,,"[13]\\d{5}",,,,,,,[6],[5]],[,,"(?:1(?:06|17|28|39)|3[0-2]\\d)\\d{3}",,,,"106609",,,,[5]],[,,"(?:14|3[58])\\d{4}",,,,"381234",,,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NF",672,"00",,,,"([0-258]\\d{4})$","3$1",,,[[,"(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],[,"(\\d)(\\d{5})","$1 $2",["[13]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NG:[,[,,"(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",,,,,,,[7,8,10,11,12,13,14],[5,6]],[,,"(?:(?:[1-356]\\d|4[02-8]|8[2-9])\\d|9(?:0[3-9]|[1-9]\\d))\\d{5}|7(?:0(?:[013-689]\\d|2[0-24-9])\\d{3,4}|[1-79]\\d{6})|(?:[12]\\d|4[147]|5[14579]|6[1578]|7[1-3578])\\d{5}",,,,"18040123",,,[7,8],[5,6]],[,,"(?:702[0-24-9]|8(?:01|19)[01])\\d{6}|(?:70[13-689]|8(?:0[2-9]|1[0-8])|9(?:0[1-9]|1[235]))\\d{7}",,,,"8021234567",,,[10]],[,,"800\\d{7,11}",,,,"80017591759",,,[10,11,12,13,14]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NG",234,"009","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],[,"(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"700\\d{7,11}",,,,"7001234567",,,[10,11,12,13,14]],,,[,,,,,,,,,[-1]]],NI:[,[,,"(?:1800|[25-8]\\d{3})\\d{4}",,,,,,,[8]],[,,"2\\d{7}",,,,"21234567"],[,,"(?:5(?:5[0-7]|[78]\\d)|6(?:20|3[035]|4[045]|5[05]|77|8[1-9]|9[059])|(?:7[5-8]|8\\d)\\d)\\d{5}",,,,"81234567"],[,,"1800\\d{4}",,,,"18001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NI",505,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NL:[,[,,"(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|[89]\\d{6,9}|1\\d{4,5}",,,,,,,[5,6,7,8,9,10]],[,,"(?:1(?:[035]\\d|1[13-578]|6[124-8]|7[24]|8[0-467])|2(?:[0346]\\d|2[2-46-9]|5[125]|9[479])|3(?:[03568]\\d|1[3-8]|2[01]|4[1-8])|4(?:[0356]\\d|1[1-368]|7[58]|8[15-8]|9[23579])|5(?:[0358]\\d|[19][1-9]|2[1-57-9]|4[13-8]|6[126]|7[0-3578])|7\\d\\d)\\d{6}",,,,"101234567",,,[9]],[,,"6[1-58]\\d{7}",,,,"612345678",,,[9]],[,,"800\\d{4,7}",,,,"8001234",,,[7,8,9,10]],[,,"90[069]\\d{4,7}",,,,"9061234",,,[7,8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:85|91)\\d{7}",,,,"851234567",,,[9]],"NL",31,"00","0",,,"0",,,,[[,"(\\d{4})","$1",["1[238]|[34]"]],[,"(\\d{2})(\\d{3,4})","$1 $2",["14"]],[,"(\\d{6})","$1",["1"]],[,"(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],[,"(\\d)(\\d{8})","$1 $2",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-57-9]"],"0$1"]],[[,"(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],[,"(\\d)(\\d{8})","$1 $2",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-57-9]"],"0$1"]],[,,"66\\d{7}",,,,"662345678",,,[9]],,,[,,"140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)\\d",,,,,,,[5,6]],[,,"140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|(?:140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)|8[478]\\d{6})\\d",,,,"14020",,,[5,6,9]],,,[,,,,,,,,,[-1]]],NO:[,[,,"(?:0|[2-9]\\d{3})\\d{4}",,,,,,,[5,8]],[,,"(?:2[1-4]|3[1-3578]|5[1-35-7]|6[1-4679]|7[0-8])\\d{6}",,,,"21234567",,,[8]],[,,"(?:4[015-8]|59|9\\d)\\d{6}",,,,"40612345",,,[8]],[,,"80[01]\\d{5}",,,,"80012345",,,[8]],[,,"82[09]\\d{5}",,,,"82012345",,,[8]],[,,"810(?:0[0-6]|[2-8]\\d)\\d{3}",,,,"81021234",,,[8]],[,,"880\\d{5}",,,,"88012345",,,[8]],[,,"85[0-5]\\d{5}",,,,"85012345",,,[8]],"NO",47,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[489]|59"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],,[,,,,,,,,,[-1]],1,"[02-689]|7[0-8]",[,,,,,,,,,[-1]],[,,"(?:0[2-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}",,,,"02000"],,,[,,"81[23]\\d{5}",,,,"81212345",,,[8]]],NP:[,[,,"(?:1\\d|9)\\d{9}|[1-9]\\d{7}",,,,,,,[8,10,11],[6,7]],[,,"(?:1[0-6]\\d|99[02-6])\\d{5}|(?:2[13-79]|3[135-8]|4[146-9]|5[135-7]|6[13-9]|7[15-9]|8[1-46-9]|9[1-7])[2-6]\\d{5}",,,,"14567890",,,[8],[6,7]],[,,"9(?:6[0-3]|7[245]|8[0-24-68])\\d{7}",,,,"9841234567",,,[10]],[,,"1(?:66001|800\\d\\d)\\d{5}",,,,"16600101234",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NP",977,"00","0",,,"0",,,,[[,"(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],[,"(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-579]|6[2-6])"],"0$1"],[,"(\\d{3})(\\d{7})","$1-$2",["9"]],[,"(\\d{4})(\\d{2})(\\d{5})","$1-$2-$3",["1"]]],[[,"(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],[,"(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-579]|6[2-6])"],"0$1"],[,"(\\d{3})(\\d{7})","$1-$2",["9"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NR:[,[,,"(?:444|(?:55|8\\d)\\d|666)\\d{4}",,,,,,,[7]],[,,"444\\d{4}",,,,"4441234"],[,,"(?:55[3-9]|666|8\\d\\d)\\d{4}",,,,"5551234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NR",674,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NU:[,[,,"(?:[47]|888\\d)\\d{3}",,,,,,,[4,7]],[,,"[47]\\d{3}",,,,"7012",,,[4]],[,,"888[4-9]\\d{3}",,,,"8884012",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NU",683,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NZ:[,[,,"[29]\\d{7,9}|50\\d{5}(?:\\d{2,3})?|6[0-35-9]\\d{6}|7\\d{7,8}|8\\d{4,9}|(?:11\\d|[34])\\d{7}",,,,,,,[5,6,7,8,9,10]],[,,"24099\\d{3}|(?:3[2-79]|[49][2-9]|6[235-9]|7[2-57-9])\\d{6}",,,,"32345678",,,[8],[7]],[,,"2[0-27-9]\\d{7,8}|21\\d{6}",,,,"211234567",,,[8,9,10]],[,,"508\\d{6,7}|80\\d{6,8}",,,,"800123456",,,[8,9,10]],[,,"(?:11\\d{5}|50(?:0[08]|30|66|77|88))\\d{3}|90\\d{6,8}",,,,"900123456",,,[7,8,9,10]],[,,,,,,,,,[-1]],[,,"70\\d{7}",,,,"701234567",,,[9]],[,,,,,,,,,[-1]],"NZ",64,"0(?:0|161)","0",,,"0",,"00",,[[,"(\\d{2})(\\d{3,8})","$1 $2",["8[1-579]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|[89]0","50(?:[0367]|88)|[89]0"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[59]|80"],"0$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7|86"],"0$1"]],,[,,"[28]6\\d{6,7}",,,,"26123456",,,[8,9]],,,[,,,,,,,,,[-1]],[,,"8(?:1[6-9]|22|3\\d|4[045]|5[459]|7[0-3579]|90)\\d{2,7}",,,,"83012378"],,,[,,,,,,,,,[-1]]],OM:[,[,,"(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",,,,,,,[7,8,9]],[,,"2[2-6]\\d{6}",,,,"23123456",,,[8]],[,,"(?:1505|90[1-9]\\d)\\d{4}|(?:7[1289]|9[1-9])\\d{6}",,,,"92123456",,,[8]],[,,"8007\\d{4,5}|(?:500|800[05])\\d{4}",,,,"80071234"],[,,"900\\d{5}",,,,"90012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"OM",968,"00",,,,,,,,[[,"(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],[,"(\\d{2})(\\d{6})","$1 $2",["2"]],[,"(\\d{4})(\\d{4})","$1 $2",["[179]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PA:[,[,,"8\\d{9}|[68]\\d{7}|[1-57-9]\\d{6}",,,,,,,[7,8,10]],[,,"(?:1(?:0\\d|1[479]|2[37]|3[0137]|4[17]|5[05]|6[58]|7[0167]|8[258]|9[139])|2(?:[0235-79]\\d|1[0-7]|4[013-9]|8[026-9])|3(?:[089]\\d|1[014-7]|2[0-5]|33|4[0-79]|55|6[068]|7[03-8])|4(?:00|3[0-579]|4\\d|7[0-57-9])|5(?:[01]\\d|2[0-7]|[56]0|79)|7(?:0[09]|2[0-26-8]|3[03]|4[04]|5[05-9]|6[056]|7[0-24-9]|8[6-9]|90)|8(?:09|2[89]|3\\d|4[0-24-689]|5[014]|8[02])|9(?:0[5-9]|1[0135-8]|2[036-9]|3[35-79]|40|5[0457-9]|6[05-9]|7[04-9]|8[35-8]|9\\d))\\d{4}",,,,"2001234",,,[7]],[,,"(?:1[16]1|21[89]|6(?:[02-9]\\d|1[0-8])\\d|8(?:1[01]|7[23]))\\d{4}",,,,"61234567",,,[7,8]],[,,"800\\d{4}(?:\\d(?:\\d{2})?)?",,,,"8001234"],[,,"(?:8(?:22|55|60|7[78]|86)|9(?:00|81))\\d{4}",,,,"8601234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PA",507,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],[,"(\\d{4})(\\d{4})","$1-$2",["[68]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PE:[,[,,"(?:[14-8]|9\\d)\\d{7}",,,,,,,[8,9],[6,7]],[,,"(?:(?:4[34]|5[14])[0-8]\\d|7(?:173|3[0-8]\\d)|8(?:10[05689]|6(?:0[06-9]|1[6-9]|29)|7(?:0[569]|[56]0)))\\d{4}|(?:1[0-8]|4[12]|5[236]|6[1-7]|7[246]|8[2-4])\\d{6}",,,,"11234567",,,[8],[6,7]],[,,"9\\d{8}",,,,"912345678",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"805\\d{5}",,,,"80512345",,,[8]],[,,"801\\d{5}",,,,"80112345",,,[8]],[,,"80[24]\\d{5}",,,,"80212345",,,[8]],[,,,,,,,,,[-1]],"PE",51,"19(?:1[124]|77|90)00","0"," Anexo ",,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],[,"(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PF:[,[,,"4\\d{5}(?:\\d{2})?|8\\d{7,8}",,,,,,,[6,8,9]],[,,"4(?:0[4-689]|9[4-68])\\d{5}",,,,"40412345",,,[8]],[,,"8[7-9]\\d{6}",,,,"87123456",,,[8]],[,,"80[0-5]\\d{6}",,,,"800012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"499\\d{5}",,,,"49901234",,,[8]],"PF",689,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]],,[,,,,,,,,,[-1]],,,[,,"44\\d{4}",,,,,,,[6]],[,,"44\\d{4}",,,,"440123",,,[6]],,,[,,,,,,,,,[-1]]],PG:[,[,,"(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",,,,,,,[7,8]],[,,"(?:(?:3[0-2]|4[257]|5[34]|9[78])\\d|64[1-9]|85[02-46-9])\\d{4}",,,,"3123456",,,[7]],[,,"(?:7\\d|8[18])\\d{6}",,,,"70123456",,,[8]],[,,"180\\d{4}",,,,"1801234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"2(?:0[0-47]|7[568])\\d{4}",,,,"2751234",,,[7]],"PG",675,"00|140[1-3]",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],[,"(\\d{4})(\\d{4})","$1 $2",["[78]"]]],,[,,"27[01]\\d{4}",,,,"2700123",,,[7]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PH:[,[,,"(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",,,,,,,[6,8,9,10,11,12,13],[4,5,7]],[,,"(?:(?:2[3-8]|3[2-68]|4[2-9]|5[2-6]|6[2-58]|7[24578])\\d{3}|88(?:22\\d\\d|42))\\d{4}|(?:2|8[2-8]\\d\\d)\\d{5}",,,,"232345678",,,[6,8,9,10],[4,5,7]],[,,"(?:8(?:1[37]|9[5-8])|9(?:0[5-9]|1[0-24-9]|[2357]\\d|4[2-9]|6[0-35-9]|8[189]|9[1-9]))\\d{7}",,,,"9051234567",,,[10]],[,,"1800\\d{7,9}",,,,"180012345678",,,[11,12,13]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PH",63,"00","0",,,"0",,,,[[,"(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],[,"(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],[,"(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PK:[,[,,"122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",,,,,,,[8,9,10,11,12],[5,6,7]],[,,"(?:(?:21|42)[2-9]|58[126])\\d{7}|(?:2[25]|4[0146-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]\\d{6,7}|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8]))[2-9]\\d{5,6}",,,,"2123456789",,,[9,10],[5,6,7,8]],[,,"3(?:[014]\\d|2[0-5]|3[0-7]|55|64)\\d{7}",,,,"3012345678",,,[10]],[,,"800\\d{5}(?:\\d{3})?",,,,"80012345",,,[8,11]],[,,"900\\d{5}",,,,"90012345",,,[8]],[,,,,,,,,,[-1]],[,,"122\\d{6}",,,,"122044444",,,[9]],[,,,,,,,,,[-1]],"PK",92,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],[,"(\\d{4})(\\d{5})","$1 $2",["1"]],[,"(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],[,"(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],[,"(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],[,"(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:2(?:[125]|3[2358]|4[2-4]|9[2-8])|4(?:[0-246-9]|5[3479])|5(?:[1-35-7]|4[2-467])|6(?:0[468]|[1-8])|7(?:[14]|2[236])|8(?:[16]|2[2-689]|3[23578]|4[3478]|5[2356])|9(?:1|22|3[27-9]|4[2-6]|6[3569]|9[2-7]))111\\d{6}",,,,"21111825888",,,[11,12]],,,[,,,,,,,,,[-1]]],PL:[,[,,"6\\d{5}(?:\\d{2})?|8\\d{9}|[1-9]\\d{6}(?:\\d{2})?",,,,,,,[6,7,8,9,10]],[,,"47\\d{7}|(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])(?:[02-9]\\d{6}|1(?:[0-8]\\d{5}|9\\d{3}(?:\\d{2})?))",,,,"123456789",,,[7,9]],[,,"(?:45|5[0137]|6[069]|7[2389]|88)\\d{7}",,,,"512345678",,,[9]],[,,"800\\d{6,7}",,,,"800123456",,,[9,10]],[,,"70[01346-8]\\d{6}",,,,"701234567",,,[9]],[,,"801\\d{6}",,,,"801234567",,,[9]],[,,,,,,,,,[-1]],[,,"39\\d{7}",,,,"391234567",,,[9]],"PL",48,"00",,,,,,,,[[,"(\\d{5})","$1",["19"]],[,"(\\d{3})(\\d{3})","$1 $2",["11|64"]],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]],,[,,"64\\d{4,7}",,,,"641234567",,,[6,7,8,9]],,,[,,,,,,,,,[-1]],[,,"804\\d{6}",,,,"804123456",,,[9]],,,[,,,,,,,,,[-1]]],PM:[,[,,"(?:[45]|80\\d\\d)\\d{5}",,,,,,,[6,9]],[,,"(?:4[1-3]|50)\\d{4}",,,,"430123",,,[6]],[,,"(?:4[02-4]|5[05])\\d{4}",,,,"551234",,,[6]],[,,"80[0-5]\\d{6}",,,,"800012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PM",508,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PR:[,[,,"(?:[589]\\d\\d|787)\\d{7}",,,,,,,[10],[7]],[,,"(?:787|939)[2-9]\\d{6}",,,,"7872345678",,,,[7]],[,,"(?:787|939)[2-9]\\d{6}",,,,"7872345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"PR",1,"011","1",,,"1",,,1,,,[,,,,,,,,,[-1]],,"787|939",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PS:[,[,,"[2489]2\\d{6}|(?:1\\d|5)\\d{8}",,,,,,,[8,9,10],[7]],[,,"(?:22[2-47-9]|42[45]|82[014-68]|92[3569])\\d{5}",,,,"22234567",,,[8],[7]],[,,"5[69]\\d{7}",,,,"599123456",,,[9]],[,,"1800\\d{6}",,,,"1800123456",,,[10]],[,,,,,,,,,[-1]],[,,"1700\\d{6}",,,,"1700123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PS",970,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PT:[,[,,"1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",,,,,,,[9]],[,,"2(?:[12]\\d|[35][1-689]|4[1-59]|6[1-35689]|7[1-9]|8[1-69]|9[1256])\\d{6}",,,,"212345678"],[,,"6[0356]92(?:30|9\\d)\\d{3}|(?:(?:16|6[0356])93|9(?:[1-36]\\d\\d|480))\\d{5}",,,,"912345678"],[,,"80[02]\\d{6}",,,,"800123456"],[,,"(?:6(?:0[178]|4[68])\\d|76(?:0[1-57]|1[2-47]|2[237]))\\d{5}",,,,"760123456"],[,,"80(?:8\\d|9[1579])\\d{5}",,,,"808123456"],[,,"884[0-4689]\\d{5}",,,,"884123456"],[,,"30\\d{7}",,,,"301234567"],"PT",351,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"70(?:7\\d|8[17])\\d{5}",,,,"707123456"],,,[,,"600\\d{6}",,,,"600110000"]],PW:[,[,,"(?:[24-8]\\d\\d|345|900)\\d{4}",,,,,,,[7]],[,,"(?:2(?:55|77)|345|488|5(?:35|44|87)|6(?:22|54|79)|7(?:33|47)|8(?:24|55|76)|900)\\d{4}",,,,"2771234"],[,,"(?:46[0-5]|6[2-4689]0)\\d{4}|(?:45|77|88)\\d{5}",,,,"6201234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PW",680,"01[12]",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PY:[,[,,"59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",,,,,,,[6,7,8,9,10,11],[5]],[,,"(?:[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36])\\d{5,7}|(?:2(?:2[4-68]|[4-68]\\d|7[15]|9[1-5])|3(?:18|3[167]|4[2357]|51|[67]\\d)|4(?:3[12]|5[13]|9[1-47])|5(?:[1-4]\\d|5[02-4])|6(?:3[1-3]|44|7[1-8])|7(?:4[0-4]|5\\d|6[1-578]|75|8[0-8])|858)\\d{5,6}",,,,"212345678",,,[7,8,9],[5,6]],[,,"9(?:51|6[129]|[78][1-6]|9[1-5])\\d{6}",,,,"961456789",,,[9]],[,,"9800\\d{5,7}",,,,"98000123456",,,[9,10,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"8700[0-4]\\d{4}",,,,"870012345",,,[9]],"PY",595,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],[,"(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],[,"(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],[,"(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-6])"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"[2-9]0\\d{4,7}",,,,"201234567",,,[6,7,8,9]],,,[,,,,,,,,,[-1]]],QA:[,[,,"[2-7]\\d{7}|(?:2\\d\\d|800)\\d{4}",,,,,,,[7,8]],[,,"4141\\d{4}|(?:23|4[04])\\d{6}",,,,"44123456",,,[8]],[,,"(?:28|[35-7]\\d)\\d{6}",,,,"33123456",,,[8]],[,,"800\\d{4}",,,,"8001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"QA",974,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["2[126]|8"]],[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]"]]],,[,,"2(?:[12]\\d|61)\\d{4}",,,,"2123456",,,[7]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RE:[,[,,"9769\\d{5}|(?:26|[68]\\d)\\d{7}",,,,,,,[9]],[,,"26(?:2\\d\\d|30[0-5])\\d{4}",,,,"262161234"],[,,"(?:69(?:2\\d\\d|3(?:[06][0-46]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-27]|8[0-8]|9[0-479]))|9769\\d)\\d{4}",,,,"692123456"],[,,"80\\d{7}",,,,"801234567"],[,,"89[1-37-9]\\d{6}",,,,"891123456"],[,,"8(?:1[019]|2[0156]|84|90)\\d{6}",,,,"810123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RE",262,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],,[,,,,,,,,,[-1]],1,"26[23]|69|[89]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RO:[,[,,"(?:[237]\\d|[89]0)\\d{7}|[23]\\d{5}",,,,,,,[6,9]],[,,"[23][13-6]\\d{7}|(?:2(?:19\\d|[3-6]\\d9)|31\\d\\d)\\d\\d",,,,"211234567"],[,,"7[01]20\\d{5}|7(?:0[013-9]|1[01]|[2-7]\\d|8[03-8]|9[09])\\d{6}",,,,"712034567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"90[0136]\\d{6}",,,,"900123456",,,[9]],[,,"801\\d{6}",,,,"801123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RO",40,"00","0"," int ",,"0",,,,[[,"(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],[,"(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:37\\d|80[578])\\d{6}",,,,"372123456",,,[9]],,,[,,,,,,,,,[-1]]],RS:[,[,,"38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",,,,,,,[6,7,8,9,10,11,12],[4,5]],[,,"(?:11[1-9]\\d|(?:2[389]|39)(?:0[2-9]|[2-9]\\d))\\d{3,8}|(?:1[02-9]|2[0-24-7]|3[0-8])[2-9]\\d{4,9}",,,,"10234567",,,[7,8,9,10,11,12],[4,5,6]],[,,"6(?:[0-689]|7\\d)\\d{6,7}",,,,"601234567",,,[8,9,10]],[,,"800\\d{3,9}",,,,"80012345"],[,,"(?:78\\d|90[0169])\\d{3,7}",,,,"90012345",,,[6,7,8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RS",381,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],[,"(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"7[06]\\d{4,10}",,,,"700123456"],,,[,,,,,,,,,[-1]]],RU:[,[,,"[347-9]\\d{9}",,,,,,,[10],[7]],[,,"(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15]|6[1-35-79]|7[1-37-9]))\\d{7}",,,,"3011234567",,,,[7]],[,,"9\\d{9}",,,,"9123456789"],[,,"80[04]\\d{7}",,,,"8001234567"],[,,"80[39]\\d{7}",,,,"8091234567"],[,,,,,,,,,[-1]],[,,"808\\d{7}",,,,"8081234567"],[,,,,,,,,,[-1]],"RU",7,"810","8",,,"8",,"8~10",,[[,"(\\d{3})(\\d{2})(\\d{2})","$1-$2-$3",["[0-79]"]],[,"(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",,1],[,"(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[3489]"],"8 ($1)",,1]],[[,"(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",,1],[,"(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[3489]"],"8 ($1)",,1]],[,,,,,,,,,[-1]],1,"3[04-689]|[489]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RW:[,[,,"(?:06|[27]\\d\\d|[89]00)\\d{6}",,,,,,,[8,9]],[,,"(?:06|2[23568]\\d)\\d{6}",,,,"250123456"],[,,"7[2389]\\d{7}",,,,"720123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"900\\d{6}",,,,"900123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RW",250,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SA:[,[,,"92\\d{7}|(?:[15]|8\\d)\\d{8}",,,,,,,[9,10],[7]],[,,"1(?:1\\d|2[24-8]|3[35-8]|4[3-68]|6[2-5]|7[235-7])\\d{6}",,,,"112345678",,,[9],[7]],[,,"579[01]\\d{5}|5(?:[013-689]\\d|7[0-36-8])\\d{6}",,,,"512345678",,,[9]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"925\\d{6}",,,,"925012345",,,[9]],[,,"920\\d{6}",,,,"920012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SA",966,"00","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["9"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"811\\d{7}",,,,"8110123456",,,[10]],,,[,,,,,,,,,[-1]]],SB:[,[,,"(?:[1-6]|[7-9]\\d\\d)\\d{4}",,,,,,,[5,7]],[,,"(?:1[4-79]|[23]\\d|4[0-2]|5[03]|6[0-37])\\d{3}",,,,"40123",,,[5]],[,,"48\\d{3}|(?:(?:7[1-9]|8[4-9])\\d|9(?:1[2-9]|2[013-9]|3[0-2]|[46]\\d|5[0-46-9]|7[0-689]|8[0-79]|9[0-8]))\\d{4}",,,,"7421234"],[,,"1[38]\\d{3}",,,,"18123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[12]\\d{3}",,,,"51123",,,[5]],"SB",677,"0[01]",,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SC:[,[,,"8000\\d{3}|(?:[249]\\d|64)\\d{5}",,,,,,,[7]],[,,"4[2-46]\\d{5}",,,,"4217123"],[,,"2[5-8]\\d{5}",,,,"2510123"],[,,"8000\\d{3}",,,,"8000000"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"971\\d{4}|(?:64|95)\\d{5}",,,,"6412345"],"SC",248,"010|0[0-2]",,,,,,"00",,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SD:[,[,,"[19]\\d{8}",,,,,,,[9]],[,,"1(?:5\\d|8[35-7])\\d{6}",,,,"153123456"],[,,"(?:1[0-2]|9[0-3569])\\d{7}",,,,"911231234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SD",249,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SE:[,[,,"(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",,,,,,,[6,7,8,9,10,12]],[,,"(?:(?:[12][136]|3[356]|4[0246]|6[03]|8\\d)\\d|90[1-9])\\d{4,6}|(?:1(?:2[0-35]|4[0-4]|5[0-25-9]|7[13-6]|[89]\\d)|2(?:2[0-7]|4[0136-8]|5[0138]|7[018]|8[01]|9[0-57])|3(?:0[0-4]|1\\d|2[0-25]|4[056]|7[0-2]|8[0-3]|9[023])|4(?:1[013-8]|3[0135]|5[14-79]|7[0-246-9]|8[0156]|9[0-689])|5(?:0[0-6]|[15][0-5]|2[0-68]|3[0-4]|4\\d|6[03-5]|7[013]|8[0-79]|9[01])|6(?:1[1-3]|2[0-4]|4[02-57]|5[0-37]|6[0-3]|7[0-2]|8[0247]|9[0-356])|9(?:1[0-68]|2\\d|3[02-5]|4[0-3]|5[0-4]|[68][01]|7[0135-8]))\\d{5,6}",,,,"8123456",,,[7,8,9]],[,,"7[02369]\\d{7}",,,,"701234567",,,[9]],[,,"20\\d{4,7}",,,,"20123456",,,[6,7,8,9]],[,,"649\\d{6}|9(?:00|39|44)[1-8]\\d{3,6}",,,,"9001234567",,,[7,8,9,10]],[,,"77[0-7]\\d{6}",,,,"771234567",,,[9]],[,,"75[1-8]\\d{6}",,,,"751234567",,,[9]],[,,,,,,,,,[-1]],"SE",46,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1"],[,"(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44)"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1"],[,"(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1"],[,"(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1"],[,"(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1"],[,"(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1"]],[[,"(\\d{2})(\\d{2,3})(\\d{2})","$1 $2 $3",["20"]],[,"(\\d{3})(\\d{4})","$1 $2",["9(?:00|39|44)"]],[,"(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"]],[,"(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{3})(\\d{2,3})(\\d{2})","$1 $2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"]],[,"(\\d{3})(\\d{2,3})(\\d{3})","$1 $2 $3",["9(?:00|39|44)"]],[,"(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["10|7"]],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["9"]],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]"]]],[,,"74[02-9]\\d{6}",,,,"740123456",,,[9]],,,[,,,,,,,,,[-1]],[,,"10[1-8]\\d{6}",,,,"102345678",,,[9]],,,[,,"(?:25[245]|67[3-68])\\d{9}",,,,"254123456789",,,[12]]],SG:[,[,,"(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",,,,,,,[8,10,11]],[,,"662[0-24-9]\\d{4}|6(?:[1-578]\\d|6[013-57-9]|9[0-35-9])\\d{5}",,,,"61234567",,,[8]],[,,"(?:8(?:0(?:[13]\\d|2[013-9]|4[01])|[1-8]\\d\\d|9(?:[0-4]\\d|5[0-2]))|9[0-8]\\d\\d)\\d{4}",,,,"81234567",,,[8]],[,,"(?:18|8)00\\d{7}",,,,"18001234567",,,[10,11]],[,,"1900\\d{7}",,,,"19001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:3[12]\\d|666)\\d{5}",,,,"31234567",,,[8]],"SG",65,"0[0-3]\\d",,,,,,,,[[,"(\\d{4,5})","$1",["1[013-9]|77","1(?:[013-8]|9(?:0[1-9]|[1-9]))|77"]],[,"(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-4]|[1-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],[[,"(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-4]|[1-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"7000\\d{7}",,,,"70001234567",,,[11]],,,[,,,,,,,,,[-1]]],SH:[,[,,"(?:[256]\\d|8)\\d{3}",,,,,,,[4,5]],[,,"2(?:[0-57-9]\\d|6[4-9])\\d\\d",,,,"22158"],[,,"[56]\\d{4}",,,,"51234",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"262\\d\\d",,,,"26212",,,[5]],"SH",290,"00",,,,,,,,,,[,,,,,,,,,[-1]],1,"[256]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SI:[,[,,"[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",,,,,,,[5,6,7,8]],[,,"(?:[1-357][2-8]|4[24-8])\\d{6}",,,,"12345678",,,[8],[7]],[,,"65(?:1\\d|55|[67]0)\\d{4}|(?:[37][01]|4[0139]|51|6[489])\\d{6}",,,,"31234567",,,[8]],[,,"80\\d{4,6}",,,,"80123456",,,[6,7,8]],[,,"89[1-3]\\d{2,5}|90\\d{4,6}",,,,"90123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:59\\d\\d|8(?:1(?:[67]\\d|8[0-489])|2(?:0\\d|2[0-37-9]|8[0-2489])|3[389]\\d))\\d{4}",,,,"59012345",,,[8]],"SI",386,"00|10(?:22|66|88|99)","0",,,"0",,"00",,[[,"(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],[,"(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SJ:[,[,,"0\\d{4}|(?:[489]\\d|[57]9)\\d{6}",,,,,,,[5,8]],[,,"79\\d{6}",,,,"79123456",,,[8]],[,,"(?:4[015-8]|59|9\\d)\\d{6}",,,,"41234567",,,[8]],[,,"80[01]\\d{5}",,,,"80012345",,,[8]],[,,"82[09]\\d{5}",,,,"82012345",,,[8]],[,,"810(?:0[0-6]|[2-8]\\d)\\d{3}",,,,"81021234",,,[8]],[,,"880\\d{5}",,,,"88012345",,,[8]],[,,"85[0-5]\\d{5}",,,,"85012345",,,[8]],"SJ",47,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"79",[,,,,,,,,,[-1]],[,,"(?:0[2-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}",,,,"02000"],,,[,,"81[23]\\d{5}",,,,"81212345",,,[8]]],SK:[,[,,"[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",,,,,,,[6,7,9]],[,,"(?:2(?:16|[2-9]\\d{3})|(?:(?:[3-5][1-8]\\d|819)\\d|601[1-5])\\d)\\d{4}|(?:2|[3-5][1-8])1[67]\\d{3}|[3-5][1-8]16\\d\\d",,,,"221234567"],[,,"909[1-9]\\d{5}|9(?:0[1-8]|1[0-24-9]|4[03-57-9]|5\\d)\\d{6}",,,,"912123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"9(?:00|[78]\\d)\\d{6}",,,,"900123456",,,[9]],[,,"8[5-9]\\d{7}",,,,"850123456",,,[9]],[,,,,,,,,,[-1]],[,,"6(?:02|5[0-4]|9[0-6])\\d{6}",,,,"690123456",,,[9]],"SK",421,"00","0",,,"0",,,,[[,"(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],[,"(\\d{4})(\\d{3})","$1 $2",["909","9090"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],[[,"(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],[,,"9090\\d{3}",,,,"9090123",,,[7]],,,[,,"9090\\d{3}|(?:602|8(?:00|[5-9]\\d)|9(?:00|[78]\\d))\\d{6}",,,,,,,[7,9]],[,,"96\\d{7}",,,,"961234567",,,[9]],,,[,,,,,,,,,[-1]]],SL:[,[,,"(?:[237-9]\\d|66)\\d{6}",,,,,,,[8],[6]],[,,"22[2-4][2-9]\\d{4}",,,,"22221234",,,,[6]],[,,"(?:25|3[0-5]|66|7[3-9]|8[08]|9[09])\\d{6}",,,,"25123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SL",232,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SM:[,[,,"(?:0549|[5-7]\\d)\\d{6}",,,,,,,[8,10],[6]],[,,"0549(?:8[0157-9]|9\\d)\\d{4}",,,,"0549886377",,,[10],[6]],[,,"6[16]\\d{6}",,,,"66661212",,,[8]],[,,,,,,,,,[-1]],[,,"7[178]\\d{6}",,,,"71123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[158]\\d{6}",,,,"58001110",,,[8]],"SM",378,"00",,,,"([89]\\d{5})$","0549$1",,,[[,"(\\d{6})","$1",["[89]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],[,"(\\d{4})(\\d{6})","$1 $2",["0"]]],[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],[,"(\\d{4})(\\d{6})","$1 $2",["0"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SN:[,[,,"(?:[378]\\d{4}|93330)\\d{4}",,,,,,,[9]],[,,"3(?:0(?:1[0-2]|80)|282|3(?:8[1-9]|9[3-9])|611)\\d{5}",,,,"301012345"],[,,"7(?:[06-8]\\d|21|5[4-7]|90)\\d{6}",,,,"701234567"],[,,"800\\d{6}",,,,"800123456"],[,,"88[4689]\\d{6}",,,,"884123456"],[,,"81[02468]\\d{6}",,,,"810123456"],[,,,,,,,,,[-1]],[,,"93330\\d{4}|3(?:392|9[01]\\d)\\d{5}",,,,"933301234"],"SN",221,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SO:[,[,,"[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",,,,,,,[6,7,8,9]],[,,"(?:1\\d|2[0-79]|3[0-46-8]|4[0-7]|5[57-9])\\d{5}|(?:[134]\\d|8[125])\\d{4}",,,,"4012345",,,[6,7]],[,,"28\\d{5}|(?:6[1-9]|79)\\d{6,7}|(?:15|24|(?:3[59]|4[89]|8[08])\\d|60|7[1-8]|9(?:0\\d|[2-9]))\\d{6}",,,,"71123456",,,[7,8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SO",252,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{4})","$1 $2",["8[125]"]],[,"(\\d{6})","$1",["[134]"]],[,"(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],[,"(\\d)(\\d{7})","$1 $2",["24|[67]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3478]|64|90"]],[,"(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[1-35-9]|9[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SR:[,[,,"(?:[2-5]|68|[78]\\d)\\d{5}",,,,,,,[6,7]],[,,"(?:2[1-3]|3[0-7]|(?:4|68)\\d|5[2-58])\\d{4}",,,,"211234"],[,,"(?:7[124-7]|8[124-9])\\d{5}",,,,"7412345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"56\\d{4}",,,,"561234",,,[6]],"SR",597,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],[,"(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],[,"(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SS:[,[,,"[19]\\d{8}",,,,,,,[9]],[,,"1[89]\\d{7}",,,,"181234567"],[,,"(?:12|9[1257-9])\\d{7}",,,,"977123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SS",211,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ST:[,[,,"(?:22|9\\d)\\d{5}",,,,,,,[7]],[,,"22\\d{5}",,,,"2221234"],[,,"900[5-9]\\d{3}|9(?:0[1-9]|[89]\\d)\\d{4}",,,,"9812345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ST",239,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[29]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SV:[,[,,"[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",,,,,,,[7,8,11]],[,,"2(?:[1-6]\\d{3}|[79]90[034]|890[0245])\\d{3}",,,,"21234567",,,[8]],[,,"66(?:[02-9]\\d\\d|1(?:[02-9]\\d|16))\\d{3}|(?:6[0-57-9]|7\\d)\\d{6}",,,,"70123456",,,[8]],[,,"800\\d{4}(?:\\d{4})?",,,,"8001234",,,[7,11]],[,,"900\\d{4}(?:\\d{4})?",,,,"9001234",,,[7,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SV",503,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[89]"]],[,"(\\d{4})(\\d{4})","$1 $2",["[267]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SX:[,[,,"7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"7215(?:4[2-8]|8[239]|9[056])\\d{4}",,,,"7215425678",,,,[7]],[,,"7215(?:1[02]|2\\d|5[034679]|8[014-8])\\d{4}",,,,"7215205678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"SX",1,"011","1",,,"1|(5\\d{6})$","721$1",,,,,[,,,,,,,,,[-1]],,"721",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SY:[,[,,"[1-39]\\d{8}|[1-5]\\d{7}",,,,,,,[8,9],[6,7]],[,,"21\\d{6,7}|(?:1(?:[14]\\d|[2356])|2[235]|3(?:[13]\\d|4)|4[134]|5[1-3])\\d{6}",,,,"112345678",,,,[6,7]],[,,"9(?:22|[3-589]\\d|6[02-9])\\d{6}",,,,"944567890",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SY",963,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",,1]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SZ:[,[,,"0800\\d{4}|(?:[237]\\d|900)\\d{6}",,,,,,,[8,9]],[,,"[23][2-5]\\d{6}",,,,"22171234",,,[8]],[,,"7[6-9]\\d{6}",,,,"76123456",,,[8]],[,,"0800\\d{4}",,,,"08001234",,,[8]],[,,"900\\d{6}",,,,"900012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"70\\d{6}",,,,"70012345",,,[8]],"SZ",268,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[0237]"]],[,"(\\d{5})(\\d{4})","$1 $2",["9"]]],,[,,,,,,,,,[-1]],,,[,,"0800\\d{4}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TA:[,[,,"8\\d{3}",,,,,,,[4]],[,,"8\\d{3}",,,,"8999"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TA",290,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"8",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TC:[,[,,"(?:[58]\\d\\d|649|900)\\d{7}",,,,,,,[10],[7]],[,,"649(?:266|712|9(?:4\\d|50))\\d{4}",,,,"6497121234",,,,[7]],[,,"649(?:2(?:3[129]|4[1-79])|3\\d\\d|4[34][1-3])\\d{4}",,,,"6492311234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"649(?:71[01]|966)\\d{4}",,,,"6497101234",,,,[7]],"TC",1,"011","1",,,"1|([2-479]\\d{6})$","649$1",,,,,[,,,,,,,,,[-1]],,"649",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TD:[,[,,"(?:22|[69]\\d|77)\\d{6}",,,,,,,[8]],[,,"22(?:[37-9]0|5[0-5]|6[89])\\d{4}",,,,"22501234"],[,,"(?:6[023568]|77|9\\d)\\d{6}",,,,"63012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TD",235,"00|16",,,,,,"00",,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TG:[,[,,"[279]\\d{7}",,,,,,,[8]],[,,"2(?:2[2-7]|3[23]|4[45]|55|6[67]|77)\\d{5}",,,,"22212345"],[,,"(?:7[09]|9[0-36-9])\\d{6}",,,,"90112345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TG",228,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TH:[,[,,"1\\d{9}|[1689]\\d{8}|[1-57]\\d{7}",,,,,,,[8,9,10]],[,,"(?:1[0689]|2\\d|3[2-9]|4[2-5]|5[2-6]|7[3-7])\\d{6}",,,,"21234567",,,[8]],[,,"671[0-3]\\d{5}|(?:14|6[1-6]|[89]\\d)\\d{7}",,,,"812345678",,,[9]],[,,"1800\\d{6}",,,,"1800123456",,,[10]],[,,"1900\\d{6}",,,,"1900123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"6[08]\\d{7}",,,,"601234567",,,[9]],"TH",66,"00[1-9]","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TJ:[,[,,"(?:00|11|[2-57-9]\\d)\\d{7}",,,,,,,[9],[3,5,6,7]],[,,"(?:3(?:1[3-5]|2[245]|3[12]|4[24-7]|5[25]|72)|4(?:46|74|87))\\d{6}",,,,"372123456",,,,[3,5,6,7]],[,,"41[18]\\d{6}|(?:[034]0|11|2[02]|5[05]|7[07]|8[08]|9\\d)\\d{7}",,,,"917123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TJ",992,"810","8",,,"8",,"8~10",,[[,"(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"],,,1],[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"],,,1],[,"(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"],,,1],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02-57-9]|11"],,,1]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TK:[,[,,"[2-47]\\d{3,6}",,,,,,,[4,5,6,7]],[,,"(?:2[2-4]|[34]\\d)\\d{2,5}",,,,"3101"],[,,"7[2-4]\\d{2,5}",,,,"7290"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TK",690,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TL:[,[,,"7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",,,,,,,[7,8]],[,,"(?:2[1-5]|3[1-9]|4[1-4])\\d{5}",,,,"2112345",,,[7]],[,,"7[2-8]\\d{6}",,,,"77212345",,,[8]],[,,"80\\d{5}",,,,"8012345",,,[7]],[,,"90\\d{5}",,,,"9012345",,,[7]],[,,,,,,,,,[-1]],[,,"70\\d{5}",,,,"7012345",,,[7]],[,,,,,,,,,[-1]],"TL",670,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],[,"(\\d{4})(\\d{4})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TM:[,[,,"[1-6]\\d{7}",,,,,,,[8]],[,,"(?:1(?:2\\d|3[1-9])|2(?:22|4[0-35-8])|3(?:22|4[03-9])|4(?:22|3[128]|4\\d|6[15])|5(?:22|5[7-9]|6[014-689]))\\d{5}",,,,"12345678"],[,,"6\\d{7}",,,,"66123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TM",993,"810","8",,,"8",,"8~10",,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],[,"(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],[,"(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TN:[,[,,"[2-57-9]\\d{7}",,,,,,,[8]],[,,"81200\\d{3}|(?:3[0-2]|7\\d)\\d{6}",,,,"30010123"],[,,"3(?:001|[12]40)\\d{4}|(?:(?:[259]\\d|4[0-7])\\d|3(?:1[1-35]|6[0-4]|91))\\d{5}",,,,"20123456"],[,,"8010\\d{4}",,,,"80101234"],[,,"88\\d{6}",,,,"88123456"],[,,"8[12]10\\d{4}",,,,"81101234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TN",216,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TO:[,[,,"(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",,,,,,,[5,7]],[,,"(?:2\\d|3[0-8]|4[0-4]|50|6[09]|7[0-24-69]|8[05])\\d{3}",,,,"20123",,,[5]],[,,"(?:6(?:[09]\\d|3[02]|8[15-9])|(?:7\\d|8[46-9])\\d|999)\\d{4}",,,,"7715123",,,[7]],[,,"0800\\d{3}",,,,"0800222",,,[7]],[,,"55[04]\\d{4}",,,,"5501234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TO",676,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],[,"(\\d{4})(\\d{3})","$1 $2",["0"]],[,"(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TR:[,[,,"4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",,,,,,,[7,10,12,13]],[,,"(?:2(?:[13][26]|[28][2468]|[45][268]|[67][246])|3(?:[13][28]|[24-6][2468]|[78][02468]|92)|4(?:[16][246]|[23578][2468]|4[26]))\\d{7}",,,,"2123456789",,,[10]],[,,"56161\\d{5}|5(?:0[15-7]|1[06]|24|[34]\\d|5[1-59]|9[46])\\d{7}",,,,"5012345678",,,[10]],[,,"8(?:00\\d{7}(?:\\d{2,3})?|11\\d{7})",,,,"8001234567",,,[10,12,13]],[,,"(?:8[89]8|900)\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,"592(?:21[12]|461)\\d{4}",,,,"5922121234",,,[10]],[,,"850\\d{7}",,,,"8500123456",,,[10]],"TR",90,"00","0",,,"0",,,,[[,"(\\d{3})(\\d)(\\d{3})","$1 $2 $3",["444"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",,1],[,"(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",,1]],[[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",,1],[,"(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",,1]],[,,"512\\d{7}",,,,"5123456789",,,[10]],,,[,,"(?:444|811\\d{3})\\d{4}",,,,,,,[7,10]],[,,"444\\d{4}",,,,"4441444",,,[7]],,,[,,,,,,,,,[-1]]],TT:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"868(?:2(?:0[13]|1[89]|[23]\\d|4[0-2])|6(?:0[7-9]|1[02-8]|2[1-9]|[3-69]\\d|7[0-79])|82[124])\\d{4}",,,,"8682211234",,,,[7]],[,,"868(?:(?:2[5-9]|3\\d)\\d|4(?:3[0-6]|[6-9]\\d)|6(?:20|78|8\\d)|7(?:0[1-9]|1[02-9]|[2-9]\\d))\\d{4}",,,,"8682911234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"TT",1,"011","1",,,"1|([2-46-8]\\d{6})$","868$1",,,,,[,,,,,,,,,[-1]],,"868",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"868619\\d{4}",,,,"8686191234",,,,[7]]],TV:[,[,,"(?:2|7\\d\\d|90)\\d{4}",,,,,,,[5,6,7]],[,,"2[02-9]\\d{3}",,,,"20123",,,[5]],[,,"(?:7[01]\\d|90)\\d{4}",,,,"901234",,,[6,7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TV",688,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1 $2",["2"]],[,"(\\d{2})(\\d{4})","$1 $2",["90"]],[,"(\\d{2})(\\d{5})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TW:[,[,,"[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",,,,,,,[7,8,9,10,11]],[,,"(?:2[2-8]\\d|370|55[01]|7[1-9])\\d{6}|4(?:(?:0(?:0[1-9]|[2-48]\\d)|1[023]\\d)\\d{4,5}|(?:[239]\\d\\d|4(?:0[56]|12|49))\\d{5})|6(?:[01]\\d{7}|4(?:0[56]|12|24|4[09])\\d{4,5})|8(?:(?:2(?:3\\d|4[0-269]|[578]0|66)|36[24-9]|90\\d\\d)\\d{4}|4(?:0[56]|12|24|4[09])\\d{4,5})|(?:2(?:2(?:0\\d\\d|4(?:0[68]|[249]0|3[0-467]|5[0-25-9]|6[0235689]))|(?:3(?:[09]\\d|1[0-4])|(?:4\\d|5[0-49]|6[0-29]|7[0-5])\\d)\\d)|(?:(?:3[2-9]|5[2-8]|6[0-35-79]|8[7-9])\\d\\d|4(?:2(?:[089]\\d|7[1-9])|(?:3[0-4]|[78]\\d|9[01])\\d))\\d)\\d{3}",,,,"221234567",,,[8,9]],[,,"(?:40001[0-2]|9[0-8]\\d{4})\\d{3}",,,,"912345678",,,[9]],[,,"80[0-79]\\d{6}|800\\d{5}",,,,"800123456",,,[8,9]],[,,"20(?:[013-9]\\d\\d|2)\\d{4}",,,,"203123456",,,[7,9]],[,,,,,,,,,[-1]],[,,"99\\d{7}",,,,"990123456",,,[9]],[,,"7010(?:[0-2679]\\d|3[0-7]|8[0-5])\\d{5}|70\\d{8}",,,,"7012345678",,,[10,11]],"TW",886,"0(?:0[25-79]|19)","0","#",,"0",,,,[[,"(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],[,"(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"50[0-46-9]\\d{6}",,,,"500123456",,,[9]],,,[,,,,,,,,,[-1]]],TZ:[,[,,"(?:[26-8]\\d|41|90)\\d{7}",,,,,,,[9]],[,,"2[2-8]\\d{7}",,,,"222345678"],[,,"77[2-9]\\d{6}|(?:6[1-9]|7[1-689])\\d{7}",,,,"621234567"],[,,"80[08]\\d{6}",,,,"800123456"],[,,"90\\d{7}",,,,"900123456"],[,,"8(?:40|6[01])\\d{6}",,,,"840123456"],[,,,,,,,,,[-1]],[,,"41\\d{7}",,,,"412345678"],"TZ",255,"00[056]","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"(?:8(?:[04]0|6[01])|90\\d)\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UA:[,[,,"[89]\\d{9}|[3-9]\\d{8}",,,,,,,[9,10],[5,6,7]],[,,"(?:3[1-8]|4[13-8]|5[1-7]|6[12459])\\d{7}",,,,"311234567",,,[9],[5,6,7]],[,,"(?:50|6[36-8]|7[1-3]|9[1-9])\\d{7}",,,,"501234567",,,[9]],[,,"800[1-8]\\d{5,6}",,,,"800123456"],[,,"900[239]\\d{5,6}",,,,"900212345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"89[1-579]\\d{6}",,,,"891234567",,,[9]],"UA",380,"00","0",,,"0",,"0~0",,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["4[45][0-5]|5(?:0|6[37])|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]","4[45][0-5]|5(?:0|6(?:3[14-7]|7))|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]"],"0$1"],[,"(\\d{4})(\\d{5})","$1 $2",["[3-6]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UG:[,[,,"800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",,,,,,,[9],[5,6,7]],[,,"20(?:(?:(?:24|81)0|30[67])\\d|6(?:00[0-2]|30[0-4]))\\d{3}|(?:20(?:[0147]\\d|2[5-9]|32|5[0-4]|6[15-9])|[34]\\d{3})\\d{5}",,,,"312345678",,,,[5,6,7]],[,,"7260\\d{5}|7(?:[0157-9]\\d|[26]0|36|4[0-4])\\d{6}",,,,"712345678"],[,,"800[1-3]\\d{5}",,,,"800123456"],[,,"90[1-3]\\d{6}",,,,"901123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UG",256,"00[057]","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],US:[,[,,"[2-9]\\d{9}",,,,,,,[10],[7]],[,,"(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[39]|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[0-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[0179]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[02-59]|8[156])|8(?:0[1-68]|1[02-8]|2[08]|3[0-289]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01579]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}",,,,"2015550123",,,,[7]],[,,"(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[39]|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[0-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[0179]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[02-59]|8[156])|8(?:0[1-68]|1[02-8]|2[08]|3[0-289]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01579]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}",,,,"2015550123",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"US",1,"011","1",,,"1",,,1,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-9]"]],[,"(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],,,1]],[[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[2-9]"]]],[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UY:[,[,,"4\\d{9}|[249]\\d{7}|(?:[49]\\d|80)\\d{5}",,,,,,,[7,8,10]],[,,"(?:2\\d|4[2-7])\\d{6}",,,,"21231234",,,[8],[7]],[,,"9[1-9]\\d{6}",,,,"94231234",,,[8]],[,,"(?:4\\d{5}|80[05])\\d{4}|405\\d{4}",,,,"8001234",,,[7,10]],[,,"90[0-8]\\d{4}",,,,"9001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UY",598,"0(?:0|1[3-9]\\d)","0"," int. ",,"0",,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["405|8|90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{4})","$1 $2",["[24]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["4"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UZ:[,[,,"(?:33|55|[679]\\d|88)\\d{7}",,,,,,,[9]],[,,"(?:6(?:1(?:22|3[124]|4[1-4]|5[1-3578]|64)|2(?:22|3[0-57-9]|41)|5(?:22|3[3-7]|5[024-8])|6\\d\\d|7(?:[23]\\d|7[69])|9(?:22|4[1-8]|6[135]))|7(?:0(?:5[4-9]|6[0146]|7[124-6]|9[135-8])|(?:1[12]|8\\d)\\d|2(?:22|3[13-57-9]|4[1-3579]|5[14])|3(?:2\\d|3[1578]|4[1-35-7]|5[1-57]|61)|4(?:2\\d|3[1-579]|7[1-79])|5(?:22|5[1-9]|6[1457])|6(?:22|3[12457]|4[13-8])|9(?:22|5[1-9])))\\d{5}",,,,"669050123"],[,,"(?:(?:33|88|9[0-57-9])\\d{3}|55(?:50[13]|90\\d)|6(?:1(?:2(?:2[01]|98)|35[0-4]|50\\d|61[23]|7(?:[01][017]|4\\d|55|9[5-9]))|2(?:(?:11|7\\d)\\d|2(?:[12]1|9[01379])|5(?:[126]\\d|3[0-4]))|5(?:19[01]|2(?:27|9[26])|(?:30|59|7\\d)\\d)|6(?:2(?:1[5-9]|2[0367]|38|41|52|60)|(?:3[79]|9[0-3])\\d|4(?:56|83)|7(?:[07]\\d|1[017]|3[07]|4[047]|5[057]|67|8[0178]|9[79]))|7(?:2(?:24|3[237]|4[5-9]|7[15-8])|5(?:7[12]|8[0589])|7(?:0\\d|[39][07])|9(?:0\\d|7[079]))|9(?:2(?:1[1267]|3[01]|5\\d|7[0-4])|(?:5[67]|7\\d)\\d|6(?:2[0-26]|8\\d)))|7(?:[07]\\d{3}|1(?:13[01]|6(?:0[47]|1[67]|66)|71[3-69]|98\\d)|2(?:2(?:2[79]|95)|3(?:2[5-9]|6[0-6])|57\\d|7(?:0\\d|1[17]|2[27]|3[37]|44|5[057]|66|88))|3(?:2(?:1[0-6]|21|3[469]|7[159])|(?:33|9[4-6])\\d|5(?:0[0-4]|5[579]|9\\d)|7(?:[0-3579]\\d|4[0467]|6[67]|8[078]))|4(?:2(?:29|5[0257]|6[0-7]|7[1-57])|5(?:1[0-4]|8\\d|9[5-9])|7(?:0\\d|1[024589]|2[0-27]|3[0137]|[46][07]|5[01]|7[5-9]|9[079])|9(?:7[015-9]|[89]\\d))|5(?:112|2(?:0\\d|2[29]|[49]4)|3[1568]\\d|52[6-9]|7(?:0[01578]|1[017]|[23]7|4[047]|[5-7]\\d|8[78]|9[079]))|6(?:2(?:2[1245]|4[2-4])|39\\d|41[179]|5(?:[349]\\d|5[0-2])|7(?:0[017]|[13]\\d|22|44|55|67|88))|9(?:22[128]|3(?:2[0-4]|7\\d)|57[02569]|7(?:2[05-9]|3[37]|4\\d|60|7[2579]|87|9[07]))))\\d{4}",,,,"912345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UZ",998,"810","8",,,"8",,"8~10",,[[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[35-9]"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VA:[,[,,"0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",,,,,,,[6,7,8,9,10,11,12]],[,,"06698\\d{1,6}",,,,"0669812345",,,[6,7,8,9,10,11]],[,,"3[1-9]\\d{8}|3[2-9]\\d{7}",,,,"3123456789",,,[9,10]],[,,"80(?:0\\d{3}|3)\\d{3}",,,,"800123456",,,[6,9]],[,,"(?:0878\\d\\d|89(?:2|4[5-9]\\d))\\d{3}|89[45][0-4]\\d\\d|(?:1(?:44|6[346])|89(?:5[5-9]|9))\\d{6}",,,,"899123456",,,[6,8,9,10]],[,,"84(?:[08]\\d{3}|[17])\\d{3}",,,,"848123456",,,[6,9]],[,,"1(?:78\\d|99)\\d{6}",,,,"1781234567",,,[9,10]],[,,"55\\d{8}",,,,"5512345678",,,[10]],"VA",39,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"06698",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"3[2-8]\\d{9,10}",,,,"33101234501",,,[11,12]]],VC:[,[,,"(?:[58]\\d\\d|784|900)\\d{7}",,,,,,,[10],[7]],[,,"784(?:266|3(?:6[6-9]|7\\d|8[0-6])|4(?:38|5[0-36-8]|8[0-8])|5(?:55|7[0-2]|93)|638|784)\\d{4}",,,,"7842661234",,,,[7]],[,,"784(?:4(?:3[0-5]|5[45]|89|9[0-8])|5(?:2[6-9]|3[0-4])|720)\\d{4}",,,,"7844301234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"VC",1,"011","1",,,"1|([2-7]\\d{6})$","784$1",,,,,[,,,,,,,,,[-1]],,"784",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VE:[,[,,"[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",,,,,,,[10],[7]],[,,"(?:2(?:12|3[457-9]|[467]\\d|[58][1-9]|9[1-6])|[4-6]00)\\d{7}",,,,"2121234567",,,,[7]],[,,"4(?:1[24-8]|2[46])\\d{7}",,,,"4121234567"],[,,"800\\d{7}",,,,"8001234567"],[,,"90[01]\\d{7}",,,,"9001234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"VE",58,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1","$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"501\\d{7}",,,,"5010123456",,,,[7]],,,[,,,,,,,,,[-1]]],VG:[,[,,"(?:284|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"284496[0-5]\\d{3}|284(?:229|4(?:22|9[45])|774|8(?:52|6[459]))\\d{4}",,,,"2842291234",,,,[7]],[,,"284496[6-9]\\d{3}|284(?:245|3(?:0[0-3]|4[0-7]|68|9[34])|4(?:4[0-6]|68|99)|5(?:4[0-7]|68|9[69]))\\d{4}",,,,"2843001234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"VG",1,"011","1",,,"1|([2-578]\\d{6})$","284$1",,,,,[,,,,,,,,,[-1]],,"284",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VI:[,[,,"[58]\\d{9}|(?:34|90)0\\d{7}",,,,,,,[10],[7]],[,,"340(?:2(?:0[12]|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}",,,,"3406421234",,,,[7]],[,,"340(?:2(?:0[12]|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}",,,,"3406421234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"VI",1,"011","1",,,"1|([2-9]\\d{6})$","340$1",,1,,,[,,,,,,,,,[-1]],,"340",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VN:[,[,,"[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",,,,,,,[7,8,9,10]],[,,"2(?:0[3-9]|1[0-689]|2[0-25-9]|3[2-9]|4[2-8]|5[124-9]|6[0-39]|7[0-7]|8[2-79]|9[0-4679])\\d{7}",,,,"2101234567",,,[10]],[,,"(?:5(?:2[238]|59)|89[689]|99[013-9])\\d{6}|(?:3\\d|5[689]|7[06-9]|8[1-8]|9[0-8])\\d{7}",,,,"912345678",,,[9]],[,,"1800\\d{4,6}|12(?:0[13]|28)\\d{4}",,,,"1800123456",,,[8,9,10]],[,,"1900\\d{4,6}",,,,"1900123456",,,[8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"672\\d{6}",,,,"672012345",,,[9]],"VN",84,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[17]99"],"0$1",,1],[,"(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",,1],[,"(\\d{3})(\\d{4,5})","$1 $2",["69"],"0$1",,1],[,"(\\d{4})(\\d{4,6})","$1 $2",["1"],,,1],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",,1],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",,1]],[[,"(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",,1],[,"(\\d{4})(\\d{4,6})","$1 $2",["1"],,,1],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",,1],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",,1]],[,,,,,,,,,[-1]],,,[,,"[17]99\\d{4}|69\\d{5,6}",,,,,,,[7,8]],[,,"(?:[17]99|80\\d)\\d{4}|69\\d{5,6}",,,,"1992000",,,[7,8]],,,[,,,,,,,,,[-1]]],VU:[,[,,"[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",,,,,,,[5,7]],[,,"(?:38[0-8]|48[4-9])\\d\\d|(?:2[02-9]|3[4-7]|88)\\d{3}",,,,"22123",,,[5]],[,,"(?:[58]\\d|7[013-7])\\d{5}",,,,"5912345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:0[1-9]|1[01])\\d{4}",,,,"9010123",,,[7]],"VU",678,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:3[03]|900\\d)\\d{3}",,,,"30123"],,,[,,,,,,,,,[-1]]],WF:[,[,,"(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",,,,,,,[6,9]],[,,"72\\d{4}",,,,"721234",,,[6]],[,,"(?:72|8[23])\\d{4}",,,,"821234",,,[6]],[,,"80[0-5]\\d{6}",,,,"800012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"WF",681,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"[48]0\\d{4}",,,,"401234",,,[6]]],WS:[,[,,"(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",,,,,,,[5,6,7,10]],[,,"6[1-9]\\d{3}|(?:[2-5]|60)\\d{4}",,,,"22123",,,[5,6]],[,,"(?:7[1-35-7]|8(?:[3-7]|9\\d{3}))\\d{5}",,,,"7212345",,,[7,10]],[,,"800\\d{3}",,,,"800123",,,[6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"WS",685,"0",,,,,,,,[[,"(\\d{5})","$1",["[2-5]|6[1-9]"]],[,"(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],[,"(\\d{2})(\\d{5})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],XK:[,[,,"[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",,,,,,,[8,9]],[,,"(?:2[89]|39)0\\d{6}|[23][89]\\d{6}",,,,"28012345"],[,,"4[3-9]\\d{6}",,,,"43201234",,,[8]],[,,"800\\d{5}",,,,"80001234",,,[8]],[,,"900\\d{5}",,,,"90001234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"XK",383,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],YE:[,[,,"(?:1|7\\d)\\d{7}|[1-7]\\d{6}",,,,,,,[7,8,9],[6]],[,,"78[0-7]\\d{4}|17\\d{6}|(?:[12][2-68]|3[2358]|4[2-58]|5[2-6]|6[3-58]|7[24-6])\\d{5}",,,,"1234567",,,[7,8],[6]],[,,"7[0137]\\d{7}",,,,"712345678",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"YE",967,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7[24-68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],YT:[,[,,"80\\d{7}|(?:26|63)9\\d{6}",,,,,,,[9]],[,,"269(?:0[67]|5[0-3]|6\\d|[78]0)\\d{4}",,,,"269601234"],[,,"639(?:0[0-79]|1[019]|[267]\\d|3[09]|[45]0|9[04-79])\\d{4}",,,,"639012345"],[,,"80\\d{7}",,,,"801234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"YT",262,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,"269|63",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ZA:[,[,,"[1-79]\\d{8}|8\\d{4,9}",,,,,,,[5,6,7,8,9,10]],[,,"(?:2(?:0330|4302)|52087)0\\d{3}|(?:1[0-8]|2[1-378]|3[1-69]|4\\d|5[1346-8])\\d{7}",,,,"101234567",,,[9]],[,,"(?:1(?:3492[0-25]|4495[0235]|549(?:20|5[01]))|4[34]492[01])\\d{3}|8[1-4]\\d{3,7}|(?:2[27]|47|54)4950\\d{3}|(?:1(?:049[2-4]|9[12]\\d\\d)|(?:6\\d|7[0-46-9])\\d{3}|8(?:5\\d{3}|7(?:08[67]|158|28[5-9]|310)))\\d{4}|(?:1[6-8]|28|3[2-69]|4[025689]|5[36-8])4920\\d{3}|(?:12|[2-5]1)492\\d{4}",,,,"711234567",,,[5,6,7,8,9]],[,,"80\\d{7}",,,,"801234567",,,[9]],[,,"(?:86[2-9]|9[0-2]\\d)\\d{6}",,,,"862345678",,,[9]],[,,"860\\d{6}",,,,"860123456",,,[9]],[,,,,,,,,,[-1]],[,,"87(?:08[0-589]|15[0-79]|28[0-4]|31[1-9])\\d{4}|87(?:[02][0-79]|1[0-46-9]|3[02-9]|[4-9]\\d)\\d{5}",,,,"871234567",,,[9]],"ZA",27,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"861\\d{6,7}",,,,"861123456",,,[9,10]],,,[,,,,,,,,,[-1]]],ZM:[,[,,"(?:63|80)0\\d{6}|(?:21|[79]\\d)\\d{7}",,,,,,,[9],[6]],[,,"21[1-8]\\d{6}",,,,"211234567",,,,[6]],[,,"(?:7[679]|9[5-8])\\d{7}",,,,"955123456"],[,,"800\\d{6}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"630\\d{6}",,,,"630012345"],"ZM",260,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[1-9]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ZW:[,[,,"2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",,,,,,,[5,6,7,8,9,10],[3,4]],[,,"(?:1(?:(?:3\\d|9)\\d|[4-8])|2(?:(?:(?:0(?:2[014]|5)|(?:2[0157]|31|84|9)\\d\\d|[56](?:[14]\\d\\d|20)|7(?:[089]|2[03]|[35]\\d\\d))\\d|4(?:2\\d\\d|8))\\d|1(?:2|[39]\\d{4}))|3(?:(?:123|(?:29\\d|92)\\d)\\d\\d|7(?:[19]|[56]\\d))|5(?:0|1[2-478]|26|[37]2|4(?:2\\d{3}|83)|5(?:25\\d\\d|[78])|[689]\\d)|6(?:(?:[16-8]21|28|52[013])\\d\\d|[39])|8(?:[1349]28|523)\\d\\d)\\d{3}|(?:4\\d\\d|9[2-9])\\d{4,5}|(?:(?:2(?:(?:(?:0|8[146])\\d|7[1-7])\\d|2(?:[278]\\d|92)|58(?:2\\d|3))|3(?:[26]|9\\d{3})|5(?:4\\d|5)\\d\\d)\\d|6(?:(?:(?:[0-246]|[78]\\d)\\d|37)\\d|5[2-8]))\\d\\d|(?:2(?:[569]\\d|8[2-57-9])|3(?:[013-59]\\d|8[37])|6[89]8)\\d{3}",,,,"1312345",,,,[3,4]],[,,"7(?:[17]\\d|[38][1-9])\\d{6}",,,,"712345678",,,[9]],[,,"80(?:[01]\\d|20|8[0-8])\\d{3}",,,,"8001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"86(?:1[12]|22|30|44|55|77|8[368])\\d{6}",,,,"8686123456",,,[10]],"ZW",263,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],[,"(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],[,"(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],[,"(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],800:[,[,,"[1-9]\\d{7}",,,,,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[1-9]\\d{7}",,,,"12345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",800,,,,,,,,1,[[,"(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],808:[,[,,"[1-9]\\d{7}",,,,,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[1-9]\\d{7}",,,,"12345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",808,,,,,,,,1,[[,"(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],870:[,[,,"7\\d{11}|[35-7]\\d{8}",,,,,,,[9,12]],[,,,,,,,,,[-1]],[,,"(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}",,,,"301234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",870,,,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],878:[,[,,"10\\d{10}",,,,,,,[12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"10\\d{10}",,,,"101234567890"],"001",878,,,,,,,,1,[[,"(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],881:[,[,,"[0-36-9]\\d{8}",,,,,,,[9]],[,,,,,,,,,[-1]],[,,"[0-36-9]\\d{8}",,,,"612345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",881,,,,,,,,,[[,"(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-36-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],882:[,[,,"[13]\\d{6}(?:\\d{2,5})?|285\\d{9}|(?:[19]\\d|49)\\d{6}",,,,,,,[7,8,9,10,11,12]],[,,,,,,,,,[-1]],[,,"342\\d{4}|(?:337|49)\\d{6}|3(?:2|47|7\\d{3})\\d{7}",,,,"3421234",,,[7,8,9,10,12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:(?:285\\d\\d|3(?:45|[69]\\d{3}))\\d|9[89])\\d{6}",,,,"390123456789"],"001",882,,,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["16|342"]],[,"(\\d{2})(\\d{6})","$1 $2",["4"]],[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[19]"]],[,"(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["34[57]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],[,"(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-3]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"348[57]\\d{7}",,,,"34851234567",,,[11]]],883:[,[,,"210\\d{7}|51\\d{7}(?:\\d{3})?",,,,,,,[9,10,12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:210|51[013]0\\d)\\d{7}|5100\\d{5}",,,,"510012345"],"001",883,,,,,,,,1,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["2"]],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["510"]],[,"(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["5"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],888:[,[,,"\\d{11}",,,,,,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",888,,,,,,,,1,[[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"\\d{11}",,,,"12345678901"],,,[,,,,,,,,,[-1]]],979:[,[,,"[1359]\\d{8}",,,,,,,[9],[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[1359]\\d{8}",,,,"123456789",,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",979,,,,,,,,1,[[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]]};function Q(){this.a={}}Q.a=void 0,Q.b=function(){return Q.a?Q.a:Q.a=new Q};var z={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"},J={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","+":"+","*":"*","#":"#"},Y={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",A:"2",B:"2",C:"2",D:"3",E:"3",F:"3",G:"4",H:"4",I:"4",J:"5",K:"5",L:"5",M:"6",N:"6",O:"6",P:"7",Q:"7",R:"7",S:"7",T:"8",U:"8",V:"8",W:"9",X:"9",Y:"9",Z:"9"},Z=/[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?/,X=/[+\uff0b]+/,ee=/^[+\uff0b]+/,te=/([0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9])/,ne=/[+\uff0b0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]/,re=/[\\\/] *x/,ie=/[^0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9A-Za-z#]+$/,oe=/(?:.*?[A-Za-z]){3}.*/;function se(e){return"([0-9---]{1,"+e+"})"}function ae(){return";ext="+se("20")+"|[ \\t,]*(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)[:\\.]?[ \\t,-]*"+se("20")+"#?|[ \\t,]*(?:[x#~]|int|)[:\\.]?[ \\t,-]*"+se("9")+"#?|[- ]+"+se("6")+"#|[ \\t]*(?:,{2}|;)[:\\.]?[ \\t,-]*"+se("15")+"#?|[ \\t]*(?:,)+[:\\.]?[ \\t,-]*"+se("9")+"#?"}var ce=new RegExp("(?:"+ae()+")$","i"),le=new RegExp("^[0-9---]{2}$|^[+]*(?:[-x-- ().\\[\\]/~*]*[0-9---]){3,}[-x-- ().\\[\\]/~*A-Za-z0-9---]*(?:"+ae()+")?$","i"),de=/(\$\d)/,ue=/^\(?\$1\)?$/;function pe(e){return!(2>e.length)&&qe(le,e)}function he(e){return qe(oe,e)?ye(e,Y):ye(e,z)}function fe(e){var t=he(e.toString());a(e),e.a(t)}function ge(){var e=Object.keys(H);return function(e){return Array.prototype.concat.apply([],arguments)}(function(){var e=l(Object.keys(W),(function(e){return!isNaN(e)}));return d(e,(function(e){return parseInt(e,10)}))}(),d(e,(function(e){return parseInt(e,10)})))}function be(e){return null!=e&&(1!=M(e,9)||-1!=R(e,9)[0])}function ye(e,t){for(var n,r=new s,i=e.length,o=0;o<i;++o)null!=(n=t[(n=e.charAt(o)).toUpperCase()])&&r.a(n);return r.toString()}function me(e){return 0==e.length||ue.test(e)}function ve(e){return null!=e&&isNaN(e)&&e.toUpperCase()in W}function we(e,t,n){if(0==I(t,2)&&O(t,5)){var r=C(t,5);if(0<r.length)return r}r=C(t,1);var i=Se(t);return 0==n?$e(r,0,i,""):r in H?(t=Ie(t,e=Pe(e,r,Ae(r)),n),$e(r,n,i=Oe(i,e,n),t)):i}function Pe(e,t,n){return Me(e,"001"==n?""+t:n)}function Se(e){if(!O(e,2))return"";var t=""+I(e,2);return O(e,4)&&I(e,4)&&0<C(e,8)?Array(C(e,8)+1).join("0")+t:t}function $e(e,t,n,r){switch(t){case 0:return"+"+e+n+r;case 1:return"+"+e+" "+n+r;case 3:return"tel:+"+e+"-"+n+r;default:return n+r}}function Oe(e,t,n){e:{for(var r,i=(t=0==R(t,20).length||2==n?R(t,19):R(t,20)).length,o=0;o<i;++o){var s=M(r=t[o],3);if((0==s||0==e.search(I(r,3,s-1)))&&qe(s=new RegExp(I(r,1)),e)){t=r;break e}}t=null}return null!=t&&(t=C(i=t,2),r=new RegExp(I(i,1)),C(i,5),i=C(i,4),e=2==n&&null!=i&&0<i.length?e.replace(r,t.replace(de,i)):e.replace(r,t),3==n&&(e=(e=e.replace(/^[-x\u2010-\u2015\u2212\u30fc\uff0d-\uff0f \u00a0\u00ad\u200b\u2060\u3000()\uff08\uff09\uff3b\uff3d.\[\]/~\u2053\u223c\uff5e]+/,"")).replace(/[-x\u2010-\u2015\u2212\u30fc\uff0d-\uff0f \u00a0\u00ad\u200b\u2060\u3000()\uff08\uff09\uff3b\uff3d.\[\]/~\u2053\u223c\uff5e]+/g,"-"))),e}function ke(e,t){var n=ot;if(!ve(e))return null;t=Ce(Me(n,e),t);try{if(O(t,6))return Ke(n,I(t,6),e)}catch(e){}return null}function Ie(e,t,n){return O(e,3)&&0!=I(e,3).length?3==n?";ext="+I(e,3):O(t,13)?I(t,13)+C(e,3):" ext. "+C(e,3):""}function Ce(e,t){switch(t){case 4:return I(e,5);case 3:return I(e,4);case 1:return I(e,3);case 0:case 2:return I(e,2);case 5:return I(e,6);case 6:return I(e,8);case 7:return I(e,7);case 8:return I(e,21);case 9:return I(e,25);case 10:return I(e,28);default:return I(e,1)}}function Re(e,t){return Te(e,I(t,1))?Te(e,I(t,5))?4:Te(e,I(t,4))?3:Te(e,I(t,6))?5:Te(e,I(t,8))?6:Te(e,I(t,7))?7:Te(e,I(t,21))?8:Te(e,I(t,25))?9:Te(e,I(t,28))?10:Te(e,I(t,2))?I(t,18)||Te(e,I(t,3))?2:0:!I(t,18)&&Te(e,I(t,3))?1:-1:-1}function Me(e,t){if(null==t)return null;t=t.toUpperCase();var n=e.a[t];if(null==n){if(null==(n=W[t]))return null;n=(new q).a(_.h(),n),e.a[t]=n}return n}function Te(e,t){var n=e.length;return!(0<M(t,9)&&-1==c(R(t,9),n))&&qe(C(t,2),e)}function De(e){var t=ot,n=Ee(t,e),r=C(e,1),i=Pe(t,r,n);return null==i||"001"!=n&&r!=je(t,n)?i=!1:i=-1!=Re(e=Se(e),i),i}function Ee(e,t){if(null==t)return null;var n=C(t,1);if(null==(n=H[n]))e=null;else if(1==n.length)e=n[0];else e:{t=Se(t);for(var r,i=n.length,o=0;o<i;o++){var s=Me(e,r=n[o]);if(O(s,23)){if(0==t.search(I(s,23))){e=r;break e}}else if(-1!=Re(t,s)){e=r;break e}}e=null}return e}function Ae(e){return null==(e=H[e])?"ZZ":e[0]}function je(e,t){if(null==(e=Me(e,t)))throw Error("Invalid region code: "+t);return C(e,10)}function Ne(e){return 0==(e=_e(e))||4==e}function Be(e,t,n,r){var i=Ce(n,r),o=0==M(i,9)?R(I(n,1),9):R(i,9);if(i=R(i,10),2==r){if(!be(Ce(n,0)))return Be(e,t,n,1);be(e=Ce(n,1))&&(u(o=o.concat(0==M(e,9)?R(I(n,1),9):R(e,9))),0==i.length?i=R(e,10):u(i=i.concat(R(e,10))))}return-1==o[0]?5:(t=t.length,-1<c(i,t)?4:(n=o[0])==t?0:n>t?2:o[o.length-1]<t?3:-1<c(o,t,1)?0:5)}function _e(e){var t=ot,n=Se(e);return(e=C(e,1))in H?Be(t,n,e=Pe(t,e,Ae(e)),-1):1}function xe(e,t){if(0==(e=e.toString()).length||"0"==e.charAt(0))return 0;for(var n,r=e.length,i=1;3>=i&&i<=r;++i)if((n=parseInt(e.substring(0,i),10))in H)return t.a(e.substring(i)),n;return 0}function Ue(e,t,n,r,i){if(0==t.length)return 0;var o;t=new s(t),null!=n&&(o=I(n,11)),null==o&&(o="NonMatch");var c=t.toString();if(0==c.length)o=20;else if(ee.test(c))c=c.replace(ee,""),a(t),t.a(he(c)),o=1;else{if(c=new RegExp(o),fe(t),0==(o=t.toString()).search(c)){c=o.match(c)[0].length;var l=o.substring(c).match(te);l&&null!=l[1]&&0<l[1].length&&"0"==ye(l[1],z)?o=!1:(a(t),t.a(o.substring(c)),o=!0)}else o=!1;o=o?5:20}if(20!=o){if(2>=t.b.length)throw Error("Phone number too short after IDD");if(0!=(e=xe(t,r)))return T(i,1,e),e;throw Error("Invalid country calling code")}return null!=n&&(c=""+(o=C(n,10)),0==(l=t.toString()).lastIndexOf(c,0)&&(c=new s(l.substring(c.length)),l=I(n,1),l=new RegExp(C(l,2)),Le(c,n,null),c=c.toString(),!qe(l,t.toString())&&qe(l,c)||3==Be(e,t.toString(),n,-1)))?(r.a(c),T(i,1,o),o):(T(i,1,0),0)}function Le(e,t,n){var r=e.toString(),i=r.length,o=I(t,15);if(0!=i&&null!=o&&0!=o.length){var s=new RegExp("^(?:"+o+")");if(i=s.exec(r)){var a=qe(o=new RegExp(C(I(t,1),2)),r),c=i.length-1;null==(t=I(t,16))||0==t.length||null==i[c]||0==i[c].length?a&&!qe(o,r.substring(i[0].length))||(null!=n&&0<c&&null!=i[c]&&n.a(i[1]),e.set(r.substring(i[0].length))):(r=r.replace(s,t),(!a||qe(o,r))&&(null!=n&&0<c&&n.a(i[1]),e.set(r)))}}}function Ke(e,t,n){if(null==t)throw Error("The string supplied did not seem to be a phone number");if(250<t.length)throw Error("The string supplied is too long to be a phone number");var r=new s,i=t.indexOf(";phone-context=");if(0<=i){var o=i+15;if("+"==t.charAt(o)){var c=t.indexOf(";",o);0<c?r.a(t.substring(o,c)):r.a(t.substring(o))}o=t.indexOf("tel:"),r.a(t.substring(0<=o?o+4:0,i))}else r.a(function(e){var t=e.search(ne);return 0<=t?0<=(t=(e=(e=e.substring(t)).replace(ie,"")).search(re))&&(e=e.substring(0,t)):e="",e}(t));if(0<(i=(t=r.toString()).indexOf(";isub="))&&(a(r),r.a(t.substring(0,i))),!pe(r.toString()))throw Error("The string supplied did not seem to be a phone number");if(t=r.toString(),!(ve(n)||null!=t&&0<t.length&&ee.test(t)))throw Error("Invalid country calling code");t=new V;e:{if(0<=(o=(i=r.toString()).search(ce))&&pe(i.substring(0,o)))for(var l=(c=i.match(ce)).length,d=1;d<l;++d)if(null!=c[d]&&0<c[d].length){a(r),r.a(i.substring(0,o)),i=c[d];break e}i=""}0<i.length&&T(t,3,i),o=Me(e,n),i=new s,c=0,l=r.toString();try{c=Ue(e,l,o,i,t)}catch(n){if("Invalid country calling code"!=n.message||!ee.test(l))throw n;if(0==(c=Ue(e,l=l.replace(ee,""),o,i,t)))throw n}if(0!=c?(r=Ae(c))!=n&&(o=Pe(e,c,r)):(fe(r),i.a(r.toString()),null!=n&&T(t,1,c=C(o,10))),2>i.b.length)throw Error("The string supplied is too short to be a phone number");if(null!=o&&(Le(n=new s(i.toString()),o,new s),2!=(e=Be(e,n.toString(),o,-1))&&4!=e&&5!=e&&(i=n)),2>(n=(e=i.toString()).length))throw Error("The string supplied is too short to be a phone number");if(17<n)throw Error("The string supplied is too long to be a phone number");if(1<e.length&&"0"==e.charAt(0)){for(T(t,4,!0),n=1;n<e.length-1&&"0"==e.charAt(n);)n++;1!=n&&T(t,8,n)}return T(t,2,parseInt(e,10)),t}function qe(e,t){return!(!(e="string"==typeof e?t.match("^(?:"+e+")$"):t.match(e))||e[0].length!=t.length)}function Ve(e){this.ha=/\u2008/,this.ca="",this.m=new s,this.$="",this.j=new s,this.o=new s,this.l=!0,this.aa=this.s=this.ea=!1,this.fa=Q.b(),this.u=0,this.b=new s,this.ba=!1,this.i="",this.a=new s,this.f=[],this.da=e,this.ma=this.g=We(this,this.da)}var Fe=new _;T(Fe,11,"NA");var Ge=/^[-x\u2010-\u2015\u2212\u30fc\uff0d-\uff0f \u00a0\u00ad\u200b\u2060\u3000()\uff08\uff09\uff3b\uff3d.\[\]/~\u2053\u223c\uff5e]*(\$\d[-x\u2010-\u2015\u2212\u30fc\uff0d-\uff0f \u00a0\u00ad\u200b\u2060\u3000()\uff08\uff09\uff3b\uff3d.\[\]/~\u2053\u223c\uff5e]*)+$/,He=/[- ]/;function We(e,t){return t=ve(t)?je(e.fa,t):0,null!=(e=Me(e.fa,Ae(t)))?e:Fe}function Qe(e){for(var t=e.f.length,n=0;n<t;++n){var r=e.f[n],i=C(r,1);if(e.$==i)return!1;var o=e,s=r,c=C(s,1);a(o.m);var l=o;s=C(s,2);var d="999999999999999".match(c)[0];if(d.length<l.a.b.length?l="":l=(l=d.replace(new RegExp(c,"g"),s)).replace(/9/g,""),0<l.length?(o.m.a(l),o=!0):o=!1,o)return e.$=i,e.ba=He.test(I(r,4)),e.u=0,!0}return e.l=!1}function ze(e,t){for(var n=[],r=t.length-3,i=e.f.length,o=0;o<i;++o){var s=e.f[o];0==M(s,3)?n.push(e.f[o]):(s=I(s,3,Math.min(r,M(s,3)-1)),0==t.search(s)&&n.push(e.f[o]))}e.f=n}function Je(e){return e.l=!0,e.aa=!1,e.f=[],e.u=0,a(e.m),e.$="",Xe(e)}function Ye(e){for(var t=e.a.toString(),n=e.f.length,r=0;r<n;++r){var i=e.f[r],o=C(i,1);if(new RegExp("^(?:"+o+")$").test(t)&&(e.ba=He.test(I(i,4)),ye(i=Ze(e,i=t.replace(new RegExp(o,"g"),I(i,2))),J)==e.o))return i}return""}function Ze(e,t){var n=e.b.b.length;return e.ba&&0<n&&" "!=e.b.toString().charAt(n-1)?e.b+" "+t:e.b+t}function Xe(e){var t=e.a.toString();if(3<=t.length){for(var n=e.s&&0==e.i.length&&0<M(e.g,20)?R(e.g,20):R(e.g,19),r=n.length,i=0;i<r;++i){var o=n[i];0<e.i.length&&me(C(o,4))&&!I(o,6)&&!O(o,5)||(0!=e.i.length||e.s||me(C(o,4))||I(o,6))&&Ge.test(C(o,2))&&e.f.push(o)}return ze(e,t),0<(t=Ye(e)).length?t:Qe(e)?et(e):e.j.toString()}return Ze(e,t)}function et(e){var t=e.a.toString(),n=t.length;if(0<n){for(var r="",i=0;i<n;i++)r=it(e,t.charAt(i));return e.l?Ze(e,r):e.j.toString()}return e.b.toString()}function tt(e){var t=e.a.toString(),n=0;if(1!=I(e.g,10))var r=!1;else r="1"==(r=e.a.toString()).charAt(0)&&"0"!=r.charAt(1)&&"1"!=r.charAt(1);return r?(n=1,e.b.a("1").a(" "),e.s=!0):O(e.g,15)&&(r=new RegExp("^(?:"+I(e.g,15)+")"),null!=(r=t.match(r))&&null!=r[0]&&0<r[0].length&&(e.s=!0,n=r[0].length,e.b.a(t.substring(0,n)))),a(e.a),e.a.a(t.substring(n)),t.substring(0,n)}function nt(e){var t=e.o.toString(),n=new RegExp("^(?:\\+|"+I(e.g,11)+")");return null!=(n=t.match(n))&&null!=n[0]&&0<n[0].length&&(e.s=!0,n=n[0].length,a(e.a),e.a.a(t.substring(n)),a(e.b),e.b.a(t.substring(0,n)),"+"!=t.charAt(0)&&e.b.a(" "),!0)}function rt(e){if(0==e.a.b.length)return!1;var t=new s,n=xe(e.a,t);return 0!=n&&(a(e.a),e.a.a(t.toString()),"001"==(t=Ae(n))?e.g=Me(e.fa,""+n):t!=e.da&&(e.g=We(e,t)),e.b.a(""+n).a(" "),e.i="",!0)}function it(e,t){var n=e.m.toString();if(0<=n.substring(e.u).search(e.ha)){var r=n.search(e.ha);return t=n.replace(e.ha,t),a(e.m),e.m.a(t),e.u=r,t.substring(0,e.u+1)}return 1==e.f.length&&(e.l=!1),e.$="",e.j.toString()}var ot=Q.b();function st(e){try{switch(_e(e)){case 0:return"is-possible";case 1:return"invalid-country-code";case 3:return"too-long";case 2:return"too-short"}if(Ne(e))return"is-possible"}catch(e){}return"unknown"}function at(e,t){if(!(this instanceof at))return new at(e,t);if("string"==typeof e)var n=!1;else try{De(e),n=!0}catch(e){n=!1}if(!n&&"string"!=typeof e)throw Error("Invalid phone number, expected a string");if(!n&&null!=t&&"string"!=typeof t)throw Error("Invalid region code, expected a string");if(!n&&(e=e.trim(),t&&"+"===e.charAt(0)&&(t=null),!t)){var r=function(e){if("+"!==e.charAt(0))return{parsed:t,v:n};try{var t=Ke(ot,e,void 0)}catch(e){}if(t){var n=Ee(ot,t);if(null!=n&&"ZZ"!==n)return{parsed:t,v:n}}for(var r=1;4>r;++r){if(n=void 0,e.length<r+1)return{parsed:t,v:n};if("ZZ"!==(n=Ae(e.substring(1,r+1))))return{v:n}}return{parsed:t,v:void 0}}(e);t=void 0===r.v?null:r.v,r=r.parsed}if(this.a={number:{},regionCode:t,valid:!1,possible:!1},n)this.b=e;else{if(this.b=null,this.a.number.input=e,!t)return void(this.a.possibility="invalid-country-code");if(0===ct(t))return void(this.a.possibility="invalid-country-code");try{this.b=r||Ke(ot,e,t)}catch(t){return void(this.a.possibility=st(e))}}this.a.number.international=we(ot,this.b,1),this.a.number.national=we(ot,this.b,2),this.a.number.e164=we(ot,this.b,0),this.a.number.rfc3966=we(ot,this.b,3),this.a.number.significant=Se(this.b),e=this.a,t=this.b,null==(n=Me(n=ot,Ee(n,t)))?t=!0:t=!Te(t=Se(t),I(n,24)),e.canBeInternationallyDialled=t,this.a.possible=Ne(this.b),this.a.valid=De(this.b),this.a.type=function(e){var t=ot,n=Ee(t,e);switch(null==(t=Pe(t,C(e,1),n))?e=-1:e=Re(e=Se(e),t),e){case 0:return"fixed-line";case 2:return"fixed-line-or-mobile";case 1:return"mobile";case 8:return"pager";case 7:return"personal-number";case 4:return"premium-rate";case 5:return"shared-cost";case 3:return"toll-free";case 9:return"uan";case 6:return"voip";default:case-1:return"unknown"}}(this.b),this.a.possibility=st(this.b)}function ct(e){return ve(e)?je(ot,e):0}function lt(e){var t={};return e.filter((function(e){return!t.hasOwnProperty(e)&&(t[e]=1,!0)}))}function dt(e){this.g=e,this.f=new Ve(e),this.a=this.b=""}(e=at.prototype).toJSON=function(){return this.a},e.ka=function(){return this.a.canBeInternationallyDialled},e.va=function(){return this.a.valid},e.ua=function(){return this.a.possible},e.ra=function(){return this.a.type},e.ta=function(){return"mobile"===this.a.type||"fixed-line-or-mobile"===this.a.type},e.sa=function(){return"fixed-line"===this.a.type||"fixed-line-or-mobile"===this.a.type},e.na=function(e){return this.a.number[null==e?"e164":e]},e.oa=function(e){return function(e,t){var n=ot;if(!ve(t))return we(n,e,1);var r=C(e,1),i=Se(e);if(!(r in H))return i;if(1==r){if(null!=t&&0<=c(H[1],t.toUpperCase()))return r+" "+we(n,e,2)}else if(r==je(n,t))return we(n,e,2);var o=Me(n,t),s=C(o,11);return t="",O(o,17)?t=C(o,17):qe(Z,s)&&(t=s),i=Oe(i,n=Pe(n,r,Ae(r)),1),e=Ie(e,n,1),0<t.length?t+" "+r+" "+i+e:$e(r,1,i,e)}(this.b,e)},e.qa=function(){return this.a.regionCode},e.la=function(){return ct(this.a.regionCode)},(e=dt.prototype).ja=function(e){this.b+=e;var t=this.f;return t.ca=function(e,t){e.j.a(t);var n=t;if(te.test(n)||1==e.j.b.length&&X.test(n)?("+"==t?(n=t,e.o.a(t)):(n=z[t],e.o.a(n),e.a.a(n)),t=n):(e.l=!1,e.ea=!0),!e.l){if(!e.ea)if(nt(e)){if(rt(e))return Je(e)}else if(0<e.i.length&&(t=e.a.toString(),a(e.a),e.a.a(e.i),e.a.a(t),n=(t=e.b.toString()).lastIndexOf(e.i),a(e.b),e.b.a(t.substring(0,n))),e.i!=tt(e))return e.b.a(" "),Je(e);return e.j.toString()}switch(e.o.b.length){case 0:case 1:case 2:return e.j.toString();case 3:if(!nt(e))return e.i=tt(e),Xe(e);e.aa=!0;default:return e.aa?(rt(e)&&(e.aa=!1),e.b.toString()+e.a.toString()):0<e.f.length?(t=it(e,t),0<(n=Ye(e)).length?n:(ze(e,e.a.toString()),Qe(e)?et(e):e.l?Ze(e,t):e.j.toString())):Xe(e)}}(t,e),this.a=t.ca},e.wa=function(){return this.a},e.xa=function(){return""===this.b?this.a:this.ia(this.b.slice(0,this.b.length-1))},e.ia=function(e){var t=this.f;if(t.ca="",a(t.j),a(t.o),a(t.m),t.u=0,t.$="",a(t.b),t.i="",a(t.a),t.l=!0,t.ea=!1,t.s=!1,t.aa=!1,t.f=[],t.ba=!1,t.g!=t.ma&&(t.g=We(t,t.da)),this.b="",e){t=0;for(var n=e.length;t<n;++t)this.ja(e.charAt(t))}return this.a},e.pa=function(){return new at(this.a,this.g)},n=t,i("PhoneNumber",at),i("PhoneNumber.getCountryCodeForRegionCode",ct),i("PhoneNumber.getRegionCodeForCountryCode",(function(e){return Ae(e)})),i("PhoneNumber.getSupportedRegionCodes",(function(){return lt(l(Object.keys(W),(function(e){return isNaN(e)})))})),i("PhoneNumber.getSupportedCallingCodes",(function(){return lt(ge())})),i("PhoneNumber.getExample",(function(e,t){return new at(t=ke(e,t?function(e){switch(e){case"fixed-line":return 0;case"fixed-line-or-mobile":return 2;case"mobile":return 1;case"pager":return 8;case"personal-number":return 7;case"premium-rate":return 4;case"shared-cost":return 5;case"toll-free":return 3;case"uan":return 9;case"voip":return 6;default:case"unknown":return-1}}(t):0),e)})),i("PhoneNumber.getAsYouType",(function(e){return new dt(e)})),i("PhoneNumber.prototype.toJSON",at.prototype.toJSON),i("PhoneNumber.prototype.canBeInternationallyDialled",at.prototype.ka),i("PhoneNumber.prototype.isValid",at.prototype.va),i("PhoneNumber.prototype.isPossible",at.prototype.ua),i("PhoneNumber.prototype.getType",at.prototype.ra),i("PhoneNumber.prototype.isMobile",at.prototype.ta),i("PhoneNumber.prototype.isFixedLine",at.prototype.sa),i("PhoneNumber.prototype.getNumber",at.prototype.na),i("PhoneNumber.prototype.getNumberFrom",at.prototype.oa),i("PhoneNumber.prototype.getRegionCode",at.prototype.qa),i("PhoneNumber.prototype.getCountryCode",at.prototype.la),i("AsYouType",dt),i("AsYouType.prototype.addChar",dt.prototype.ja),i("AsYouType.prototype.number",dt.prototype.wa),i("AsYouType.prototype.removeChar",dt.prototype.xa),i("AsYouType.prototype.reset",dt.prototype.ia),i("AsYouType.prototype.getPhoneNumber",dt.prototype.pa)}()},function(e,t,n){"use strict";n.r(t),n.d(t,"FastSyncConnection",(function(){return pf})),n.d(t,"FastSyncConnectionMessageEvent",(function(){return df}));var r={};n.r(r),n.d(r,"BPlistParser",(function(){return Hi})),n.d(r,"any",(function(){return Fi})),n.d(r,"typeForValue",(function(){return Gi})),n.d(r,"BPArray",(function(){return wi})),n.d(r,"array",(function(){return Pi})),n.d(r,"orderedSet",(function(){return Si})),n.d(r,"set",(function(){return $i})),n.d(r,"Bool",(function(){return Oi})),n.d(r,"bool",(function(){return ki})),n.d(r,"data",(function(){return Ii})),n.d(r,"BPDate",(function(){return Ri})),n.d(r,"date",(function(){return Mi})),n.d(r,"dictionary",(function(){return ji})),n.d(r,"Float",(function(){return Ni})),n.d(r,"float",(function(){return Bi})),n.d(r,"byteCountForValue",(function(){return pi})),n.d(r,"Int",(function(){return hi})),n.d(r,"int",(function(){return fi})),n.d(r,"nil",(function(){return _i})),n.d(r,"padding",(function(){return xi})),n.d(r,"oneOf",(function(){return qi})),n.d(r,"String",(function(){return Ei})),n.d(r,"string",(function(){return Ai})),n.d(r,"UID",(function(){return Li})),n.d(r,"uid",(function(){return Ki})),n.d(r,"isBPlist",(function(){return Wi}));var i={};n.r(i),n.d(i,"CodecRTCPFlag",(function(){return Hc})),n.d(i,"CodecMediaFlag",(function(){return Wc})),n.d(i,"CodecType",(function(){return Qc})),n.d(i,"cloneCodec",(function(){return zc})),n.d(i,"ConnectionRole",(function(){return zl})),n.d(i,"cloneConnection",(function(){return Yl})),n.d(i,"cloneConversation",(function(){return Xl})),n.d(i,"participantStreamHandlesForConversation",(function(){return ed})),n.d(i,"ourStreamHandlesForConversation",(function(){return td})),n.d(i,"streamHandlesForConversation",(function(){return nd})),n.d(i,"ExtensionType",(function(){return Jc})),n.d(i,"cloneExtension",(function(){return Yc})),n.d(i,"cloneParticipant",(function(){return Zl})),n.d(i,"streamHandlesForParticipantMedia",(function(){return Wl})),n.d(i,"cloneParticipantMedia",(function(){return Ql})),n.d(i,"StreamType",(function(){return Zc})),n.d(i,"cloneStream",(function(){return Xc})),n.d(i,"GroupID",(function(){return el})),n.d(i,"MediaType",(function(){return tl})),n.d(i,"MediaSubtype",(function(){return nl})),n.d(i,"CipherSuite",(function(){return rl})),n.d(i,"RTCPFlag",(function(){return il})),n.d(i,"cloneStreamGroup",(function(){return ol})),n.d(i,"H264RtpPayloadId",(function(){return al})),n.d(i,"Codecs",(function(){return cl})),n.d(i,"encodingNamesByType",(function(){return ll})),n.d(i,"Extensions",(function(){return dl})),n.d(i,"extensionURNsByType",(function(){return ul})),n.d(i,"participantDescriptionForTiers",(function(){return Dl})),n.d(i,"participantMediaDescriptionForTiers",(function(){return Tl})),n.d(i,"AUDIO_SAMPLE_RATE",(function(){return pl})),n.d(i,"MIN_VIDEO_FPS",(function(){return hl})),n.d(i,"VideoStreamIndex",(function(){return gl})),n.d(i,"VideoQualityIndex",(function(){return bl})),n.d(i,"VideoTiers",(function(){return yl})),n.d(i,"AudioStreamIndex",(function(){return ml})),n.d(i,"AudioQualityIndex",(function(){return vl})),n.d(i,"AudioTiers",(function(){return wl})),n.d(i,"getVideoTierForStreamIndex",(function(){return Pl})),n.d(i,"getAudioTierForStreamIndex",(function(){return Sl})),n.d(i,"participantVideoStreamDescriptionForTier",(function(){return $l})),n.d(i,"participantAudioStreamDescriptionForTier",(function(){return Ol})),n.d(i,"participantVideoStreamGroupDescription",(function(){return Rl})),n.d(i,"participantAudioStreamGroupDescription",(function(){return Ml}));function o(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}Object.create;Object.create;function s(e){return!(!e||"number"!=typeof e.byteLength||"function"!=typeof e.slice||ArrayBuffer.isView(e))}function a(e){const t=(n,r=!1)=>r?e(n):n.get(t);return t.useInstance=e=>new l(t,e),t.use=e=>({type:t,componentFor:e}),t}function c(e){return a(()=>({create:(...t)=>new e(...t)}))}class l{constructor(e,t){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"component",{enumerable:!0,configurable:!0,writable:!0,value:t})}componentFor(){return this.component}}var d,u=function(e,t){this.group=e,this.id=t},p=Symbol();!function(e){e[e.Personal=0]="Personal",e[e.Sensitive=1]="Sensitive",e[e.UserID=2]="UserID",e[e.UserInfo=3]="UserInfo",e[e.DeviceInfo=4]="DeviceInfo",e[e.SessionID=5]="SessionID",e[e.SessionInfo=6]="SessionInfo",e[e.AnonymizedID=7]="AnonymizedID",e[e.UserAgent=8]="UserAgent",e[e.Performance=9]="Performance",e[e.NotPII=10]="NotPII",e[e.Const=11]="Const"}(d||(d={}));var h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=Symbol("<Device>"),g=function(){},b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.applyDeviceInfoPolicy=function(e){return f},t}(g),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.applyDeviceInfoPolicy=function(e){return e._unsafeValue},t}(g),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.applyDeviceInfoPolicy=function(e){return e.piiClass===d.UserAgent||e.piiClass===d.Performance?e._unsafeValue:f},t}(g),v=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w=Symbol("<ID>"),P=Symbol("<Info>"),S=Symbol("<AnonID>"),$=function(){},O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.applyIDPolicy=function(e){return e.piiClass===d.AnonymizedID?S:e.piiClass===d.SessionInfo||e.piiClass===d.UserInfo?P:w},t}($),k=function(e){function t(t){var n=e.call(this)||this;return n.preserveGroups=new Set(t),n}return v(t,e),t.prototype.applyIDPolicy=function(e,t){return e.piiClass===d.AnonymizedID||this.preserveGroups.has(e.piiGroup)?e._unsafeValue:e.piiClass===d.SessionInfo||e.piiClass===d.UserInfo?P:new u(e.piiGroup,e.piiGroup.idFor(t(e._unsafeValue)))},t}($),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.applyIDPolicy=function(e){return e._unsafeValue},t}($);function C(e){return Boolean(e&&e.isLoggable)}var R=[],M={};function T(e){var t=M[e];if(void 0!==t)return t;var n=R.length;return M[e]=n,R[n]=e,n}var D=T("<none>"),E=1,A=function(){function e(e){this.groupLabel=e,this.groupID=E++,this.nextID=1,this.assignedIDs=new Map}return e.piiIDGroup=function(t){var n=this.allPIIIDGroups.get(t);if(n)return n;var r=new e(t);return this.allPIIIDGroups.set(t,r),r},e.fromJSON=function(e){return this.piiIDGroup(e.groupLabel)},e.prototype.idFor=function(e){return this.assignedIDs.has(e)||this.assignedIDs.set(e,this.nextID++),this.assignedIDs.get(e)},e.prototype.reset=function(){this.nextID=1,this.assignedIDs=new Map},e.prototype.toJSON=function(){return{groupLabel:this.groupLabel,groupID:this.groupID}},e.allPIIIDGroups=new Map,e}();function j(e){return A.piiIDGroup(e)}var N=j("ID");function B(e){return function(t){return null==t?t:t.map((function(t){return e(t)}))}}var _=Symbol("piiObjectKeyMetadata");function x(e){return function(t){var n;if(null==t)return t;var r={},i=((n={})[_]=r,n);for(var o in t)e[o]&&(r[o]=V(o).constant()),i[o]=e[o]?e[o](t[o]):t[o];return i}}var U,L=function(){return(L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},K=function(){function e(e,t,n,r){void 0===t&&(t=d.Personal),void 0===n&&(n=N),void 0===r&&(r=D),this._unsafeValue=e,this.piiClass=t,this.piiGroup=n,this.dataType=r,this.isPIIValue=!0}return e.fromJSON=function(t){if("object"!=typeof t||null===t)return V(t).constant();var n=t;return new e(n.v,n.c,n.g?A.fromJSON(n.g):N,n.d?T(n.d):D)},e.prototype.unbox=function(e){return e.unbox(this)},e.prototype.withClass=function(t,n){return void 0===n&&(n=N),new e(this._unsafeValue,t,n,this.dataType)},e.prototype.withValue=function(t){return new e(t,this.piiClass,this.piiGroup,this.dataType)},e.prototype.withDataType=function(t){return new e(this._unsafeValue,this.piiClass,this.piiGroup,t)},e.prototype.personal=function(){return this.withClass(d.Personal)},e.prototype.sensitive=function(){return this.withClass(d.Sensitive)},e.prototype.userID=function(e){return void 0===e&&(e=N),this.withClass(d.UserID,e)},e.prototype.user=function(){return this.withClass(d.UserInfo)},e.prototype.sessionID=function(e){return void 0===e&&(e=N),this.withClass(d.SessionID,e)},e.prototype.session=function(){return this.withClass(d.SessionInfo)},e.prototype.anonymizedID=function(){return this.withClass(d.AnonymizedID)},e.prototype.device=function(){return this.withClass(d.DeviceInfo)},e.prototype.userAgent=function(){return this.withClass(d.UserAgent)},e.prototype.performance=function(){return this.withClass(d.Performance)},e.prototype.constant=function(){return this.withClass(d.Const)},e.prototype.notPII=function(){var e=this;return{forCertain:function(){return e.withClass(d.NotPII)}}},e.prototype.toString=function(t){if(void 0===t&&(t=e.defaultPolicy),!t)throw new Error("No PIIPolicy set");return t.stringify(this)},e.prototype.toJSON=function(e){if(!e)throw new Error("No PIIPolicy set");var t,n=this.piiClass,r=this.piiGroup,i=this._unsafeValue;this.dataType;return this.dataType!==D||this.piiClass!==d.Const||"object"==typeof this._unsafeValue&&null!==this._unsafeValue?L(L(L({c:n},r===N?{}:{g:r.toJSON()}),{v:e.unbox(this)===i?i:this.toString(e)}),this.dataType===D?{}:{d:(t=this.dataType,R[t])}):this._unsafeValue},e.defaultPolicy=null,e}();function q(e){return e instanceof K}function V(e){return q(e)?e:new K(e)}(U=V||(V={})).personal=function(){return function(e){return U(e).personal()}},U.sensitive=function(){return function(e){return U(e).sensitive()}},U.userID=function(e){return void 0===e&&(e=N),function(t){return U(t).userID(e)}},U.user=function(){return function(e){return U(e).user()}},U.sessionID=function(e){return void 0===e&&(e=N),function(t){return U(t).sessionID(e)}},U.session=function(){return function(e){return U(e).session()}},U.anonymizedID=function(){return function(e){return U(e).anonymizedID()}},U.device=function(){return function(e){return U(e).device()}},U.userAgent=function(){return function(e){return U(e).userAgent()}},U.performance=function(){return function(e){return U(e).performance()}},U.array=B,U.object=x;var F=V("    ").constant(),G=V("{").constant(),H=V("}").constant(),W=V("[").constant(),Q=V("]").constant(),z=V(",").constant(),J=V("\n").constant(),Y=V(": ").constant(),Z=V("... more ...").constant(),X=V(null).constant(),ee=V(void 0).constant(),te=V(null);function ne(e,t,n,r,i){var o,s;if(void 0===n&&(n=te),void 0===r&&(r=0),void 0===i&&(i=5),r>=i&&e.push(Z),"string"==typeof t)e.push(n.withValue(t));else if(null===t)e.push(X);else if(void 0===t)e.push(ee);else if(C(t))for(var a=0,c=t.logString.fragments;a<c.length;a++){var l=c[a];ne(e,l._unsafeValue,l,r)}else if(q(t))ne(e,t._unsafeValue,t,r);else if(t&&"object"==typeof t)if(ArrayBuffer.isView(t)||t instanceof ArrayBuffer)for(var d=function(e,t,n){void 0===t&&(t="    ");void 0===n&&(n=4096);for(var r=new Uint8Array(e instanceof ArrayBuffer?e:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)),i=Math.min(n,r.length),o="",s=0;s<i;s++){s%32==0&&i>8?o+="\n"+t:s%8==0&&i>0?o+=" ":0!==s&&(o+=":");var a=r[s],c=15&a;o+=ie[(240&a)>>4]+ie[c]}i<r.length&&(o+="\n"+t+"... and "+(r.length-i)+" more");return o}(t,"".padEnd(4*(r+1)," ")).split("\n"),u=0,p=0,h=d;p<h.length;p++){var f=h[p];u>0&&e.push(J),e.push(n.withValue(f)),u++}else if(Array.isArray(t))if(1===t.length)e.push(W),ne(e,t[0],n,r),e.push(Q);else{e.push(W),e.push(J);for(u=0;u<t.length;u++){var g=t[u];re(e,r+1),ne(e,g,n,r+1),u<t.length-1&&(e.push(z),e.push(J))}e.push(J),re(e,r),e.push(Q)}else{var b=null!==(o=t[_])&&void 0!==o?o:{},y=Object.entries(t);if(0===y.length)e.push(G),e.push(H);else{e.push(G),e.push(J);for(u=0;u<y.length;u++){var m=y[u],v=m[0],w=m[1];re(e,r+1),ne(e,null!==(s=b[v])&&void 0!==s?s:v,n,r+1),e.push(Y),ne(e,w,n,r+1),u<y.length-1&&(e.push(z),e.push(J))}e.push(J),re(e,r),e.push(H)}}else e.push(n.withValue(t))}function re(e,t){for(var n=0;n<t;n++)e.push(F)}var ie="0123456789ABCDEF".split("");var oe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=Symbol("<Private>"),ae=function(){},ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oe(t,e),t.prototype.applyOtherPolicy=function(e){return se},t}(ae),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oe(t,e),t.prototype.applyOtherPolicy=function(e){return e._unsafeValue},t}(ae),de=function(){function e(e,t,n,r,i){void 0===r&&(r=ue),void 0===i&&(i=ne),this.idPolicy=e,this.deviceInfoPolicy=t,this.otherPolicy=n,this.stringifier=r,this.logifier=i}return e.preserveIDs=function(t){return new e(new k(t),new y,new ce)},e.prototype.apply=function(e){switch(e.piiClass){case d.NotPII:case d.Const:return e._unsafeValue;case d.AnonymizedID:case d.UserID:case d.UserInfo:case d.SessionID:case d.SessionInfo:return this.idPolicy.applyIDPolicy(e,this.stringifier);case d.DeviceInfo:case d.UserAgent:case d.Performance:return this.deviceInfoPolicy.applyDeviceInfoPolicy(e,this.stringifier);case d.Personal:case d.Sensitive:default:return this.otherPolicy.applyOtherPolicy(e,this.stringifier)}},e.prototype.unbox=function(e){var t=this.apply(e);return"symbol"==typeof t||t instanceof u?p:e._unsafeValue},e.prototype.stringifyShallow=function(e){var t,n=this.apply(e);return"symbol"==typeof n?null!==(t=n.description)&&void 0!==t?t:"<Private>":n instanceof u?n.group.groupLabel+"-"+n.id:this.stringifier(n)},e.prototype.stringify=function(e){var t=this,n=[];return this.logifier(n,e),n.map((function(e){return t.stringifyShallow(e)})).join("")},e.none=new e(new O,new b,new ce),e.replaceIDs=new e(new k([]),new b,new ce),e.replaceIDsAndPreserveDeviceInfo=new e(new k([]),new y,new ce),e.preserveAllIDs=new e(new I,new y,new ce),e.DEBUG_INTERNAL_ALL=new e(new I,new y,new le),e}();function ue(e){var t=typeof e;return"bigint"===t||"number"===t||"string"===t||"boolean"===t||"symbol"===t||"undefined"===t?""+e:JSON.stringify(e,(function(e,t){return"bigint"==typeof t?""+t:t}))}K.defaultPolicy=de.none;var pe=Date.now(),he="undefined"!=typeof performance?pe-performance.now():0;function fe(){return Date.now()}function ge(){return performance.now()+he}var be="undefined"==typeof performance?fe:ge;function ye(){return be()}var me=V("\n").withClass(d.Const),ve=V(":").withClass(d.Const),we=V('"').withClass(d.Const),Pe=function(){function e(e,t){void 0===t&&(t=[]),this.fragments=e,this.metadata=t,this.isLoggable=!0}return Object.defineProperty(e.prototype,"logString",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConst",{get:function(){return 0===this.metadata.length&&this.fragments.every((function(e){return e.piiClass===d.Const}))},enumerable:!1,configurable:!0}),e.fromJSON=function(t){return new e(t.f.map((function(e){return K.fromJSON(e)})),t.m.map((function(e){return function(e){var t=De.get(e.metadataType);if(!t)throw new Ce(Se(Me||(Me=Te(["Unknown log string metadata type: ",""],["Unknown log string metadata type: ",""])),V(t).notPII().forCertain()));return t(e)}(e)})))},e.prototype.equals=function(e){if(this===e)return!0;if(!e||"object"!=typeof e||e.constructor!==this.constructor)return!1;var t=this.fragments,n=this.metadata;if(n.length!==e.metadata.length)return!1;if(t.length!==e.fragments.length)return!1;var r=de.DEBUG_INTERNAL_ALL;return t.every((function(t,n){var r=e.fragments[n];return t._unsafeValue===r._unsafeValue&&t.piiClass===r.piiClass}))&&n.every((function(t,n){return t.toJSON(r)===e.metadata[n].toJSON(r)}))},e.prototype.toJSON=function(e){return void 0===e&&(e=de.none),{f:this.fragments.map((function(t){return t.toJSON(e)})),m:this.metadata.map((function(t){return t.toJSON(e)}))}},e.prototype.toString=function(e){return void 0===e&&(e=de.none),this.fragments.map((function(t){return t.toString(e)})).join("")},e.empty=new e([]),e.newline=new e([me]),e}();function Se(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(C(e))return e.logString;for(var r=[],i=[],o=0;o<e.length;o++){if(""!==e[o])for(var s=e[o].split(/\n/g),a=0;a<s.length;a++){var c=s[a];a>0&&r.push(me),c.length>0&&r.push(V(c).withClass(d.Const))}if(t.length>o){var l=t[o];if(C(l))r.push.apply(r,l.logString.fragments);else if(Ee(l))i.push(l);else{var u=V(l),p=u._unsafeValue;"string"==typeof p?$e(r,p,u):r.push(u)}}}return 0===r.length&&0===i.length?Pe.empty:new Pe(r,i)}function $e(e,t,n){for(var r,i=t.split(/\n/g),o=0;o<i.length;o++){var s=i[o];o>0&&e.push(me);var a=null!==(r=s.match(/^(\s*)(.*?)(\s*)$/))&&void 0!==r?r:[s,"",s,""],c=a[1],l=a[2],d=a[3];c.length>0&&e.push(V(c).notPII().forCertain());var u=l.match(/^"([^"]+)"(\s*):(\s*)(.*)$/);if(u){u[0];var p=u[1],h=u[2],f=u[3],g=u[4];e.push(we),e.push(n.withValue(p)),e.push(we),h.length>0&&e.push(V(h).notPII().forCertain()),e.push(ve),f.length>0&&e.push(V(f).notPII().forCertain()),g.length>0&&e.push(n.withValue(g))}else l.length>0&&e.push(n.withValue(l));d.length>0&&e.push(V(d).notPII().forCertain())}}var Oe,ke=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ie=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Ce=function(e){function t(n,r){void 0===r&&(r="");var i=e.call(this,n.logString.toString())||this;return i.description=n,i.id=r,i.isLoggable=!0,i.isLogError=!0,Object.defineProperty(i,"logString",{get:function(){return i.description.logString}}),i.toString=t.prototype.toString,i}return ke(t,e),Object.defineProperty(t.prototype,"logString",{get:function(){return this.description.logString},enumerable:!1,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=de.none),this.logString.toString(e)},t}(Error);function Re(e,t){void 0===t&&(t=function(){return Se(Oe||(Oe=Ie([""],[""])))});var n=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(void 0,n);return new Ce(i,e)};return n.id=e,n.is=function(t){return(n=t)&&n.isLogError&&t.id===e;var n},n}var Me,Te=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},De=new Map;function Ee(e){return e&&e.isLogStringMetadata}var Ae,je,Ne,Be,_e=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},xe=Se(Ae||(Ae=_e(["."],["."]))),Ue=Se(je||(je=_e(["["],["["]))),Le=Se(Ne||(Ne=_e(["]"],["]"])));function Ke(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1/0),We(e)||null===e?function(e,t,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=1/0);for(var s=[],a=e,c=[];a;)c.push(a),a=a.parent;c.reverse();for(var l=i;l<Math.min(c.length,i+o);l++){l>0&&s.push.apply(s,n.fragments);var d=c[l];s.push.apply(s,t(d).fragments)}return 0===s.length?Pe.empty:(r&&s.push.apply(s,r.fragments),new Pe(s))}(e,(function(e){return Se(Be||(Be=_e(["","","","",""],["","","","",""])),e.message,Ue,e.id,Le)}),xe,null,t,n):e}var qe,Ve=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Fe=function(){return(Fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ge=1,He=function(){function e(e,t,n){void 0===n&&(n=null),this.message=e,this.parent=n,this.isLogReference=!0,this.uniqueID=Ge++,t||(t=Se(qe||(qe=Ve(["T-",""],["T-",""])),V(this.uniqueID).anonymizedID())),this.id=t}return e.fromJSON=function(t){return new e("string"==typeof t.m?new Pe([V(t.m).constant()]):Pe.fromJSON(t.m),"string"==typeof t.i?new Pe([V(t.i).constant()]):Pe.fromJSON(t.i),t.p?e.fromJSON(t.p):null)},Object.defineProperty(e.prototype,"stack",{get:function(){for(var e=[this],t=this.parent;t;)e.push(t),t=t.parent;return e.reverse(),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logString",{get:function(){return Ke(this)},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(e){return void 0===e&&(e=de.none),Fe(Fe({},this.parent?{p:this.parent.toJSON(e)}:{}),{m:this.message.isConst?this.message.toString():this.message.toJSON(e),i:this.id.isConst?this.id.toString():this.id.toJSON(e)})},e.prototype.toString=function(e,t,n){return void 0===e&&(e=de.none),void 0===t&&(t=0),void 0===n&&(n=1/0),Ke(this,t,n).toString(e)},e}();function We(e){return e&&e.isLogReference}var Qe=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},ze={},Je=[null],Ye=1,Ze=function(){function e(e){this.key=e,this.id=Ye++,Je[this.id]=this}return e.prototype.tag=function(e){return void 0===e&&(e=null),We(e)?new gt(this,e):C(e)?new gt(this,e.logString):new gt(this,Se(et||(et=Qe(["",""],["",""])),e))},e}();function Xe(e){var t=ze[e];return t||(ze[e]=new Ze(e),ze[e])}var et,tt=Xe("source"),nt=Xe("activity"),rt=Xe("package"),it=Xe("subsystem"),ot=(Xe("process"),Xe("thread"),Xe("cat")),st=Xe("mark"),at=Xe("measureStart"),ct=Xe("measureEnd");function lt(e){return null===e?null:"string"==typeof e?new Pe([V(e).constant()]):"r"===e.t?He.fromJSON(e.v):Pe.fromJSON(e.v)}function dt(e,t){return e instanceof He?{t:"r",v:e.toJSON(t)}:null!==e&&e.isConst?e.toString():null!==e?{t:"s",v:null==e?void 0:e.toJSON(t)}:null}var ut,pt,ht,ft,gt=function(){function e(e,t){this.type=e,this.value=t,this.isLogStringMetadata=!0,this.isLogStringTagMetadata=!0}return e.fromJSON=function(t){var n=t;return new e(Xe(n.type),lt(n.value))},e.prototype.toJSON=function(e){return{metadataType:"__tag",type:this.type.key,value:dt(this.value,e)}},e}();function bt(e){return e&&e.isLogStringTagMetadata}ut="__tag",pt=function(e){return gt.fromJSON(e)},De.set(ut,pt),function(e){e[e.Error=0]="Error",e[e.Warn=1]="Warn",e[e.Info=2]="Info",e[e.HTTP=3]="HTTP",e[e.Performance=4]="Performance",e[e.Verbose=5]="Verbose",e[e.Debug=6]="Debug",e[e.Silly=7]="Silly"}(ht||(ht={})),function(e){e[e.None=0]="None",e[e.Separator=1]="Separator",e[e.Break=2]="Break",e[e.H1=3]="H1",e[e.H2=4]="H2",e[e.H3=5]="H3",e[e.H4=6]="H4",e[e.H5=7]="H5"}(ft||(ft={}));var yt=function(){return(yt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},mt=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};function vt(e,t){return"function"==typeof t?t(e):t}var wt=[],Pt=0;var St=function(){function e(e,t){var n=void 0===t?{}:t,r=n.logTimestamp,i=void 0===r?ye():r,o=n.logTagKeys,s=void 0===o?wt:o,a=n.logMessageID,c=void 0===a?Pt++:a,l=n.logTagValues,d=void 0===l?wt:l,u=n.logStyle,p=void 0===u?ft.None:u,h=n.logLevel,f=void 0===h?ht.Info:h;this.isLoggable=!0,this.logTimestamp=ye(),this.logStyle=ft.None,this.logString=e.logString,this.logLevel=f,this.logMessageID=c,this.logTimestamp=i,this.logTagKeys=s,this.logTagValues=d,this.logStyle=p;for(var g=[],b=0,y=this.logString.metadata;b<y.length;b++){bt(I=y[b])&&(g||(g=[]),g.push(I))}if(g.length>0){for(var m={},v={},w=0,P=0,S=this.logTagKeys;P<S.length;P++){var $=S[P];m[$.key]=$,v[$.key]=this.logTagValues[w],w++}for(var O=0,k=g;O<k.length;O++){var I;m[(I=k[O]).type.key]=I.type,v[I.type.key]=I.value}var C=[],R=[];for(var M in m)C.push(m[M]),R.push(v[M]);this.logTagKeys=C,this.logTagValues=R}}return Object.defineProperty(e.prototype,"logActivityStack",{get:function(){for(var e=[],t=this.logActivity;t;)e.push(t),t=We(t)?t.parent:null;return e.reverse(),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logRootActivity",{get:function(){var e;return null!==(e=this.logActivityStack[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logActivity",{get:function(){return this.getTag(nt)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logSource",{get:function(){return this.getTag(tt)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logParams",{get:function(){var e=this,t=e.logTimestamp,n=e.logLevel,r=e.logMessageID,i=e.logTagKeys,o=e.logTagValues;return{logTimestamp:t,logMessageID:r,logLevel:n,logStyle:e.logStyle,logTagKeys:i,logTagValues:o}},enumerable:!1,configurable:!0}),e.fromJSON=function(t){var n=[],r=[];for(var i in t.tg){var o=t.tg[i];n.push(Xe(i)),r.push(lt(o))}return new e(Pe.fromJSON(t.m),{logTimestamp:t.t,logMessageID:t.i,logLevel:t.l,logStyle:t.s,logTagKeys:n,logTagValues:r})},e.prototype.params=function(e){var t=vt(this.logParams,e);return new this.constructor(this.logString,yt(yt({},this.logParams),t))},e.prototype.level=function(e){var t=vt(this.logLevel,e);return this.params({logLevel:t})},e.prototype.source=function(e){return this.tag(tt,e)},e.prototype.activity=function(e){return this.tag(nt,e)},e.prototype.tag=function(e,t){void 0===t&&(t=null);var n=this.logTagKeys.indexOf(e);if(n>=0){var r=vt(this.logTagValues[n],t);return this.withTags(this.logTagKeys,mt(mt(mt([],this.logTagValues.slice(0,n)),[r]),this.logTagValues.slice(n+1)))}return this.withTags(mt(mt([],this.logTagKeys),[e]),mt(mt([],this.logTagValues),[vt(null,t)]))},e.prototype.withTags=function(e,t){return this.params({logTagKeys:e,logTagValues:t})},e.prototype.getTag=function(e){var t=this.logTagKeys.indexOf(e);return t<0?null:this.logTagValues[t]},e.prototype.tags=function(e,t){if(this.logTagKeys===wt)return this.withTags(e,t);for(var n=this,r=0;r<e.length;r++)n=n.tag(e[r],t[r]);return n},e.prototype.style=function(e){var t=vt(this.logStyle,e);return this.params({logStyle:t})},e.prototype.message=function(e){var t=vt(this.logString,e);return new this.constructor(t,this.logParams)},e.prototype.timestamp=function(e){var t=vt(this.logTimestamp,e);return this.params({logTimestamp:t})},e.prototype.toJSON=function(e){var t=this;return void 0===e&&(e=de.none),{i:this.logMessageID,t:this.logTimestamp,l:this.logLevel,m:this.logString.toJSON(e),tg:Object.fromEntries(this.logTagKeys.map((function(n,r){var i=t.logTagValues[r];return[n.key,dt(i,e)]}))),s:this.logStyle}},e.prototype.toString=function(e){return void 0===e&&(e=de.none),this.logString.toString(e)},e}(),$t=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};function Ot(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e instanceof St?e:C(e)?new St(e):new St(Se.apply(void 0,$t([e],t)))}var kt,It,Ct,Rt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Mt=V("s").withClass(d.Const),Tt=V("ms").withClass(d.Const);function Dt(e){return!(!e||!0!==e.isLogger)}var Et=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};function At(e,t,n){return void 0===t&&(t=function(e){return e}),{handler:e,error:function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=t(Ot.apply(void 0,Et([n],r)).level(ht.Error));return e.log(o),new Ce(o.logString)},warn:function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];n&&!n.shouldLoggerLogAtLevel(ht.Warn,this)||e.log(t(Ot.apply(void 0,Et([r],i)).level(ht.Warn)))},info:function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];n&&!n.shouldLoggerLogAtLevel(ht.Info,this)||e.log(t(Ot.apply(void 0,Et([r],i)).level(ht.Info)))},log:function(r){n&&!n.shouldLoggerLogAtLevel(r.logLevel,this)||e.log(t(r))},http:function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];n&&!n.shouldLoggerLogAtLevel(ht.HTTP,this)||e.log(t(Ot.apply(void 0,Et([r],i)).level(ht.HTTP)))},performance:function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];n&&!n.shouldLoggerLogAtLevel(ht.Performance,this)||e.log(t(Ot.apply(void 0,Et([r],i)).level(ht.Performance)))},verbose:function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];n&&!n.shouldLoggerLogAtLevel(ht.Verbose,this)||e.log(t(Ot.apply(void 0,Et([r],i)).level(ht.Verbose)))},debug:function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];n&&!n.shouldLoggerLogAtLevel(ht.Debug,this)||e.log(t(Ot.apply(void 0,Et([r],i)).level(ht.Debug)))},silly:function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];n&&!n.shouldLoggerLogAtLevel(ht.Silly,this)||e.log(t(Ot.apply(void 0,Et([r],i)).level(ht.Silly)))}}}var jt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Nt=function(){return(Nt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Bt=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};function _t(e,t,n,r,i){return Object.assign((function(){return r.tag(t,(function(e){return new He(n,i,We(e)?e:null)}))}),{id:function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return _t(e,t,n,r,Se.apply(void 0,Bt([i],o)))}})}var xt,Ut,Lt,Kt=new St(new Pe([]));function qt(e,t){var n=void 0===t?{}:t,r=n.baseMessage,i=void 0===r?Kt:r,o=n.transform,s=void 0===o?function(e){return e}:o,a=n.filter,c=function(e){return s(e.tags(i.logTagKeys,i.logTagValues))},l=At(e,c,a);return Nt(Nt({isLogger:!0},l),{handler:e,baseMessage:i,logTransform:c,options:{baseMessage:i,transform:s,filter:a},get logSource(){return this.baseMessage.logSource},get logActivity(){return this.baseMessage.logActivity},log:function(t){a&&!a.shouldLoggerLogAtLevel(t.logLevel,this)||e.log(s(t))},transform:function(t){return qt(e,Nt(Nt({},this.options),{transform:function(e){return t(s(e))}}))},withTransform:function(t){return qt(e,Nt(Nt({},this.options),{transform:t}))},source:function(t){return qt(e,Nt(Nt({},this.options),{baseMessage:this.baseMessage.source(t)}))},child:function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return _t(e,tt,Se.apply(void 0,Bt([t],n)),this)},activity:function(t){return qt(e,Nt(Nt({},this.options),{baseMessage:this.baseMessage.activity(Dt(t)?t.logActivity:t)}))},begin:function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return _t(e,nt,Se.apply(void 0,Bt([t],n)),this)},tag:function(t,n){return void 0===n&&(n=null),qt(e,Nt(Nt({},this.options),{baseMessage:this.baseMessage.tag(t,n)}))},package:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.tag(rt,Se.apply(void 0,Bt([e],t)))},subsystem:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.tag(it,Se.apply(void 0,Bt([e],t)))},category:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.tag(ot,Se.apply(void 0,Bt([e],t)))},mark:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.tag(st);r.performance(xt||(xt=jt(["Mark: ",""],["Mark: ",""])),Se.apply(void 0,Bt([e],t)))},measure:function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=ye();return this.tag(at).performance(Ut||(Ut=jt(["Begin: ",""],["Begin: ",""])),Se.apply(void 0,Bt([e],n))),{end:function(){var r=ye()-i;return t.tag(ct).performance(Lt||(Lt=jt(["End: "," (","ms elapsed)"],["End: "," (","ms elapsed)"])),Se.apply(void 0,Bt([e],n)),r),r}}},sep:At(e,(function(e){return c(e.style(ft.Separator))}),a),break:At(e,(function(e){return c(e.style(ft.Break))}),a),h1:At(e,(function(e){return c(e.style(ft.H1))}),a),h2:At(e,(function(e){return c(e.style(ft.H2))}),a),h3:At(e,(function(e){return c(e.style(ft.H3))}),a),h4:At(e,(function(e){return c(e.style(ft.H4))}),a),h5:At(e,(function(e){return c(e.style(ft.H5))}),a)})}function Vt(e){var t=void 0===e?{}:e,n=t.level,r=void 0===n?ht.Silly:n,i=t.piiPolicy,o=void 0===i?de.none:i,s=t.mappings,a=void 0===s?Ft:s,c=t.formatter,l=void 0===c?function(e){var t=void 0===e?{}:e,n=t.shouldWrapLevel,r=void 0===n||n,i=t.seconds,o=void 0===i||i,s=t.timestampDecimalPlaces,a=void 0===s?o?2:0:s,c=t.floor,l=void 0===c||c,d=null,u=null,p=null;return function(e){var t,n=[];null===d&&(d=e.logTimestamp);var i=Math.pow(10,a),s=((l?Math.floor:Math.round)((e.logTimestamp-d)/(1e3/i))/i).toFixed(a),c=e.logActivity,h=e.logSource;h!==p&&n.push(Ot(kt||(kt=Rt(["META == ",""],["META == ",""])),Ke(h)).params(e.logParams)),c!==u&&n.push(Ot(It||(It=Rt(["META -- ",""],["META -- ",""])),Ke(c)).params(e.logParams)),u=c,p=h;var f=o?Mt:Tt;return n.push(Ot(Ct||(Ct=Rt(["",""," "," ",""],["",""," "," ",""])),V(s).notPII().forCertain(),f,V(r?"["+(null!==(t=ht[e.logLevel])&&void 0!==t?t:"Unknown")+"]":ht[e.logLevel]).notPII().forCertain(),e.logString).params(e.logParams)),n}}():c,d=t.consoleImplementation,u=void 0===d?console:d;return qt({log:function(e){var t;if(!(e.logLevel>r))for(var n=0,i=l(e);n<i.length;n++){var s=i[n];u[null!==(t=a.get(e.logLevel))&&void 0!==t?t:"log"](s.toString(o))}}},{filter:t.filter})}var Ft=new Map([[ht.Error,"error"],[ht.Warn,"warn"],[ht.Info,"log"],[ht.HTTP,"info"],[ht.Verbose,"debug"],[ht.Performance,"debug"],[ht.Debug,"debug"],[ht.Silly,"debug"]]),Gt=function(){function e(e,t,n,r,i){this.name=e,this.spec=t,this.raw=n,this.getEnv=r,this.fallbackFor=i,this.nullValue=t.type()}return Object.defineProperty(e.prototype,"configurable",{get:function(){var e=this.spec.configurable;return"object"==typeof e&&(e=e[this.getEnv()]),null!=e&&e},enumerable:!1,configurable:!0}),e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return String(this.value)},Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype.sanityCheck=function(e){var t,n,r=this.spec,i=r.oneOf,o=r.matches,s=r.type;if(n=s===Boolean?"false"!==e&&"0"!==e&&!!e:s(e),i){if(!0===e)return null!==(t=i[1])&&void 0!==t?t:i[0];if(i.includes(n))return n}else if("number"!=typeof n||isFinite(n)){if(!o||o.test(n+""))return n}else;},e.prototype.getValue=function(){var e,t=this.raw;if(this.configurable&&void 0!==t){var n=this.sanityCheck(t);if(void 0!==n)return n}var r=null===(e=this.fallbackFor)||void 0===e?void 0:e.call(this,this.name);return void 0!==r&&(r=this.sanityCheck(r)),null!=r?r:this.defaultValue},Object.defineProperty(e.prototype,"defaultValue",{get:function(){var e=this.spec.value;"object"==typeof e&&(e=e[this.getEnv()]);var t=this.nullValue;if(typeof e==typeof t)return e;var n=this.spec.oneOf;return n?n[0]:t},enumerable:!1,configurable:!0}),e}();function Ht(e){void 0===e&&(e=null!==top&&void 0!==top?top:window);var t=function(e){try{return e.location.search}catch(e){return""}}(e),n=function(e){try{return e.location.hash.replace(/^#/,"")}catch(e){return""}}(e);return n?t+"&"+n:t}function Wt(e){var t=e.indexOf("=");return-1===t?[decodeURIComponent(e),!0]:[decodeURIComponent(e.slice(0,t)),decodeURIComponent(e.slice(1+t))]}function Qt(e){return void 0===e&&(e=Ht()),Object.fromEntries(function(e){void 0===e&&(e=Ht());return(e?e.replace(/^[?&]+/,"").split("&"):[]).map(Wt)}(e))}var zt=function(){return(zt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Jt=function(){function e(e,t,n,r,i){var o=this;void 0===t&&(t=Ht),void 0===i&&(i=Qt),this.specs=e,this.getInput=t,this.parseInput=i;var s=i(this._lastInput=t()),a=Object.entries(e).map((function(e){var t=e[0],i=e[1];return[t,new Gt(t,i,s[t],n,r)]})),c=this.flags=Object.fromEntries(a);this.values=Object.defineProperties({},Object.fromEntries(a.map((function(e){var t=e[0];return[t,{enumerable:!0,get:function(){return o.updateFlags(),c[t].getValue()}}]}))))}return Object.defineProperty(e.prototype,"lastInput",{get:function(){return this._lastInput},enumerable:!1,configurable:!0}),e.prototype.updateFlags=function(e){if(void 0===e&&(e=this.getInput()),e===this.lastInput)return!1;var t=this.parseInput(this._lastInput=e);for(var n in this.flags)this.flags[n].raw=t[n];return!0},e.prototype.computeFlags=function(e){var t=this;return void 0===e&&(e=Object.keys(this.flags)),e.reduce((function(e,n){var r;return zt(zt({},e),((r={})[n]=t.values[n],r))}),{})},e.prototype.isOverridden=function(e){return this.values[e]!==this.flags[e].defaultValue},e}();n(6);const Yt=!!Array.from(document.scripts).find(e=>e.src.match(/\/applications\/facetime2\/[^/]+Carry/)),Zt=[[/\.icloud\.com$/i,"sandbox"],[/icloud[23]-facetime.apple.com$/i,"carry"],[/icloud1-facetime.apple.com$/i,"prod"],[/carry-facetime.apple.com$/i,"carry"],[/prod-facetime.apple.com$/i,"prod"]],Xt=[[/\.icloud\.com$/i,"sandbox"],[/icloud1-facetime.apple.com$/i,"icloud1"],[/icloud2-facetime.apple.com$/i,"icloud2"],[/icloud3-facetime.apple.com$/i,"icloud3"],[/carry-facetime.apple.com$/i,"carry"]];function en(e,t,n,r=Yt){if(r)return"carry";for(const[n,r]of t)if(n.test(e))return r;return n}function tn(e){return"facetime"+("prod"===e?"":".internal")}function nn(e){return!1}function rn(e){let t="";for(let n=0;n<e.length;n++)t+=e[n].toString(16).padStart(2,"0");return t}function on(e){if(e instanceof Error)return e;if(e.length%2!=0)return new Ce(Se`hex string has invalid length`);const t=[];for(let n=0;n<e.length;n+=2){const r=parseInt(e.substr(n,2),16);if(Number.isNaN(r))return new Ce(Se`hex string has invalid characters`);t.push(r)}return new Uint8Array(t)}function sn(e){if(4===e.length)return e.join(".");if(16===e.length)return[0,2,4,6,8,10,12,14].map(t=>rn(e.subarray(t,t+2))).join(":");throw new Ce(Se`Invalid IP address`)}function an(e,t){const n=sn(e);return 4===e.length?`${n}:${t}`:`[${n}]:${t}`}const cn={config:["FaceTime","Logger","Config","LoggingSetup"],metrics:["shared","metrics","Reported","Metrics"]},ln=`(?:${Object.keys(ht).concat(Object.keys(cn)).join("|")}|[-\\w\\s\\[\\].]*)`,dn={prod:!1,carry:!0,icloud1:!1,icloud2:!0,icloud3:!0,sandbox:!0},un={type:Boolean,configurable:dn,value:dn},pn=new Jt({env:{configurable:!0,type:String,oneOf:["prod","carry","tc","sandbox"],value:{prod:"prod",carry:en(location.hostname,Zt,"prod"),icloud1:"prod",icloud2:en(location.hostname,Zt,"prod"),icloud3:en(location.hostname,Zt,"prod"),sandbox:en(location.hostname,Zt,"prod")}},n:{configurable:!0,type:String},hide:{configurable:!0,type:Boolean},mute:{configurable:!0,type:Boolean},failRemoteSDP:{type:Boolean,configurable:!1},failLocalSDP:{type:Boolean,configurable:!1},decodeH264:{oneOf:[void 0,!0,!1],value:void 0,configurable:!0,type:Boolean},encodeH264:{oneOf:[void 0,!0,!1],value:void 0,configurable:!0,type:Boolean},aq:{configurable:!0,type:String,oneOf:["a","h","l"],value:"a"},vq:{configurable:!0,type:String,oneOf:["a","h","m","l"],value:"a"},ul:{configurable:!0,type:Boolean,value:!0},dl:{configurable:!0,type:Boolean,value:!0},multitier:{configurable:!0,type:Boolean,value:!0},twcc:{configurable:!0,type:Boolean},singleSsrc:{configurable:!0,type:Boolean},sbwe:{configurable:!1,type:Boolean},srd:{configurable:!0,type:Boolean,value:!0},sro:{configurable:!0,type:Number,value:1e3},log:{configurable:!0,type:String,loggers:cn,matches:new RegExp(`^-?(?:${ln}(, *${ln})*)?$`,"i"),value:{prod:"",carry:"-",icloud1:"",icloud2:"-",icloud3:"-",sandbox:"-"}},allocateon:{configurable:!0,type:String,matches:/^(((25[0-5]|2[0-4]\d|[01]?\d\d?)(\.|\b)){4}|(([\da-f]{1,4}:){7}[\da-f]{1,4}|([\da-f]{1,4}:){1,7}:|([\da-f]{1,4}:){1,6}:[\da-f]{1,4}|([\da-f]{1,4}:){1,5}(:[\da-f]{1,4}){1,2}|([\da-f]{1,4}:){1,4}(:[\da-f]{1,4}){1,3}|([\da-f]{1,4}:){1,3}(:[\da-f]{1,4}){1,4}|([\da-f]{1,4}:){1,2}(:[\da-f]{1,4}){1,5}|[\da-f]{1,4}:((:[\da-f]{1,4}){1,6})|:((:[\da-f]{1,4}){1,7}|:)|fe80:(:[\da-f]{0,4}){0,4}%[\da-z]{1,}|::(ffff(:0{1,4})?:)?((25[0-5]|(2[0-4]|1?[\d])?[\d])\.){3}(25[0-5]|(2[0-4]|1?[\d])?[\d])|([\da-f]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1?[\d])?[\d])\.){3}(25[0-5]|(2[0-4]|1?[\d])?[\d]))):([0-5]?\d{1,4}|6([0-4]\d{3}|5([0-4]\d\d|5([0-2]\d|3[0-5]))))$/i},helpDiagnose:{type:Boolean,configurable:!0,value:dn},qa:{type:Boolean,configurable:{...dn,carry:!1},value:{...dn,carry:!1}},showDiagnose:un,nonLinkPseud:{configurable:!1,type:String},silent:{configurable:!0,type:Boolean},grep:{configurable:!0,type:String},metrics:{configurable:!0,type:Boolean},feedbackws:{configurable:!0,type:Boolean},flags:{configurable:!1,type:Boolean},debug:{configurable:{prod:!1,carry:!0,icloud1:!1,icloud2:!0,icloud3:!0,sandbox:!0},type:Boolean},participantStats:{configurable:{prod:!1,carry:!0,icloud1:!1,icloud2:!0,icloud3:!0,sandbox:!0},type:Boolean,value:!1},minTiles:{configurable:!1,type:Number},useTestMediaDevices:{configurable:!1,type:Boolean},saveStats:{configurable:!1,type:Boolean},trace:{configurable:!0,type:Boolean,value:{prod:!1,carry:!0,icloud1:!0,icloud2:!0,icloud3:!0,sandbox:!0}},nack:{configurable:!0,type:Boolean,value:!0},averageSFrameQueueHighOccupancyWatermark:{configurable:!0,type:Number,value:.9},averageSFrameQueueLowOccupancyWatermark:{configurable:!0,type:Number,value:.3},averageSFrameQueueHighOccupancyMidTierTimeout:{configurable:!0,type:Number,value:1e3},averageSFrameQueueHighOccupancyLowTierTimeout:{configurable:!0,type:Number,value:1e4},averageSFrameQueueLowOccupancyTimeout:{configurable:!0,type:Number,value:3e4},restrictVideoQualityByUserAgent:{configurable:!0,type:Boolean,value:!0},throttleVideoQualityUsingSFrameQueueOccupancy:{configurable:!0,type:Boolean,value:!1},streamsUpdateDebounceInterval:{configurable:!0,type:Number,value:500},throttleDownlinkBandwidthEstimate:{configurable:!0,type:Boolean,value:!1},throttleDownlinkBandwidthEstimateTestFactor:{configurable:!0,type:Number,value:.75},throttleDownlinkBandwidthEstimatePenaltyFactor:{configurable:!0,type:Number,value:.9},throttleDownlinkBandwidthEstimatePenaltyTimer:{configurable:!0,type:Number,value:1e3},throttleDownlinkBandwidthEstimateRelaxationFactor:{configurable:!0,type:Number,value:1.2},throttleDownlinkBandwidthEstimateRelaxationInitialTimer:{configurable:!0,type:Number,value:3e5},throttleDownlinkBandwidthEstimateRelaxationContinuedTimer:{configurable:!0,type:Number,value:6e4},stressPromotion:{configurable:!0,type:Boolean,value:!1},cacheStatKeys:{configurable:!0,type:Boolean,value:!0},rvi:{configurable:!0,type:Number,oneOf:[2,1],value:2},queueOverlay:{configurable:!1,type:Boolean,value:!1},sendSkms:{configurable:!1,type:Boolean,value:!0},usePushForKeyExchange:{configurable:!1,type:Boolean,value:!0},useQRForKeyExchange:{configurable:!1,type:Boolean,value:!0},noNativeRedirect:{configurable:dn,type:Boolean,value:!1},tcpFallback:{configurable:dn,type:Boolean,value:!0}},Ht,hn,e=>!function(...e){return e.some(nn)}(e)&&void 0);function hn(){return en(location.hostname,Xt,"prod")}const fn=pn.values,gn=(pn.isOverridden.bind(pn),["info","log","warn","debug","error"]);let bn;const yn=function(){const{silent:e,grep:t}=fn;if(e||t)return function(e){bn=new RegExp(String(e),"g")}(t),gn.reduce((e,n)=>(e[n]=(e,...r)=>{const i=t&&"string"==typeof e&&bn.exec(e);return i?console[n](...function(e,t,n="red"){const r=[],i=String(e.input);let o=0,s="",a=e;do{const e=a.index;s+=i.slice(o,e);const t=a[0];s+=`%c${t}%c`,o=t.length+e,r.push("color: "+n,"color: inherit")}while(a=t.exec(i));return s+=i.slice(o),r.unshift(s),r}(i,bn),...r):"error"===n?console[n](e,...r):void 0},e),{})}(),mn=(e={})=>Vt({...e,consoleImplementation:yn}),vn=a(e=>mn()),wn=a(e=>{throw new Ce(Se`feedbackComponent can only be made by useInstance`)}),Pn=()=>{var e;return null!==(e=null===performance||void 0===performance?void 0:performance.now())&&void 0!==e?e:Date.now()};class Sn{constructor(){Object.defineProperty(this,"start",{enumerable:!0,configurable:!0,writable:!0,value:Pn()}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:null})}stopTimer(){return this.stop=Pn(),this}get duration(){var e;return(null!==(e=this.stop)&&void 0!==e?e:Pn())-this.start}}function $n(e){if(e instanceof Error)throw e;return e}function On(e,t=(e=>e)){const n=j(e);return{group:n,helper:e=>null==e?V(null).notPII().forCertain():V(t(e)).userID(n)}}const{group:kn,helper:In}=On("error"),{group:Cn,helper:Rn}=On("conversationTimeRef"),{group:Mn,helper:Tn}=On("terminalError"),{group:Dn,helper:En}=On("uiElement"),{group:An,helper:jn}=On("uiState"),{group:Nn,helper:Bn}=On("uiVerb");var _n,xn;!function(e){e[e.NoReason=0]="NoReason",e[e.Declined=2]="Declined",e[e.RelayFailedConferenceFailed=8]="RelayFailedConferenceFailed",e[e.CallFailed=14]="CallFailed",e[e.Kicked=26]="Kicked",e[e.DecryptionTimeout=1e3]="DecryptionTimeout",e[e.IDSQueryRatelimited=1001]="IDSQueryRatelimited",e[e.UnknownFailure=1002]="UnknownFailure",e[e.BadLink=1003]="BadLink",e[e.QRSessionAllocateResponseFailed=1004]="QRSessionAllocateResponseFailed",e[e.QRSessionAllocateResponseTimeout=1005]="QRSessionAllocateResponseTimeout",e[e.IDSPushConnectTimeout=1006]="IDSPushConnectTimeout",e[e.IDSInitialRegisterCallTimeout=1007]="IDSInitialRegisterCallTimeout",e[e.PushConnectionCloseFailed=1008]="PushConnectionCloseFailed",e[e.LetMeInFailedForUnknownReasons=1009]="LetMeInFailedForUnknownReasons",e[e.LetMeInResponseTimeout=1010]="LetMeInResponseTimeout",e[e.GotResponseFromAbandonedJoinAttempt=1011]="GotResponseFromAbandonedJoinAttempt",e[e.BadPushConnectTokenBase64=1017]="BadPushConnectTokenBase64",e[e.NoPushConnectToken=1018]="NoPushConnectToken",e[e.IDSInitialQueryTimeout=1019]="IDSInitialQueryTimeout",e[e.RegistrationReturnedAlreadyUsedURI=1020]="RegistrationReturnedAlreadyUsedURI",e[e.PushConnectionImmediatelyClosed=1021]="PushConnectionImmediatelyClosed",e[e.EmptyIDSInitialRegisterResponse=1022]="EmptyIDSInitialRegisterResponse",e[e.EmptyIDSInitialQueryResponse=1023]="EmptyIDSInitialQueryResponse"}(_n||(_n={})),function(e){e[e.MissingPseudonym=1]="MissingPseudonym",e[e.MissingPubkey=2]="MissingPubkey",e[e.MalformedPubkeyBase64=3]="MalformedPubkeyBase64",e[e.WrongPubKeyLength=4]="WrongPubKeyLength",e[e.TheirPubKeyIsBad=5]="TheirPubKeyIsBad",e[e.OurPubKeyIsBad=6]="OurPubKeyIsBad",e[e.MalformedNicknameBase64=7]="MalformedNicknameBase64",e[e.CouldNotReadLink=8]="CouldNotReadLink"}(xn||(xn={}));class Un extends Error{constructor(e,t,n=Se`${e} (${V(t).notPII().forCertain()}ms)`){super(n.toString()),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"duration",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"logString",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"isLoggable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}}function Ln(e){return new Promise(t=>e?setTimeout(t,e):t())}function Kn(){return Ln(1)}async function qn(e,t){return await Ln(e),new Un(t,e)}let Vn=null;function Fn(e,t,n){return Promise.race([e,qn(null!==Vn?Vn:t,n)])}function Gn(e,t,n){const r=Hn(e),i=r?e:Object.assign(e,{endReason:t});n||(n={endReasonClass:r?"Unknown":"OK"});for(const e in n){const t=e;i[t]||(i[t]=n[t])}return i}const Hn=e=>e&&e instanceof Error&&"endReason"in e;function Wn(e){const t=BigInt(8),n=BigInt(255),r=new Uint8Array(8);return r[7]=Number(e&n),e>>=t,r[6]=Number(e&n),e>>=t,r[5]=Number(e&n),e>>=t,r[4]=Number(e&n),e>>=t,r[3]=Number(e&n),e>>=t,r[2]=Number(e&n),e>>=t,r[1]=Number(e&n),e>>=t,r[0]=Number(e&n),r}function Qn(e,t,n=0){const r=BigInt(8);let i=BigInt(0);return i|=BigInt(e[n+0]),i<<=r,i|=BigInt(e[n+1]),i<<=r,i|=BigInt(e[n+2]),i<<=r,i|=BigInt(e[n+3]),i<<=r,i|=BigInt(e[n+4]),i<<=r,i|=BigInt(e[n+5]),i<<=r,i|=BigInt(e[n+6]),i<<=r,i|=BigInt(e[n+7]),!t&&i>=BigInt(2)**BigInt(63)&&(i=-(BigInt(2)**BigInt(64))+i),i}var zn,Jn,Yn,Zn,Xn,er=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},tr=function(){return(tr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},nr=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},rr=/^\[object/;function ir(e){return void 0===e&&(e=ht.Silly),function(t,n,r){var i,o,s=r.value,a=null!==(o=null===(i=t.constructor)||void 0===i?void 0:i.name)&&void 0!==o?o:null,c=a.match(rr)?null:V(a).constant();return tr(tr({},r),{value:function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=this.toString();t=C(this)?this.logString:c||(o.match(rr)?Se(zn||(zn=er([""],[""]))):V(o).constant());var a=r.slice(),l=a[a.length-1];Dt(l)?a.pop():l=this.logger;var d=this.logger.activity(l).begin(Jn||(Jn=er(["",":",""],["",":",""])),t,n).id(Yn||(Yn=er([""],[""])))();a.push(d);var u=Ot(Zn||(Zn=er(["() {"],["() {"]))).level(e);d.log(d.logTransform(u));var p=s.call.apply(s,nr([this],a)),h=Ot(Xn||(Xn=er(["}"],["}"]))).level(e);return d.log(d.logTransform(h)),p}})}}var or=n(7);function sr(e){return or.fromByteArray(e)}const ar=/[\w+/-]/g,cr=/={0,2}$/;function lr(e){if(e instanceof Error)return e;if("string"==typeof e){const t=(e||"").replace(cr,"");if(""!==t.replace(ar,"")){const e=t.replace(ar,"-");return new Ce(Se`Found invalid Base64 chars: "${V(e).notPII().forCertain()}"`)}}try{return or.toByteArray(e)}catch(e){return e}}function dr(e){return or.fromByteArray(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ur(e){if(e||(e=new Error("Missing base64URL!")),e instanceof Error)return e;try{let t=e.replace(/-/g,"+").replace(/_/g,"/");const n=t.length;switch(n%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:return new Ce(Se`base64url string has an invalid length. Length: ${V(n).notPII().forCertain()}`)}return lr(t)}catch(e){return e}}new TextDecoder;class pr{constructor(){Object.defineProperty(this,"closers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}add(e){this.closers.push(e)}close(){for(const e of this.closers)e();this.closers.length=0}}const hr=a(()=>{throw new Ce(Se`Lifetime components should not be auto-instantiated.`)});var fr=n(3),gr=n.n(fr),br=n(1);const yr=br.Reader,mr=br.Writer,vr=br.util,wr=br.roots.default||(br.roots.default={}),Pr=wr.websocketpush=(()=>{const e={};return e.WebClientConnectionMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.connectionMessageV1=null,Object.defineProperty(e.prototype,"message",{get:vr.oneOfGetter(t=["connectionMessageV1"]),set:vr.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=mr.create()),null!=e.connectionMessageV1&&Object.hasOwnProperty.call(e,"connectionMessageV1")&&wr.websocketpush.WebClientConnectionMessage.ConnectionMessageV1.encode(e.connectionMessageV1,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebClientConnectionMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.connectionMessageV1=wr.websocketpush.WebClientConnectionMessage.ConnectionMessageV1.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.ConnectionMessageV1=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.publicKey=vr.newBuffer([]),e.prototype.nonce=vr.newBuffer([]),e.prototype.signature=vr.newBuffer([]),e.prototype.connectWithPushToken=null,e.prototype.newConnectionRequest=null,Object.defineProperty(e.prototype,"RequestType",{get:vr.oneOfGetter(t=["connectWithPushToken","newConnectionRequest"]),set:vr.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=mr.create()),null!=e.publicKey&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(10).bytes(e.publicKey),null!=e.nonce&&Object.hasOwnProperty.call(e,"nonce")&&t.uint32(18).bytes(e.nonce),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(26).bytes(e.signature),null!=e.connectWithPushToken&&Object.hasOwnProperty.call(e,"connectWithPushToken")&&wr.websocketpush.WebClientConnectionMessage.ConnectionMessageV1.ConnectWithPushToken.encode(e.connectWithPushToken,t.uint32(34).fork()).ldelim(),null!=e.newConnectionRequest&&Object.hasOwnProperty.call(e,"newConnectionRequest")&&wr.websocketpush.WebClientConnectionMessage.ConnectionMessageV1.NewConnectionRequest.encode(e.newConnectionRequest,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebClientConnectionMessage.ConnectionMessageV1;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.publicKey=e.bytes();break;case 2:r.nonce=e.bytes();break;case 3:r.signature=e.bytes();break;case 4:r.connectWithPushToken=wr.websocketpush.WebClientConnectionMessage.ConnectionMessageV1.ConnectWithPushToken.decode(e,e.uint32());break;case 5:r.newConnectionRequest=wr.websocketpush.WebClientConnectionMessage.ConnectionMessageV1.NewConnectionRequest.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.ConnectWithPushToken=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.pushToken="",e.encode=function(e,t){return t||(t=mr.create()),null!=e.pushToken&&Object.hasOwnProperty.call(e,"pushToken")&&t.uint32(10).string(e.pushToken),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebClientConnectionMessage.ConnectionMessageV1.ConnectWithPushToken;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.pushToken=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.NewConnectionRequest=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.tokenExpirationSeconds=0,e.encode=function(e,t){return t||(t=mr.create()),null!=e.tokenExpirationSeconds&&Object.hasOwnProperty.call(e,"tokenExpirationSeconds")&&t.uint32(8).uint32(e.tokenExpirationSeconds),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebClientConnectionMessage.ConnectionMessageV1.NewConnectionRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.tokenExpirationSeconds=e.uint32();break;default:e.skipType(7&t)}}return r},e}(),e}(),e}(),e.WebConnectionResponseMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.pushToken="",e.prototype.status=0,e.prototype.serverTimestampSeconds=vr.Long?vr.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=mr.create()),null!=e.pushToken&&Object.hasOwnProperty.call(e,"pushToken")&&t.uint32(10).string(e.pushToken),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(16).int32(e.status),null!=e.serverTimestampSeconds&&Object.hasOwnProperty.call(e,"serverTimestampSeconds")&&t.uint32(24).uint64(e.serverTimestampSeconds),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebConnectionResponseMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.pushToken=e.string();break;case 2:r.status=e.int32();break;case 3:r.serverTimestampSeconds=e.uint64();break;default:e.skipType(7&t)}}return r},e.Status=function(){const e={},t=Object.create(e);return t[e[0]="OK"]=0,t[e[1]="BAD_REQUEST"]=1,t[e[2]="INVALID_NONCE"]=2,t[e[3]="AUTH_FAILED"]=3,t[e[4]="RATE_LIMITED"]=4,t[e[5]="INTERNAL_ERROR"]=5,t[e[6]="EXPIRED_PUSH_TOKEN"]=6,t}(),e}(),e.WebChannelSubscriptionsRequest=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.payload=null,e.prototype.messageId=0,e.encode=function(e,t){return t||(t=mr.create()),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&wr.websocketpush.WebChannelSubscriptionsRequest.Payload.encode(e.payload,t.uint32(10).fork()).ldelim(),null!=e.messageId&&Object.hasOwnProperty.call(e,"messageId")&&t.uint32(16).uint32(e.messageId),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.payload=wr.websocketpush.WebChannelSubscriptionsRequest.Payload.decode(e,e.uint32());break;case 2:r.messageId=e.uint32();break;default:e.skipType(7&t)}}return r},e.Payload=function(){function e(e){if(this.appChannelSubscriptions=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.appChannelSubscriptions=vr.emptyArray,e.prototype.subscriptionsType=0,e.prototype.sequenceNumber=vr.Long?vr.Long.fromBits(0,0,!0):0,e.encode=function(e,t){if(t||(t=mr.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).int32(e.version),null!=e.appChannelSubscriptions&&e.appChannelSubscriptions.length)for(let n=0;n<e.appChannelSubscriptions.length;++n)wr.websocketpush.WebChannelSubscriptionsRequest.Payload.AppChannelSubscriptions.encode(e.appChannelSubscriptions[n],t.uint32(18).fork()).ldelim();return null!=e.subscriptionsType&&Object.hasOwnProperty.call(e,"subscriptionsType")&&t.uint32(24).int32(e.subscriptionsType),null!=e.sequenceNumber&&Object.hasOwnProperty.call(e,"sequenceNumber")&&t.uint32(32).uint64(e.sequenceNumber),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsRequest.Payload;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.int32();break;case 2:r.appChannelSubscriptions&&r.appChannelSubscriptions.length||(r.appChannelSubscriptions=[]),r.appChannelSubscriptions.push(wr.websocketpush.WebChannelSubscriptionsRequest.Payload.AppChannelSubscriptions.decode(e,e.uint32()));break;case 3:r.subscriptionsType=e.int32();break;case 4:r.sequenceNumber=e.uint64();break;default:e.skipType(7&t)}}return r},e.SubscriptionType=function(){const e={},t=Object.create(e);return t[e[0]="DELTA_SUBSCRIPTION"]=0,t[e[1]="FULL_SUBSCRIPTION"]=1,t}(),e.Version=function(){const e={},t=Object.create(e);return t[e[0]="V_UNUSED"]=0,t[e[1]="V_1"]=1,t[e[2]="V_2"]=2,t}(),e.ChannelSubscription=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.channelId=vr.newBuffer([]),e.prototype.checkpoint=vr.Long?vr.Long.fromBits(0,0,!0):0,e.prototype.messageReplayCount=vr.Long?vr.Long.fromBits(0,0,!0):0,Object.defineProperty(e.prototype,"SubscriptionInfo",{get:vr.oneOfGetter(t=["checkpoint","messageReplayCount"]),set:vr.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=mr.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).bytes(e.channelId),null!=e.checkpoint&&Object.hasOwnProperty.call(e,"checkpoint")&&t.uint32(16).uint64(e.checkpoint),null!=e.messageReplayCount&&Object.hasOwnProperty.call(e,"messageReplayCount")&&t.uint32(32).uint64(e.messageReplayCount),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsRequest.Payload.ChannelSubscription;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.channelId=e.bytes();break;case 2:r.checkpoint=e.uint64();break;case 4:r.messageReplayCount=e.uint64();break;default:e.skipType(7&t)}}return r},e}(),e.ChannelUnsubscription=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.channelId=vr.newBuffer([]),e.encode=function(e,t){return t||(t=mr.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).bytes(e.channelId),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsRequest.Payload.ChannelUnsubscription;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.channelId=e.bytes();break;default:e.skipType(7&t)}}return r},e}(),e.AppChannelSubscriptions=function(){function e(e){if(this.subscriptionChannels=[],this.unsubscriptionChannels=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic="",e.prototype.subscriptionChannels=vr.emptyArray,e.prototype.unsubscriptionChannels=vr.emptyArray,e.encode=function(e,t){if(t||(t=mr.create()),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),null!=e.subscriptionChannels&&e.subscriptionChannels.length)for(let n=0;n<e.subscriptionChannels.length;++n)wr.websocketpush.WebChannelSubscriptionsRequest.Payload.ChannelSubscription.encode(e.subscriptionChannels[n],t.uint32(18).fork()).ldelim();if(null!=e.unsubscriptionChannels&&e.unsubscriptionChannels.length)for(let n=0;n<e.unsubscriptionChannels.length;++n)wr.websocketpush.WebChannelSubscriptionsRequest.Payload.ChannelUnsubscription.encode(e.unsubscriptionChannels[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsRequest.Payload.AppChannelSubscriptions;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topic=e.string();break;case 2:r.subscriptionChannels&&r.subscriptionChannels.length||(r.subscriptionChannels=[]),r.subscriptionChannels.push(wr.websocketpush.WebChannelSubscriptionsRequest.Payload.ChannelSubscription.decode(e,e.uint32()));break;case 3:r.unsubscriptionChannels&&r.unsubscriptionChannels.length||(r.unsubscriptionChannels=[]),r.unsubscriptionChannels.push(wr.websocketpush.WebChannelSubscriptionsRequest.Payload.ChannelUnsubscription.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e}(),e}(),e.WebChannelSubscriptionsResponse=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.payload=null,e.prototype.messageId=0,e.prototype.status=0,e.prototype.retryIntervalSeconds=0,e.encode=function(e,t){return t||(t=mr.create()),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&wr.websocketpush.WebChannelSubscriptionsResponse.Payload.encode(e.payload,t.uint32(10).fork()).ldelim(),null!=e.messageId&&Object.hasOwnProperty.call(e,"messageId")&&t.uint32(16).uint32(e.messageId),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(24).int32(e.status),null!=e.retryIntervalSeconds&&Object.hasOwnProperty.call(e,"retryIntervalSeconds")&&t.uint32(32).uint32(e.retryIntervalSeconds),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.payload=wr.websocketpush.WebChannelSubscriptionsResponse.Payload.decode(e,e.uint32());break;case 2:r.messageId=e.uint32();break;case 3:r.status=e.int32();break;case 4:r.retryIntervalSeconds=e.uint32();break;default:e.skipType(7&t)}}return r},e.Payload=function(){function e(e){if(this.appChannelSubscriptionResponse=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.appChannelSubscriptionResponse=vr.emptyArray,e.encode=function(e,t){if(t||(t=mr.create()),null!=e.appChannelSubscriptionResponse&&e.appChannelSubscriptionResponse.length)for(let n=0;n<e.appChannelSubscriptionResponse.length;++n)wr.websocketpush.WebChannelSubscriptionsResponse.Payload.AppChannelSubscriptionResponse.encode(e.appChannelSubscriptionResponse[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsResponse.Payload;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.appChannelSubscriptionResponse&&r.appChannelSubscriptionResponse.length||(r.appChannelSubscriptionResponse=[]),r.appChannelSubscriptionResponse.push(wr.websocketpush.WebChannelSubscriptionsResponse.Payload.AppChannelSubscriptionResponse.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.ChannelStatus=function(){const e={},t=Object.create(e);return t[e[0]="CHANNEL_ID_INVALID"]=0,t[e[1]="CHECKPOINT_LATEST"]=1,t[e[2]="TOO_MANY_GLOBAL_SUBSCRIPTIONS"]=2,t[e[3]="TOO_MANY_DEVICE_APP_SUBSCRIPTIONS"]=3,t}(),e.ChannelResponse=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.channelId=vr.newBuffer([]),e.prototype.channelStatus=0,e.prototype.channelSubscriptionCheckpoint=vr.Long?vr.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=mr.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).bytes(e.channelId),null!=e.channelStatus&&Object.hasOwnProperty.call(e,"channelStatus")&&t.uint32(16).int32(e.channelStatus),null!=e.channelSubscriptionCheckpoint&&Object.hasOwnProperty.call(e,"channelSubscriptionCheckpoint")&&t.uint32(24).uint64(e.channelSubscriptionCheckpoint),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsResponse.Payload.ChannelResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.channelId=e.bytes();break;case 2:r.channelStatus=e.int32();break;case 3:r.channelSubscriptionCheckpoint=e.uint64();break;default:e.skipType(7&t)}}return r},e}(),e.AppChannelSubscriptionResponse=function(){function e(e){if(this.subscriptionChannelResponse=[],this.unsubscriptionChannelResponse=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic="",e.prototype.subscriptionChannelResponse=vr.emptyArray,e.prototype.unsubscriptionChannelResponse=vr.emptyArray,e.encode=function(e,t){if(t||(t=mr.create()),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),null!=e.subscriptionChannelResponse&&e.subscriptionChannelResponse.length)for(let n=0;n<e.subscriptionChannelResponse.length;++n)wr.websocketpush.WebChannelSubscriptionsResponse.Payload.ChannelResponse.encode(e.subscriptionChannelResponse[n],t.uint32(18).fork()).ldelim();if(null!=e.unsubscriptionChannelResponse&&e.unsubscriptionChannelResponse.length)for(let n=0;n<e.unsubscriptionChannelResponse.length;++n)wr.websocketpush.WebChannelSubscriptionsResponse.Payload.ChannelResponse.encode(e.unsubscriptionChannelResponse[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsResponse.Payload.AppChannelSubscriptionResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topic=e.string();break;case 2:r.subscriptionChannelResponse&&r.subscriptionChannelResponse.length||(r.subscriptionChannelResponse=[]),r.subscriptionChannelResponse.push(wr.websocketpush.WebChannelSubscriptionsResponse.Payload.ChannelResponse.decode(e,e.uint32()));break;case 3:r.unsubscriptionChannelResponse&&r.unsubscriptionChannelResponse.length||(r.unsubscriptionChannelResponse=[]),r.unsubscriptionChannelResponse.push(wr.websocketpush.WebChannelSubscriptionsResponse.Payload.ChannelResponse.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e}(),e.Status=function(){const e={},t=Object.create(e);return t[e[0]="SUCCESS"]=0,t[e[1]="BAD_REQUEST"]=1,t[e[2]="SUBSCRIPTION_FAILURE"]=2,t[e[3]="INTERNAL_ERROR"]=3,t}(),e}(),e.WebChannelSubscriptionsUpdate=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.payload=null,e.prototype.messageId=0,e.encode=function(e,t){return t||(t=mr.create()),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&wr.websocketpush.WebChannelSubscriptionsUpdate.Payload.encode(e.payload,t.uint32(10).fork()).ldelim(),null!=e.messageId&&Object.hasOwnProperty.call(e,"messageId")&&t.uint32(16).uint32(e.messageId),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsUpdate;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.payload=wr.websocketpush.WebChannelSubscriptionsUpdate.Payload.decode(e,e.uint32());break;case 2:r.messageId=e.uint32();break;default:e.skipType(7&t)}}return r},e.Payload=function(){function e(e){if(this.appChannelUpdates=[],this.subscriptionUpdates=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.appChannelUpdates=vr.emptyArray,e.prototype.subscriptionUpdates=vr.emptyArray,e.encode=function(e,t){if(t||(t=mr.create()),null!=e.appChannelUpdates&&e.appChannelUpdates.length)for(let n=0;n<e.appChannelUpdates.length;++n)wr.websocketpush.WebChannelSubscriptionsUpdate.Payload.AppChannelUpdates.encode(e.appChannelUpdates[n],t.uint32(10).fork()).ldelim();if(null!=e.subscriptionUpdates&&e.subscriptionUpdates.length)for(let n=0;n<e.subscriptionUpdates.length;++n)wr.websocketpush.WebChannelSubscriptionsUpdate.Payload.SubscriptionUpdate.encode(e.subscriptionUpdates[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsUpdate.Payload;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.appChannelUpdates&&r.appChannelUpdates.length||(r.appChannelUpdates=[]),r.appChannelUpdates.push(wr.websocketpush.WebChannelSubscriptionsUpdate.Payload.AppChannelUpdates.decode(e,e.uint32()));break;case 2:r.subscriptionUpdates&&r.subscriptionUpdates.length||(r.subscriptionUpdates=[]),r.subscriptionUpdates.push(wr.websocketpush.WebChannelSubscriptionsUpdate.Payload.SubscriptionUpdate.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.SubscriptionStatus=function(){const e={},t=Object.create(e);return t[e[0]="RESEND_SUBSCRIPTIONS"]=0,t}(),e.SubscriptionUpdate=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.subscriptionsStatus=0,e.encode=function(e,t){return t||(t=mr.create()),null!=e.subscriptionsStatus&&Object.hasOwnProperty.call(e,"subscriptionsStatus")&&t.uint32(8).int32(e.subscriptionsStatus),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsUpdate.Payload.SubscriptionUpdate;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.subscriptionsStatus=e.int32();break;default:e.skipType(7&t)}}return r},e}(),e.ChannelStatus=function(){const e={},t=Object.create(e);return t[e[0]="CHANNEL_ID_DOES_NOT_EXIST"]=0,t[e[1]="CHECKPOINT_LATEST"]=1,t[e[2]="TOO_MANY_GLOBAL_SUBSCRIPTIONS"]=2,t}(),e.ChannelUpdate=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.channelId=vr.newBuffer([]),e.prototype.channelStatus=0,e.prototype.checkpoint=vr.Long?vr.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=mr.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(10).bytes(e.channelId),null!=e.channelStatus&&Object.hasOwnProperty.call(e,"channelStatus")&&t.uint32(16).int32(e.channelStatus),null!=e.checkpoint&&Object.hasOwnProperty.call(e,"checkpoint")&&t.uint32(24).uint64(e.checkpoint),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsUpdate.Payload.ChannelUpdate;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.channelId=e.bytes();break;case 2:r.channelStatus=e.int32();break;case 3:r.checkpoint=e.uint64();break;default:e.skipType(7&t)}}return r},e}(),e.AppChannelUpdates=function(){function e(e){if(this.channelUpdates=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.appId="",e.prototype.channelUpdates=vr.emptyArray,e.encode=function(e,t){if(t||(t=mr.create()),null!=e.appId&&Object.hasOwnProperty.call(e,"appId")&&t.uint32(10).string(e.appId),null!=e.channelUpdates&&e.channelUpdates.length)for(let n=0;n<e.channelUpdates.length;++n)wr.websocketpush.WebChannelSubscriptionsUpdate.Payload.ChannelUpdate.encode(e.channelUpdates[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebChannelSubscriptionsUpdate.Payload.AppChannelUpdates;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.appId=e.string();break;case 2:r.channelUpdates&&r.channelUpdates.length||(r.channelUpdates=[]),r.channelUpdates.push(wr.websocketpush.WebChannelSubscriptionsUpdate.Payload.ChannelUpdate.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e}(),e}(),e.WebClientToServerMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.channelSubscriptionRequest=null,e.prototype.pushAcknowledgmentMessage=null,e.prototype.webFilterMessage=null,e.prototype.webBootstrapRequest=null,e.prototype.webQueryRequest=null,e.prototype.reversePushMessage=null,Object.defineProperty(e.prototype,"message",{get:vr.oneOfGetter(t=["channelSubscriptionRequest","pushAcknowledgmentMessage","webFilterMessage","webBootstrapRequest","webQueryRequest","reversePushMessage"]),set:vr.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=mr.create()),null!=e.channelSubscriptionRequest&&Object.hasOwnProperty.call(e,"channelSubscriptionRequest")&&wr.websocketpush.WebChannelSubscriptionsRequest.encode(e.channelSubscriptionRequest,t.uint32(10).fork()).ldelim(),null!=e.pushAcknowledgmentMessage&&Object.hasOwnProperty.call(e,"pushAcknowledgmentMessage")&&wr.AcknowledgementMessage.encode(e.pushAcknowledgmentMessage,t.uint32(18).fork()).ldelim(),null!=e.webFilterMessage&&Object.hasOwnProperty.call(e,"webFilterMessage")&&wr.WebFilterMessage.encode(e.webFilterMessage,t.uint32(26).fork()).ldelim(),null!=e.webBootstrapRequest&&Object.hasOwnProperty.call(e,"webBootstrapRequest")&&wr.WebBootstrapRequest.encode(e.webBootstrapRequest,t.uint32(34).fork()).ldelim(),null!=e.webQueryRequest&&Object.hasOwnProperty.call(e,"webQueryRequest")&&wr.WebQueryRequest.encode(e.webQueryRequest,t.uint32(42).fork()).ldelim(),null!=e.reversePushMessage&&Object.hasOwnProperty.call(e,"reversePushMessage")&&wr.WebClientPushMessage.encode(e.reversePushMessage,t.uint32(50).fork()).ldelim(),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.WebClientToServerMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.channelSubscriptionRequest=wr.websocketpush.WebChannelSubscriptionsRequest.decode(e,e.uint32());break;case 2:r.pushAcknowledgmentMessage=wr.AcknowledgementMessage.decode(e,e.uint32());break;case 3:r.webFilterMessage=wr.WebFilterMessage.decode(e,e.uint32());break;case 4:r.webBootstrapRequest=wr.WebBootstrapRequest.decode(e,e.uint32());break;case 5:r.webQueryRequest=wr.WebQueryRequest.decode(e,e.uint32());break;case 6:r.reversePushMessage=wr.WebClientPushMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e.ServerToWebClientMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.connectionResponseMessage=null,e.prototype.pushMessage=null,e.prototype.channelSubscriptionResponse=null,e.prototype.channelSubscriptionUpdate=null,e.prototype.webBootstrapResponse=null,e.prototype.webQueryResponse=null,e.prototype.pushAcknowledgmentMessage=null,Object.defineProperty(e.prototype,"message",{get:vr.oneOfGetter(t=["connectionResponseMessage","pushMessage","channelSubscriptionResponse","channelSubscriptionUpdate","webBootstrapResponse","webQueryResponse","pushAcknowledgmentMessage"]),set:vr.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=mr.create()),null!=e.connectionResponseMessage&&Object.hasOwnProperty.call(e,"connectionResponseMessage")&&wr.websocketpush.WebConnectionResponseMessage.encode(e.connectionResponseMessage,t.uint32(10).fork()).ldelim(),null!=e.pushMessage&&Object.hasOwnProperty.call(e,"pushMessage")&&wr.WebClientPushMessage.encode(e.pushMessage,t.uint32(18).fork()).ldelim(),null!=e.channelSubscriptionResponse&&Object.hasOwnProperty.call(e,"channelSubscriptionResponse")&&wr.websocketpush.WebChannelSubscriptionsResponse.encode(e.channelSubscriptionResponse,t.uint32(26).fork()).ldelim(),null!=e.channelSubscriptionUpdate&&Object.hasOwnProperty.call(e,"channelSubscriptionUpdate")&&wr.websocketpush.WebChannelSubscriptionsUpdate.encode(e.channelSubscriptionUpdate,t.uint32(34).fork()).ldelim(),null!=e.webBootstrapResponse&&Object.hasOwnProperty.call(e,"webBootstrapResponse")&&wr.WebBootstrapResponse.encode(e.webBootstrapResponse,t.uint32(42).fork()).ldelim(),null!=e.webQueryResponse&&Object.hasOwnProperty.call(e,"webQueryResponse")&&wr.WebQueryResponse.encode(e.webQueryResponse,t.uint32(50).fork()).ldelim(),null!=e.pushAcknowledgmentMessage&&Object.hasOwnProperty.call(e,"pushAcknowledgmentMessage")&&wr.AcknowledgementMessage.encode(e.pushAcknowledgmentMessage,t.uint32(58).fork()).ldelim(),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.websocketpush.ServerToWebClientMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.connectionResponseMessage=wr.websocketpush.WebConnectionResponseMessage.decode(e,e.uint32());break;case 2:r.pushMessage=wr.WebClientPushMessage.decode(e,e.uint32());break;case 3:r.channelSubscriptionResponse=wr.websocketpush.WebChannelSubscriptionsResponse.decode(e,e.uint32());break;case 4:r.channelSubscriptionUpdate=wr.websocketpush.WebChannelSubscriptionsUpdate.decode(e,e.uint32());break;case 5:r.webBootstrapResponse=wr.WebBootstrapResponse.decode(e,e.uint32());break;case 6:r.webQueryResponse=wr.WebQueryResponse.decode(e,e.uint32());break;case 7:r.pushAcknowledgmentMessage=wr.AcknowledgementMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e})();wr.IDSWebRegisterRequest=(()=>{function e(e){if(this.services=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.username="",e.prototype.ktLoggableData="",e.prototype.clientData=vr.newBuffer([]),e.prototype.services=vr.emptyArray,e.prototype.featureId="",e.encode=function(e,t){if(t||(t=mr.create()),null!=e.username&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),null!=e.ktLoggableData&&Object.hasOwnProperty.call(e,"ktLoggableData")&&t.uint32(18).string(e.ktLoggableData),null!=e.clientData&&Object.hasOwnProperty.call(e,"clientData")&&t.uint32(26).bytes(e.clientData),null!=e.services&&e.services.length)for(let n=0;n<e.services.length;++n)t.uint32(34).string(e.services[n]);return null!=e.featureId&&Object.hasOwnProperty.call(e,"featureId")&&t.uint32(42).string(e.featureId),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.IDSWebRegisterRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.username=e.string();break;case 2:r.ktLoggableData=e.string();break;case 3:r.clientData=e.bytes();break;case 4:r.services&&r.services.length||(r.services=[]),r.services.push(e.string());break;case 5:r.featureId=e.string();break;default:e.skipType(7&t)}}return r},e})(),wr.IDSWebQueryRequest=(()=>{function e(e){if(this.queriedUri=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.queriedUri=vr.emptyArray,e.prototype.topic=vr.newBuffer([]),e.prototype.uuid=vr.newBuffer([]),e.prototype.selfUri="",e.encode=function(e,t){if(t||(t=mr.create()),null!=e.queriedUri&&e.queriedUri.length)for(let n=0;n<e.queriedUri.length;++n)t.uint32(10).string(e.queriedUri[n]);return null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(18).bytes(e.topic),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(26).bytes(e.uuid),null!=e.selfUri&&Object.hasOwnProperty.call(e,"selfUri")&&t.uint32(34).string(e.selfUri),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.IDSWebQueryRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.queriedUri&&r.queriedUri.length||(r.queriedUri=[]),r.queriedUri.push(e.string());break;case 2:r.topic=e.bytes();break;case 3:r.uuid=e.bytes();break;case 4:r.selfUri=e.string();break;default:e.skipType(7&t)}}return r},e})(),wr.WebRequest=(()=>{function e(e){if(this.headers={},e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uuid=vr.newBuffer([]),e.prototype.payload=vr.newBuffer([]),e.prototype.headers=vr.emptyObject,e.encode=function(e,t){if(t||(t=mr.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).bytes(e.uuid),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(18).bytes(e.payload),null!=e.headers&&Object.hasOwnProperty.call(e,"headers"))for(let n=Object.keys(e.headers),r=0;r<n.length;++r)t.uint32(26).fork().uint32(10).string(n[r]).uint32(18).string(e.headers[n[r]]).ldelim();return t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n,r,i=void 0===t?e.len:e.pos+t,o=new wr.WebRequest;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:o.uuid=e.bytes();break;case 2:o.payload=e.bytes();break;case 3:o.headers===vr.emptyObject&&(o.headers={});let i=e.uint32()+e.pos;for(n="",r="";e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&t)}}o.headers[n]=r;break;default:e.skipType(7&t)}}return o},e})(),wr.WebQueryRequest=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.webRequest=null,e.encode=function(e,t){return t||(t=mr.create()),null!=e.webRequest&&Object.hasOwnProperty.call(e,"webRequest")&&wr.WebRequest.encode(e.webRequest,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.WebQueryRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.webRequest=wr.WebRequest.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e})(),wr.WebBootstrapRequest=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.webRequest=null,e.encode=function(e,t){return t||(t=mr.create()),null!=e.webRequest&&Object.hasOwnProperty.call(e,"webRequest")&&wr.WebRequest.encode(e.webRequest,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.WebBootstrapRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.webRequest=wr.WebRequest.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e})(),wr.IDSWebRegisterResponse=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uri="",e.prototype.credentials="",e.encode=function(e,t){return t||(t=mr.create()),null!=e.uri&&Object.hasOwnProperty.call(e,"uri")&&t.uint32(10).string(e.uri),null!=e.credentials&&Object.hasOwnProperty.call(e,"credentials")&&t.uint32(18).string(e.credentials),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.IDSWebRegisterResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.uri=e.string();break;case 2:r.credentials=e.string();break;default:e.skipType(7&t)}}return r},e})(),wr.Identity=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.pushToken="",e.prototype.sessionToken="",e.prototype.clientData=vr.newBuffer([]),e.prototype.ktLoggableData="",e.prototype.sessionTokenRefreshSeconds=0,e.prototype.sessionTokenExpiresSeconds=0,e.encode=function(e,t){return t||(t=mr.create()),null!=e.pushToken&&Object.hasOwnProperty.call(e,"pushToken")&&t.uint32(10).string(e.pushToken),null!=e.sessionToken&&Object.hasOwnProperty.call(e,"sessionToken")&&t.uint32(18).string(e.sessionToken),null!=e.clientData&&Object.hasOwnProperty.call(e,"clientData")&&t.uint32(26).bytes(e.clientData),null!=e.ktLoggableData&&Object.hasOwnProperty.call(e,"ktLoggableData")&&t.uint32(34).string(e.ktLoggableData),null!=e.sessionTokenRefreshSeconds&&Object.hasOwnProperty.call(e,"sessionTokenRefreshSeconds")&&t.uint32(40).int32(e.sessionTokenRefreshSeconds),null!=e.sessionTokenExpiresSeconds&&Object.hasOwnProperty.call(e,"sessionTokenExpiresSeconds")&&t.uint32(48).int32(e.sessionTokenExpiresSeconds),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.Identity;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.pushToken=e.string();break;case 2:r.sessionToken=e.string();break;case 3:r.clientData=e.bytes();break;case 4:r.ktLoggableData=e.string();break;case 5:r.sessionTokenRefreshSeconds=e.int32();break;case 6:r.sessionTokenExpiresSeconds=e.int32();break;default:e.skipType(7&t)}}return r},e})(),wr.UriResult=(()=>{function e(e){if(this.identity=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.status=0,e.prototype.identity=vr.emptyArray,e.encode=function(e,t){if(t||(t=mr.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),null!=e.identity&&e.identity.length)for(let n=0;n<e.identity.length;++n)wr.Identity.encode(e.identity[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.UriResult;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.status=e.uint32();break;case 2:r.identity&&r.identity.length||(r.identity=[]),r.identity.push(wr.Identity.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e})(),wr.IDSWebQueryResponse=(()=>{function e(e){if(this.results={},e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.results=vr.emptyObject,e.prototype.uuid=vr.newBuffer([]),e.prototype.status=0,e.prototype.retryInterval=0,e.encode=function(e,t){if(t||(t=mr.create()),null!=e.results&&Object.hasOwnProperty.call(e,"results"))for(let n=Object.keys(e.results),r=0;r<n.length;++r)t.uint32(10).fork().uint32(10).string(n[r]),wr.UriResult.encode(e.results[n[r]],t.uint32(18).fork()).ldelim().ldelim();return null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(18).bytes(e.uuid),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(24).int32(e.status),null!=e.retryInterval&&Object.hasOwnProperty.call(e,"retryInterval")&&t.uint32(32).int32(e.retryInterval),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n,r,i=void 0===t?e.len:e.pos+t,o=new wr.IDSWebQueryResponse;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:o.results===vr.emptyObject&&(o.results={});let i=e.uint32()+e.pos;for(n="",r=null;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n=e.string();break;case 2:r=wr.UriResult.decode(e,e.uint32());break;default:e.skipType(7&t)}}o.results[n]=r;break;case 2:o.uuid=e.bytes();break;case 3:o.status=e.int32();break;case 4:o.retryInterval=e.int32();break;default:e.skipType(7&t)}}return o},e})(),wr.IDSWebResponse=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.webRegisterResponse=null,e.prototype.webQueryResponse=null,Object.defineProperty(e.prototype,"response",{get:vr.oneOfGetter(t=["webRegisterResponse","webQueryResponse"]),set:vr.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=mr.create()),null!=e.webRegisterResponse&&Object.hasOwnProperty.call(e,"webRegisterResponse")&&wr.IDSWebRegisterResponse.encode(e.webRegisterResponse,t.uint32(10).fork()).ldelim(),null!=e.webQueryResponse&&Object.hasOwnProperty.call(e,"webQueryResponse")&&wr.IDSWebQueryResponse.encode(e.webQueryResponse,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.IDSWebResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.webRegisterResponse=wr.IDSWebRegisterResponse.decode(e,e.uint32());break;case 2:r.webQueryResponse=wr.IDSWebQueryResponse.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e})(),wr.WebResponse=(()=>{function e(e){if(this.headers={},e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uuid=vr.newBuffer([]),e.prototype.payload=vr.newBuffer([]),e.prototype.status=0,e.prototype.headers=vr.emptyObject,e.prototype.errorMsg="",e.encode=function(e,t){if(t||(t=mr.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).bytes(e.uuid),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(18).bytes(e.payload),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(24).int32(e.status),null!=e.headers&&Object.hasOwnProperty.call(e,"headers"))for(let n=Object.keys(e.headers),r=0;r<n.length;++r)t.uint32(34).fork().uint32(10).string(n[r]).uint32(18).string(e.headers[n[r]]).ldelim();return null!=e.errorMsg&&Object.hasOwnProperty.call(e,"errorMsg")&&t.uint32(42).string(e.errorMsg),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n,r,i=void 0===t?e.len:e.pos+t,o=new wr.WebResponse;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:o.uuid=e.bytes();break;case 2:o.payload=e.bytes();break;case 3:o.status=e.int32();break;case 4:o.headers===vr.emptyObject&&(o.headers={});let i=e.uint32()+e.pos;for(n="",r="";e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&t)}}o.headers[n]=r;break;case 5:o.errorMsg=e.string();break;default:e.skipType(7&t)}}return o},e})(),wr.WebQueryResponse=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.webResponse=null,e.encode=function(e,t){return t||(t=mr.create()),null!=e.webResponse&&Object.hasOwnProperty.call(e,"webResponse")&&wr.WebResponse.encode(e.webResponse,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.WebQueryResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.webResponse=wr.WebResponse.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e})(),wr.WebBootstrapResponse=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.webResponse=null,e.encode=function(e,t){return t||(t=mr.create()),null!=e.webResponse&&Object.hasOwnProperty.call(e,"webResponse")&&wr.WebResponse.encode(e.webResponse,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.WebBootstrapResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.webResponse=wr.WebResponse.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e})(),wr.WebClientPushMessage=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic=vr.newBuffer([]),e.prototype.id=0,e.prototype.expirationTimeSecs=0,e.prototype.payload=vr.newBuffer([]),e.prototype.channelMetadata=null,e.prototype.uuid=vr.newBuffer([]),e.encode=function(e,t){return t||(t=mr.create()),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).bytes(e.topic),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(16).uint32(e.id),null!=e.expirationTimeSecs&&Object.hasOwnProperty.call(e,"expirationTimeSecs")&&t.uint32(24).uint32(e.expirationTimeSecs),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(34).bytes(e.payload),null!=e.channelMetadata&&Object.hasOwnProperty.call(e,"channelMetadata")&&wr.WebClientPushMessage.ChannelSubscriptionsPushMetadata.encode(e.channelMetadata,t.uint32(58).fork()).ldelim(),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(66).bytes(e.uuid),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.WebClientPushMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topic=e.bytes();break;case 2:r.id=e.uint32();break;case 3:r.expirationTimeSecs=e.uint32();break;case 4:r.payload=e.bytes();break;case 7:r.channelMetadata=wr.WebClientPushMessage.ChannelSubscriptionsPushMetadata.decode(e,e.uint32());break;case 8:r.uuid=e.bytes();break;default:e.skipType(7&t)}}return r},e.ChannelSubscriptionsPushMetadata=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.channelId=vr.newBuffer([]),e.prototype.checkpoint=vr.Long?vr.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=mr.create()),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(42).bytes(e.channelId),null!=e.checkpoint&&Object.hasOwnProperty.call(e,"checkpoint")&&t.uint32(48).uint64(e.checkpoint),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.WebClientPushMessage.ChannelSubscriptionsPushMetadata;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 5:r.channelId=e.bytes();break;case 6:r.checkpoint=e.uint64();break;default:e.skipType(7&t)}}return r},e}(),e})(),wr.AcknowledgementMessage=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic=vr.newBuffer([]),e.prototype.id=0,e.prototype.deliveryStatus=0,e.encode=function(e,t){return t||(t=mr.create()),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).bytes(e.topic),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(16).uint32(e.id),null!=e.deliveryStatus&&Object.hasOwnProperty.call(e,"deliveryStatus")&&t.uint32(24).int32(e.deliveryStatus),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.AcknowledgementMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topic=e.bytes();break;case 2:r.id=e.uint32();break;case 3:r.deliveryStatus=e.int32();break;default:e.skipType(7&t)}}return r},e})(),wr.WebFilterMessage=(()=>{function e(e){if(this.allowedTopics=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.allowedTopics=vr.emptyArray,e.encode=function(e,t){if(t||(t=mr.create()),null!=e.allowedTopics&&e.allowedTopics.length)for(let n=0;n<e.allowedTopics.length;++n)t.uint32(10).string(e.allowedTopics[n]);return t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.WebFilterMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.allowedTopics&&r.allowedTopics.length||(r.allowedTopics=[]),r.allowedTopics.push(e.string());break;default:e.skipType(7&t)}}return r},e})(),wr.ConnectedResponseMessage=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.pushToken="",e.prototype.reconnectToken="",e.encode=function(e,t){return t||(t=mr.create()),null!=e.pushToken&&Object.hasOwnProperty.call(e,"pushToken")&&t.uint32(10).string(e.pushToken),null!=e.reconnectToken&&Object.hasOwnProperty.call(e,"reconnectToken")&&t.uint32(26).string(e.reconnectToken),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.ConnectedResponseMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.pushToken=e.string();break;case 3:r.reconnectToken=e.string();break;default:e.skipType(7&t)}}return r},e})(),wr.ChallengeNonceRequest=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.nonce=vr.newBuffer([]),e.encode=function(e,t){return t||(t=mr.create()),null!=e.nonce&&Object.hasOwnProperty.call(e,"nonce")&&t.uint32(26).bytes(e.nonce),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.ChallengeNonceRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 3:r.nonce=e.bytes();break;default:e.skipType(7&t)}}return r},e})(),wr.ChallengeNonceResponse=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.signature=vr.newBuffer([]),e.encode=function(e,t){return t||(t=mr.create()),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(10).bytes(e.signature),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.ChallengeNonceResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.signature=e.bytes();break;default:e.skipType(7&t)}}return r},e})(),wr.Message=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.webClientPushMessage=null,e.prototype.acknowledgmentMessage=null,e.prototype.connectedResponseMessage=null,e.prototype.idsWebResponse=null,e.prototype.idsWebQueryRequest=null,e.prototype.challengeNonceRequest=null,e.prototype.challengeNonceResponse=null,Object.defineProperty(e.prototype,"message",{get:vr.oneOfGetter(t=["webClientPushMessage","acknowledgmentMessage","connectedResponseMessage","idsWebResponse","idsWebQueryRequest","challengeNonceRequest","challengeNonceResponse"]),set:vr.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=mr.create()),null!=e.webClientPushMessage&&Object.hasOwnProperty.call(e,"webClientPushMessage")&&wr.WebClientPushMessage.encode(e.webClientPushMessage,t.uint32(10).fork()).ldelim(),null!=e.acknowledgmentMessage&&Object.hasOwnProperty.call(e,"acknowledgmentMessage")&&wr.AcknowledgementMessage.encode(e.acknowledgmentMessage,t.uint32(18).fork()).ldelim(),null!=e.connectedResponseMessage&&Object.hasOwnProperty.call(e,"connectedResponseMessage")&&wr.ConnectedResponseMessage.encode(e.connectedResponseMessage,t.uint32(26).fork()).ldelim(),null!=e.idsWebResponse&&Object.hasOwnProperty.call(e,"idsWebResponse")&&wr.IDSWebResponse.encode(e.idsWebResponse,t.uint32(34).fork()).ldelim(),null!=e.idsWebQueryRequest&&Object.hasOwnProperty.call(e,"idsWebQueryRequest")&&wr.IDSWebQueryRequest.encode(e.idsWebQueryRequest,t.uint32(42).fork()).ldelim(),null!=e.challengeNonceRequest&&Object.hasOwnProperty.call(e,"challengeNonceRequest")&&wr.ChallengeNonceRequest.encode(e.challengeNonceRequest,t.uint32(50).fork()).ldelim(),null!=e.challengeNonceResponse&&Object.hasOwnProperty.call(e,"challengeNonceResponse")&&wr.ChallengeNonceResponse.encode(e.challengeNonceResponse,t.uint32(58).fork()).ldelim(),t},e.decode=function(e,t){e instanceof yr||(e=yr.create(e));let n=void 0===t?e.len:e.pos+t,r=new wr.Message;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.webClientPushMessage=wr.WebClientPushMessage.decode(e,e.uint32());break;case 2:r.acknowledgmentMessage=wr.AcknowledgementMessage.decode(e,e.uint32());break;case 3:r.connectedResponseMessage=wr.ConnectedResponseMessage.decode(e,e.uint32());break;case 4:r.idsWebResponse=wr.IDSWebResponse.decode(e,e.uint32());break;case 5:r.idsWebQueryRequest=wr.IDSWebQueryRequest.decode(e,e.uint32());break;case 6:r.challengeNonceRequest=wr.ChallengeNonceRequest.decode(e,e.uint32());break;case 7:r.challengeNonceResponse=wr.ChallengeNonceResponse.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e})();wr.DeliveryStatus=function(){const e={},t=Object.create(e);return t[e[0]="OK"]=0,t[e[1]="OFFLINE"]=1,t[e[2]="FAILED"]=2,t[e[3]="RECEIVED"]=3,t[e[4]="DROPPED"]=4,t}();const Sr=Pr.ServerToWebClientMessage,$r=Pr.WebClientConnectionMessage,Or=(Pr.WebClientConnectionMessage.ConnectionMessageV1,Pr.WebClientToServerMessage),kr=Pr.WebConnectionResponseMessage,Ir=(j("SessionToken"),j("PushToken")),Cr=j("messageID");var Rr,Mr,Tr;function Dr(){let e;return{promise:new Promise(t=>e=t),resolve:e}}!function(e){e[e.Initiate=1]="Initiate",e[e.Accept=2]="Accept",e[e.Reject=3]="Reject",e[e.Cancel=4]="Cancel",e[e.RelayInitiate=5]="RelayInitiate",e[e.RelayUpdate=6]="RelayUpdate",e[e.RelayCancel=7]="RelayCancel",e[e.SendMessage=8]="SendMessage",e[e.Reregister=32]="Reregister",e[e.DevicesUpdated=34]="DevicesUpdated",e[e.EmailConfirmed=64]="EmailConfirmed",e[e.HandlesUpdated=66]="HandlesUpdated",e[e.ReloadBagPush=90]="ReloadBagPush",e[e.TextMessage=100]="TextMessage",e[e.DeliveryReceipt=101]="DeliveryReceipt",e[e.ReadReceipt=102]="ReadReceipt",e[e.CancelMessage=103]="CancelMessage",e[e.AttachmentMessage=104]="AttachmentMessage",e[e.PlayedReceipt=105]="PlayedReceipt",e[e.SavedReceipt=106]="SavedReceipt",e[e.ReflectedDeliveryReceipt=107]="ReflectedDeliveryReceipt",e[e.CertifiedDeliveryReceipt=109]="CertifiedDeliveryReceipt",e[e.OTRNegotiation=110]="OTRNegotiation",e[e.InternalErrorMessage=115]="InternalErrorMessage",e[e.ErrorMessage=120]="ErrorMessage",e[e.PeerCacheInvalidate=130]="PeerCacheInvalidate",e[e.NicknameUpdate=131]="NicknameUpdate",e[e.SMSTextMessage=140]="SMSTextMessage",e[e.SMSTextDownloadMessage=141]="SMSTextDownloadMessage",e[e.SMSOutgoing=143]="SMSOutgoing",e[e.SMSDownloadOutgoing=144]="SMSDownloadOutgoing",e[e.SMSDeliveryReceipt=146]="SMSDeliveryReceipt",e[e.SMSReadReceipt=147]="SMSReadReceipt",e[e.SMSFailure=149]="SMSFailure",e[e.RequestMMCSUploadAuthToken=150]="RequestMMCSUploadAuthToken",e[e.RequestMMCSDownloadAuthToken=151]="RequestMMCSDownloadAuthToken",e[e.UploadFailure=155]="UploadFailure",e[e.PreUpload=156]="PreUpload",e[e.PreDownload=157]="PreDownload",e[e.OfflineMessagePendingStorageCheck=160]="OfflineMessagePendingStorageCheck",e[e.StorageEmpty=165]="StorageEmpty",e[e.GenericMessage=180]="GenericMessage",e[e.GenericGroupMessage=190]="GenericGroupMessage",e[e.Generic=200]="Generic",e[e.NiceGroupSessionInternalMessage=206]="NiceGroupSessionInternalMessage",e[e.NiceGroupSessionJoin=207]="NiceGroupSessionJoin",e[e.NiceGroupSessionLeave=208]="NiceGroupSessionLeave",e[e.NiceGroupSessionUpdate=209]="NiceGroupSessionUpdate",e[e.NiceGroupSessionPrekey=210]="NiceGroupSessionPrekey",e[e.NiceGroupSessionMKM=211]="NiceGroupSessionMKM",e[e.NiceMessage=227]="NiceMessage",e[e.NiceAttachment=228]="NiceAttachment",e[e.NiceAttachmentInitiate=229]="NiceAttachmentInitiate",e[e.NiceAttachmentAccept=230]="NiceAttachmentAccept",e[e.NiceAttachmentReject=231]="NiceAttachmentReject",e[e.NiceSessionInvitation=232]="NiceSessionInvitation",e[e.NiceSessionAccept=233]="NiceSessionAccept",e[e.NiceSessionDecline=234]="NiceSessionDecline",e[e.NiceSessionCancel=235]="NiceSessionCancel",e[e.NiceSessionMessage=236]="NiceSessionMessage",e[e.NiceSessionEnd=237]="NiceSessionEnd",e[e.NiceGroupSessionMessage=239]="NiceGroupSessionMessage",e[e.NiceData=242]="NiceData",e[e.NiceProtobuf=243]="NiceProtobuf",e[e.NiceAppAck=244]="NiceAppAck",e[e.HomekitAccessoryMessage=250]="HomekitAccessoryMessage",e[e.Response=255]="Response"}(Rr||(Rr={})),function(e){e[e.NiceGroupSessionInternalMessage=206]="NiceGroupSessionInternalMessage",e[e.NiceGroupSessionJoin=207]="NiceGroupSessionJoin",e[e.NiceGroupSessionLeave=208]="NiceGroupSessionLeave",e[e.NiceGroupSessionUpdate=209]="NiceGroupSessionUpdate",e[e.NiceGroupSessionPrekey=210]="NiceGroupSessionPrekey",e[e.NiceGroupSessionMKM=211]="NiceGroupSessionMKM",e[e.NiceMessage=227]="NiceMessage",e[e.NiceAttachment=228]="NiceAttachment",e[e.NiceAttachmentInitiate=229]="NiceAttachmentInitiate",e[e.NiceAttachmentAccept=230]="NiceAttachmentAccept",e[e.NiceAttachmentReject=231]="NiceAttachmentReject",e[e.NiceSessionInvitation=232]="NiceSessionInvitation",e[e.NiceSessionAccept=233]="NiceSessionAccept",e[e.NiceSessionDecline=234]="NiceSessionDecline",e[e.NiceSessionCancel=235]="NiceSessionCancel",e[e.NiceSessionMessage=236]="NiceSessionMessage",e[e.NiceSessionEnd=237]="NiceSessionEnd",e[e.NiceGroupSessionMessage=239]="NiceGroupSessionMessage",e[e.NiceData=242]="NiceData",e[e.NiceProtobuf=243]="NiceProtobuf",e[e.NiceAppAck=244]="NiceAppAck"}(Mr||(Mr={})),function(e){e.Audio="au",e.Video="vd",e.Photo="ph",e.Other="ot"}(Tr||(Tr={}));class Er extends class{constructor(e,t,n){Object.defineProperty(this,"transform",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"didOpen",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"didClose",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"isChannel",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"isChannelListenable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_isOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"listeners",{enumerable:!0,configurable:!0,writable:!0,value:[]})}get isOpen(){return this._isOpen}open(){if(!this._isOpen){this._isOpen=!0,this.didOpen&&this.didOpen();for(const e of this.listeners)e.open()}}async close(e){if(this._isOpen=!1,this.didClose){const t=await this.didClose(e);for(const e of this.listeners)await e.close(t)}else for(const t of this.listeners)await t.close(e)}async message(e){if(!this.isOpen)throw new Ce(Se`.message called, but channel is not currently open`);const t=await this.transform(e),n=this.listeners.map(e=>e.message(t));await Promise.all(n)}pipe(e){return this.listeners.push(e),this.isOpen&&e.open(),e}unpipe(e,t=!1){const n=this.listeners.indexOf(e);if(n<0)throw new Ce(Se`.unpipe called, but channels are not piped`);this.listeners.splice(n,1)}}{constructor(e,t=(async e=>e)){super(e=>e,e,t),Object.defineProperty(this,"didOpen",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"didClose",{enumerable:!0,configurable:!0,writable:!0,value:t})}}function Ar(e){return e&&e.isChannelListenable}function jr(e){return e&&e.isDuplex}var Nr;!function(e){e[e.MESSAGE_STATUS_MESSAGE_QUEUED=1e3]="MESSAGE_STATUS_MESSAGE_QUEUED",e[e.BROWSER_NETWORK_UNAVAILABLE=1006]="BROWSER_NETWORK_UNAVAILABLE",e[e.INTERNAL_SERVER_ERROR=1011]="INTERNAL_SERVER_ERROR",e[e.MALFORMED_BINARY_DATA=4e3]="MALFORMED_BINARY_DATA",e[e.PRESENCE_CONFLICT=4001]="PRESENCE_CONFLICT",e[e.EXPIRED_TOKEN=4002]="EXPIRED_TOKEN",e[e.UNRECOGNIZED_FRAME_TYPE=4003]="UNRECOGNIZED_FRAME_TYPE",e[e.SERVICE_SHUTDOWN=4004]="SERVICE_SHUTDOWN",e[e.MESSAGE_NOT_HANDLED=4005]="MESSAGE_NOT_HANDLED",e[e.IDS_REQUEST_FAILURE=4006]="IDS_REQUEST_FAILURE",e[e.INVALID_NONCE_SIGNATURE=4007]="INVALID_NONCE_SIGNATURE",e[e.INVALID_CONNECT_REQUEST=4008]="INVALID_CONNECT_REQUEST"}(Nr||(Nr={}));class Br{constructor(e,t=mn(),n=((e,t)=>new WebSocket(e,t))){Object.defineProperty(this,"address",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"unwrappedLogger",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cleanupFunctions",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"socket",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"down",{enumerable:!0,configurable:!0,writable:!0,value:new Er}),Object.defineProperty(this,"up",{enumerable:!0,configurable:!0,writable:!0,value:{isChannel:!0,open:()=>{},message:e=>this.sendMessage(e),close:async()=>this.close()}}),Object.defineProperty(this,"isDuplexListenable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"isDuplex",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:this.unwrappedLogger.child`WSDuplex`().package`Messaging`.subsystem`push`}),Object.defineProperty(this,"timeToFirstMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=!1;const i=performance.now(),{promise:o,resolve:s}=Dr();this.timeToFirstMessage=o,this.socket=n(e),this.socket.binaryType="arraybuffer",this.on("message",e=>{if(!r){const e=performance.now()-i;s(e),this.logger.info`Time to first message: ${V(e).device()}`}r=!0,this.didReceiveMessage(e.data)}),this.on("close",e=>{this.didClose(e)}),this.on("open",e=>{this.didOpen()})}pipe(e){return jr(e)?(Ar(e.up)&&e.up.pipe(this.up),this.down.pipe(e.down)):this.down.pipe(e),e}unpipe(e,t){jr(e)?(Ar(e.up)&&e.up.unpipe(this.up),this.down.unpipe(e.down)):this.down.unpipe(e)}on(e,t){this.socket.addEventListener(e,t),this.cleanupFunctions.push(()=>{this.socket.removeEventListener(e,t)})}didOpen(){this.logger.info`Did open...`,this.down.open(),this.up.open()}didReceiveMessage(e){this.down.message(e)}didClose(e){this.down.close(e),this.up.close();for(const e of this.cleanupFunctions)e()}dbg_didClose(e){this.didClose(e)}async sendMessage(e){this.socket.send(e)}close(){this.socket.close()}}const _r=a(e=>{const t=vn(e);return e=>new Br(e,t)});var xr,Ur=new Uint8Array(16);function Lr(){if(!xr&&!(xr="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xr(Ur)}var Kr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var qr=function(e){return"string"==typeof e&&Kr.test(e)},Vr=[],Fr=0;Fr<256;++Fr)Vr.push((Fr+256).toString(16).substr(1));var Gr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Vr[e[t+0]]+Vr[e[t+1]]+Vr[e[t+2]]+Vr[e[t+3]]+"-"+Vr[e[t+4]]+Vr[e[t+5]]+"-"+Vr[e[t+6]]+Vr[e[t+7]]+"-"+Vr[e[t+8]]+Vr[e[t+9]]+"-"+Vr[e[t+10]]+Vr[e[t+11]]+Vr[e[t+12]]+Vr[e[t+13]]+Vr[e[t+14]]+Vr[e[t+15]]).toLowerCase();if(!qr(n))throw TypeError("Stringified UUID is invalid");return n};var Hr=function(e,t,n){var r=(e=e||{}).random||(e.rng||Lr)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Gr(r)};var Wr=function(e){if(!qr(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function Qr(e,t){const n=e instanceof Error?e:new Ce(Se`${e}`);if(!n.stack)try{throw new Error}catch(e){n.stack=e.stack}return n}const zr=[];for(let e=0;e<256;++e)zr.push((e+256).toString(16).substr(1));function Jr(){return Hr().toUpperCase()}function Yr(){return Hr(void 0,new Uint8Array(16))}function Zr(e){try{return function(e,t=0){return(zr[e[t+0]]+zr[e[t+1]]+zr[e[t+2]]+zr[e[t+3]]+"-"+zr[e[t+4]]+zr[e[t+5]]+"-"+zr[e[t+6]]+zr[e[t+7]]+"-"+zr[e[t+8]]+zr[e[t+9]]+"-"+zr[e[t+10]]+zr[e[t+11]]+zr[e[t+12]]+zr[e[t+13]]+zr[e[t+14]]+zr[e[t+15]]).toUpperCase()}(e)}catch(e){return Qr(e)}}function Xr(e){try{return Wr(e)}catch(e){return Qr(e)}}const ei=new TextEncoder,ti=new TextDecoder("utf-8"),ni=new TextDecoder("utf-16be"),ri=new DataView(new ArrayBuffer(32)),ii=new Uint8Array(ri.buffer,ri.byteOffset,32),oi=new DataView(new ArrayBuffer(64)),si=new Uint8Array(oi.buffer,oi.byteOffset,64);class ai{constructor(e=0){let t;if(Object.defineProperty(this,"positionStack",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"byteOffset",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_buffer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ArrayBuffer.isView(e))t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else if(s(e))t=new Uint8Array(e);else if(Array.isArray(e))t=new Uint8Array(e);else{if("number"!=typeof e)throw new Ce(Se`Unexpected arguments to new ByteStream(): sizeOrBuffer should be ArrayBuffer, ArrayView, number array, or number (size)`);t=new Uint8Array(e)}this.size=t.length,this._buffer=t}get buffer(){return this._buffer}get bytes(){return this.buffer.slice(0,this.size)}push(){this.positionStack.push(this.byteOffset)}pop(){const e=this.positionStack.pop();if(void 0===e)throw new Ce(Se`unbalanced ByteStream#push/pop`);this.byteOffset=e}ensureSpaceFor(e){for(;this.byteOffset+e>this.buffer.byteLength;){const e=new Uint8Array(2*Math.max(this.buffer.length,32));e.set(this.buffer),this._buffer=e}}writeByte(e){this.ensureSpaceFor(1),this.buffer[this.size]=e,this.byteOffset++,this.size=Math.max(this.byteOffset,this.size)}writeBytes(e){this.ensureSpaceFor(e.length);for(let t=0;t<e.length;t++)this.buffer[this.byteOffset++]=e[t];this.size=Math.max(this.byteOffset,this.size)}writeUInt(e,t){const n=e/8;if(n!==Math.round(n))return new Ce(Se`Invalid bit count: ${e}`);this.ensureSpaceFor(n);let r=t;for(let e=this.byteOffset+n-1;e>=this.byteOffset;e--)this.buffer[e]=255&r,r>>>=8;this.byteOffset+=n,this.size=Math.max(this.byteOffset,this.size)}readUInt(e){const t=e/8;if(t!==Math.round(t))return new Ce(Se`Invalid bit count: ${e}`);let n=0;for(let e=this.byteOffset;e<this.byteOffset+t;e++)n*=256,n+=this.buffer[e];return this.byteOffset+=t,n}readBytes(e,t=new Uint8Array(e)){if(this.size<this.byteOffset+e)return new Ce(Se`cannot read bytes: not enough bytes in stream`);for(let n=0;n<e;n++)t[n]=this.buffer[this.byteOffset+n];return this.byteOffset+=e,t}readASCII(e){const t=this.readBytes(e);return t instanceof Error?t:ti.decode(t)}readUTF8(e){const t=this.readBytes(e);return t instanceof Error?t:ti.decode(t)}readUTF16BE(e){const t=this.readBytes(e);return t instanceof Error?t:ni.decode(t)}peek(e=8){const t=this.byteOffset,n=this.readUInt(e);return this.byteOffset=t,n}writeASCII(e){for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n>=256)return new Ce(Se`String is not ascii`);this.writeByte(n)}}writeUTF8(e){const t=ei.encode(e);this.writeBytes(t)}writeUTF16(e){for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);this.writeUInt(16,n)}}readFloat64(){const e=this.readBytes(8,si);return e instanceof Error?e:oi.getFloat64(0,!1)}readBigInt64(){const e=this.readBytes(8,si);return e instanceof Error?e:Qn(si,!1,0)}readBigUint64(){const e=this.readBytes(8,si);return e instanceof Error?e:Qn(si,!0,0)}readFloat32(){const e=this.readBytes(4,ii);return e instanceof Error?e:ri.getFloat32(0,!1)}writeFloat64(e){oi.setFloat64(0,e,!1),this.writeBytes(si.slice(0,8))}writeBigInt64(e){const t=Wn(e);this.writeBytes(t)}writeBigUint64(e){const t=Wn(e);this.writeBytes(t)}writeFloat32(e){ri.setFloat32(0,e,!1),this.writeBytes(ii.slice(0,4))}}function ci(e){const t="string"==typeof e?new Ce(e):e;try{throw t}catch(e){return e}}const li={};function di(e,t,n,r){const i=e.objectsByID[r];if(i===li)return new Ce(Se`Recursive object: ${r}`);if(void 0!==i)return i;e.objectsByID[r]=li,t.push(),t.byteOffset=e.entries[r];const o=n.read(e,t);return t.pop(),e.objectsByID[r]=o,e.idsByObject.set(o,r),e.parsersByObject.set(o,n),o}function ui(e,t,n){const r=e.idsByObject.get(n);if(void 0!==r)return r;const i=e.objectsByID.length;return e.idsByObject.set(n,i),e.objectsByID[i]=n,e.objectsByID.length=i+1,e.parsersByObject.set(n,t),t.register(e,n),i}function pi(e){if(e<0)return 8;if(e<256)return 1;if(e<65536)return 2;if(e<2**32)return 4;if(e<2**64)return 8;throw ci(Se`invalid number: ${e}`)}function hi(){return{handlesMarker:e=>16==(240&e),read:(e,t)=>function(e){const t=e.readUInt(8);if(t instanceof Error)return t;if(16!=(240&t))return ci(Se`BPlist: tried to read integer, but wrong type 0b${V(t.toString(2)).notPII().forCertain()}`);const n=1<<(15&t);if(1!==n&&2!==n&&4!==n&&8!==n&&16!==n)return ci(Se`BPlist: tried to read integer, but invalid byte count ${V(n).notPII().forCertain()}`);if(16===n){e.readBigInt64();const t=e.readBigInt64();return Error,t}if(8===n){const t=e.readBigInt64();return Error,t}{const t=e.readUInt(8*n);return t instanceof Error?t:BigInt(t)}}(t),write(e,t,n){!function(e,t,n=pi(t)){const r=Math.log2(n),i=16|Math.round(r);switch(e.writeUInt(8,i),n){case 1:case 2:case 4:e.writeUInt(8*n,Number(t));break;case 8:e.writeBigInt64(BigInt(t))}}(t,n)},register(e,t){return ui(e,this,t)}}}const fi=hi();function gi(e){return"bplist0"===e.readASCII("bplist0".length)}function bi(e,t){if(!gi(t))return ci(Se`Data is not a binary plist`);const n=function(e){const t=e.size;if(t<26)return ci(Se`BPlist: data is invalid; too short!`);e.byteOffset=t-26;const n={offsetSize:e.readUInt(8),objectRefSize:e.readUInt(8),numObjects:e.readUInt(64),topObject:e.readUInt(64),tableOffset:e.readUInt(64)};for(const e in n)if(n[e]instanceof Error)return n[e];return n}(t);if(n instanceof Error)return n;const r=function(e,t){e.byteOffset=t.tableOffset;const n=t.offsetSize;if(1!==n&&2!==n&&4!==n)throw ci(Se`offset size must be 1, 2, or 4 bytes`);const r=[],i=[];for(let n=0,o=t.numObjects;n<o;n++){let n=0;if(n=e.readUInt(8*t.offsetSize),n instanceof Error)return n;r.push(n),i.push(void 0)}return{entries:r,objectsByID:i,objectRefSize:t.objectRefSize,idsByObject:new Map,parsersByObject:new Map}}(t,n);return r instanceof Error?r:di(r,t,e,n.topObject)}function yi(e,t,n){const r={objectsByID:[],idsByObject:new Map,parsersByObject:new Map},i=ui(r,e,n),o={...r,objectRefSize:pi(r.objectsByID.length),entries:[]};t.writeASCII("bplist00");for(const e of o.objectsByID){const n=o.parsersByObject.get(e);if(!n)throw ci(Se`found entry in bplist objectsByID without a parser`);const r=t.byteOffset;o.entries.push(r),n.write(o,t,e)}const s=function(e,t){const n=e.byteOffset,r=pi(n),i=t.entries.length;for(const n of t.entries)e.writeUInt(8*r,n);return{tableOffset:n,numObjects:i,offsetSize:r}}(t,o);!function(e,t){e.writeUInt(8,0),e.writeUInt(8,0),e.writeUInt(8,0),e.writeUInt(8,0),e.writeUInt(8,0),e.writeUInt(8,0),e.writeUInt(8,t.offsetSize),e.writeUInt(8,t.objectRefSize),e.writeUInt(64,t.numObjects),e.writeUInt(64,t.topObject),e.writeUInt(64,t.tableOffset)}(t,{offsetSize:s.offsetSize,objectRefSize:o.objectRefSize,numObjects:o.entries.length,topObject:i,tableOffset:s.tableOffset})}function mi(e,t){const n=t.readUInt(8);return n instanceof Error?n:15==(15&n)?Number(fi.read(e,t)):15&n}function vi(e,t,n,r){r<15?t.writeUInt(8,n|r):(t.writeUInt(8,15|n),fi.write(e,t,BigInt(r)))}function wi(e,t,n,r){return{handlesMarker:t=>(240&t)===e,register(e,r){const i=n(r);for(const n of i)t.register(e,n);return ui(e,this,r)},read(e,n){const i=mi(e,n);if(i instanceof Error)return i;const o=[];for(let r=0;r<i;r++){const s=n.readUInt(8*e.objectRefSize);if(s instanceof Error)return s.message=`[${r}/${i}]: ${s.message}`,s;const a=di(e,n,t,s);if(a instanceof Error)return a.message=`[${r}/${i}]: #${s} (${e.objectRefSize}) ${a.message}`,a;o.push(a)}return r(o)},write(r,i,o){const s=n(o),a=s.length;vi(r,i,e,a);for(const e of s)i.writeUInt(8*r.objectRefSize,ui(r,t,e))}}}function Pi(e){return wi(160,e,e=>e,e=>e)}function Si(e){return wi(176,e,e=>Array.from(new Set(e)),e=>Array.from(new Set(e)))}function $i(e){return wi(192,e,e=>Array.from(e),e=>new Set(e))}function Oi(){return{handlesMarker:e=>8==(254&e),read(e,t){const n=t.readUInt(8);if(n instanceof Error)return n;if(8===n)return!1;if(9===n)return!0;throw ci(Se`Invalid boolean`)},write(e,t,n){t.writeUInt(8,n?9:8)},register(e,t){return ui(e,this,t)}}}const ki=Oi();function Ii(){return{handlesMarker:e=>64==(240&e),read(e,t){const n=mi(e,t);return n instanceof Error?n:t.readBytes(n)},write(e,t,n){vi(e,t,64,n.length),t.writeBytes(n)},register(e,t){return ui(e,this,t)}}}const Ci=Date.UTC(2001,0,1);function Ri(){return{handlesMarker:e=>51==(255&e),read(e,t){t.readUInt(8);const n=t.readFloat64();return new Date(Ci+1e3*Number(n))},write(e,t,n){t.writeUInt(8,51),t.writeFloat64((n.getTime()-Ci)/1e3)},register(e,t){return ui(e,this,t)}}}const Mi=Ri(),Ti=new TextEncoder;var Di;function Ei(){return{handlesMarker(e){const t=240&e;return t===Di.ASCII||t===Di.UTF8||t===Di.UTF16},read(e,t){const n=t.peek();if(n instanceof Error)return n;const r=240&n,i=mi(e,t);if(i instanceof Error)return i;const o=r===Di.UTF16?2*i:i;return r===Di.ASCII?t.readASCII(o):r===Di.UTF16?t.readUTF16BE(o):t.readUTF8(o)},register(e,t){return ui(e,this,t)},write(e,t,n){const r=Ti.encode(n);vi(e,t,r.every(e=>e<=127)?Di.ASCII:Di.UTF8,r.length),t.writeBytes(r)}}}!function(e){e[e.ASCII=80]="ASCII",e[e.UTF8=112]="UTF8",e[e.UTF16=96]="UTF16"}(Di||(Di={}));const Ai=Ei();function ji(e){return{handlesMarker:e=>208==(240&e),register(t,n){var r;for(const i in n)(null!==(r=e[i])&&void 0!==r?r:Fi).register(t,n[i]);return ui(t,this,n)},read(t,n){var r;const i=mi(t,n);if(i instanceof Error)return i;const o=[];for(let e=0;e<i;e++){const r=n.readUInt(8*t.objectRefSize);if(r instanceof Error)return r.message=`.(${e+1}/${i}): ${r.message}`,r;const s=di(t,n,Ai,r);if(s instanceof Error)return s.message=`.(${e+1}/${i}): ${s.message}`,s;o.push(s)}const s={};for(let a=0;a<i;a++){const c=o[a],l=n.readUInt(8*t.objectRefSize);if(l instanceof Error)return l.message=`.${c}(${a+1}/${i}): ${l.message}`,l;const d=di(t,n,null!==(r=e[o[a]])&&void 0!==r?r:Fi,l);if(d instanceof Error)return d.message=`.${c}(${a+1}/${i}): #${l} (${t.objectRefSize}) ${d.message}`,d;s[c]=d}return s},write(t,n,r){var i;const o=Object.keys(r);vi(t,n,208,o.length);for(const e of o)n.writeUInt(8*t.objectRefSize,ui(t,Ai,e));for(const s of o)n.writeUInt(8*t.objectRefSize,ui(t,null!==(i=e[s])&&void 0!==i?i:Fi,r[s]))}}}function Ni(){return{handlesMarker:e=>34===e||35===e,read:(e,t)=>34===t.readUInt(8)?t.readFloat32():t.readFloat64(),write(e,t,n){t.writeUInt(8,35),t.writeFloat64(n)},register(e,t){return ui(e,this,t)}}}const Bi=Ni(),_i={handlesMarker:e=>0===e,read(e,t){const n=t.readUInt(8);return n instanceof Error?n:0!==n?ci(Se`Expected null`):null},register(e,t){return ui(e,this,t)},write(e,t,n){t.writeUInt(8,0)}},xi={handlesMarker:e=>15===e,read(e,t){const n=t.readUInt(8);if(n instanceof Error)return n},register(e,t){return ui(e,this,t)},write(e,t,n){t.writeUInt(8,15)}},Ui=new DataView(new ArrayBuffer(100));function Li(){return{handlesMarker:e=>128==(240&e),read:(e,t)=>function(e){const t=e.readUInt(8);if(t instanceof Error)return t;if(128!=(240&t))return ci(Se`BPlist: tried to read uid, but wrong type 0b${V(t.toString(2)).notPII().forCertain()}`);const n=1+(15&t);if(1!==n&&2!==n&&4!==n&&8!==n)return ci(Se`BPlist: tried to read uid, but invalid byte count ${V(n).notPII().forCertain()}`);if(8===n)return e.readBigUint64();const r=e.readUInt(8*n);return r instanceof Error?r:BigInt(r)}(t),write(e,t,n){!function(e,t,n=pi(t)){const r=128|n-1;1===n?Ui.setUint8(0,Number(t)):2===n?Ui.setUint16(0,Number(t)):4===n?Ui.setUint32(0,Number(t)):8===n&&Ui.setBigUint64(0,BigInt(t)),e.writeUInt(8,r);for(let t=0;t<n;t++)e.writeByte(Ui.getUint8(t))}(t,n)},register(e,t){return ui(e,this,t)}}}const Ki=Li();function qi(...e){const t=e.findIndex(e=>e.handlesMarker(128)),n=e.findIndex(e=>e.handlesMarker(16)),r=t>=0&&(n<0||t<n);return{handles:t=>e.some(e=>e.handlesMarker(t)),read(t,n){const r=n.peek();if(r instanceof Error)return r;const i=e.find(e=>e.handlesMarker(r));if(!i)throw ci(Se`BPlist oneOf: no reader was able to read`);return i.read(t,n)},register(e,t){return this.typeForValue(t).register(e,t)},typeForValue(e){const t=Gi(e);return t.handlesMarker(16)&&r?Ki:t},write(e,t,n){const i=Gi(n);i.handlesMarker(16)&&r?Ki.write(e,t,BigInt(n)):i.write(e,t,n)}}}let Vi;const Fi={handlesMarker:e=>Vi.handlesMarker(e),read:(e,t)=>Vi.read(e,t),register:(e,t)=>Gi(t).register(e,t),write(e,t,n){Gi(n).write(e,t,n)}};function Gi(e){if("string"==typeof e)return Ai;if("number"==typeof e)return Math.abs(e-Math.round(e))<Number.EPSILON?fi:Bi;if("bigint"==typeof e)return fi;if(null===e)return _i;if(e instanceof Date)return Mi;if(e instanceof Uint8Array)return Ii();if(Array.isArray(e))return Pi(Fi);if(e instanceof Set)return $i(Fi);if("boolean"==typeof e)return ki;if("object"==typeof e)return ji({});throw ci(Se`unknown type: ${typeof e}`)}Vi=qi(Pi(Fi),$i(Fi),Si(Fi),ki,Ii(),Mi,ji({}),Bi,fi,_i,Ai,Ki);class Hi{constructor(e=mn()){Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:e})}parseFromByteStream(e,t){const n=bi(e,t);return n instanceof Error&&this.logger.error`${n.name}: ${n.message}\n${n.stack}`,n}writeToByteStream(e,t,n){yi(e,t,n)}parse(e,t=Fi){if(e instanceof Error)return e;const n=new ai(e);return this.parseFromByteStream(t,n)}write(e,t=Fi){const n=new ai;return this.writeToByteStream(t,n,e),n.bytes}isBPlist(e){return gi(new ai(e))}}const Wi=gi,Qi=a(e=>new r.BPlistParser(vn(e)));function zi(e){const t=e;return t instanceof Error?t:"string"==typeof t?lr(t):t}const{group:Ji,helper:Yi}=On("uri"),{group:Zi,helper:Xi}=On("participantUUID"),{group:eo,helper:to}=On("qrid"),{group:no,helper:ro}=On("mki",e=>Zr(e).toString()),{group:io,helper:oo}=On("keyID",e=>{const t=Wn(e),n=new Uint8Array(16);n.set(t),n[6]=15&n[6]|64,n[8]=63&n[8]|128;return Zr(n).toString()}),{group:so,helper:ao}=On("groupID"),{group:co,helper:lo}=On("nickname");class uo{constructor(){Object.defineProperty(this,"activeContainedState",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"log",{enumerable:!0,configurable:!0,writable:!0,value:[]})}begin(e){const t=this.stack.length;return this.log.push(`${this.activeState} / Begin ${e}`),this.stack.push(e),this.activeContainedState="",t}end(e=this.stack.length-1){if(e<0)throw new Ce(Se`Unbalanced DebugStateLog#begin/end calls`);for(this.activeContainedState="";this.stack.length>e;){const e=this.stack.pop();this.activeContainedState="End "+e,this.log.push(this.activeState)}}isWithin(...e){const t=this.activeStates.slice(0);for(const n of e){const e=t.indexOf(n);if(e<0)return!1;t.splice(0,e+1)}return!0}state(e){this.activeContainedState=e,this.log.push(this.activeState)}get activeStates(){return[...this.stack,...this.activeContainedState?[this.activeContainedState]:[]]}get activeState(){return this.activeStates.join(" / ")}}const po=br.Reader,ho=br.Writer,fo=br.util,go=br.roots.default||(br.roots.default={}),bo=go.SecMessageProtection=(()=>{const e={};return e.LegacyKey=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.encryptionKey=fo.newBuffer([]),e.prototype.signingKey=fo.newBuffer([]),e.encode=function(e,t){return t||(t=ho.create()),t.uint32(10).bytes(e.encryptionKey),t.uint32(18).bytes(e.signingKey),t},e.decode=function(e,t){e instanceof po||(e=po.create(e));let n=void 0===t?e.len:e.pos+t,r=new go.SecMessageProtection.LegacyKey;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.encryptionKey=e.bytes();break;case 2:r.signingKey=e.bytes();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("encryptionKey"))throw fo.ProtocolError("missing required 'encryptionKey'",{instance:r});if(!r.hasOwnProperty("signingKey"))throw fo.ProtocolError("missing required 'signingKey'",{instance:r});return r},e}(),e.OuterMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.encryptedPayload=fo.newBuffer([]),e.prototype.ephemeralPubKey=fo.newBuffer([]),e.prototype.signature=fo.newBuffer([]),e.prototype.keyValidator=fo.newBuffer([]),e.encode=function(e,t){return t||(t=ho.create()),t.uint32(10).bytes(e.encryptedPayload),t.uint32(18).bytes(e.ephemeralPubKey),t.uint32(26).bytes(e.signature),null!=e.keyValidator&&Object.hasOwnProperty.call(e,"keyValidator")&&t.uint32(794).bytes(e.keyValidator),t},e.decode=function(e,t){e instanceof po||(e=po.create(e));let n=void 0===t?e.len:e.pos+t,r=new go.SecMessageProtection.OuterMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.encryptedPayload=e.bytes();break;case 2:r.ephemeralPubKey=e.bytes();break;case 3:r.signature=e.bytes();break;case 99:r.keyValidator=e.bytes();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("encryptedPayload"))throw fo.ProtocolError("missing required 'encryptedPayload'",{instance:r});if(!r.hasOwnProperty("ephemeralPubKey"))throw fo.ProtocolError("missing required 'ephemeralPubKey'",{instance:r});if(!r.hasOwnProperty("signature"))throw fo.ProtocolError("missing required 'signature'",{instance:r});return r},e}(),e.InnerMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.message=fo.newBuffer([]),e.prototype.counter=0,e.prototype.ktGossipData=fo.newBuffer([]),e.prototype.debugInfo=fo.newBuffer([]),e.encode=function(e,t){return t||(t=ho.create()),t.uint32(10).bytes(e.message),null!=e.counter&&Object.hasOwnProperty.call(e,"counter")&&t.uint32(16).uint32(e.counter),null!=e.ktGossipData&&Object.hasOwnProperty.call(e,"ktGossipData")&&t.uint32(26).bytes(e.ktGossipData),null!=e.debugInfo&&Object.hasOwnProperty.call(e,"debugInfo")&&t.uint32(794).bytes(e.debugInfo),t},e.decode=function(e,t){e instanceof po||(e=po.create(e));let n=void 0===t?e.len:e.pos+t,r=new go.SecMessageProtection.InnerMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.message=e.bytes();break;case 2:r.counter=e.uint32();break;case 3:r.ktGossipData=e.bytes();break;case 99:r.debugInfo=e.bytes();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("message"))throw fo.ProtocolError("missing required 'message'",{instance:r});return r},e}(),e.PublicDeviceIdentity=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.signingKey=fo.newBuffer([]),e.encode=function(e,t){return t||(t=ho.create()),t.uint32(10).bytes(e.signingKey),t},e.decode=function(e,t){e instanceof po||(e=po.create(e));let n=void 0===t?e.len:e.pos+t,r=new go.SecMessageProtection.PublicDeviceIdentity;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.signingKey=e.bytes();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("signingKey"))throw fo.ProtocolError("missing required 'signingKey'",{instance:r});return r},e}(),e.PublicDevicePrekey=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.prekey=fo.newBuffer([]),e.prototype.prekeySignature=fo.newBuffer([]),e.prototype.timestamp=0,e.encode=function(e,t){return t||(t=ho.create()),t.uint32(10).bytes(e.prekey),t.uint32(18).bytes(e.prekeySignature),t.uint32(25).double(e.timestamp),t},e.decode=function(e,t){e instanceof po||(e=po.create(e));let n=void 0===t?e.len:e.pos+t,r=new go.SecMessageProtection.PublicDevicePrekey;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.prekey=e.bytes();break;case 2:r.prekeySignature=e.bytes();break;case 3:r.timestamp=e.double();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("prekey"))throw fo.ProtocolError("missing required 'prekey'",{instance:r});if(!r.hasOwnProperty("prekeySignature"))throw fo.ProtocolError("missing required 'prekeySignature'",{instance:r});if(!r.hasOwnProperty("timestamp"))throw fo.ProtocolError("missing required 'timestamp'",{instance:r});return r},e}(),e.DevicePreKey=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.dhKey=null,e.prototype.timestamp=0,e.prototype.prekeySignature=fo.newBuffer([]),e.encode=function(e,t){return t||(t=ho.create()),null!=e.dhKey&&Object.hasOwnProperty.call(e,"dhKey")&&go.SecMessageProtection.P256Key.encode(e.dhKey,t.uint32(10).fork()).ldelim(),t.uint32(17).double(e.timestamp),t.uint32(26).bytes(e.prekeySignature),t},e.decode=function(e,t){e instanceof po||(e=po.create(e));let n=void 0===t?e.len:e.pos+t,r=new go.SecMessageProtection.DevicePreKey;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.dhKey=go.SecMessageProtection.P256Key.decode(e,e.uint32());break;case 2:r.timestamp=e.double();break;case 3:r.prekeySignature=e.bytes();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("timestamp"))throw fo.ProtocolError("missing required 'timestamp'",{instance:r});if(!r.hasOwnProperty("prekeySignature"))throw fo.ProtocolError("missing required 'prekeySignature'",{instance:r});return r},e}(),e.FullDeviceIdentity=function(){function e(e){if(this.prekeys=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.signingKey=null,e.prototype.prekeys=fo.emptyArray,e.encode=function(e,t){if(t||(t=ho.create()),go.SecMessageProtection.P256Key.encode(e.signingKey,t.uint32(10).fork()).ldelim(),null!=e.prekeys&&e.prekeys.length)for(let n=0;n<e.prekeys.length;++n)go.SecMessageProtection.DevicePreKey.encode(e.prekeys[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof po||(e=po.create(e));let n=void 0===t?e.len:e.pos+t,r=new go.SecMessageProtection.FullDeviceIdentity;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.signingKey=go.SecMessageProtection.P256Key.decode(e,e.uint32());break;case 2:r.prekeys&&r.prekeys.length||(r.prekeys=[]),r.prekeys.push(go.SecMessageProtection.DevicePreKey.decode(e,e.uint32()));break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("signingKey"))throw fo.ProtocolError("missing required 'signingKey'",{instance:r});return r},e}(),e.P256Key=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.keychainTag="",e.prototype.keystore=1,e.prototype.keyData=fo.newBuffer([]),e.encode=function(e,t){return t||(t=ho.create()),null!=e.keychainTag&&Object.hasOwnProperty.call(e,"keychainTag")&&t.uint32(10).string(e.keychainTag),t.uint32(16).int32(e.keystore),null!=e.keyData&&Object.hasOwnProperty.call(e,"keyData")&&t.uint32(26).bytes(e.keyData),t},e.decode=function(e,t){e instanceof po||(e=po.create(e));let n=void 0===t?e.len:e.pos+t,r=new go.SecMessageProtection.P256Key;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.keychainTag=e.string();break;case 2:r.keystore=e.int32();break;case 3:r.keyData=e.bytes();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("keystore"))throw fo.ProtocolError("missing required 'keystore'",{instance:r});return r},e.Keystore=function(){const e={},t=Object.create(e);return t[e[1]="Software"]=1,t[e[2]="SEP"]=2,t[e[3]="SecKey"]=3,t[e[4]="CTKTokenOID"]=4,t}(),e}(),e})();function yo(e,t){if(t instanceof Error)return t;try{return function e(t){return ArrayBuffer.isView(t)||s(t)?t:fr.isLong(t)?Qn(t.toBytesBE(),t.unsigned,0):Array.isArray(t)?t.map(t=>e(t)):null===t?t:"object"==typeof t?Object.fromEntries(Object.entries(t).map(([t,n])=>[t,e(n)])):t}(e.decode(t))}catch(e){return Qr(e)}}function mo(e,t){return e.encode(function e(t){return"bigint"==typeof t?fr.fromBytesBE(Array.from(Wn(t))):ArrayBuffer.isView(t)||s(t)?t:Array.isArray(t)?t.map(t=>e(t)):null===t?t:"object"==typeof t?Object.fromEntries(Object.entries(t).map(([t,n])=>[t,e(n)])):t}(t)).finish()}br.util.Long=gr.a,br.configure();BigInt(2);const vo=BigInt(1),wo={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5aC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),yForX(e){const t=e*e*e+this.a*e+this.b,n=this.powerModP(t,(this.p+BigInt(1))/BigInt(4)),r=n<this.p-n?n:this.p-n;if(r*r%this.p!=t%this.p)throw new Ce(Se`Invalid P256 test point`);return r},powerModP(e,t){let n=this.modP(e),r=vo,i=t;for(;i>0;)(i&vo)===vo&&(r=r*n%this.p),i>>=vo,n=n*n%this.p;return r},modP(e){const t=e%this.p;return t>=0?t:this.p+t}};async function Po(e){return So(e,"ECDH")}async function So(e,t){const n=function(e){if(e instanceof Error)return e;if(!e||0===e.length)return new Ce(Se`p256 compact key is empty`);const t="0x"+rn(e),n=BigInt(t),r=on(n.toString(16).padStart(64,"0")),i=on(wo.yForX(n).toString(16).padStart(64,"0"));return r instanceof Error?r:i instanceof Error?i:{crv:"P-256",ext:!0,key_ops:[],kty:"EC",x:dr(r),y:dr(i)}}(e);if(n instanceof Error)return n;const r="ECDH"===t?[]:["verify"],i={...n,key_ops:r};try{return await crypto.subtle.importKey("jwk",i,{name:t,namedCurve:"P-256"},!0,r)}catch(e){return Qr(e)}}let $o=new WeakMap;async function Oo(e){if(e instanceof Error)return e;const t=$o.get(e);if(t)return t;try{const t=function(e){return e instanceof Error?e:ur(e.x)}(await crypto.subtle.exportKey("jwk",e));return t instanceof Error||$o.set(e,t),t}catch(e){return Qr(e)}}async function ko(e){if(!e)return!1;const t=(n=e)&&n.publicKey&&n.privateKey?e.publicKey:e;var n;const r=await crypto.subtle.exportKey("jwk",t),i=ur(r.x),o=ur(r.y);if(i instanceof Error||o instanceof Error)return!1;const s=BigInt("0x"+rn(o));return s<=wo.p-s}async function Io(e=!1){return Ro({name:"ECDSA",namedCurve:"P-256"},["sign","verify"],e)}async function Co(e=!1){return Ro({name:"ECDH",namedCurve:"P-256"},["deriveBits","deriveKey"],e)}async function Ro(e,t,n=!1){let r;for(let i=0;i<1e3;i++)if(r=await window.crypto.subtle.generateKey(e,n,t),await ko(r))return{publicKey:r.publicKey,privateKey:r.privateKey};throw new Ce(Se`Failed to generate a keypair`)}const Mo=(new TextEncoder).encode("LastPawn-MessageKeys");async function To(e,t,n,r=new uo){const i=r.begin("ngmExistingEphemeralKeyExchange");try{r.state("destKey");const o=t.publicSigningKey;if(o instanceof Error)return o;r.state("destPreKey");const s=t.publicPreKey;if(s instanceof Error)return s;r.state("signature check");const a=await s.isValidlySignedBy(o.key);if(a instanceof Error)return r.state("invalid signature"),a;r.begin("Secret"),r.state("derive");const c=await crypto.subtle.deriveBits({name:"ECDH",public:n},e.preKeyPair.privateKey,256);r.state("import");const l=await crypto.subtle.importKey("raw",c,{name:"HKDF",hash:"SHA-256"},!1,["deriveBits"]);r.state("secret");const d=await crypto.subtle.deriveBits({name:"HKDF",hash:"SHA-256",salt:Mo,info:new Uint8Array(0)},l,384);return{dhOutput:new Uint8Array(c),secret:new Uint8Array(d)}}catch(e){return Qr(e)}finally{r.end(i)}}function Do(e,{dhOutput:t,publicRecipientPreKey:n,publicSenderEphemeralKey:r,publicRecipientSigningKey:i}){const o=[t,n,r,i,e],s=o.reduce((e,t)=>e+t.length,0),a=new Uint8Array(s);let c=0;for(const e of o)a.set(e,c),c+=e.length;return a}function Eo(e){for(const t of e)if(t instanceof Error)return t;const t=e,n=t.reduce((e,t)=>e+t.length,0),r=new Uint8Array(n);let i=0;for(const e of t)r.set(e,i),i+=e.length;return r}function Ao(e,t){return e instanceof Error?e:t(e)}const jo=0,No=2,Bo=new Uint8Array([1]),_o=3*No+Bo.length;class xo{constructor(e){Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:e})}async createKeyValidatorForKeys(e,t,n){const r=await Promise.all([Oo(e),Oo(t),Oo(n)]);if(r.some(e=>e instanceof Error))return r.filter(e=>e instanceof Error);const i=jo,o=jo+No,[s,a,c]=r,l=Eo([s.slice(i,o),a.slice(i,o),c.slice(i,o),Bo]);return l instanceof Error?(this.logger.error`Failed to create validator array. One of the input keys is an error.\n${l.message}\n\n${l.stack}\n\nInput Keys:\n${[e,t,n].map(e=>"    "+e).join("\n")}`,l):l.length!==_o?[this.logger.error`Failed to create validator array. Created validator had ${l.length} bytes. Expected ${_o}`]:l}async createKeyValidator(e,t){const n=await this.createKeyValidatorForKeys(e.signingKeyPair.publicKey,Ao(t.publicSigningKey,e=>e.key),Ao(t.publicPreKey,e=>e.dataKey));return n instanceof Uint8Array?n:this.logger.error`Failed to create key validator. Ran into the following issues:\n\n${n.map(e=>`${e.message}\n${e.stack}\n\n`)}`}async validateKeyValidator(e,t,n){const r=n.publicPreKeys;for(const i of r){const r=await this.createKeyValidatorForKeys(Ao(t.publicSigningKey,e=>e.key),n.signingKeyPair.publicKey,i);if(r instanceof Uint8Array&&Uo(r,e))return!0}this.logger.error`Validator did not match any expected value. Actual validator:\n`,this.logger.error`    ${Lo(e)}\n`,this.logger.error`Actual Keys & Validators:\n`,this.logger.error`    Sender Signing Key: ${Lo(await Oo(Ao(t.publicSigningKey,e=>e.key)))}`,this.logger.error`    Receiver Signing Key: ${Lo(await Oo(n.signingKeyPair.publicKey))}`,this.logger.error``,this.logger.error``;for(const e of r)this.logger.error`    PreKey: ${Lo(await Oo(e))}`,this.logger.error`    Expected Validator: ${Lo(await this.createKeyValidatorForKeys(Ao(t.publicSigningKey,e=>e.key),n.signingKeyPair.publicKey,e))}`,this.logger.error``,this.logger.error``;return this.logger.error`Validator array did not match expected value for any prekey`}}function Uo(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Lo(e){var t;return e instanceof Error?e.message:e instanceof Uint8Array?Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join(" "):null===(t=e[0])||void 0===t?void 0:t.message}const Ko={firstThreshold:196,maxCap:16};function qo(e,{firstThreshold:t,maxCap:n}){const r=e.length,i=r<=t?t:(o=r,a=n,s=2**Math.ceil(Math.log2(a)),Math.ceil(o/s)*s);var o,s,a;if(i<r)throw new Ce(Se`padMessage produced invalid amount of padding`);const c=i-r,l=new Uint8Array(i+4);l.set(e,0);const d=crypto.getRandomValues(new Uint8Array(c));l.set(d,e.length);return new Uint32Array(l.buffer,l.byteOffset+l.byteLength-4,1)[0]=c,l}class Vo{constructor(e=mn(),t=new xo(e)){Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"validator",{enumerable:!0,configurable:!0,writable:!0,value:t})}async encrypt(e,t,n,r=new uo){const i=r.begin("Encrypt");try{return await this._encrypt(e,t,n,r)}finally{r.end(i)}}async _encrypt(e,t,n,r){r.begin("KeyExchange"),r.state("Reading recipientPreKey");const i=t.publicPreKey;if(i instanceof Error)return i;r.state("Reading recipientPreKey");const o=t.publicSigningKey;if(o instanceof Error)return o;r.state("Ephemeral ECDH");const s=await async function(e,t,n=new uo){const r=n.begin("ngmNewEphemeralKeyExchange");try{n.state("signature check");const i=await t.isValidlySignedBy(e.key);if(i instanceof Error)return n.state("invalid signature"),i;n.state("generate ephemeral key");const o=t.dataKey,s=await Co();n.begin("Secret"),n.state("derive");const a=await crypto.subtle.deriveBits({name:"ECDH",public:o},s.privateKey,256);n.state("import");const c=await crypto.subtle.importKey("raw",a,{name:"HKDF",hash:"SHA-256"},!1,["deriveBits"]);n.state("secret");const l=await crypto.subtle.deriveBits({name:"HKDF",hash:"SHA-256",salt:Mo,info:new Uint8Array(0)},c,384);return{ephemeralKey:s,dhOutput:new Uint8Array(a),secret:new Uint8Array(l)}}catch(e){return Qr(e)}finally{n.end(r)}}(o,i,r);if(s instanceof Error)return s;r.end(),r.begin("Derive AES Params");const{ephemeralKey:a,secret:c,dhOutput:l}=s;r.state("aesKeyData");const d=c.slice(0,32);r.state("ivData");const u=c.slice(32,48);r.state("aesKey");const p=await crypto.subtle.importKey("raw",d,"AES-CTR",!1,["encrypt","decrypt"]);r.end(),r.begin("Plaintext preparation"),r.state("encoding");const h=mo(bo.InnerMessage,{message:n.message,counter:n.counter,...n.gossipData?{ktGossipData:n.gossipData}:{},...n.debugInfo?{debugInfo:n.debugInfo}:{}});r.state("padding");const f=qo(h,Ko);let g;r.end();try{r.state("encrypt"),g=new Uint8Array(await crypto.subtle.encrypt({name:"AES-CTR",counter:u,length:64},p,f))}catch(e){return Qr(e)}r.begin("Export keys"),r.state("recipientPreKey");const b=await Oo(i.dataKey);if(b instanceof Error)return b;r.state("ephemeralKey");const y=await Oo(a.publicKey);if(y instanceof Error)return y;r.state("recipientSigningKey");const m=await Oo(o.key);if(m instanceof Error)return m;r.end(),r.begin("Sign"),r.state("signatureData");const v=Do(new Uint8Array(g),{dhOutput:l,publicSenderEphemeralKey:y,publicRecipientPreKey:b,publicRecipientSigningKey:m});let w;r.state("sign");try{w=await crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},e.signingKeyPair.privateKey,v)}catch(e){return Qr(e)}r.state("create debug validator");const P=await this.validator.createKeyValidator(e,t);if(P instanceof Error)return P;r.end(),r.state("build OuterMessage");return mo(bo.OuterMessage,{encryptedPayload:g,ephemeralPubKey:y,signature:new Uint8Array(w),keyValidator:P})}async decrypt(e,t,n,r=new uo){const i=r.begin("Decrypt");try{return await this._decrypt(e,t,n,r)}finally{r.end(i)}}async _decrypt(e,t,n,r){r.state("decoding OuterMessage");const i=yo(bo.OuterMessage,n);if(i instanceof Error)return i;r.state("reading encryptedPayload");const o=i.encryptedPayload;if(e.publicSigningKey instanceof Error)return e.publicSigningKey;r.state("recipientSigningKey");const s=t.publicSigningKey;if(s instanceof Error)return s;const a=await Oo(s);if(a instanceof Error)return a;r.state("senderEphemeralKey");const c=i.ephemeralPubKey,l=await Po(c);if(l instanceof Error)return l;r.begin("PreKey");let d=0;const u=t.identities,p=[];for(const t of u){r.begin("Identity #"+d),d++,r.state("encodedRecipientPreKey");const n=t.preKeyPair.publicKey,s=await Oo(n);if(s instanceof Error){r.state("Failed"),p.push({identity:t,error:s}),r.end();continue}r.state("keyExchangeResult");const u=await To(t,e,l);if(u instanceof Error){r.state("Failed"),p.push({identity:t,error:u}),r.end();continue}r.state("signature data");const h=Do(new Uint8Array(o),{dhOutput:u.dhOutput,publicSenderEphemeralKey:c,publicRecipientPreKey:s,publicRecipientSigningKey:a});let f;try{r.state("isValid"),f=await crypto.subtle.verify({name:"ECDSA",hash:"SHA-256"},e.publicSigningKey.key,i.signature,h)}catch(e){return r.state("encountered error"),r.end(),Qr(e)}if(f)return r.end(),await this.decryptWithSpecificIdentity(o,u);r.state("Invalid signature"),p.push({identity:t,error:new Ce(Se`Invalid signature`)}),r.end()}r.end(),r.state("no valid prekey"),r.state("using validator...");const h=await this.validator.validateKeyValidator(i.keyValidator,e,t);return h instanceof Error?(r.state("validator agrees data is bad"),h):(r.state("validator thinks data is good, but decrypt still failed"),new Ce(Se`Decrypt failed.`))}async decryptWithSpecificIdentity(e,t){const{secret:n}=t,r=n.slice(0,32),i=n.slice(32,48),o=await crypto.subtle.importKey("raw",r,"AES-CTR",!0,["encrypt","decrypt"]);let s;try{s=new Uint8Array(await crypto.subtle.decrypt({name:"AES-CTR",counter:i,length:64},o,e))}catch(e){return Qr(e)}const a=function(e){const t=new Uint32Array(e.buffer,e.byteOffset+e.byteLength-4,1)[0];return e.slice(0,e.length-4-t)}(s),c=yo(bo.InnerMessage,a);return c instanceof Error?c:{counter:c.counter,message:c.message,gossipData:c.ktGossipData,debugInfo:c.debugInfo}}}const Fo=a(e=>new xo(e.get(vn))),Go=a(e=>new Vo(e.get(vn),e.get(Fo)));class Ho{constructor(e=[]){Object.defineProperty(this,"components",{enumerable:!0,configurable:!0,writable:!0,value:new Map});for(const t of e)this.components.set(t.type,t.componentFor(this))}has(e){return this.components.has(e)}get(e){const t=this.components.get(e);if(t)return t;const n=e(this,!0);return this.components.set(e,n),n}set(e){this.components.set(e.type,e.componentFor(this))}}var Wo=n(4);function Qo(e,t){return e===t}function zo(e,t,n=Qo){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}const Jo=[30,60,300,1800,3600];const Yo=e=>void 0!==e;const Zo=(e,t,n=1)=>{const r=[];for(let i=e;i<=t;i+=n)r.push(i);return r};Zo(0,200,5),Zo(210,250,10),Zo(0,200,25);var Xo;!function(e){e[e.PerSession=1]="PerSession",e[e.PerSegment=74]="PerSegment",e[e.PerCall=75]="PerCall"}(Xo||(Xo={}));class es{constructor(e){Object.defineProperty(this,"allocBind",{enumerable:!0,configurable:!0,writable:!0,value:e})}encode(){return{allocbind_duration:Math.floor(this.allocBind.duration)}}}class ts{constructor(e){Object.defineProperty(this,"webcourier",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Wo.RTCReportingAgentEventTypes.RealTimeEvent})}encode(){return{webcourier_reconnect_duration:Math.floor(this.webcourier.duration)}}}class ns{constructor(e){Object.defineProperty(this,"quickrelay",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Wo.RTCReportingAgentEventTypes.RealTimeEvent})}encode(){return{quickrelay_reconnect_duration:Math.floor(this.quickrelay.duration)}}}var rs;!function(e){e[e.VideoOK=0]="VideoOK",e[e.H264VideoCodecNotSupported=1]="H264VideoCodecNotSupported"}(rs||(rs={}));class is{constructor(e,t,n){Object.defineProperty(this,"endReason",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"providerEndReason",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"dedupe",{enumerable:!0,configurable:!0,writable:!0,value:!0})}encode(){const e={endReason:this.endReason};this.providerEndReason&&(e.providerEndReason=this.providerEndReason);const t=this.error;if(t){const n=(e=>{const t={};for(const n in e)("providerEndReason"===n||n.startsWith("endReason"))&&(t[n]=e[n]);return t})(t),r=e;for(const e in n){const t=r[e];t&&null!=t||(r[e]=n[e])}}return e}}class os{constructor(e=Xo.PerCall){Object.defineProperty(this,"method",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Wo.RTCReportingAgentEventTypes.RealTimeEvent}),Object.defineProperty(this,"metricsPerCall",{enumerable:!0,configurable:!0,writable:!0,value:{}})}update(e){if(!e)return;const t=this.metricsPerCall;for(const n in e){const r=e[n],i=t[n]=t[n]||{};for(const e in r){const t=e,n=r[t];Yo(n)&&(i[t]=n+(i[t]||0))}}}encode(){const e=this.metricsPerCall;return Object.keys(e).map(t=>function(e){for(const t in e)e[t]=Math.floor(e[t]);return e}(e[t]))}}const{metrics:ss}=fn,as=ss?console.debug.bind(console):()=>{};class cs{constructor(e){Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"rtc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cid",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"callStart",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"joinTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"endTime",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"endReason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"enqueuedMetrics",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"listedBrowser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dedupCaches",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hasLoggedEndReason",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"syslogMetricsPayload",{enumerable:!0,configurable:!0,writable:!0,value:(e,t)=>{const n={_method:t};for(const t in e)"_sessionID"!==t&&t.startsWith("_")||(n[t]=e[t]);this.logger.info`${V(JSON.stringify(n)).notPII().forCertain()}`}}),this.reset()}reset(){const e=this.rtc?"Reset":"Set up";this.logger.info`${V(e).constant()} metrics logger`,this.rtc=void 0,this.enqueuedMetrics=[],this.dedupCaches={[Xo.PerSession]:{},[Xo.PerSegment]:{},[Xo.PerCall]:{}},this.endReason=void 0}async init(e=null,t,n=Wo.RTCReportingAgent.withSamplingUUID.bind(Wo.RTCReportingAgent)){if(this.endTime=0,this.joinTime=Date.now(),t){this.callStart=t.getTime();const e=(Date.now()-this.callStart)/1e3;this.logger.info`Joined ${Rn(e.toFixed(1))}s into call started at ${Rn(t.toString())}`}let r;for(this.cid=e||String(Jr()),this.rtc=await n(this.cid,this.config=((e,t,n=hn())=>{const{buildNumber:r}=window.__CW_BUILD_INFO,i={webBuild:r,CID:e};return void 0!==t&&(i.listedBrowser=t),{[Wo.RTCReportingAgentConfigKeys.StorebagURL]:"https://mediaservices.cdn-apple.com/store_bags/ft/v1/rtc_storebag.json",[Wo.RTCReportingAgentConfigKeys.Sender]:"WEBRTC",[Wo.RTCReportingAgentConfigKeys.ClientName]:"web",[Wo.RTCReportingAgentConfigKeys.ServiceName]:tn(n),[Wo.RTCReportingAgentConfigKeys.ApplicationName]:"FaceTime",[Wo.RTCReportingAgentConfigKeys.DeviceName]:"",[Wo.RTCReportingAgentConfigKeys.UserInfoDict]:i}})(this.cid,this.listedBrowser),as);r=this.enqueuedMetrics.shift();)this.log(r)}getAbsoluteTimestampedPayloads(e,t,n){const r=e.encode(t);if(null===r)return;const i={_time:n};return(o=r,Array.isArray(o)?o:[o]).map(e=>Object.assign(e,i));var o}getRelativeTimestampedPayloads(e,t){const n=[];for(const r of e){const{_time:e,...i}=r;if(t){const r={secondsIntoCall:(e-t)/1e3};n.push(Object.assign(i,r))}else n.push(i)}return n}log(e){var t;const{rtc:n}=this,r=Date.now();if(e.timestampedPayloads||(e.timestampedPayloads=this.getAbsoluteTimestampedPayloads(e,this.callStart,r)),!n)return ss&&console.warn("Delaying metrics logging until RTC is online:",e),void this.enqueuedMetrics.push(e);let i=!1;const o=null!==(t=e.type)&&void 0!==t?t:Wo.RTCReportingAgentEventTypes.BatchEvent,s=e.method||Xo.PerSession,{timestampedPayloads:a}=e,c=a&&this.getRelativeTimestampedPayloads(a,this.callStart);if(c&&e.dedupe)for(const e of c){const t=Object.keys(e).filter(e=>"secondsIntoCall"!==e).sort(),n=t.join("&"),r=t.map(t=>e[t]).join("&");i=this.dedupCaches[s][n]===r,i||(this.dedupCaches[s][n]=r)}const{hasLoggedEndReason:l}=this,d=null==c?void 0:c[0];if(e instanceof is&&d)if(l)i=!0;else{this.endTime=r,this.endReason=e;const{joinTime:t}=this,n=t&&(r-t)/1e3,i=function(e){var t;return e<=10?Math.floor(e):null!==(t=Jo.find(t=>e<=t))&&void 0!==t?t:1e4}(n);d.bucketedDuration=i,this.logger.info`Clocked ${Rn(n.toFixed(1))}s on call, bucketed as ${Rn(i)}s in metrics`}if(ss){const t=`${Xo[s]} ${e.constructor.name}`;i?console.debug(`Skip ${t}  dupe:`,d):d?console.debug("Sent "+t,d):console.debug(`Eek: ${t} not yet loggable!`,e)}if(c&&!i){const e=this.syslogMetricsPayload;for(const t of c)n.issueReportingEvent(s,t,o,e)}}logTerminalError(e,t){this.logger.error`Logging terminal error ${V(_n[e]).constant()}${t?Se`: ${Tn(String(t))}`:""}`;const n=new is(e,void 0,t);this.log(n);return{metric:n,promise:(async()=>{await this.flush(),this.endSession()})()}}endSession(){var e;null===(e=this.rtc)||void 0===e||e.endSession()}async flush(){var e,t;this.rtc||await this.init(),null===(t=null===(e=this.rtc)||void 0===e?void 0:e.reporter)||void 0===t||t.flushAllEvents()}}const ls=e=>new cs(e.child`Metrics`().package`shared`.subsystem`metrics`.category`Reported`);let ds;const us=a(e=>null!=ds?ds:ds=ls(e.get(vn))),{BPlistParser:ps,isBPlist:hs}=r,fs=new TextDecoder;function gs(e){const t=function(e){return"prod"===e?"":"-"+e}(e);return{registerURL:`https://identity${t}.ess.apple.com/WebObjects/TDIdentityService.woa/wa/webregister`,queryURL:`https://query${t}.ess.apple.com/WebObjects/QueryService.woa/wa/webquery`}}class bs extends class{constructor(e,t,n=window.fetch){Object.defineProperty(this,"urls",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"fetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bplist",{enumerable:!0,configurable:!0,writable:!0,value:new ps(this.logger)}),this.fetch=n}async request(e,t,{method:n,body:r,headers:i={},credentials:o=!1}){const s={...i,"x-protocol-version":"1",Authorization:"Basic aGVsbG86d29ybGQ=","Content-Type":"application/x-bplist","x-push-token":sr(e),accept:"application/x-bplist"};return this.fetch.call(window,t,{method:n,body:this.bplist.write(r),credentials:o?"include":"omit",headers:s})}async parseResponse(e){const t=await e.arrayBuffer(),n=new ai(t);return hs(n)?this.bplist.parse(t):JSON.parse(fs.decode(t))}async register(e,t){var n;try{const r=await this.request(e,this.urls.registerURL,{method:"POST",body:t}),i=await this.parseResponse(r);if(i instanceof Error)throw i;return i.status==Ss.SUCCESS?i:new Ce(Se`IDS register failed with status ${V(i.status).notPII().forCertain()}: ${null!==(n=V(Ss[i.status]).constant())&&void 0!==n?n:Se`unknown`}`)}catch(e){return Qr(e)}}async query(e,t,n=1,r=this.logger){var i;try{const o=await this.request(e,this.urls.queryURL,{method:"POST",body:t}),s=await this.parseResponse(o);if(s instanceof Error)throw s;const{status:a,"retry-interval":c=30}=s;return a==Ss.SUCCESS?s:s.status==Ss.RETRY_OVER_LIMIT?n>0&&c<60?(await Ln(1e3*c),this.query(e,t,n-1,r)):new $s:new Ce(Se`IDS query failed with status ${V(s.status).notPII().forCertain()}: ${null!==(i=V(Ss[s.status]).constant())&&void 0!==i?i:Se`unknown`}`)}catch(e){return Qr(e)}}}{}const ys=function(e,t=mn()){return{prod:new bs(gs("prod"),t,e),gateway:new bs({registerURL:"https://gatewayws.icloud.com/identity/WebObjects/TDIdentityService.woa/wa/webregister",queryURL:"https://gatewayws.icloud.com/query/WebObjects/QueryService.woa/wa/webquery"},t,e),carry:new bs(gs("carry"),t,e),tc:new bs(gs("tc"),t,e),qa1:new bs(gs("qa1"),t,e),qa2:new bs(gs("qa2"),t,e)}}(window.fetch),ms=a(()=>{throw new Ce(Se`Registered IDS environments cannot be auto-instantiated. An existing instance must be passed to the provider.`)}),vs=a(()=>ys.prod);class ws{constructor(){Object.defineProperty(this,"controllersByURI",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}byURI(e){var t;return null!==(t=this.controllersByURI.get(e))&&void 0!==t?t:null}byPushToken(e){const t=rn(e);for(const[,e]of this.controllersByURI){const n=e.push.pushToken;if(n&&rn(n)===t)return e}return null}}const Ps=a(()=>new ws);var Ss;!function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.SUCCESS=0]="SUCCESS",e[e.DO_NOT_RETRY=6001]="DO_NOT_RETRY",e[e.RETRY_WITH_DELAY=6002]="RETRY_WITH_DELAY",e[e.RETRY_WITH_CORRECTED_TIME=6003]="RETRY_WITH_CORRECTED_TIME",e[e.REINITIALIZE_ABSINTHE=6004]="REINITIALIZE_ABSINTHE",e[e.REFRESH_CREDENTIALS=6005]="REFRESH_CREDENTIALS",e[e.REFRESH_REGISTRATION=6006]="REFRESH_REGISTRATION",e[e.RETRY_OVER_LIMIT=6007]="RETRY_OVER_LIMIT",e[e.AUTHENTICATION_FAILED=6008]="AUTHENTICATION_FAILED",e[e.NEVER_RETRY=6009]="NEVER_RETRY",e[e.REFRESH_DS_SESSSION=6010]="REFRESH_DS_SESSSION",e[e.PROVISION_LIMIT_REACHED=6011]="PROVISION_LIMIT_REACHED",e[e.REPLACE_ALL_KEYS=6012]="REPLACE_ALL_KEYS",e[e.ALTERNATE_LOCATION=6020]="ALTERNATE_LOCATION"}(Ss||(Ss={}));class $s extends Error{constructor(){super("IDSQueryRatelimitError"),Object.defineProperty(this,"isLoggable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"logString",{enumerable:!0,configurable:!0,writable:!0,value:Se`IDSURIRatelimitError`})}}class Os extends Ho{constructor(e=[]){super(Array.isArray(e)?e:[vn.useInstance(e.logger),us.useInstance(e.metrics),wn.useInstance(e.feedbackWS),ms.useInstance(e.environment),vs.useInstance(e.environment)]),Object.defineProperty(this,"isLoggable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"logString",{enumerable:!0,configurable:!0,writable:!0,value:Se`[Entity IDS]`}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this)}),Object.defineProperty(this,"metrics",{enumerable:!0,configurable:!0,writable:!0,value:us(this)}),Object.defineProperty(this,"feedbackWS",{enumerable:!0,configurable:!0,writable:!0,value:wn(this)}),Object.defineProperty(this,"environment",{enumerable:!0,configurable:!0,writable:!0,value:vs(this)}),Object.defineProperty(this,"encryptor",{enumerable:!0,configurable:!0,writable:!0,value:Go(this)}),Object.defineProperty(this,"lifetime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controllers",{enumerable:!0,configurable:!0,writable:!0,value:Ps(this)}),this.set(ks.useInstance(this)),this.set(ms.useInstance(this.environment)),this.lifetime=new pr,this.set(hr.useInstance(this.lifetime))}close(){this.logger.verbose`Closing IDS.`,this.lifetime.close()}}const ks=a(e=>{throw new Ce(Se`IDS cannot be auto-instantiated. An existing instance must be passed to the provider: ${e}`)});class Is{constructor(){Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}subscribe(e){return this.handlers.push(e),()=>{const t=this.handlers.indexOf(e);if(t<0)throw new Ce(Se`Handler removed too many times`);this.handlers.splice(t,1)}}async dispatch(e){for(let t=0;t<this.handlers.length;t++){const n=this.handlers[t],r=await n(e);if(r instanceof Error||r)return r;this.handlers[t]!==n&&t--}return!1}async waitFor(e,t,n){return async function(e,t,n,r=Se`Timeout`){let i=!1;const{promise:o,resolve:s}=Dr(),a=e.subscribe(async e=>!!await t(e)&&(i||a(),i=!0,s(e),!0)),c=Fn(o,n,r),l=await c;i||a();return i=!0,l}(this,e,t,n)}}new TextDecoder;var Cs,Rs;!function(e){e.Nice="nice",e.Other="other"}(Cs||(Cs={}));class Ms extends Error{constructor(e){super(e.toString()),Object.defineProperty(this,"logString",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"isLoggable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}}class Ts extends Is{constructor(e,t){super(),Object.defineProperty(this,"provider",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"topic",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"ids",{enumerable:!0,configurable:!0,writable:!0,value:ks(this)}),Object.defineProperty(this,"encryptor",{enumerable:!0,configurable:!0,writable:!0,value:Go(this)}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this).child`NiceDispatcher`().package`Messaging`.subsystem`push`.category`incoming`}),Object.defineProperty(this,"bplistParser",{enumerable:!0,configurable:!0,writable:!0,value:Qi(this)})}get(e){return this.provider.get(e)}async handleIncomingMessage(e,t=this.logger){const{message:n}=e,r=this.logger.activity(t).begin`[PushDispatcher --> NiceDispatcher]`();if(r.info`Dispatching message ${V(n instanceof Uint8Array||!n.U?"":Zr(n.U))}`,n instanceof Uint8Array)return r.debug`is Uint8Array`,this.dispatch({type:Cs.Other,topic:this.topic,message:n});if(!("sP"in n))return r.debug`is ${n.c}`,this.dispatch({type:Cs.Nice,controller:null,topic:this.topic,message:n,payload:null,fromEndpoint:null});r.debug`unboxing source token`;const i=n.sP,o=zi(n.t);if(o instanceof Error)return r.warn`could not unbox their push token`,o;r.debug`looking up our controller by ${n.tP?Se`URI`:Se`push token`}`;const s=n.tP?this.ids.controllers.byURI(n.tP):this.ids.controllers.byPushToken(e.pushToken);if(!s&&n.tP)return r.error`Message is for URI ${Yi(n.tP)}, but we don't have a controller for that URI. Dropping.\n\n${n}`;if(!s)return r.error`Message is for push token ${rn(e.pushToken)} but we don't have a controller for it`;r.debug`... found receiving controller for the receiver URI`,r.debug`looking up endpoint...`;const a=i&&o?await s.endpointFor(i,this.topic,rn(o),r):null;if(a instanceof Error)return r.warn`Endpoint error: ${a}`,a;if(n.P){if("none"!==n.E&&n.E){if("pair-ec"===n.E){r.verbose` ... encryption strategy = pair-ec`;const e=zi(n.P);if(e instanceof Error)return r.warn`failed to unbox raw payload: ${e}`,e;r.debug`unboxed raw payload. decrypting...`;const t=await this.decryptMessage(r,e,s,a);return t instanceof Error?(t instanceof Ms||r.debug`decryption error: ${t}`,t):(r.verbose`Dispatching decrypted message...`,this.dispatch({type:Cs.Nice,controller:s,topic:this.topic,message:n,payload:t,fromEndpoint:a}))}return r.error`Unknown encryption strategy: ${V(n.E).notPII().forCertain()}`}{r.verbose` ... encryption strategy = none`;const e=zi(n.P);return e instanceof Error?(r.warn`failed to unbox raw payload: ${e}`,e):(r.verbose` dispatching immediately`,this.dispatch({type:Cs.Nice,controller:s,topic:this.topic,message:n,payload:e,fromEndpoint:a}))}}return r.verbose`no payload; dispatching as a raw message`,this.dispatch({type:Cs.Nice,controller:s,topic:this.topic,message:n,payload:null,fromEndpoint:a})}async decryptMessage(e,t,n,r){const i=this.logger.activity(e).begin`decryptMessage`();if(!r)return i.warn`Message payload is pair-ec, but no endpoint was found`,new Ce(Se`Message payload is pair-ec, but no endpoint was found`);i.info`... found a matching endpoint. Decrypting message...`;const o=await this.encryptor.decrypt(r.theirs,n.identity,t);return o instanceof Error?o:r.counter.validateIncomingCounter(o.counter)?(i.verbose`Counter value ${V(o.counter).sessionID()} passed processing-- already received this message or replay attack`,i.debug` ... Message decrypted.`,o.message):(i.warn`Counter value ${V(o.counter).sessionID()} failed processing, will not decrypt-- already received this message or replay attack`,new Ms(Se`Counter value ${V(o.counter).sessionID()} failed processing, will not decrypt`))}}!function(e){e[e.Success=0]="Success",e[e.NoResultCode=1]="NoResultCode",e[e.LegacyTunnelOK=200]="LegacyTunnelOK",e[e.LegacyTunnelBadRequest=400]="LegacyTunnelBadRequest",e[e.ParseFailure=1e3]="ParseFailure",e[e.InvalidField=1001]="InvalidField",e[e.MessageRemoved=1002]="MessageRemoved",e[e.MessageInhibited=1003]="MessageInhibited",e[e.DecodeFailureBase64=1004]="DecodeFailureBase64",e[e.DecodeFailureHex=1005]="DecodeFailureHex",e[e.AuthFailure=1006]="AuthFailure",e[e.StorageFailure=1007]="StorageFailure",e[e.InternalError=5001]="InternalError",e[e.ServerTooBusy=5004]="ServerTooBusy",e[e.BadPushToken=5006]="BadPushToken",e[e.MissingRequiredKey=5008]="MissingRequiredKey",e[e.UPlusOneDisabled=5010]="UPlusOneDisabled",e[e.BadSignature=5032]="BadSignature",e[e.WebTunnelServiceDisabled=5200]="WebTunnelServiceDisabled",e[e.WebTunnelServiceInternalError=5201]="WebTunnelServiceInternalError",e[e.WebTunnelServiceTooBusy=5202]="WebTunnelServiceTooBusy",e[e.WebTunnelServiceMissingKey=5203]="WebTunnelServiceMissingKey",e[e.WebTunnelServiceMalformedURL=5204]="WebTunnelServiceMalformedURL",e[e.WebTunnelServiceUnauthorizedURL=5205]="WebTunnelServiceUnauthorizedURL",e[e.WebTunnelServiceResponseTooLarge=5206]="WebTunnelServiceResponseTooLarge",e[e.WebTunnelServiceOriginServerTimeout=5207]="WebTunnelServiceOriginServerTimeout",e[e.UnknownCommand=6e3]="UnknownCommand",e[e.RateLimited=7e3]="RateLimited",e[e.ServiceDisabled=7001]="ServiceDisabled",e[e.AliasEmpty=5035]="AliasEmpty",e[e.EmailInvalid=5036]="EmailInvalid",e[e.EmailInRequired=5037]="EmailInRequired",e[e.EmailInUse=5038]="EmailInUse",e[e.EmailInUseAlt=5055]="EmailInUseAlt",e[e.EmailLegacyOrInactive=5088]="EmailLegacyOrInactive",e[e.EmailVetted=5051]="EmailVetted",e[e.EmailNotVetted=5052]="EmailNotVetted",e[e.HTTPSuccess=200]="HTTPSuccess",e[e.BadRequest=5003]="BadRequest",e[e.CancelledByUser=5013]="CancelledByUser",e[e.UnsupportedManagedID=5100]="UnsupportedManagedID",e[e.UnsupportedAuditorID=5103]="UnsupportedAuditorID",e[e.ValidationFailure=8e3]="ValidationFailure",e[e.ValidationCertFetchFailure=8001]="ValidationCertFetchFailure",e[e.NoNetworkAvailable=1e4]="NoNetworkAvailable",e[e.FailedRequest=2e4]="FailedRequest",e[e.PushRequestFailed=20001]="PushRequestFailed",e[e.ActionDoNotRetry=6001]="ActionDoNotRetry",e[e.ActionRetryWithDelay=6002]="ActionRetryWithDelay",e[e.ActionRetryWithCorrectedTime=6003]="ActionRetryWithCorrectedTime",e[e.ActionRetryWithNewAbsintheContext=6004]="ActionRetryWithNewAbsintheContext",e[e.ActionRefreshCredentials=6005]="ActionRefreshCredentials",e[e.ActionRefreshRegistration=6006]="ActionRefreshRegistration",e[e.ActionAuthenticationFailed=6008]="ActionAuthenticationFailed",e[e.ActionPermanentFailure=6009]="ActionPermanentFailure",e[e.ActionIdMSSessionRefreshException=6010]="ActionIdMSSessionRefreshException",e[e.ActionProvisionLimitReached=6011]="ActionProvisionLimitReached",e[e.ActionProvisionReplaceAllSessionKeys=6012]="ActionProvisionReplaceAllSessionKeys",e[e.Unauthenticated=5e3]="Unauthenticated",e[e.InvalidNameOrPassword=5012]="InvalidNameOrPassword",e[e.AccountDisabledForSecurityReasons=5046]="AccountDisabledForSecurityReasons",e[e.VersionMismatch=5002]="VersionMismatch",e[e.NoSuchPlayerID=5005]="NoSuchPlayerID",e[e.NoSuchAchievement=5007]="NoSuchAchievement",e[e.MissingRequiredHeader=5009]="MissingRequiredHeader",e[e.UnrecognizedGameDescriptorHeaders=5010]="UnrecognizedGameDescriptorHeaders",e[e.MustAcceptTermsOfService=5011]="MustAcceptTermsOfService",e[e.NoSuchFriendRelationship=5014]="NoSuchFriendRelationship",e[e.NoSuchAlias=5015]="NoSuchAlias",e[e.EmailNotInNetwork=5016]="EmailNotInNetwork",e[e.RequestDisallowed=5017]="RequestDisallowed",e[e.NoSuchRID=5018]="NoSuchRID",e[e.NoSuchGame=5019]="NoSuchGame",e[e.MixedResponse=5020]="MixedResponse",e[e.ProfileExists=5021]="ProfileExists",e[e.AliasExists=5022]="AliasExists",e[e.AccountNameNotEmailAddress=5023]="AccountNameNotEmailAddress",e[e.AliasTooLong=5024]="AliasTooLong",e[e.AliasTooFrequentUpdates=5025]="AliasTooFrequentUpdates",e[e.PlayerStatusNotAllowed=5026]="PlayerStatusNotAllowed",e[e.PlayerStatusTooLong=5027]="PlayerStatusTooLong",e[e.NoSuchBucketID=5028]="NoSuchBucketID",e[e.AuthenticatedNotAuthorized=5029]="AuthenticatedNotAuthorized",e[e.NoPushTokenForID=5030]="NoPushTokenForID",e[e.PushPayloadTooBig=5031]="PushPayloadTooBig",e[e.NewSignatureRequired=5033]="NewSignatureRequired",e[e.NewLinkedSignatureRequired=5099]="NewLinkedSignatureRequired",e[e.NewRegistrationRequred=5034]="NewRegistrationRequred",e[e.ExpiredRelayToken=5039]="ExpiredRelayToken",e[e.BadSessionToken=5040]="BadSessionToken",e[e.ExpiredSessionToken=5041]="ExpiredSessionToken",e[e.ForcePasswordChange=5047]="ForcePasswordChange",e[e.ProfileBlocklisted=5048]="ProfileBlocklisted",e[e.SelfVersionTooOld=5057]="SelfVersionTooOld",e[e.PeerVersionTooOld=5058]="PeerVersionTooOld",e[e.PhoneNumberTooShort=5059]="PhoneNumberTooShort",e[e.PhoneNumberTooLong=5060]="PhoneNumberTooLong",e[e.PhoneNumberBadCountryCode=5061]="PhoneNumberBadCountryCode",e[e.PhoneNumberMalformed=5062]="PhoneNumberMalformed",e[e.BadInvitationContext=5063]="BadInvitationContext",e[e.UnpromotablePhoneNumber=5064]="UnpromotablePhoneNumber",e[e.RegistrationLimitReached=5068]="RegistrationLimitReached",e[e.AbsintheInternalError=5078]="AbsintheInternalError",e[e.AbsintheSessionCreationFailed=5079]="AbsintheSessionCreationFailed",e[e.AbsintheValidationFailed=5080]="AbsintheValidationFailed",e[e.AlbertInternalError=5089]="AlbertInternalError",e[e.AlbertValidationFailed=5090]="AlbertValidationFailed",e[e.NeedsBreakBeforeMake=5076]="NeedsBreakBeforeMake",e[e.BadCert=5085]="BadCert",e[e.BadNonce=5086]="BadNonce",e[e.BadNonceTimestamp=5087]="BadNonceTimestamp",e[e.ServerRegistrationUnsupported=5092]="ServerRegistrationUnsupported",e[e.None=255]="None"}(Rs||(Rs={}));class Ds{constructor(e){Object.defineProperty(this,"provider",{enumerable:!0,configurable:!0,writable:!0,value:e})}get(e){return this.provider.get(e)}}const Es=Re("FailedEveryTry",e=>({isLoggable:!0,logString:Se`Failed ${e.length} tries.`,errors:e}));class As{constructor(e){Object.defineProperty(this,"triesRemaining",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_round",{enumerable:!0,configurable:!0,writable:!0,value:0})}get round(){return this._round}next(){this._round++;const e=this.triesRemaining[0];return this.triesRemaining=this.triesRemaining.slice(1),null!=e?e:-1}get hasTriesRemaining(){return this.triesRemaining.length>0}}function js(){const e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]}var Ns;!function(e){e.FaceTimeMulti="com.apple.private.alloy.facetime.multi",e.Willow="com.apple.private.alloy.willow",e.QuickRelay="com.apple.private.alloy.quickrelay",e.QuickRelaySignaling="com.apple.private.alloy.quickrelay.web.signaling",e.GroupRemoteControlCloud="com.apple.private.alloy.groupRemoteControl.cloud",e.GroupRemoteControlSession="com.apple.private.alloy.groupRemoteControl.session"}(Ns||(Ns={}));let Bs=null;function _s(){return Bs||(Bs=async function(){const e=[Ns.FaceTimeMulti,Ns.Willow,Ns.QuickRelay,Ns.QuickRelaySignaling,Ns.GroupRemoteControlCloud,Ns.GroupRemoteControlSession],t=await Promise.all(e.map(async e=>{const t=xs.encode(e),n=await crypto.subtle.digest("SHA-1",t);return[rn(new Uint8Array(n)),e]}));return Object.fromEntries(t)}()),Bs}const xs=new TextEncoder;const Us=new TextDecoder;async function Ls(e){var t;const n=rn(e);return null!==(t=(await _s())[n])&&void 0!==t?t:Us.decode(e)}const Ks=[2e3,5e3,1e4,13e3],qs=new TextEncoder;class Vs extends Ds{constructor(e,t=la(e)){super(e),Object.defineProperty(this,"connection",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"pendingAcks",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"pendingDeliveries",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this).child`PushSender`().package`Messaging`.subsystem`push`.category`outgoing`}),Object.defineProperty(this,"feedbackWS",{enumerable:!0,configurable:!0,writable:!0,value:wn(this)}),Object.defineProperty(this,"bplistParser",{enumerable:!0,configurable:!0,writable:!0,value:Qi(this)}),Object.defineProperty(this,"dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dispose=zs(e).subscribe(async e=>"ack"===e.type?this.handleAck(e.payload):"delivered"===e.type?this.handleDelivery(e):"pendingStorageCheck"===e.type?this.handleStorageCheck(e):"error"===e.type&&this.handleError(e))}static createWebClientPushMessage(e,t,n,r=Date.now()+1e5){const i=Yr();return{topic:qs.encode(e),id:n,expirationTimeSecs:r/1e3,payload:t,uuid:i}}get pushToken(){return this.connection.pushToken}async send(e){return this.connection.sendMessage(e)}sendPush(e,t,n,r=this.logger){const i=t instanceof Uint8Array?void 0:t.i,o=js(),s=t instanceof Uint8Array?t:this.bplistParser.write(t);r.debug`${V(e).constant()}: pre-wrap for apns: i=${V(i).sessionID()} unencoded=${t}`;const a=Dr(),c=new As(Ks),l=async function(e,t,n){const r=n.begin`attemptWithRetries`(),i=Array.isArray(t)?new As(t):t;r.silly`Attempting with schedule: ${V(i.triesRemaining).notPII().forCertain()}`;const o=[];for(;i.hasTriesRemaining;){const t=i.next();if(r.silly`Attempting try ${i.round}`,t<0)break;r.silly`If it fails, retryAfter=${V(t).notPII().forCertain()}`,r.silly`Making attempt...`;const n=await e(i.round,t);if(r.silly`Done.`,n instanceof Un)r.silly`Is a timeout error: ${n}`,o.push(n);else{if(!(n instanceof Error))return r.silly`Not an error: ${n}`,n;r.silly`Is a normal error: ${n}`,o.push(n),await Ln(t)}}r.silly`Giving up. Creating wrapper error...`;const s=Es(o);return r.silly`Finished.`,s}(async(t,c)=>{r.http`<-- PushConnection] attempt ${V(t).notPII().forCertain()}...`,await this.sendPushOnce(e,s,n,o,null!=i?i:null,r),a.resolve();const l=await this.waitForAck(e,o,c,n);return l instanceof Error&&r.http`<-- PushConnection] Timed out after ${V(c).constant()}ms`,l},c,r);return l.then(e=>{e instanceof Error&&r.http`X-- PushConnection] No ack. ${V(e)}`}),{sent:()=>a.promise,ack:(e=Ks)=>(c.triesRemaining=e,l),delivered:(t=6e4)=>void 0===i?Promise.resolve((()=>{const e=Se`No 'i' field set, so cannot watch for delivery`;return this.feedbackWS.reportError({sendPush:e.toString()}),new Ce(e)})()):this.waitForDelivery(e,i,t)}}async sendPushOnce(e,t,n,r,i,o=this.logger){const s=Vs.createWebClientPushMessage(e,t,r),a=s.id;o.debug`<--PushConnection] ${V(e).constant()}: post-wrap for apns: i=${V(i).sessionID()} id=${V(a).sessionID()} encoded=${s}`,o.debug``,o.info`<--PushConnection] ${V(e).constant()} id=${V(r).sessionID(Cr)} i=${V(i).sessionID()}`;const c=await this.send({reversePushMessage:s});return o.debug`Reporting to feedbackws`,this.feedbackWS.reportPush(n,2),c}async waitForAck(e,t,n,r){const i=Fs(e,t);return new Promise(t=>{const o=setTimeout(()=>{this.pendingAcks.delete(i),t((()=>{const t=Se`Timeout waiting for push message ack on topic ${V(e).constant()}, message type: ${V(r).constant()}`;return this.feedbackWS.reportError({waitForAck:t.toString()}),new Un(t,n)})())},n);this.pendingAcks.set(i,()=>{this.pendingAcks.delete(i),clearTimeout(o),t()})})}async waitForDelivery(e,t,n){const r=Fs(e,t);return new Promise(t=>{const i=setTimeout(()=>{this.pendingDeliveries.delete(r),t((()=>{const t=Se`Timeout waiting for push message delivery on topic ${V(e).constant()}`;return this.feedbackWS.reportError({waitForDelivery:t.toString()}),new Un(t,n)})())},n);this.pendingDeliveries.set(r,e=>{this.pendingDeliveries.delete(r),clearTimeout(i),t(e)})})}async handleError(e){return!1}async handleStorageCheck(e,t=this.logger){t.verbose`Sending storage check response for topic ${V(e.topic).notPII().forCertain()}...`,t.verbose`Server message: ${e.rawMessage}`;return this.sendPush(e.topic,{c:Rr.OfflineMessagePendingStorageCheck,i:js()},"PendingStorageCheckMessage").ack().then(e=>{e?t.warn`Our PendingOfflineMessageResponse was never acked`:t.verbose`Ack received for PendingOfflineMessageResponse`}),!0}async handleAck(e){var t;const n=await Ls(e.topic||new Uint8Array(1)),r=this.pendingAcks.get(Fs(n,null!==(t=e.id)&&void 0!==t?t:-1));return this.logger.info`[PushConnection--> acknowledgementMessage: ${V(n).constant()} (${V(e.id).sessionID(Cr)})`,r?(this.logger.info`[PushConnection--> acknowledgementMessage]: found matching pending ack`,r(),!0):(this.logger.info`[PushConnection--> acknowledgementMessage]: did not find a matching pending ack for topic ${V(n).constant()}, id ${V(e.id).sessionID(Cr)}`,!0)}async handleDelivery(e){const t=e.topic,n=this.pendingDeliveries.get(Fs(t,e.payload.i));return this.logger.info`[PushConnection--> deliveredMessage: ${V(t).constant()} i=(${V(e.payload.i).sessionID(Cr)}) s=${V(e.payload.s).session()}`,n?(this.logger.info`[PushConnection--> deliveredMessage]: found matching pending delivery`,n(0===e.payload.s?void 0:new Ce(Se`Nice status code: ${e.payload.s}`)),!0):(this.logger.info`[PushConnection--> deliveredMessage]: did not find a matching pending delivery for topic ${V(t).constant()}, i=${V(e.payload.i).sessionID(Cr)}, s=${V(e.payload.s).device()}`,!1)}}function Fs(e,t){return`ack:${e}:${t}`}o([ir(ht.Verbose)],Vs.prototype,"sendPush",null),o([ir(ht.Verbose)],Vs.prototype,"sendPushOnce",null),o([ir(ht.Silly)],Vs.prototype,"handleStorageCheck",null);const Gs=a(e=>new Vs(e)),Hs=new TextDecoder;class Ws extends Is{constructor(e){super(),Object.defineProperty(this,"provider",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this).child`PushDispatcher`.id``().package`Messaging`.subsystem`push`.category`incoming`}),Object.defineProperty(this,"bplistParser",{enumerable:!0,configurable:!0,writable:!0,value:Qi(this)}),Object.defineProperty(this,"niceDispatchersByTopic",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}get(e){return this.provider.get(e)}async handleIncomingMessage(e){const{message:t,pushToken:n}=e;if(t.pushMessage){const e=await this.webClientPushMessage(t,t.pushMessage,n);return e||!0}return t.pushAcknowledgmentMessage?this.dispatch({type:"ack",message:t,pushToken:n,payload:t.pushAcknowledgmentMessage}):this.dispatch({type:"other",message:t,pushToken:n})}async webClientPushMessage(e,t,n){let r;null!==t.id&&void 0!==t.id&&null!==t.topic&&void 0!==t.topic&&Hs.decode(t.topic)!==Ns.QuickRelaySignaling?r=Gs(this).send({pushAcknowledgmentMessage:{id:t.id,topic:t.topic}}):(this.logger.info`Not sending ACK for the message with id: ${V(t.id).sessionID(Cr)}; topic: ${V(t.topic).constant()}`,r=Promise.resolve());const i=async e=>{if(e instanceof Error)return e;const t=await r;return t instanceof Error?t:e},o=t.payload;let s;try{s=o?this.bplistParser.isBPlist(o)?this.bplistParser.parse(o):JSON.parse(Hs.decode(o)):null}catch(e){this.logger.info`Payload is neither json nor bplist, so won't be a Nice message`,s=Qr(e)}const a=await Ls(t.topic||new Uint8Array(1));if(this.logger.info`[PushConnection --> webClientPushMessage]: Topic: ${V(a).constant()}; id: ${V(t.id).sessionID(Cr)}; command: ${V(null==s?void 0:s.c).constant()}`,Number(null==s?void 0:s.c)===Rr.Response&&"s"in s){return i(await this.handlePushResponse(Number(null==s?void 0:s.s),a,n,e,s))}if(Number(null==s?void 0:s.c)===Rr.OfflineMessagePendingStorageCheck)return await this.dispatch({type:"pendingStorageCheck",rawMessage:e,pushMessage:t,payload:s,topic:a,pushToken:n});if(null!==t.id&&void 0!==t.id&&null!==t.topic&&void 0!==t.topic){const e=this.niceDispatcherForTopic(a),t=await e.handleIncomingMessage({message:s instanceof Error?o:s,pushToken:n});return t?i(t):(this.logger.warn`[PushConnection --> webClientPushMessage]: did not find handler for ${V(a).constant()} ${s instanceof Error?o:s}`,i(!1))}return this.logger.info`Unknown push: ${t}`,i(!1)}async handlePushResponse(e,t,n,r,i){const o=r.pushMessage;return this.logger.info`[PushConnection --> webClientPushMessage]: message ${V(o.id).sessionID()} is a push response c=${V(e).notPII().forCertain()}=${V(Rs[e]).notPII().forCertain()}`,e===Rs.Success?await this.dispatch({type:"delivered",topic:t,pushToken:n,message:r,pushMessage:o,payload:i}):await this.dispatch({type:"error",rawMessage:r,pushMessage:o,payload:i,pushToken:n,topic:t})}niceDispatcherForTopic(e){const t=this.niceDispatchersByTopic.get(e);if(t)return t;const n=new Ts(this.provider,e);return this.niceDispatchersByTopic.set(e,n),n}topic(e){return this.niceDispatcherForTopic(e)}}const Qs=a(e=>new Ws(e)),zs=a(e=>Qs(e)),Js=a(e=>Qs(e)),Ys="websocket.push.apple.com",Zs="websocket-carry.push.apple.com",Xs="websocket-tc.push.apple.com",ea="websocket.sandbox.push.apple.com",ta=a(()=>ea);class na extends Ds{constructor(e){super(e),Object.defineProperty(this,"_activeDuplex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"socketProvider",{enumerable:!0,configurable:!0,writable:!0,value:_r(this.provider)}),Object.defineProperty(this,"webCourierUrlBase",{enumerable:!0,configurable:!0,writable:!0,value:"wss://"+ta(this.provider)})}get activeDuplex(){return this._activeDuplex||(this._activeDuplex=this.socketProvider(this.webCourierUrlBase)),this._activeDuplex}connectWithMessage(e){if(this._activeDuplex)return new Ce(Se`Active connection already exists.`);const t=(()=>{try{return $r.encode({connectionMessageV1:e}).finish()}catch{return null}})();return t?(this._activeDuplex=this.socketProvider(`${this.webCourierUrlBase}/v2/${rn(t)}`),this._activeDuplex):new Ce(Se`Failed to encode ConnectionMessageV1 for connection`)}reconnect(e,t=(async(e,t)=>{us(this.provider).log(new ts(e.stopTimer()))})){const n=new Sn;this._activeDuplex&&this._activeDuplex.up.close();const r=(()=>{try{return $r.encode({connectionMessageV1:e}).finish()}catch{return null}})();return r?(this._activeDuplex=this.socketProvider(`${this.webCourierUrlBase}/v2/${rn(r)}`),this._activeDuplex.timeToFirstMessage.then(e=>t(n,e)),this._activeDuplex):new Ce(Se`Failed to encode ConnectionMessageV1 for reconnect`)}close(){this._activeDuplex&&this._activeDuplex.up.close(),this._activeDuplex=void 0}}const ra=a(e=>new na(e)),ia=new TextEncoder;class oa extends Error{constructor(e){super(),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:e})}}class sa extends Error{constructor(e){super("Invalid nonce from server; retry with server timestamp"),Object.defineProperty(this,"serverTimestamp",{enumerable:!0,configurable:!0,writable:!0,value:e})}}const aa=[100,1e3,5e3,1e4,3e4];class ca{constructor(e,t){Object.defineProperty(this,"provider",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"allowedTopics",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_isConnected",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_connectionPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_didConnect",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"didClose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isChannel",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_pushToken",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_reconnectHandler",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_reconnectTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:aa.slice()}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this.provider).child`PushConnection`().package`Messaging`.subsystem`push`}),Object.defineProperty(this,"receiver",{enumerable:!0,configurable:!0,writable:!0,value:Js(this.provider)}),Object.defineProperty(this,"feedbackWS",{enumerable:!0,configurable:!0,writable:!0,value:wn(this.provider)}),Object.defineProperty(this,"down",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"up",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pushEnvironment",{enumerable:!0,configurable:!0,writable:!0,value:ta(this.provider)});hr(e).add(()=>this.dispose()),this._connectionPromise=new Promise(()=>{})}get pushToken(){return this._pushToken}get isConnected(){return!!this._pushToken}connect(){const{up:e,down:t}=ra(this.provider).activeDuplex;this.up=e,this.down=t,t.pipe(this);const n=new Sn;return this._connectionPromise=new Promise(e=>{this._didConnect=t=>{e(t),this.feedbackWS.reportPerf("timeToConnectWS",{duration:Math.floor(n.duration)})}}),this._connectionPromise}connectWithMessage(e){return $n(ra(this.provider).connectWithMessage(e)),this.connect()}dispose(){var e;try{null===(e=this.down)||void 0===e||e.unpipe(this)}catch(e){this.logger.silly`Error ${In(e)} while attempting to unpipe after dispose was called.`}}open(){}async close(e,t=this.logger){var n;if(this._isConnected=!1,t.info`unpipng ...`,null===(n=this.down)||void 0===n||n.unpipe(this),this.didClose)this.didClose(new oa(e));else{if(1e3!==e.code){const{code:n,reason:r}=e,i=t.error`Push Connection Closed: ${V(n).notPII().forCertain()}: ${V(r).notPII().forCertain()}`;this._didConnect&&this._didConnect(Gn(i,_n.PushConnectionCloseFailed,{endReasonClass:"WebCourierClose",endReasonDetail:r||String(n),endReasonWebCourierClose:n}))}await this.attemptReconnect(t)}}async attemptReconnect(e=this.logger){const t={value:null},n=new Sn;if(e.verbose`have reconnect handler? ${V(!!this._reconnectHandler).notPII().forCertain()}; tries left: ${V(this._reconnectTimeouts.length).notPII().forCertain()}`,this._reconnectHandler&&this._reconnectTimeouts.length>0){const r=this._reconnectTimeouts.shift();e.info`Attempting reconnect in ${V(r).notPII().forCertain()}ms`,await qn(r,Se``);do{if(e.info`Attempting reconnect if online...`,!1===navigator.onLine){e.warn`Can't attempt reconnect because offline.`;const t=this._reconnectTimeouts.shift();if(t){e.info`Attempting reconnect in ${V(t).notPII().forCertain()}`,await qn(t,Se``);continue}e.info`No retries left. Giving up.`;break}e.info`Attempting reconnect; ${V(this._reconnectTimeouts.length).notPII().forCertain()} attempts remaining`;const r=await this._reconnectHandler(t.value);if(r instanceof sa){t.value=r.serverTimestamp,e.error`Attempting reconnect failed: ${V(r.message)}`;const n=this._reconnectTimeouts.shift();if(n){await qn(n,Se``);continue}}else if(r instanceof Error){e.error`Attempting reconnect failed: ${V(r.message)}`;const t=this._reconnectTimeouts.shift();if(t){await qn(t,Se``);continue}}else this.feedbackWS.reportPerf("timeFromWSAttemptReconnectToSuccess",{duration:Math.floor(n.duration)});break}while(this._reconnectTimeouts.length)}}waitForConnection(){return this._connectionPromise}async reconnect({up:e,down:t}){var n;try{null===(n=this.down)||void 0===n||n.unpipe(this)}catch(e){this.logger.silly`Error ${In(e)} while attempting to unpipe; assuming this is normal and continuing with reconnect.`}return this._isConnected&&(this._isConnected=!1),this.up=e,this.down=t,t.pipe(this),this._connectionPromise=new Promise(e=>{this._didConnect=e}),this._connectionPromise}setReconnectHandler(e){this._reconnectHandler=e}async message(e){const t=Sr.decode(await async function(e){if("string"==typeof e)return ia.encode(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);if(s(e))return new Uint8Array(e);if(e instanceof Blob)return new Uint8Array(await e.arrayBuffer());throw new Ce(Se`Invalid WebSocket message`)}(e));if(t.connectionResponseMessage)return this.logger.info`Connected to webcourier...`,void this.connectedMessage(t.connectionResponseMessage);if(t.pushMessage){const e=t.pushMessage;this.logger.info`[PushConnection--> webClientPushMessage]: ${V(e.id).sessionID(Cr)} ${V(e.expirationTimeSecs).device()}`}const n=await this.receiver.handleIncomingMessage({message:t,pushToken:this.pushToken});n instanceof Ms||(n instanceof Error?this.logger.error`Failed to handle push: ${n}\n${n.stack}`:n||this.logger.warn`No handler for push: ${Object.keys(t)}`)}async connectedMessage(e){var t,n,r;switch(this.logger.info`[PushConnection--> connectedMessage: ${JSON.stringify(e)}`,e.status){case kr.Status.OK:{const t=e.pushToken?lr(e.pushToken):Gn(new Ce(Se`Got connected message, but no push token`),_n.NoPushConnectToken);if(t instanceof Error)return void(this._didConnect&&this._didConnect(Gn(t,_n.BadPushConnectTokenBase64)));this._pushToken=t,this._reconnectTimeouts=aa.slice(),this._didConnect&&(this._didConnect(this),this._didConnect=void 0,this._isConnected=!0);Gs(this.provider).send({webFilterMessage:{allowedTopics:this.allowedTopics}});break}case kr.Status.AUTH_FAILED:case kr.Status.BAD_REQUEST:case kr.Status.EXPIRED_PUSH_TOKEN:case kr.Status.INTERNAL_ERROR:case kr.Status.RATE_LIMITED:default:{const n=new Ce(Se`Got connected message, but no push token, status ${e.status}`);null===(t=this._didConnect)||void 0===t||t.call(this,Gn(n,_n.BadPushConnectTokenBase64));break}case kr.Status.INVALID_NONCE:{const t=e.serverTimestampSeconds;if(t){const e=Qn(t.toBytesBE(),t.unsigned)*BigInt(1e3);null===(r=this._didConnect)||void 0===r||r.call(this,new sa(e))}else{const t=new Ce(Se`Got connected message, but no push token, status ${e.status}`);null===(n=this._didConnect)||void 0===n||n.call(this,Gn(t,_n.BadPushConnectTokenBase64))}break}}}async sendMessage(e){return this.up.message(Or.encode(e).finish())}}o([ir()],ca.prototype,"close",null);const la=a(()=>{throw new Ce(Se`pushConnectionComponent can only be made by useInstance`)});function da(e){return Qn(Wn(e),!0)}var ua;!function(e){e[e.OK=0]="OK",e[e.ParseFailure=1e3]="ParseFailure",e[e.InvalidField=1001]="InvalidField",e[e.InternalError=5001]="InternalError",e[e.Busy=5004]="Busy",e[e.MissingKey=5008]="MissingKey",e[e.Block=5010]="Block",e[e.BadSignature=5032]="BadSignature"}(ua||(ua={}));class pa{constructor(){Object.defineProperty(this,"listeners",{enumerable:!0,configurable:!0,writable:!0,value:new Set})}listen(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}notifyListeners(...e){for(const t of this.listeners)t(...e)}}function ha(e){return!!(null==e?void 0:e.startsWith("temp:"))}class fa{constructor(){Object.defineProperty(this,"call",{enumerable:!0,configurable:!0,writable:!0,value:new os(Xo.PerCall)}),Object.defineProperty(this,"segments",{enumerable:!0,configurable:!0,writable:!0,value:[new os(Xo.PerSegment)]})}get segment(){return this.segments[this.segments.length-1]}startNewSegment(){this.segments.push(new os(Xo.PerSegment))}update(e){this.call.update(e),this.segment.update(e)}}let ga;const ba=a(e=>null!=ga?ga:ga=new fa);async function ya(e,t){return new Promise(n=>{e.addEventListener(t,n,{once:!0})})}class ma{constructor({aq:e=fn.aq,vq:t=fn.vq,ul:n=fn.ul,dl:r=fn.dl,multitier:i=fn.multitier,sro:o=fn.sro}={}){var s,a,c,l;Object.defineProperty(this,"qrSessionAllocateResponseTimeout",{enumerable:!0,configurable:!0,writable:!0,value:1e4}),Object.defineProperty(this,"qrSessionReconnectDelayPerAttempt",{enumerable:!0,configurable:!0,writable:!0,value:4e3}),Object.defineProperty(this,"HighQualityVideoStreams",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"MediumQualityVideoStreams",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"LowQualityVideoStreams",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"AutoQualityVideoStreams",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"HighQualityAudioStreams",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"LowQualityAudioStreams",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"AutoQualityAudioStreams",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"StreamsRequestOverlap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"StreamsRequestOverlapDowngrade",{enumerable:!0,configurable:!0,writable:!0,value:fn.srd}),Object.defineProperty(this,"StreamsUpdateDebounceInterval",{enumerable:!0,configurable:!0,writable:!0,value:fn.streamsUpdateDebounceInterval}),Object.defineProperty(this,"StreamsUpdateMinDelay",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"StreamsUpdateMaxDelay",{enumerable:!0,configurable:!0,writable:!0,value:4e3}),Object.defineProperty(this,"UplinkBandwidthAllocation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"UplinkBandwidthCheckDelay",{enumerable:!0,configurable:!0,writable:!0,value:5e3}),Object.defineProperty(this,"UplinkBandwidthAlwaysTryVideo",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"DefaultDownlinkBandwidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"DownlinkBandwidthAllocation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"DownlinkBandwidthCheckDelay",{enumerable:!0,configurable:!0,writable:!0,value:5e3}),Object.defineProperty(this,"DownlinkBandwidthFromServer",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"DownlinkBandwidthFromServerInterval",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"DownlinkBandwidthHysteresisDownAbsolute",{enumerable:!0,configurable:!0,writable:!0,value:75e3}),Object.defineProperty(this,"DownlinkBandwidthHysteresisDownPercentage",{enumerable:!0,configurable:!0,writable:!0,value:.1}),Object.defineProperty(this,"DownlinkMaxSimultaneousTalkers",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"DownlinkBandwidthSsrcEvauluationCount",{enumerable:!0,configurable:!0,writable:!0,value:6}),Object.defineProperty(this,"DownlinkTfrcSampleDelay",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"DownlinkTfrcAlphaRTT",{enumerable:!0,configurable:!0,writable:!0,value:.1}),Object.defineProperty(this,"DownlinkTfrcAlphaPLR",{enumerable:!0,configurable:!0,writable:!0,value:.01}),Object.defineProperty(this,"DownlinkTfrcMinSampleCount",{enumerable:!0,configurable:!0,writable:!0,value:30}),Object.defineProperty(this,"DownlinkTfrcDefaultBandwidth",{enumerable:!0,configurable:!0,writable:!0,value:3e5}),Object.defineProperty(this,"DownlinkBandwidthEstimateOvershootDecay",{enumerable:!0,configurable:!0,writable:!0,value:fn.sbwe?.9:1}),Object.defineProperty(this,"DownlinkBandwidthEstimateOvershootDecayPeriod",{enumerable:!0,configurable:!0,writable:!0,value:2e3}),Object.defineProperty(this,"DownlinkBandwidthEstimateOvershootMaxPercentage",{enumerable:!0,configurable:!0,writable:!0,value:fn.sbwe?1.3:Number.POSITIVE_INFINITY}),Object.defineProperty(this,"CanEncodeH264",{enumerable:!0,configurable:!0,writable:!0,value:null!==(s=fn.encodeH264)&&void 0!==s?s:!!(null===(a=RTCRtpSender.getCapabilities("video"))||void 0===a?void 0:a.codecs.some(e=>"video/H264"===e.mimeType))}),Object.defineProperty(this,"CanDecodeH264",{enumerable:!0,configurable:!0,writable:!0,value:null!==(c=fn.decodeH264)&&void 0!==c?c:!!(null===(l=RTCRtpReceiver.getCapabilities("video"))||void 0===l?void 0:l.codecs.some(e=>"video/H264"===e.mimeType))}),Object.defineProperty(this,"FailRemoteSDP",{enumerable:!0,configurable:!0,writable:!0,value:fn.failRemoteSDP}),Object.defineProperty(this,"FailLocalSDP",{enumerable:!0,configurable:!0,writable:!0,value:fn.failLocalSDP}),Object.defineProperty(this,"QRFailureTimeout",{enumerable:!0,configurable:!0,writable:!0,value:1e4}),Object.defineProperty(this,"averageSFrameQueueHighOccupancyWatermark",{enumerable:!0,configurable:!0,writable:!0,value:fn.averageSFrameQueueHighOccupancyWatermark}),Object.defineProperty(this,"averageSFrameQueueLowOccupancyWatermark",{enumerable:!0,configurable:!0,writable:!0,value:fn.averageSFrameQueueLowOccupancyWatermark}),Object.defineProperty(this,"averageSFrameQueueHighOccupancyMidTierTimeout",{enumerable:!0,configurable:!0,writable:!0,value:fn.averageSFrameQueueHighOccupancyMidTierTimeout}),Object.defineProperty(this,"averageSFrameQueueHighOccupancyLowTierTimeout",{enumerable:!0,configurable:!0,writable:!0,value:fn.averageSFrameQueueHighOccupancyLowTierTimeout}),Object.defineProperty(this,"averageSFrameQueueLowOccupancyTimeout",{enumerable:!0,configurable:!0,writable:!0,value:fn.averageSFrameQueueLowOccupancyTimeout}),Object.defineProperty(this,"restrictVideoQualityByUserAgent",{enumerable:!0,configurable:!0,writable:!0,value:fn.restrictVideoQualityByUserAgent}),Object.defineProperty(this,"throttleVideoQualityUsingSFrameQueueOccupancy",{enumerable:!0,configurable:!0,writable:!0,value:fn.throttleVideoQualityUsingSFrameQueueOccupancy}),Object.defineProperty(this,"throttleDownlinkBandwidthEstimate",{enumerable:!0,configurable:!0,writable:!0,value:fn.throttleDownlinkBandwidthEstimate}),Object.defineProperty(this,"throttleDownlinkBandwidthEstimateTestFactor",{enumerable:!0,configurable:!0,writable:!0,value:fn.throttleDownlinkBandwidthEstimateTestFactor}),Object.defineProperty(this,"throttleDownlinkBandwidthEstimatePenaltyFactor",{enumerable:!0,configurable:!0,writable:!0,value:fn.throttleDownlinkBandwidthEstimatePenaltyFactor}),Object.defineProperty(this,"throttleDownlinkBandwidthEstimatePenaltyTimer",{enumerable:!0,configurable:!0,writable:!0,value:fn.throttleDownlinkBandwidthEstimatePenaltyTimer}),Object.defineProperty(this,"throttleDownlinkBandwidthEstimateRelaxationFactor",{enumerable:!0,configurable:!0,writable:!0,value:fn.throttleDownlinkBandwidthEstimateRelaxationFactor}),Object.defineProperty(this,"throttleDownlinkBandwidthEstimateRelaxationInitialTimer",{enumerable:!0,configurable:!0,writable:!0,value:fn.throttleDownlinkBandwidthEstimateRelaxationInitialTimer}),Object.defineProperty(this,"throttleDownlinkBandwidthEstimateRelaxationContinuedTimer",{enumerable:!0,configurable:!0,writable:!0,value:fn.throttleDownlinkBandwidthEstimateRelaxationContinuedTimer}),this.HighQualityVideoStreams="h"===t,this.MediumQualityVideoStreams="m"===t,this.LowQualityVideoStreams="l"===t,this.AutoQualityVideoStreams="a"===t,this.HighQualityAudioStreams="h"===e,this.LowQualityAudioStreams="l"===e,this.AutoQualityAudioStreams="a"===e,this.UplinkBandwidthAllocation=!(!n||!i),this.DownlinkBandwidthAllocation=!(!r||!i),this.StreamsRequestOverlap=o}}const va=a(e=>new ma),{group:wa,helper:Pa}=On("ssrc"),{group:Sa,helper:$a}=On("mid"),{group:Oa,helper:ka}=On("cname"),{group:Ia,helper:Ca}=On("streamID"),{group:Ra,helper:Ma}=On("serverInfo"),{group:Ta,helper:Da}=On("serverIP"),{group:Ea,helper:Aa}=On("serverPort"),{group:ja,helper:Na}=On("callID"),{group:Ba,helper:_a}=On("trackID"),{group:xa,helper:Ua}=On("trackLabel"),{group:La,helper:Ka}=On("cc-transactionID"),{group:qa,helper:Va}=On("relaySessionID"),{group:Fa,helper:Ga}=On("relaySessionToken"),{group:Ha,helper:Wa}=On("connectionParameters"),{group:Qa,helper:za}=On("connectionState"),{group:Ja,helper:Ya}=On("protocol"),{group:Za,helper:Xa}=On("endReasonQuickRelay"),{group:ec,helper:tc}=On("bandwidth"),{group:nc,helper:rc}=On("bitrate"),{group:ic,helper:oc}=On("sampleCount"),{group:sc,helper:ac}=On("packetCount"),{group:cc,helper:lc}=On("audioLevel"),{group:dc,helper:uc}=On("facingMode"),{group:pc,helper:hc}=On("mediaDevice"),{group:fc,helper:gc}=On("boolean"),{group:bc,helper:yc}=On("qualityTier"),{group:mc,helper:vc}=On("avcStreamState"),{group:wc,helper:Pc}=On("genericCounter"),{group:Sc,helper:$c}=On("audioPriority"),{group:Oc,helper:kc}=On("uniqueId");new de(new k([ja,La,Oa,Qa,Sa,Ja,Za,qa,Fa,Ta,Ra,wa,Ia,Ba,xa,dc,ec,nc,ic,sc,cc,io,no,eo,Zi,Cn,Mn,fc,bc,wc,Sc,mc]),new m,new ce);const Ic=Object.freeze({PreKeyExpireDuration:36e5,PreviousPrekeyExpireDuration:42e4,InitialMKMDistributeDuration:6e5,MKMExpireDuration:18e5,MKMRollDuration:12e5,MKMRollWaitDuration:5e3,MKMPreRecoveryInterval:1e4,MKMCacheDefaultSampleSize:32,LetMeInTimeout:864e5,ParticipantAllocateResponseTimeout:3e5,ActiveParticipantsResponseTimeout:1e4,DecryptionTimeout:3e4,DecryptionMKMRecoveryTimeout:1e4,LastParticipantRemainingTimeout:15e3,DecryptionStatCollectionInterval:1e3,DecryptionStatCollectionTimeout:5e3,NewSessionJoiningInterval:12e4,IDSQueryTimeout:2e4,IDSQueryMaxRetryNumber:3,IDSQueryMaxRetryInterval:60,IDSQueryDefaultRetryInterval:30,IDSUsePushForKeyExchange:!0});class Cc{constructor(){Object.defineProperty(this,"PreKeyExpireDuration",{enumerable:!0,configurable:!0,writable:!0,value:Ic.PreKeyExpireDuration}),Object.defineProperty(this,"PreviousPrekeyExpireDuration",{enumerable:!0,configurable:!0,writable:!0,value:Ic.PreviousPrekeyExpireDuration}),Object.defineProperty(this,"InitialMKMDistributeDuration",{enumerable:!0,configurable:!0,writable:!0,value:Ic.InitialMKMDistributeDuration}),Object.defineProperty(this,"MKMExpireDuration",{enumerable:!0,configurable:!0,writable:!0,value:Ic.MKMExpireDuration}),Object.defineProperty(this,"MKMRollDuration",{enumerable:!0,configurable:!0,writable:!0,value:Ic.MKMRollDuration}),Object.defineProperty(this,"MKMCacheDefaultSampleSize",{enumerable:!0,configurable:!0,writable:!0,value:Ic.MKMCacheDefaultSampleSize}),Object.defineProperty(this,"MKMRollWaitDuration",{enumerable:!0,configurable:!0,writable:!0,value:Ic.MKMRollWaitDuration}),Object.defineProperty(this,"MKMPreRecoveryInterval",{enumerable:!0,configurable:!0,writable:!0,value:Ic.MKMPreRecoveryInterval}),Object.defineProperty(this,"LetMeInTimeout",{enumerable:!0,configurable:!0,writable:!0,value:Ic.LetMeInTimeout}),Object.defineProperty(this,"ParticipantAllocateResponseTimeout",{enumerable:!0,configurable:!0,writable:!0,value:Ic.ParticipantAllocateResponseTimeout}),Object.defineProperty(this,"ActiveParticipantsResponseTimeout",{enumerable:!0,configurable:!0,writable:!0,value:Ic.ActiveParticipantsResponseTimeout}),Object.defineProperty(this,"DecryptionTimeout",{enumerable:!0,configurable:!0,writable:!0,value:Ic.DecryptionTimeout}),Object.defineProperty(this,"DecryptionMKMRecoveryTimeout",{enumerable:!0,configurable:!0,writable:!0,value:Ic.DecryptionMKMRecoveryTimeout}),Object.defineProperty(this,"DecryptionStatCollectionInterval",{enumerable:!0,configurable:!0,writable:!0,value:Ic.DecryptionStatCollectionInterval}),Object.defineProperty(this,"DecryptionStatCollectionTimeout",{enumerable:!0,configurable:!0,writable:!0,value:Ic.DecryptionStatCollectionTimeout}),Object.defineProperty(this,"NewSessionJoiningInterval",{enumerable:!0,configurable:!0,writable:!0,value:Ic.NewSessionJoiningInterval}),Object.defineProperty(this,"IDSQueryTimeout",{enumerable:!0,configurable:!0,writable:!0,value:Ic.IDSQueryTimeout}),Object.defineProperty(this,"IDSQueryMaxRetryNumber",{enumerable:!0,configurable:!0,writable:!0,value:Ic.IDSQueryMaxRetryNumber}),Object.defineProperty(this,"IDSQueryMaxRetryInterval",{enumerable:!0,configurable:!0,writable:!0,value:Ic.IDSQueryMaxRetryInterval}),Object.defineProperty(this,"IDSQueryDefaultRetryInterval",{enumerable:!0,configurable:!0,writable:!0,value:Ic.IDSQueryDefaultRetryInterval}),Object.defineProperty(this,"LastParticipantRemainingTimeout",{enumerable:!0,configurable:!0,writable:!0,value:Ic.LastParticipantRemainingTimeout}),Object.defineProperty(this,"IDSUsePushForKeyExchange",{enumerable:!0,configurable:!0,writable:!0,value:fn.usePushForKeyExchange})}getConfigData(){return{PreKeyExpireDuration:this.PreKeyExpireDuration,PreviousPrekeyExpireDuration:this.PreviousPrekeyExpireDuration,InitialMKMDistributeDuration:this.InitialMKMDistributeDuration,MKMExpireDuration:this.MKMExpireDuration,MKMRollDuration:this.MKMRollDuration,MKMCacheDefaultSampleSize:this.MKMCacheDefaultSampleSize,MKMRollWaitDuration:this.MKMRollWaitDuration,MKMPreRecoveryInterval:this.MKMPreRecoveryInterval,LetMeInTimeout:this.LetMeInTimeout,ParticipantAllocateResponseTimeout:this.ParticipantAllocateResponseTimeout,ActiveParticipantsResponseTimeout:this.ActiveParticipantsResponseTimeout,DecryptionTimeout:this.DecryptionTimeout,DecryptionMKMRecoveryTimeout:this.DecryptionMKMRecoveryTimeout,DecryptionStatCollectionInterval:this.DecryptionStatCollectionInterval,DecryptionStatCollectionTimeout:this.DecryptionStatCollectionTimeout,NewSessionJoiningInterval:this.NewSessionJoiningInterval,IDSQueryTimeout:this.IDSQueryTimeout,IDSQueryMaxRetryNumber:this.IDSQueryMaxRetryNumber,IDSQueryMaxRetryInterval:this.IDSQueryMaxRetryInterval,IDSQueryDefaultRetryInterval:this.IDSQueryDefaultRetryInterval,LastParticipantRemainingTimeout:this.LastParticipantRemainingTimeout,IDSUsePushForKeyExchange:this.IDSUsePushForKeyExchange}}}const Rc=a(e=>new Cc),Mc=br.Reader,Tc=br.Writer,Dc=br.util,Ec=br.roots.default||(br.roots.default={}),Ac=Ec.proto=(()=>{const e={};return e.QuickRelayWebProtocolMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.uuid=Dc.newBuffer([]),e.prototype.error=null,e.prototype.participantAllocateRequest=null,e.prototype.participantAllocateResponse=null,e.prototype.unallocbindRequest=null,e.prototype.unallocbindResponse=null,e.prototype.infoRequest=null,e.prototype.infoResponse=null,e.prototype.putmaterialRequest=null,e.prototype.putmaterialResponse=null,e.prototype.putmaterialIndication=null,e.prototype.getmaterialRequest=null,e.prototype.getmaterialResponse=null,e.prototype.mediaInfoRequest=null,e.prototype.mediaInfoResponse=null,e.prototype.sessionInfoRequest=null,e.prototype.sessionInfoResponse=null,e.prototype.sessionInfoUpdate=null,e.prototype.dataMessage=null,e.prototype.streamCompoundRequest=null,e.prototype.streamCompoundResponse=null,e.prototype.goAwayIndication=null,e.prototype.participantUpdateRequest=null,e.prototype.participantUpdateResponse=null,e.prototype.participantUpdateUpdate=null,e.prototype.testRequest=null,e.prototype.testResponse=null,e.prototype.participantStatsRequest=null,e.prototype.participantStatsResponse=null,e.prototype.participantStatsUpdate=null,e.prototype.reportingBlobRequest=null,e.prototype.reportingBlobResponse=null,e.prototype.participantProbeRequest=null,e.prototype.participantProbeResponse=null,Object.defineProperty(e.prototype,"innerMessage",{get:Dc.oneOfGetter(t=["error","participantAllocateRequest","participantAllocateResponse","unallocbindRequest","unallocbindResponse","infoRequest","infoResponse","putmaterialRequest","putmaterialResponse","putmaterialIndication","getmaterialRequest","getmaterialResponse","mediaInfoRequest","mediaInfoResponse","sessionInfoRequest","sessionInfoResponse","sessionInfoUpdate","dataMessage","streamCompoundRequest","streamCompoundResponse","goAwayIndication","participantUpdateRequest","participantUpdateResponse","participantUpdateUpdate","testRequest","testResponse","participantStatsRequest","participantStatsResponse","participantStatsUpdate","reportingBlobRequest","reportingBlobResponse","participantProbeRequest","participantProbeResponse"]),set:Dc.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Tc.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).bytes(e.uuid),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&Ec.proto.ErrorMessage.encode(e.error,t.uint32(18).fork()).ldelim(),null!=e.participantAllocateRequest&&Object.hasOwnProperty.call(e,"participantAllocateRequest")&&Ec.proto.ParticipantAllocate.Request.encode(e.participantAllocateRequest,t.uint32(82).fork()).ldelim(),null!=e.participantAllocateResponse&&Object.hasOwnProperty.call(e,"participantAllocateResponse")&&Ec.proto.ParticipantAllocate.Response.encode(e.participantAllocateResponse,t.uint32(90).fork()).ldelim(),null!=e.unallocbindRequest&&Object.hasOwnProperty.call(e,"unallocbindRequest")&&Ec.proto.UnAllocBind.Request.encode(e.unallocbindRequest,t.uint32(98).fork()).ldelim(),null!=e.unallocbindResponse&&Object.hasOwnProperty.call(e,"unallocbindResponse")&&Ec.proto.UnAllocBind.Response.encode(e.unallocbindResponse,t.uint32(106).fork()).ldelim(),null!=e.infoRequest&&Object.hasOwnProperty.call(e,"infoRequest")&&Ec.proto.Info.Request.encode(e.infoRequest,t.uint32(162).fork()).ldelim(),null!=e.infoResponse&&Object.hasOwnProperty.call(e,"infoResponse")&&Ec.proto.Info.Response.encode(e.infoResponse,t.uint32(170).fork()).ldelim(),null!=e.putmaterialRequest&&Object.hasOwnProperty.call(e,"putmaterialRequest")&&Ec.h3.PutMaterial.Request.encode(e.putmaterialRequest,t.uint32(194).fork()).ldelim(),null!=e.putmaterialResponse&&Object.hasOwnProperty.call(e,"putmaterialResponse")&&Ec.h3.PutMaterial.Response.encode(e.putmaterialResponse,t.uint32(202).fork()).ldelim(),null!=e.putmaterialIndication&&Object.hasOwnProperty.call(e,"putmaterialIndication")&&Ec.h3.PutMaterial.Indication.encode(e.putmaterialIndication,t.uint32(210).fork()).ldelim(),null!=e.getmaterialRequest&&Object.hasOwnProperty.call(e,"getmaterialRequest")&&Ec.h3.GetMaterial.Request.encode(e.getmaterialRequest,t.uint32(218).fork()).ldelim(),null!=e.getmaterialResponse&&Object.hasOwnProperty.call(e,"getmaterialResponse")&&Ec.h3.GetMaterial.Response.encode(e.getmaterialResponse,t.uint32(226).fork()).ldelim(),null!=e.mediaInfoRequest&&Object.hasOwnProperty.call(e,"mediaInfoRequest")&&Ec.proto.MediaInfo.Request.encode(e.mediaInfoRequest,t.uint32(242).fork()).ldelim(),null!=e.mediaInfoResponse&&Object.hasOwnProperty.call(e,"mediaInfoResponse")&&Ec.proto.MediaInfo.Response.encode(e.mediaInfoResponse,t.uint32(250).fork()).ldelim(),null!=e.sessionInfoRequest&&Object.hasOwnProperty.call(e,"sessionInfoRequest")&&Ec.proto.SessionInfo.Request.encode(e.sessionInfoRequest,t.uint32(322).fork()).ldelim(),null!=e.sessionInfoResponse&&Object.hasOwnProperty.call(e,"sessionInfoResponse")&&Ec.proto.SessionInfo.Response.encode(e.sessionInfoResponse,t.uint32(330).fork()).ldelim(),null!=e.sessionInfoUpdate&&Object.hasOwnProperty.call(e,"sessionInfoUpdate")&&Ec.proto.SessionInfo.Update.encode(e.sessionInfoUpdate,t.uint32(338).fork()).ldelim(),null!=e.dataMessage&&Object.hasOwnProperty.call(e,"dataMessage")&&Ec.proto.DataMessage.encode(e.dataMessage,t.uint32(402).fork()).ldelim(),null!=e.streamCompoundRequest&&Object.hasOwnProperty.call(e,"streamCompoundRequest")&&Ec.proto.StreamCompounding.Request.encode(e.streamCompoundRequest,t.uint32(482).fork()).ldelim(),null!=e.streamCompoundResponse&&Object.hasOwnProperty.call(e,"streamCompoundResponse")&&Ec.proto.StreamCompounding.Response.encode(e.streamCompoundResponse,t.uint32(490).fork()).ldelim(),null!=e.goAwayIndication&&Object.hasOwnProperty.call(e,"goAwayIndication")&&Ec.proto.GoAway.Indication.encode(e.goAwayIndication,t.uint32(562).fork()).ldelim(),null!=e.participantUpdateRequest&&Object.hasOwnProperty.call(e,"participantUpdateRequest")&&Ec.proto.ParticipantUpdate.Request.encode(e.participantUpdateRequest,t.uint32(650).fork()).ldelim(),null!=e.participantUpdateResponse&&Object.hasOwnProperty.call(e,"participantUpdateResponse")&&Ec.proto.ParticipantUpdate.Response.encode(e.participantUpdateResponse,t.uint32(658).fork()).ldelim(),null!=e.participantUpdateUpdate&&Object.hasOwnProperty.call(e,"participantUpdateUpdate")&&Ec.proto.ParticipantUpdate.Update.encode(e.participantUpdateUpdate,t.uint32(666).fork()).ldelim(),null!=e.testRequest&&Object.hasOwnProperty.call(e,"testRequest")&&Ec.proto.Test.Request.encode(e.testRequest,t.uint32(722).fork()).ldelim(),null!=e.testResponse&&Object.hasOwnProperty.call(e,"testResponse")&&Ec.proto.Test.Response.encode(e.testResponse,t.uint32(730).fork()).ldelim(),null!=e.participantStatsRequest&&Object.hasOwnProperty.call(e,"participantStatsRequest")&&Ec.proto.ParticipantStats.Request.encode(e.participantStatsRequest,t.uint32(802).fork()).ldelim(),null!=e.participantStatsResponse&&Object.hasOwnProperty.call(e,"participantStatsResponse")&&Ec.proto.ParticipantStats.Response.encode(e.participantStatsResponse,t.uint32(810).fork()).ldelim(),null!=e.participantStatsUpdate&&Object.hasOwnProperty.call(e,"participantStatsUpdate")&&Ec.proto.ParticipantStats.Update.encode(e.participantStatsUpdate,t.uint32(818).fork()).ldelim(),null!=e.reportingBlobRequest&&Object.hasOwnProperty.call(e,"reportingBlobRequest")&&Ec.proto.ReportingBlob.Request.encode(e.reportingBlobRequest,t.uint32(882).fork()).ldelim(),null!=e.reportingBlobResponse&&Object.hasOwnProperty.call(e,"reportingBlobResponse")&&Ec.proto.ReportingBlob.Response.encode(e.reportingBlobResponse,t.uint32(890).fork()).ldelim(),null!=e.participantProbeRequest&&Object.hasOwnProperty.call(e,"participantProbeRequest")&&Ec.proto.ParticipantProbe.Request.encode(e.participantProbeRequest,t.uint32(962).fork()).ldelim(),null!=e.participantProbeResponse&&Object.hasOwnProperty.call(e,"participantProbeResponse")&&Ec.proto.ParticipantProbe.Response.encode(e.participantProbeResponse,t.uint32(970).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.QuickRelayWebProtocolMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.uuid=e.bytes();break;case 2:r.error=Ec.proto.ErrorMessage.decode(e,e.uint32());break;case 10:r.participantAllocateRequest=Ec.proto.ParticipantAllocate.Request.decode(e,e.uint32());break;case 11:r.participantAllocateResponse=Ec.proto.ParticipantAllocate.Response.decode(e,e.uint32());break;case 12:r.unallocbindRequest=Ec.proto.UnAllocBind.Request.decode(e,e.uint32());break;case 13:r.unallocbindResponse=Ec.proto.UnAllocBind.Response.decode(e,e.uint32());break;case 20:r.infoRequest=Ec.proto.Info.Request.decode(e,e.uint32());break;case 21:r.infoResponse=Ec.proto.Info.Response.decode(e,e.uint32());break;case 24:r.putmaterialRequest=Ec.h3.PutMaterial.Request.decode(e,e.uint32());break;case 25:r.putmaterialResponse=Ec.h3.PutMaterial.Response.decode(e,e.uint32());break;case 26:r.putmaterialIndication=Ec.h3.PutMaterial.Indication.decode(e,e.uint32());break;case 27:r.getmaterialRequest=Ec.h3.GetMaterial.Request.decode(e,e.uint32());break;case 28:r.getmaterialResponse=Ec.h3.GetMaterial.Response.decode(e,e.uint32());break;case 30:r.mediaInfoRequest=Ec.proto.MediaInfo.Request.decode(e,e.uint32());break;case 31:r.mediaInfoResponse=Ec.proto.MediaInfo.Response.decode(e,e.uint32());break;case 40:r.sessionInfoRequest=Ec.proto.SessionInfo.Request.decode(e,e.uint32());break;case 41:r.sessionInfoResponse=Ec.proto.SessionInfo.Response.decode(e,e.uint32());break;case 42:r.sessionInfoUpdate=Ec.proto.SessionInfo.Update.decode(e,e.uint32());break;case 50:r.dataMessage=Ec.proto.DataMessage.decode(e,e.uint32());break;case 60:r.streamCompoundRequest=Ec.proto.StreamCompounding.Request.decode(e,e.uint32());break;case 61:r.streamCompoundResponse=Ec.proto.StreamCompounding.Response.decode(e,e.uint32());break;case 70:r.goAwayIndication=Ec.proto.GoAway.Indication.decode(e,e.uint32());break;case 81:r.participantUpdateRequest=Ec.proto.ParticipantUpdate.Request.decode(e,e.uint32());break;case 82:r.participantUpdateResponse=Ec.proto.ParticipantUpdate.Response.decode(e,e.uint32());break;case 83:r.participantUpdateUpdate=Ec.proto.ParticipantUpdate.Update.decode(e,e.uint32());break;case 90:r.testRequest=Ec.proto.Test.Request.decode(e,e.uint32());break;case 91:r.testResponse=Ec.proto.Test.Response.decode(e,e.uint32());break;case 100:r.participantStatsRequest=Ec.proto.ParticipantStats.Request.decode(e,e.uint32());break;case 101:r.participantStatsResponse=Ec.proto.ParticipantStats.Response.decode(e,e.uint32());break;case 102:r.participantStatsUpdate=Ec.proto.ParticipantStats.Update.decode(e,e.uint32());break;case 110:r.reportingBlobRequest=Ec.proto.ReportingBlob.Request.decode(e,e.uint32());break;case 111:r.reportingBlobResponse=Ec.proto.ReportingBlob.Response.decode(e,e.uint32());break;case 120:r.participantProbeRequest=Ec.proto.ParticipantProbe.Request.decode(e,e.uint32());break;case 121:r.participantProbeResponse=Ec.proto.ParticipantProbe.Response.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e.ConnectionParameters=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conn=null,e.prototype.data=null,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.conn&&Object.hasOwnProperty.call(e,"conn")&&Ec.proto.ConnectionParameters.Connection.encode(e.conn,t.uint32(10).fork()).ldelim(),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&Ec.proto.ConnectionParameters.DataChannel.encode(e.data,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ConnectionParameters;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.conn=Ec.proto.ConnectionParameters.Connection.decode(e,e.uint32());break;case 2:r.data=Ec.proto.ConnectionParameters.DataChannel.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.Connection=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.iceUserFragment="",e.prototype.icePassword="",e.prototype.certificateFingerprint="",e.prototype.role=0,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.iceUserFragment&&Object.hasOwnProperty.call(e,"iceUserFragment")&&t.uint32(10).string(e.iceUserFragment),null!=e.icePassword&&Object.hasOwnProperty.call(e,"icePassword")&&t.uint32(18).string(e.icePassword),null!=e.certificateFingerprint&&Object.hasOwnProperty.call(e,"certificateFingerprint")&&t.uint32(26).string(e.certificateFingerprint),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(32).int32(e.role),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ConnectionParameters.Connection;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.iceUserFragment=e.string();break;case 2:r.icePassword=e.string();break;case 3:r.certificateFingerprint=e.string();break;case 4:r.role=e.int32();break;default:e.skipType(7&t)}}return r},e.Role=function(){const e={},t=Object.create(e);return t[e[0]="ANY"]=0,t[e[1]="ACTIVE"]=1,t[e[2]="PASSIVE"]=2,t}(),e}(),e.DataChannel=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.enabled=!1,e.prototype.sctpPort=0,e.prototype.maxMessageSize=0,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.enabled&&Object.hasOwnProperty.call(e,"enabled")&&t.uint32(8).bool(e.enabled),null!=e.sctpPort&&Object.hasOwnProperty.call(e,"sctpPort")&&t.uint32(16).int32(e.sctpPort),null!=e.maxMessageSize&&Object.hasOwnProperty.call(e,"maxMessageSize")&&t.uint32(24).uint32(e.maxMessageSize),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ConnectionParameters.DataChannel;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.enabled=e.bool();break;case 2:r.sctpPort=e.int32();break;case 3:r.maxMessageSize=e.uint32();break;default:e.skipType(7&t)}}return r},e}(),e}(),e.MediaParameters=function(){function e(e){if(this.mediaConfigs=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.mediaConfigs=Dc.emptyArray,e.prototype.ntpTimestamp=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.mediaConfigs&&e.mediaConfigs.length)for(let n=0;n<e.mediaConfigs.length;++n)Ec.proto.MediaParameters.MediaConfig.encode(e.mediaConfigs[n],t.uint32(10).fork()).ldelim();return null!=e.ntpTimestamp&&Object.hasOwnProperty.call(e,"ntpTimestamp")&&t.uint32(16).uint64(e.ntpTimestamp),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.MediaParameters;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.mediaConfigs&&r.mediaConfigs.length||(r.mediaConfigs=[]),r.mediaConfigs.push(Ec.proto.MediaParameters.MediaConfig.decode(e,e.uint32()));break;case 2:r.ntpTimestamp=e.uint64();break;default:e.skipType(7&t)}}return r},e.MediaType=function(){const e={},t=Object.create(e);return t[e[0]="Audio"]=0,t[e[1]="Video"]=1,t[e[2]="DownlinkEstimationDummyRtx"]=2,t}(),e.RTPExtensionType=function(){const e={},t=Object.create(e);return t[e[0]="VoiceActivity"]=0,t[e[1]="CVO"]=1,t[e[2]="MID"]=2,t[e[3]="RID"]=3,t[e[4]="TWCC"]=4,t[e[5]="AbsoluteSendTime"]=5,t}(),e.RTPExtension=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.extensionId=0,e.prototype.extension=0,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.extensionId&&Object.hasOwnProperty.call(e,"extensionId")&&t.uint32(8).uint32(e.extensionId),null!=e.extension&&Object.hasOwnProperty.call(e,"extension")&&t.uint32(16).int32(e.extension),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.MediaParameters.RTPExtension;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.extensionId=e.uint32();break;case 2:r.extension=e.int32();break;default:e.skipType(7&t)}}return r},e}(),e.RTCPMessageType=function(){const e={},t=Object.create(e);return t[e[0]="PLI"]=0,t[e[1]="FIR"]=1,t[e[2]="NACK"]=2,t}(),e.RTCPMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.rtpMessageTypes=0,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.rtpMessageTypes&&Object.hasOwnProperty.call(e,"rtpMessageTypes")&&t.uint32(8).int32(e.rtpMessageTypes),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.MediaParameters.RTCPMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.rtpMessageTypes=e.int32();break;default:e.skipType(7&t)}}return r},e}(),e.Codec=function(){function e(e){if(this.rtcpMessageTypes=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.MimeType="",e.prototype.ClockRate=0,e.prototype.Channels=0,e.prototype.SDPFmtpLine="",e.prototype.PayloadType=0,e.prototype.rtcpMessageTypes=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.MimeType&&Object.hasOwnProperty.call(e,"MimeType")&&t.uint32(10).string(e.MimeType),null!=e.ClockRate&&Object.hasOwnProperty.call(e,"ClockRate")&&t.uint32(16).uint32(e.ClockRate),null!=e.Channels&&Object.hasOwnProperty.call(e,"Channels")&&t.uint32(24).uint32(e.Channels),null!=e.SDPFmtpLine&&Object.hasOwnProperty.call(e,"SDPFmtpLine")&&t.uint32(34).string(e.SDPFmtpLine),null!=e.PayloadType&&Object.hasOwnProperty.call(e,"PayloadType")&&t.uint32(40).uint32(e.PayloadType),null!=e.rtcpMessageTypes&&e.rtcpMessageTypes.length)for(let n=0;n<e.rtcpMessageTypes.length;++n)Ec.proto.MediaParameters.RTCPMessage.encode(e.rtcpMessageTypes[n],t.uint32(82).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.MediaParameters.Codec;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.MimeType=e.string();break;case 2:r.ClockRate=e.uint32();break;case 3:r.Channels=e.uint32();break;case 4:r.SDPFmtpLine=e.string();break;case 5:r.PayloadType=e.uint32();break;case 10:r.rtcpMessageTypes&&r.rtcpMessageTypes.length||(r.rtcpMessageTypes=[]),r.rtcpMessageTypes.push(Ec.proto.MediaParameters.RTCPMessage.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.MediaConfig=function(){function e(e){if(this.rtpExtensions=[],this.rtpCodecs=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.qrStreamId=0,e.prototype.ssrc=0,e.prototype.mid="",e.prototype.rid="",e.prototype.downlinkSsrc=0,e.prototype.repairSsrc=0,e.prototype.rtxSsrc=0,e.prototype.mediaType=0,e.prototype.rtpExtensions=Dc.emptyArray,e.prototype.rtpCodecs=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.qrStreamId&&Object.hasOwnProperty.call(e,"qrStreamId")&&t.uint32(8).uint32(e.qrStreamId),null!=e.ssrc&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),null!=e.mid&&Object.hasOwnProperty.call(e,"mid")&&t.uint32(26).string(e.mid),null!=e.rid&&Object.hasOwnProperty.call(e,"rid")&&t.uint32(34).string(e.rid),null!=e.downlinkSsrc&&Object.hasOwnProperty.call(e,"downlinkSsrc")&&t.uint32(40).uint32(e.downlinkSsrc),null!=e.repairSsrc&&Object.hasOwnProperty.call(e,"repairSsrc")&&t.uint32(48).uint32(e.repairSsrc),null!=e.rtxSsrc&&Object.hasOwnProperty.call(e,"rtxSsrc")&&t.uint32(56).uint32(e.rtxSsrc),null!=e.mediaType&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(80).int32(e.mediaType),null!=e.rtpExtensions&&e.rtpExtensions.length)for(let n=0;n<e.rtpExtensions.length;++n)Ec.proto.MediaParameters.RTPExtension.encode(e.rtpExtensions[n],t.uint32(162).fork()).ldelim();if(null!=e.rtpCodecs&&e.rtpCodecs.length)for(let n=0;n<e.rtpCodecs.length;++n)Ec.proto.MediaParameters.Codec.encode(e.rtpCodecs[n],t.uint32(170).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.MediaParameters.MediaConfig;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.qrStreamId=e.uint32();break;case 2:r.ssrc=e.uint32();break;case 3:r.mid=e.string();break;case 4:r.rid=e.string();break;case 5:r.downlinkSsrc=e.uint32();break;case 6:r.repairSsrc=e.uint32();break;case 7:r.rtxSsrc=e.uint32();break;case 10:r.mediaType=e.int32();break;case 20:r.rtpExtensions&&r.rtpExtensions.length||(r.rtpExtensions=[]),r.rtpExtensions.push(Ec.proto.MediaParameters.RTPExtension.decode(e,e.uint32()));break;case 21:r.rtpCodecs&&r.rtpCodecs.length||(r.rtpCodecs=[]),r.rtpCodecs.push(Ec.proto.MediaParameters.Codec.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e}(),e.SessionParameters=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.qrAccessToken=Dc.newBuffer([]),e.prototype.softwareVersion="",e.prototype.participantCapabilities=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.prototype.webParticipantCapabilities=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.prototype.serviceId=0,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.qrAccessToken&&Object.hasOwnProperty.call(e,"qrAccessToken")&&t.uint32(82).bytes(e.qrAccessToken),null!=e.softwareVersion&&Object.hasOwnProperty.call(e,"softwareVersion")&&t.uint32(90).string(e.softwareVersion),null!=e.participantCapabilities&&Object.hasOwnProperty.call(e,"participantCapabilities")&&t.uint32(96).uint64(e.participantCapabilities),null!=e.webParticipantCapabilities&&Object.hasOwnProperty.call(e,"webParticipantCapabilities")&&t.uint32(104).uint64(e.webParticipantCapabilities),null!=e.serviceId&&Object.hasOwnProperty.call(e,"serviceId")&&t.uint32(112).uint32(e.serviceId),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.SessionParameters;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 10:r.qrAccessToken=e.bytes();break;case 11:r.softwareVersion=e.string();break;case 12:r.participantCapabilities=e.uint64();break;case 13:r.webParticipantCapabilities=e.uint64();break;case 14:r.serviceId=e.uint32();break;default:e.skipType(7&t)}}return r},e}(),e.ErrorMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.errorCode=0,e.prototype.errorMessage="",e.encode=function(e,t){return t||(t=Tc.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&t.uint32(8).uint32(e.errorCode),null!=e.errorMessage&&Object.hasOwnProperty.call(e,"errorMessage")&&t.uint32(18).string(e.errorMessage),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ErrorMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.errorCode=e.uint32();break;case 2:r.errorMessage=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.ParticipantAllocate=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantAllocate;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Request=function(){function e(e){if(this.materials=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uuid=Dc.newBuffer([]),e.prototype.serverIp="",e.prototype.serverPort=0,e.prototype.connectionParameters=null,e.prototype.sessionParameters=null,e.prototype.materials=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).bytes(e.uuid),null!=e.serverIp&&Object.hasOwnProperty.call(e,"serverIp")&&t.uint32(18).string(e.serverIp),null!=e.serverPort&&Object.hasOwnProperty.call(e,"serverPort")&&t.uint32(24).int32(e.serverPort),null!=e.connectionParameters&&Object.hasOwnProperty.call(e,"connectionParameters")&&Ec.proto.ConnectionParameters.encode(e.connectionParameters,t.uint32(34).fork()).ldelim(),null!=e.sessionParameters&&Object.hasOwnProperty.call(e,"sessionParameters")&&Ec.proto.SessionParameters.encode(e.sessionParameters,t.uint32(50).fork()).ldelim(),null!=e.materials&&e.materials.length)for(let n=0;n<e.materials.length;++n)Ec.proto.Material.encode(e.materials[n],t.uint32(58).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantAllocate.Request;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.uuid=e.bytes();break;case 2:r.serverIp=e.string();break;case 3:r.serverPort=e.int32();break;case 4:r.connectionParameters=Ec.proto.ConnectionParameters.decode(e,e.uint32());break;case 6:r.sessionParameters=Ec.proto.SessionParameters.decode(e,e.uint32());break;case 7:r.materials&&r.materials.length||(r.materials=[]),r.materials.push(Ec.proto.Material.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.Response=function(){function e(e){if(this.serverAddress=[],this.materials=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uuid=Dc.newBuffer([]),e.prototype.connectionParameters=null,e.prototype.serverAddress=Dc.emptyArray,e.prototype.materials=Dc.emptyArray,e.prototype.error=null,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).bytes(e.uuid),null!=e.connectionParameters&&Object.hasOwnProperty.call(e,"connectionParameters")&&Ec.proto.ConnectionParameters.encode(e.connectionParameters,t.uint32(18).fork()).ldelim(),null!=e.serverAddress&&e.serverAddress.length)for(let n=0;n<e.serverAddress.length;++n)t.uint32(26).string(e.serverAddress[n]);if(null!=e.materials&&e.materials.length)for(let n=0;n<e.materials.length;++n)Ec.proto.Material.encode(e.materials[n],t.uint32(34).fork()).ldelim();return null!=e.error&&Object.hasOwnProperty.call(e,"error")&&Ec.proto.ErrorMessage.encode(e.error,t.uint32(82).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantAllocate.Response;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.uuid=e.bytes();break;case 2:r.connectionParameters=Ec.proto.ConnectionParameters.decode(e,e.uint32());break;case 3:r.serverAddress&&r.serverAddress.length||(r.serverAddress=[]),r.serverAddress.push(e.string());break;case 4:r.materials&&r.materials.length||(r.materials=[]),r.materials.push(Ec.proto.Material.decode(e,e.uint32()));break;case 10:r.error=Ec.proto.ErrorMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e}(),e.UnAllocBind=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.UnAllocBind;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Request=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.reason=0,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.UnAllocBind.Request;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.reason=e.int32();break;default:e.skipType(7&t)}}return r},e.Reason=function(){const e={},t=Object.create(e);return t[e[0]="VOLUNTARY_LEAVE"]=0,t}(),e}(),e.Response=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.error=null,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&Ec.proto.ErrorMessage.encode(e.error,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.UnAllocBind.Response;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.error=Ec.proto.ErrorMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e}(),e.MediaInfo=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.MediaInfo;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.PeerStreamInfo=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.peerParticipantId=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.prototype.mediaParameters=null,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.peerParticipantId&&Object.hasOwnProperty.call(e,"peerParticipantId")&&t.uint32(8).uint64(e.peerParticipantId),null!=e.mediaParameters&&Object.hasOwnProperty.call(e,"mediaParameters")&&Ec.proto.MediaParameters.encode(e.mediaParameters,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.MediaInfo.PeerStreamInfo;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.peerParticipantId=e.uint64();break;case 2:r.mediaParameters=Ec.proto.MediaParameters.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e.Request=function(){function e(e){if(this.peerStreamInfo=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.selfMediaParameters=null,e.prototype.peerStreamInfo=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.selfMediaParameters&&Object.hasOwnProperty.call(e,"selfMediaParameters")&&Ec.proto.MediaParameters.encode(e.selfMediaParameters,t.uint32(18).fork()).ldelim(),null!=e.peerStreamInfo&&e.peerStreamInfo.length)for(let n=0;n<e.peerStreamInfo.length;++n)Ec.proto.MediaInfo.PeerStreamInfo.encode(e.peerStreamInfo[n],t.uint32(162).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.MediaInfo.Request;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 2:r.selfMediaParameters=Ec.proto.MediaParameters.decode(e,e.uint32());break;case 20:r.peerStreamInfo&&r.peerStreamInfo.length||(r.peerStreamInfo=[]),r.peerStreamInfo.push(Ec.proto.MediaInfo.PeerStreamInfo.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.Response=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.error=null,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&Ec.proto.ErrorMessage.encode(e.error,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.MediaInfo.Response;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 2:r.error=Ec.proto.ErrorMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e}(),e.Info=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.Info;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Request=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uuid=Dc.newBuffer([]),e.prototype.serverIp="",e.prototype.serverPort=0,e.prototype.sessionParameters=null,e.prototype.requestActiveParticipantList=!1,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).bytes(e.uuid),null!=e.serverIp&&Object.hasOwnProperty.call(e,"serverIp")&&t.uint32(18).string(e.serverIp),null!=e.serverPort&&Object.hasOwnProperty.call(e,"serverPort")&&t.uint32(24).int32(e.serverPort),null!=e.sessionParameters&&Object.hasOwnProperty.call(e,"sessionParameters")&&Ec.proto.SessionParameters.encode(e.sessionParameters,t.uint32(34).fork()).ldelim(),null!=e.requestActiveParticipantList&&Object.hasOwnProperty.call(e,"requestActiveParticipantList")&&t.uint32(80).bool(e.requestActiveParticipantList),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.Info.Request;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.uuid=e.bytes();break;case 2:r.serverIp=e.string();break;case 3:r.serverPort=e.int32();break;case 4:r.sessionParameters=Ec.proto.SessionParameters.decode(e,e.uint32());break;case 10:r.requestActiveParticipantList=e.bool();break;default:e.skipType(7&t)}}return r},e}(),e.Response=function(){function e(e){if(this.activeParticipantIds=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uuid=Dc.newBuffer([]),e.prototype.activeParticipantIds=Dc.emptyArray,e.prototype.error=null,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).bytes(e.uuid),null!=e.activeParticipantIds&&e.activeParticipantIds.length){t.uint32(18).fork();for(let n=0;n<e.activeParticipantIds.length;++n)t.uint64(e.activeParticipantIds[n]);t.ldelim()}return null!=e.error&&Object.hasOwnProperty.call(e,"error")&&Ec.proto.ErrorMessage.encode(e.error,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.Info.Response;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.uuid=e.bytes();break;case 2:if(r.activeParticipantIds&&r.activeParticipantIds.length||(r.activeParticipantIds=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.activeParticipantIds.push(e.uint64())}else r.activeParticipantIds.push(e.uint64());break;case 3:r.error=Ec.proto.ErrorMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e}(),e.SessionInfo=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.SessionInfo;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Request=function(){function e(e){if(this.publishedStreams=[],this.subscribedStreams=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.requestId=0,e.prototype.publishedStreams=Dc.emptyArray,e.prototype.subscribedStreams=Dc.emptyArray,e.prototype.wildcardSubscription=!1,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.requestId&&Object.hasOwnProperty.call(e,"requestId")&&t.uint32(8).uint32(e.requestId),null!=e.publishedStreams&&e.publishedStreams.length){t.uint32(18).fork();for(let n=0;n<e.publishedStreams.length;++n)t.uint32(e.publishedStreams[n]);t.ldelim()}if(null!=e.subscribedStreams&&e.subscribedStreams.length)for(let n=0;n<e.subscribedStreams.length;++n)Ec.proto.SubscribedStream.encode(e.subscribedStreams[n],t.uint32(26).fork()).ldelim();return null!=e.wildcardSubscription&&Object.hasOwnProperty.call(e,"wildcardSubscription")&&t.uint32(32).bool(e.wildcardSubscription),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.SessionInfo.Request;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.requestId=e.uint32();break;case 2:if(r.publishedStreams&&r.publishedStreams.length||(r.publishedStreams=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.publishedStreams.push(e.uint32())}else r.publishedStreams.push(e.uint32());break;case 3:r.subscribedStreams&&r.subscribedStreams.length||(r.subscribedStreams=[]),r.subscribedStreams.push(Ec.proto.SubscribedStream.decode(e,e.uint32()));break;case 4:r.wildcardSubscription=e.bool();break;default:e.skipType(7&t)}}return r},e}(),e.Response=function(){function e(e){if(this.peerPublishedStreams=[],this.peerSubscribedStreams=[],this.lightweightParticipantIdList=[],this.participantStatusMap=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.generationCounter=0,e.prototype.peerPublishedStreams=Dc.emptyArray,e.prototype.peerSubscribedStreams=Dc.emptyArray,e.prototype.error=null,e.prototype.lightweightParticipantIdList=Dc.emptyArray,e.prototype.participantStatusMap=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.generationCounter&&Object.hasOwnProperty.call(e,"generationCounter")&&t.uint32(8).uint32(e.generationCounter),null!=e.peerPublishedStreams&&e.peerPublishedStreams.length)for(let n=0;n<e.peerPublishedStreams.length;++n)Ec.proto.PeerPublishedStream.encode(e.peerPublishedStreams[n],t.uint32(18).fork()).ldelim();if(null!=e.peerSubscribedStreams&&e.peerSubscribedStreams.length){t.uint32(26).fork();for(let n=0;n<e.peerSubscribedStreams.length;++n)t.uint32(e.peerSubscribedStreams[n]);t.ldelim()}if(null!=e.error&&Object.hasOwnProperty.call(e,"error")&&Ec.proto.ErrorMessage.encode(e.error,t.uint32(34).fork()).ldelim(),null!=e.lightweightParticipantIdList&&e.lightweightParticipantIdList.length){t.uint32(42).fork();for(let n=0;n<e.lightweightParticipantIdList.length;++n)t.uint64(e.lightweightParticipantIdList[n]);t.ldelim()}if(null!=e.participantStatusMap&&e.participantStatusMap.length)for(let n=0;n<e.participantStatusMap.length;++n)Ec.proto.ParticipantStatusMapEntry.encode(e.participantStatusMap[n],t.uint32(106).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.SessionInfo.Response;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.generationCounter=e.uint32();break;case 2:r.peerPublishedStreams&&r.peerPublishedStreams.length||(r.peerPublishedStreams=[]),r.peerPublishedStreams.push(Ec.proto.PeerPublishedStream.decode(e,e.uint32()));break;case 3:if(r.peerSubscribedStreams&&r.peerSubscribedStreams.length||(r.peerSubscribedStreams=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.peerSubscribedStreams.push(e.uint32())}else r.peerSubscribedStreams.push(e.uint32());break;case 4:r.error=Ec.proto.ErrorMessage.decode(e,e.uint32());break;case 5:if(r.lightweightParticipantIdList&&r.lightweightParticipantIdList.length||(r.lightweightParticipantIdList=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.lightweightParticipantIdList.push(e.uint64())}else r.lightweightParticipantIdList.push(e.uint64());break;case 13:r.participantStatusMap&&r.participantStatusMap.length||(r.participantStatusMap=[]),r.participantStatusMap.push(Ec.proto.ParticipantStatusMapEntry.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.Update=function(){function e(e){if(this.peerPublishedStreams=[],this.peerSubscribedStreams=[],this.lightweightParticipantIdList=[],this.participantStatusMap=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.generationCounter=0,e.prototype.peerPublishedStreams=Dc.emptyArray,e.prototype.peerSubscribedStreams=Dc.emptyArray,e.prototype.lightweightParticipantIdList=Dc.emptyArray,e.prototype.participantStatusMap=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.generationCounter&&Object.hasOwnProperty.call(e,"generationCounter")&&t.uint32(8).uint32(e.generationCounter),null!=e.peerPublishedStreams&&e.peerPublishedStreams.length)for(let n=0;n<e.peerPublishedStreams.length;++n)Ec.proto.PeerPublishedStream.encode(e.peerPublishedStreams[n],t.uint32(18).fork()).ldelim();if(null!=e.peerSubscribedStreams&&e.peerSubscribedStreams.length){t.uint32(26).fork();for(let n=0;n<e.peerSubscribedStreams.length;++n)t.uint32(e.peerSubscribedStreams[n]);t.ldelim()}if(null!=e.lightweightParticipantIdList&&e.lightweightParticipantIdList.length){t.uint32(34).fork();for(let n=0;n<e.lightweightParticipantIdList.length;++n)t.uint64(e.lightweightParticipantIdList[n]);t.ldelim()}if(null!=e.participantStatusMap&&e.participantStatusMap.length)for(let n=0;n<e.participantStatusMap.length;++n)Ec.proto.ParticipantStatusMapEntry.encode(e.participantStatusMap[n],t.uint32(106).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.SessionInfo.Update;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.generationCounter=e.uint32();break;case 2:r.peerPublishedStreams&&r.peerPublishedStreams.length||(r.peerPublishedStreams=[]),r.peerPublishedStreams.push(Ec.proto.PeerPublishedStream.decode(e,e.uint32()));break;case 3:if(r.peerSubscribedStreams&&r.peerSubscribedStreams.length||(r.peerSubscribedStreams=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.peerSubscribedStreams.push(e.uint32())}else r.peerSubscribedStreams.push(e.uint32());break;case 4:if(r.lightweightParticipantIdList&&r.lightweightParticipantIdList.length||(r.lightweightParticipantIdList=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.lightweightParticipantIdList.push(e.uint64())}else r.lightweightParticipantIdList.push(e.uint64());break;case 13:r.participantStatusMap&&r.participantStatusMap.length||(r.participantStatusMap=[]),r.participantStatusMap.push(Ec.proto.ParticipantStatusMapEntry.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e}(),e.DataMessage=function(){function e(e){if(this.streamIds=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.data=Dc.newBuffer([]),e.prototype.routingOption=0,e.prototype.participantId=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.prototype.streamIds=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(10).bytes(e.data),null!=e.routingOption&&Object.hasOwnProperty.call(e,"routingOption")&&t.uint32(16).int32(e.routingOption),null!=e.participantId&&Object.hasOwnProperty.call(e,"participantId")&&t.uint32(24).uint64(e.participantId),null!=e.streamIds&&e.streamIds.length){t.uint32(34).fork();for(let n=0;n<e.streamIds.length;++n)t.uint32(e.streamIds[n]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.DataMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.data=e.bytes();break;case 2:r.routingOption=e.int32();break;case 3:r.participantId=e.uint64();break;case 4:if(r.streamIds&&r.streamIds.length||(r.streamIds=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.streamIds.push(e.uint32())}else r.streamIds.push(e.uint32());break;default:e.skipType(7&t)}}return r},e.RoutingOption=function(){const e={},t=Object.create(e);return t[e[0]="Broadcast"]=0,t[e[1]="Unicast"]=1,t[e[2]="StreamBased"]=2,t}(),e}(),e.StreamCompounding=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.StreamCompounding;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Config=function(){function e(e){if(this.secondaryStreamId=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.primaryStreamId=0,e.prototype.secondaryStreamId=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.primaryStreamId&&Object.hasOwnProperty.call(e,"primaryStreamId")&&t.uint32(8).uint32(e.primaryStreamId),null!=e.secondaryStreamId&&e.secondaryStreamId.length){t.uint32(18).fork();for(let n=0;n<e.secondaryStreamId.length;++n)t.uint32(e.secondaryStreamId[n]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.StreamCompounding.Config;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.primaryStreamId=e.uint32();break;case 2:if(r.secondaryStreamId&&r.secondaryStreamId.length||(r.secondaryStreamId=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.secondaryStreamId.push(e.uint32())}else r.secondaryStreamId.push(e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e.Request=function(){function e(e){if(this.streamCompoundConfigs=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.requestId=0,e.prototype.streamCompoundConfigs=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.requestId&&Object.hasOwnProperty.call(e,"requestId")&&t.uint32(8).uint32(e.requestId),null!=e.streamCompoundConfigs&&e.streamCompoundConfigs.length)for(let n=0;n<e.streamCompoundConfigs.length;++n)Ec.proto.StreamCompounding.Config.encode(e.streamCompoundConfigs[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.StreamCompounding.Request;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.requestId=e.uint32();break;case 2:r.streamCompoundConfigs&&r.streamCompoundConfigs.length||(r.streamCompoundConfigs=[]),r.streamCompoundConfigs.push(Ec.proto.StreamCompounding.Config.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.Response=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.requestId=0,e.prototype.error=null,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.requestId&&Object.hasOwnProperty.call(e,"requestId")&&t.uint32(8).uint32(e.requestId),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&Ec.proto.ErrorMessage.encode(e.error,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.StreamCompounding.Response;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.requestId=e.uint32();break;case 2:r.error=Ec.proto.ErrorMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e}(),e.GoAway=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.GoAway;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Indication=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.errorCode=0,e.prototype.errorMessage="",e.encode=function(e,t){return t||(t=Tc.create()),null!=e.errorCode&&Object.hasOwnProperty.call(e,"errorCode")&&t.uint32(8).uint32(e.errorCode),null!=e.errorMessage&&Object.hasOwnProperty.call(e,"errorMessage")&&t.uint32(18).string(e.errorMessage),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.GoAway.Indication;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.errorCode=e.uint32();break;case 2:r.errorMessage=e.string();break;default:e.skipType(7&t)}}return r},e}(),e}(),e.ParticipantUpdate=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantUpdate;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Operation=function(){const e={},t=Object.create(e);return t[e[0]="OPERATION_QUERY_BLOCKLISTED_PARTICIPANTS"]=0,t[e[1]="OPERATION_BLOCKLIST"]=1,t[e[2]="OPERATION_ALLOWLIST"]=2,t[e[3]="OPERATION_QUERY_PARTICIPANTS"]=3,t[e[4]="OPERATION_REMOVE_PARTICIPANTS"]=4,t[e[5]="OPERATION_ADD_COHOST"]=5,t[e[6]="OPERATION_REMOVE_COHOST"]=6,t[e[7]="OPERATION_TRANS_TO_LIGHTWEIGHT"]=7,t[e[8]="OPERATION_TRANS_TO_NORMAL"]=8,t[e[9]="OPERATION_ADD_PERFORMER"]=9,t[e[10]="OPERATION_REMOVE_PERFORMER"]=10,t[e[11]="OPERATION_ADD_ACTIVE_AUDIENCE"]=11,t[e[12]="OPERATION_REMOVE_ACTIVE_AUDIENCE"]=12,t[e[100]="UNKNOWN"]=100,t}(),e.Request=function(){function e(e){if(this.participantIdList=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.operation=0,e.prototype.sessionStateCounter=0,e.prototype.participantIdList=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.operation&&Object.hasOwnProperty.call(e,"operation")&&t.uint32(8).int32(e.operation),null!=e.sessionStateCounter&&Object.hasOwnProperty.call(e,"sessionStateCounter")&&t.uint32(16).uint32(e.sessionStateCounter),null!=e.participantIdList&&e.participantIdList.length){t.uint32(26).fork();for(let n=0;n<e.participantIdList.length;++n)t.uint64(e.participantIdList[n]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantUpdate.Request;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.operation=e.int32();break;case 2:r.sessionStateCounter=e.uint32();break;case 3:if(r.participantIdList&&r.participantIdList.length||(r.participantIdList=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.participantIdList.push(e.uint64())}else r.participantIdList.push(e.uint64());break;default:e.skipType(7&t)}}return r},e}(),e.Response=function(){function e(e){if(this.participantIdList=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.operation=0,e.prototype.sessionStateCounter=0,e.prototype.participantIdList=Dc.emptyArray,e.prototype.error=null,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.operation&&Object.hasOwnProperty.call(e,"operation")&&t.uint32(8).int32(e.operation),null!=e.sessionStateCounter&&Object.hasOwnProperty.call(e,"sessionStateCounter")&&t.uint32(16).uint32(e.sessionStateCounter),null!=e.participantIdList&&e.participantIdList.length){t.uint32(26).fork();for(let n=0;n<e.participantIdList.length;++n)t.uint64(e.participantIdList[n]);t.ldelim()}return null!=e.error&&Object.hasOwnProperty.call(e,"error")&&Ec.proto.ErrorMessage.encode(e.error,t.uint32(50).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantUpdate.Response;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.operation=e.int32();break;case 2:r.sessionStateCounter=e.uint32();break;case 3:if(r.participantIdList&&r.participantIdList.length||(r.participantIdList=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.participantIdList.push(e.uint64())}else r.participantIdList.push(e.uint64());break;case 6:r.error=Ec.proto.ErrorMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e.Update=function(){function e(e){if(this.participantIdList=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.operation=0,e.prototype.sessionStateCounter=0,e.prototype.participantIdList=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.operation&&Object.hasOwnProperty.call(e,"operation")&&t.uint32(8).int32(e.operation),null!=e.sessionStateCounter&&Object.hasOwnProperty.call(e,"sessionStateCounter")&&t.uint32(16).uint32(e.sessionStateCounter),null!=e.participantIdList&&e.participantIdList.length){t.uint32(26).fork();for(let n=0;n<e.participantIdList.length;++n)t.uint64(e.participantIdList[n]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantUpdate.Update;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.operation=e.int32();break;case 2:r.sessionStateCounter=e.uint32();break;case 3:if(r.participantIdList&&r.participantIdList.length||(r.participantIdList=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.participantIdList.push(e.uint64())}else r.participantIdList.push(e.uint64());break;default:e.skipType(7&t)}}return r},e}(),e}(),e.RpcRequest=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.setup=null,e.prototype.serializedRequest=Dc.newBuffer([]),e.prototype.done=!1,Object.defineProperty(e.prototype,"type",{get:Dc.oneOfGetter(t=["setup","serializedRequest","done"]),set:Dc.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Tc.create()),null!=e.setup&&Object.hasOwnProperty.call(e,"setup")&&Ec.proto.RpcRequest.Setup.encode(e.setup,t.uint32(10).fork()).ldelim(),null!=e.serializedRequest&&Object.hasOwnProperty.call(e,"serializedRequest")&&t.uint32(18).bytes(e.serializedRequest),null!=e.done&&Object.hasOwnProperty.call(e,"done")&&t.uint32(24).bool(e.done),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.RpcRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.setup=Ec.proto.RpcRequest.Setup.decode(e,e.uint32());break;case 2:r.serializedRequest=e.bytes();break;case 3:r.done=e.bool();break;default:e.skipType(7&t)}}return r},e.Setup=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.pluginName="",e.prototype.path="",e.prototype.traceId=Dc.newBuffer([]),e.encode=function(e,t){return t||(t=Tc.create()),null!=e.pluginName&&Object.hasOwnProperty.call(e,"pluginName")&&t.uint32(10).string(e.pluginName),null!=e.path&&Object.hasOwnProperty.call(e,"path")&&t.uint32(18).string(e.path),null!=e.traceId&&Object.hasOwnProperty.call(e,"traceId")&&t.uint32(26).bytes(e.traceId),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.RpcRequest.Setup;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.pluginName=e.string();break;case 2:r.path=e.string();break;case 3:r.traceId=e.bytes();break;default:e.skipType(7&t)}}return r},e}(),e}(),e.RpcResponse=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.setupAck=null,e.prototype.serializedResponse=Dc.newBuffer([]),e.prototype.status=null,Object.defineProperty(e.prototype,"type",{get:Dc.oneOfGetter(t=["setupAck","serializedResponse","status"]),set:Dc.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Tc.create()),null!=e.setupAck&&Object.hasOwnProperty.call(e,"setupAck")&&Ec.proto.RpcResponse.SetupAck.encode(e.setupAck,t.uint32(10).fork()).ldelim(),null!=e.serializedResponse&&Object.hasOwnProperty.call(e,"serializedResponse")&&t.uint32(18).bytes(e.serializedResponse),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&Ec.proto.RpcResponse.Status.encode(e.status,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.RpcResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.setupAck=Ec.proto.RpcResponse.SetupAck.decode(e,e.uint32());break;case 2:r.serializedResponse=e.bytes();break;case 3:r.status=Ec.proto.RpcResponse.Status.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.SetupAck=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.success=!1,e.prototype.errorMessage="",e.encode=function(e,t){return t||(t=Tc.create()),null!=e.success&&Object.hasOwnProperty.call(e,"success")&&t.uint32(8).bool(e.success),null!=e.errorMessage&&Object.hasOwnProperty.call(e,"errorMessage")&&t.uint32(18).string(e.errorMessage),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.RpcResponse.SetupAck;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.success=e.bool();break;case 2:r.errorMessage=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.Status=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.prototype.errorMessage="",e.encode=function(e,t){return t||(t=Tc.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.errorMessage&&Object.hasOwnProperty.call(e,"errorMessage")&&t.uint32(18).string(e.errorMessage),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.RpcResponse.Status;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.code=e.uint32();break;case 2:r.errorMessage=e.string();break;default:e.skipType(7&t)}}return r},e}(),e}(),e.Test=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.Test;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Operation=function(){const e={},t=Object.create(e);return t[e[0]="NONE"]=0,t[e[1]="TEST_REALLOCATE"]=1,t[e[2]="TEST_GOAWAY"]=2,t[e[3]="TEST_DIAGNOSTIC"]=3,t[e[8]="TEST_FORCE_SET_PARTICIPANT_AUTHENTICATED"]=8,t[e[9]="TEST_FORCE_SET_PARTICIPANT_UNAUTHENTICATED"]=9,t}(),e.Request=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.operation=0,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.operation&&Object.hasOwnProperty.call(e,"operation")&&t.uint32(8).int32(e.operation),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.Test.Request;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.operation=e.int32();break;default:e.skipType(7&t)}}return r},e}(),e.Response=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.error=null,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&Ec.proto.ErrorMessage.encode(e.error,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.Test.Response;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.error=Ec.proto.ErrorMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e}(),e.ParticipantStats=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantStats;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Request=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantStats.Request;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e}(),e.Data=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.source=0,e.prototype.receiverMaxBitrate=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.source&&Object.hasOwnProperty.call(e,"source")&&t.uint32(8).int32(e.source),null!=e.receiverMaxBitrate&&Object.hasOwnProperty.call(e,"receiverMaxBitrate")&&t.uint32(16).uint64(e.receiverMaxBitrate),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantStats.Data;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.source=e.int32();break;case 2:r.receiverMaxBitrate=e.uint64();break;default:e.skipType(7&t)}}return r},e.Source=function(){const e={},t=Object.create(e);return t[e[0]="REMB"]=0,t[e[1]="TWCC"]=1,t}(),e}(),e.Response=function(){function e(e){if(this.data=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.generationCounter=0,e.prototype.data=Dc.emptyArray,e.prototype.error=null,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.generationCounter&&Object.hasOwnProperty.call(e,"generationCounter")&&t.uint32(8).uint32(e.generationCounter),null!=e.data&&e.data.length)for(let n=0;n<e.data.length;++n)Ec.proto.ParticipantStats.Data.encode(e.data[n],t.uint32(18).fork()).ldelim();return null!=e.error&&Object.hasOwnProperty.call(e,"error")&&Ec.proto.ErrorMessage.encode(e.error,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantStats.Response;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.generationCounter=e.uint32();break;case 2:r.data&&r.data.length||(r.data=[]),r.data.push(Ec.proto.ParticipantStats.Data.decode(e,e.uint32()));break;case 3:r.error=Ec.proto.ErrorMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e.Update=function(){function e(e){if(this.data=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.generationCounter=0,e.prototype.data=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.generationCounter&&Object.hasOwnProperty.call(e,"generationCounter")&&t.uint32(8).uint32(e.generationCounter),null!=e.data&&e.data.length)for(let n=0;n<e.data.length;++n)Ec.proto.ParticipantStats.Data.encode(e.data[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantStats.Update;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.generationCounter=e.uint32();break;case 2:r.data&&r.data.length||(r.data=[]),r.data.push(Ec.proto.ParticipantStats.Data.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e}(),e.ReportingBlob=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ReportingBlob;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Request=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ReportingBlob.Request;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e}(),e.Response=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.reportingDataBlob=Dc.newBuffer([]),e.prototype.error=null,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.reportingDataBlob&&Object.hasOwnProperty.call(e,"reportingDataBlob")&&t.uint32(10).bytes(e.reportingDataBlob),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&Ec.proto.ErrorMessage.encode(e.error,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ReportingBlob.Response;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.reportingDataBlob=e.bytes();break;case 2:r.error=Ec.proto.ErrorMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e}(),e.ParticipantProbe=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantProbe;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Request=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.requestId=0,e.prototype.receiverMaxBitrate=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.prototype.packetSize=0,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.requestId&&Object.hasOwnProperty.call(e,"requestId")&&t.uint32(8).uint32(e.requestId),null!=e.receiverMaxBitrate&&Object.hasOwnProperty.call(e,"receiverMaxBitrate")&&t.uint32(16).uint64(e.receiverMaxBitrate),null!=e.packetSize&&Object.hasOwnProperty.call(e,"packetSize")&&t.uint32(24).uint32(e.packetSize),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantProbe.Request;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.requestId=e.uint32();break;case 2:r.receiverMaxBitrate=e.uint64();break;case 3:r.packetSize=e.uint32();break;default:e.skipType(7&t)}}return r},e}(),e.Response=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.requestId=0,e.prototype.error=null,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.requestId&&Object.hasOwnProperty.call(e,"requestId")&&t.uint32(8).uint32(e.requestId),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&Ec.proto.ErrorMessage.encode(e.error,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantProbe.Response;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.requestId=e.uint32();break;case 2:r.error=Ec.proto.ErrorMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e}(),e.MaterialInfo=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.materialId=Dc.newBuffer([]),e.prototype.materialType=0,e.prototype.materialContent=Dc.newBuffer([]),e.encode=function(e,t){return t||(t=Tc.create()),null!=e.materialId&&Object.hasOwnProperty.call(e,"materialId")&&t.uint32(10).bytes(e.materialId),null!=e.materialType&&Object.hasOwnProperty.call(e,"materialType")&&t.uint32(16).int32(e.materialType),null!=e.materialContent&&Object.hasOwnProperty.call(e,"materialContent")&&t.uint32(26).bytes(e.materialContent),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.MaterialInfo;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.materialId=e.bytes();break;case 2:r.materialType=e.int32();break;case 3:r.materialContent=e.bytes();break;default:e.skipType(7&t)}}return r},e.MaterialType=function(){const e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="DEPRECATED_PREKEY"]=1,t[e[2]="DEPRECATED_AVCBLOB"]=2,t[e[3]="DEPRECATED_MKM"]=3,t[e[4]="DEPRECATED_SKM"]=4,t[e[11]="PREKEY"]=11,t[e[12]="AVCBLOB"]=12,t[e[13]="MKM"]=13,t[e[14]="SKM"]=14,t[e[5]="MIRAGEKEY"]=5,t[e[6]="MIRAGEBLOB"]=6,t}(),e}(),e.MaterialOwner=function(){function e(e){if(this.materialType=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.participantId=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.prototype.materialType=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.participantId&&Object.hasOwnProperty.call(e,"participantId")&&t.uint32(8).uint64(e.participantId),null!=e.materialType&&e.materialType.length){t.uint32(18).fork();for(let n=0;n<e.materialType.length;++n)t.int32(e.materialType[n]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.MaterialOwner;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.participantId=e.uint64();break;case 2:if(r.materialType&&r.materialType.length||(r.materialType=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.materialType.push(e.int32())}else r.materialType.push(e.int32());break;default:e.skipType(7&t)}}return r},e}(),e.Material=function(){function e(e){if(this.materialInfo=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ownerParticipantId=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.prototype.receiverParticipantId=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.prototype.materialInfo=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.ownerParticipantId&&Object.hasOwnProperty.call(e,"ownerParticipantId")&&t.uint32(8).uint64(e.ownerParticipantId),null!=e.receiverParticipantId&&Object.hasOwnProperty.call(e,"receiverParticipantId")&&t.uint32(16).uint64(e.receiverParticipantId),null!=e.materialInfo&&e.materialInfo.length)for(let n=0;n<e.materialInfo.length;++n)Ec.proto.MaterialInfo.encode(e.materialInfo[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.Material;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.ownerParticipantId=e.uint64();break;case 2:r.receiverParticipantId=e.uint64();break;case 3:r.materialInfo&&r.materialInfo.length||(r.materialInfo=[]),r.materialInfo.push(Ec.proto.MaterialInfo.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.PeerPublishedStream=function(){function e(e){if(this.peerStreamIds=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.peerParticipantId=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.prototype.peerStreamIds=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.peerParticipantId&&Object.hasOwnProperty.call(e,"peerParticipantId")&&t.uint32(16).uint64(e.peerParticipantId),null!=e.peerStreamIds&&e.peerStreamIds.length){t.uint32(26).fork();for(let n=0;n<e.peerStreamIds.length;++n)t.uint32(e.peerStreamIds[n]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.PeerPublishedStream;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 2:r.peerParticipantId=e.uint64();break;case 3:if(r.peerStreamIds&&r.peerStreamIds.length||(r.peerStreamIds=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.peerStreamIds.push(e.uint32())}else r.peerStreamIds.push(e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e.SubscribedStream=function(){function e(e){if(this.peerStreamIds=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.wildcardSubscription=!1,e.prototype.peerParticipantId=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.prototype.peerStreamIds=Dc.emptyArray,e.prototype.isSeamlessTransition=!1,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.wildcardSubscription&&Object.hasOwnProperty.call(e,"wildcardSubscription")&&t.uint32(8).bool(e.wildcardSubscription),null!=e.peerParticipantId&&Object.hasOwnProperty.call(e,"peerParticipantId")&&t.uint32(16).uint64(e.peerParticipantId),null!=e.peerStreamIds&&e.peerStreamIds.length){t.uint32(26).fork();for(let n=0;n<e.peerStreamIds.length;++n)t.uint32(e.peerStreamIds[n]);t.ldelim()}return null!=e.isSeamlessTransition&&Object.hasOwnProperty.call(e,"isSeamlessTransition")&&t.uint32(32).bool(e.isSeamlessTransition),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.SubscribedStream;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.wildcardSubscription=e.bool();break;case 2:r.peerParticipantId=e.uint64();break;case 3:if(r.peerStreamIds&&r.peerStreamIds.length||(r.peerStreamIds=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.peerStreamIds.push(e.uint32())}else r.peerStreamIds.push(e.uint32());break;case 4:r.isSeamlessTransition=e.bool();break;default:e.skipType(7&t)}}return r},e}(),e.ExperimentId=function(){const e={},t=Object.create(e);return t[e[0]="TRANSPORT_LEVEL_ENCRYPTION_DISABLED"]=0,t}(),e.ExperimentName=function(){const e={},t=Object.create(e);return t[e[0]="test"]=0,t[e[1]="tled"]=1,t[e[2]="und"]=2,t[e[3]="h2fd"]=3,t}(),e.ExperimentOverride=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.experimentId=0,e.prototype.experimentName="",e.prototype.value=!1,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.experimentId&&Object.hasOwnProperty.call(e,"experimentId")&&t.uint32(8).int32(e.experimentId),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(16).bool(e.value),null!=e.experimentName&&Object.hasOwnProperty.call(e,"experimentName")&&t.uint32(42).string(e.experimentName),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ExperimentOverride;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.experimentId=e.int32();break;case 5:r.experimentName=e.string();break;case 2:r.value=e.bool();break;default:e.skipType(7&t)}}return r},e}(),e.PropertyName=function(){const e={},t=Object.create(e);return t[e[0]="server_enforced_disconnection_timeout_seconds"]=0,t[e[1]="multiway_participant_trust_guard_duration_in_millis"]=1,t}(),e.PropertyOverride=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.propertyName=0,e.prototype.boolValue=!1,e.prototype.stringValue="",e.prototype.uint32Value=0,Object.defineProperty(e.prototype,"propertyValue",{get:Dc.oneOfGetter(t=["boolValue","stringValue","uint32Value"]),set:Dc.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Tc.create()),null!=e.propertyName&&Object.hasOwnProperty.call(e,"propertyName")&&t.uint32(8).int32(e.propertyName),null!=e.boolValue&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),null!=e.stringValue&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(26).string(e.stringValue),null!=e.uint32Value&&Object.hasOwnProperty.call(e,"uint32Value")&&t.uint32(32).uint32(e.uint32Value),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.PropertyOverride;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.propertyName=e.int32();break;case 2:r.boolValue=e.bool();break;case 3:r.stringValue=e.string();break;case 4:r.uint32Value=e.uint32();break;default:e.skipType(7&t)}}return r},e}(),e.ChannelExperiment=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.experimentId=0,e.prototype.experimentName="",e.prototype.boolValue=!1,e.prototype.stringValue="",e.prototype.int32Value=0,Object.defineProperty(e.prototype,"testValue",{get:Dc.oneOfGetter(t=["boolValue","stringValue","int32Value"]),set:Dc.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Tc.create()),null!=e.experimentId&&Object.hasOwnProperty.call(e,"experimentId")&&t.uint32(8).int32(e.experimentId),null!=e.boolValue&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),null!=e.stringValue&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(26).string(e.stringValue),null!=e.int32Value&&Object.hasOwnProperty.call(e,"int32Value")&&t.uint32(32).int32(e.int32Value),null!=e.experimentName&&Object.hasOwnProperty.call(e,"experimentName")&&t.uint32(42).string(e.experimentName),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ChannelExperiment;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.experimentId=e.int32();break;case 5:r.experimentName=e.string();break;case 2:r.boolValue=e.bool();break;case 3:r.stringValue=e.string();break;case 4:r.int32Value=e.int32();break;default:e.skipType(7&t)}}return r},e}(),e.SessionExperiment=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.experimentName="",e.prototype.boolValue=!1,e.prototype.stringValue="",e.prototype.int32Value=0,Object.defineProperty(e.prototype,"testValue",{get:Dc.oneOfGetter(t=["boolValue","stringValue","int32Value"]),set:Dc.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Tc.create()),null!=e.boolValue&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),null!=e.stringValue&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(26).string(e.stringValue),null!=e.int32Value&&Object.hasOwnProperty.call(e,"int32Value")&&t.uint32(32).int32(e.int32Value),null!=e.experimentName&&Object.hasOwnProperty.call(e,"experimentName")&&t.uint32(42).string(e.experimentName),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.SessionExperiment;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 5:r.experimentName=e.string();break;case 2:r.boolValue=e.bool();break;case 3:r.stringValue=e.string();break;case 4:r.int32Value=e.int32();break;default:e.skipType(7&t)}}return r},e}(),e.ParticipantStatus=function(){const e={},t=Object.create(e);return t[e[0]="HOST"]=0,t[e[1]="PERFORMER"]=1,t[e[2]="ACTIVE_AUDIENCE"]=2,t}(),e.ParticipantStatusMapEntry=function(){function e(e){if(this.participantIds=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.participantStatus=0,e.prototype.participantIds=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.participantStatus&&Object.hasOwnProperty.call(e,"participantStatus")&&t.uint32(8).int32(e.participantStatus),null!=e.participantIds&&e.participantIds.length){t.uint32(18).fork();for(let n=0;n<e.participantIds.length;++n)t.uint64(e.participantIds[n]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.proto.ParticipantStatusMapEntry;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.participantStatus=e.int32();break;case 2:if(r.participantIds&&r.participantIds.length||(r.participantIds=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.participantIds.push(e.uint64())}else r.participantIds.push(e.uint64());break;default:e.skipType(7&t)}}return r},e}(),e})(),jc=(Ec.h3=(()=>{const e={};return e.GetMaterial=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.h3.GetMaterial;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Request=function(){function e(e){if(this.materialOwners=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.materialOwners=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.materialOwners&&e.materialOwners.length)for(let n=0;n<e.materialOwners.length;++n)Ec.proto.MaterialOwner.encode(e.materialOwners[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.h3.GetMaterial.Request;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.materialOwners&&r.materialOwners.length||(r.materialOwners=[]),r.materialOwners.push(Ec.proto.MaterialOwner.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.Response=function(){function e(e){if(this.materials=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.materials=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.materials&&e.materials.length)for(let n=0;n<e.materials.length;++n)Ec.proto.Material.encode(e.materials[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.h3.GetMaterial.Response;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.materials&&r.materials.length||(r.materials=[]),r.materials.push(Ec.proto.Material.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e}(),e.PutMaterial=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.h3.PutMaterial;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Request=function(){function e(e){if(this.materials=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.materials=Dc.emptyArray,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.materials&&e.materials.length)for(let n=0;n<e.materials.length;++n)Ec.proto.Material.encode(e.materials[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.h3.PutMaterial.Request;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.materials&&r.materials.length||(r.materials=[]),r.materials.push(Ec.proto.Material.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.Response=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Tc.create()),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.h3.PutMaterial.Response;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e}(),e.Indication=function(){function e(e){if(this.materials=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.materials=Dc.emptyArray,e.prototype.missingMaterial=null,e.prototype.txnId=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.encode=function(e,t){if(t||(t=Tc.create()),null!=e.materials&&e.materials.length)for(let n=0;n<e.materials.length;++n)Ec.proto.Material.encode(e.materials[n],t.uint32(10).fork()).ldelim();return null!=e.missingMaterial&&Object.hasOwnProperty.call(e,"missingMaterial")&&Ec.h3.PutMaterial.Indication.ErrorIndication.encode(e.missingMaterial,t.uint32(18).fork()).ldelim(),null!=e.txnId&&Object.hasOwnProperty.call(e,"txnId")&&t.uint32(120).uint64(e.txnId),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.h3.PutMaterial.Indication;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.materials&&r.materials.length||(r.materials=[]),r.materials.push(Ec.proto.Material.decode(e,e.uint32()));break;case 2:r.missingMaterial=Ec.h3.PutMaterial.Indication.ErrorIndication.decode(e,e.uint32());break;case 15:r.txnId=e.uint64();break;default:e.skipType(7&t)}}return r},e.ErrorIndication=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.receiverParticipantId=Dc.Long?Dc.Long.fromBits(0,0,!0):0,e.prototype.materialOwner=null,e.encode=function(e,t){return t||(t=Tc.create()),null!=e.receiverParticipantId&&Object.hasOwnProperty.call(e,"receiverParticipantId")&&t.uint32(8).uint64(e.receiverParticipantId),null!=e.materialOwner&&Object.hasOwnProperty.call(e,"materialOwner")&&Ec.proto.MaterialOwner.encode(e.materialOwner,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Mc||(e=Mc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ec.h3.PutMaterial.Indication.ErrorIndication;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.receiverParticipantId=e.uint64();break;case 2:r.materialOwner=Ec.proto.MaterialOwner.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e}(),e}(),e})(),br.Reader),Nc=br.Writer,Bc=br.util,_c=br.roots.default||(br.roots.default={}),xc=(_c.VCMediaNegotiationBlobV2GeneralInfo=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ntpTime=Bc.Long?Bc.Long.fromBits(0,0,!0):0,e.prototype.cname="",e.prototype.abSwitches=0,e.prototype.screenRes=0,e.encode=function(e,t){return t||(t=Nc.create()),null!=e.ntpTime&&Object.hasOwnProperty.call(e,"ntpTime")&&t.uint32(8).uint64(e.ntpTime),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(18).string(e.cname),null!=e.abSwitches&&Object.hasOwnProperty.call(e,"abSwitches")&&t.uint32(24).uint32(e.abSwitches),null!=e.screenRes&&Object.hasOwnProperty.call(e,"screenRes")&&t.uint32(32).uint32(e.screenRes),t},e.decode=function(e,t){e instanceof jc||(e=jc.create(e));let n=void 0===t?e.len:e.pos+t,r=new _c.VCMediaNegotiationBlobV2GeneralInfo;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.ntpTime=e.uint64();break;case 2:r.cname=e.string();break;case 3:r.abSwitches=e.uint32();break;case 4:r.screenRes=e.uint32();break;default:e.skipType(7&t)}}return r},e.ABSwitch=function(){const e={},t=Object.create(e);return t[e[1]="preferRelayOverP2P"]=1,t[e[2]="alwaysOnAudioRedundancyEnabled"]=2,t[e[4]="highFecEnabled"]=4,t[e[8]="lowFpsVideoEnabled"]=8,t[e[16]="vplrFecEnabled"]=16,t[e[32]="rampDownBWDropEnabled"]=32,t[e[64]="fastMediaDuplicationEnabled"]=64,t[e[128]="iRATRtpEnabled"]=128,t[e[256]="preWarmCellEnabled"]=256,t[e[512]="duplicateImportantPktsEnabled"]=512,t[e[1024]="allowBurstyLossRampDownEnabled"]=1024,t[e[2048]="hevcWifiTiersEnabled"]=2048,t[e[4096]="viewpointCorrectionEnabled"]=4096,t[e[8192]="heifHevcLivePhotosEnabled"]=8192,t[e[16384]="wifiLowTierRedundancyEnabled"]=16384,t[e[32768]="cellularLowTierRedundancyEnabled"]=32768,t[e[65536]="iRATMetricsEnabled"]=65536,t[e[131072]="fecHeaderV1Enabled"]=131072,t[e[262144]="updatedAFRCHeaderEnabled"]=262144,t[e[524288]="secureMessagingEnabled"]=524288,t[e[1048576]="disableSIPEnabled"]=1048576,t[e[2097152]="wifiAssistDuplicationEnabled"]=2097152,t[e[4194304]="wifiAssistBudgetStatusEnabled"]=4194304,t[e[8388608]="wifiAssistStatusBarEnabled"]=8388608,t[e[16777216]="lowNetworkModeEnabled"]=16777216,t[e[33554432]="duplicationEnhancementEnabled"]=33554432,t[e[67108864]="videoJBEnabled"]=67108864,t[e[134217728]="iRATDuplicationEnabled"]=134217728,t[e[268435456]="wrmThresholdEnabled"]=268435456,t}(),e})(),_c.VCMediaNegotiationBlobV2CodecFeatures=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.audioFeatures=0,e.prototype.videoFeatures=Bc.newBuffer([]),e.encode=function(e,t){return t||(t=Nc.create()),null!=e.audioFeatures&&Object.hasOwnProperty.call(e,"audioFeatures")&&t.uint32(8).uint32(e.audioFeatures),null!=e.videoFeatures&&Object.hasOwnProperty.call(e,"videoFeatures")&&t.uint32(18).bytes(e.videoFeatures),t},e.decode=function(e,t){e instanceof jc||(e=jc.create(e));let n=void 0===t?e.len:e.pos+t,r=new _c.VCMediaNegotiationBlobV2CodecFeatures;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.audioFeatures=e.uint32();break;case 2:r.videoFeatures=e.bytes();break;default:e.skipType(7&t)}}return r},e.AudioFeature=function(){const e={},t=Object.create(e);return t[e[1]="Recording"]=1,t}(),e})(),_c.VCMediaNegotiationBlobV2BandwidthSettings=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cap2G=100,e.prototype.cap3G=228,e.prototype.capLTE=600,e.prototype.cap5G=2e3,e.prototype.capWifi=4100,e.encode=function(e,t){return t||(t=Nc.create()),null!=e.cap2G&&Object.hasOwnProperty.call(e,"cap2G")&&t.uint32(8).uint32(e.cap2G),null!=e.cap3G&&Object.hasOwnProperty.call(e,"cap3G")&&t.uint32(16).uint32(e.cap3G),null!=e.capLTE&&Object.hasOwnProperty.call(e,"capLTE")&&t.uint32(24).uint32(e.capLTE),null!=e.cap5G&&Object.hasOwnProperty.call(e,"cap5G")&&t.uint32(32).uint32(e.cap5G),null!=e.capWifi&&Object.hasOwnProperty.call(e,"capWifi")&&t.uint32(40).uint32(e.capWifi),t},e.decode=function(e,t){e instanceof jc||(e=jc.create(e));let n=void 0===t?e.len:e.pos+t,r=new _c.VCMediaNegotiationBlobV2BandwidthSettings;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.cap2G=e.uint32();break;case 2:r.cap3G=e.uint32();break;case 3:r.capLTE=e.uint32();break;case 4:r.cap5G=e.uint32();break;case 5:r.capWifi=e.uint32();break;default:e.skipType(7&t)}}return r},e})(),_c.VCMediaNegotiationBlobV2MicrophoneSettingsU1=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.rtpSSRC=0,e.prototype.payloads=15,e.encode=function(e,t){return t||(t=Nc.create()),null!=e.rtpSSRC&&Object.hasOwnProperty.call(e,"rtpSSRC")&&t.uint32(8).uint32(e.rtpSSRC),null!=e.payloads&&Object.hasOwnProperty.call(e,"payloads")&&t.uint32(16).uint32(e.payloads),t},e.decode=function(e,t){e instanceof jc||(e=jc.create(e));let n=void 0===t?e.len:e.pos+t,r=new _c.VCMediaNegotiationBlobV2MicrophoneSettingsU1;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.rtpSSRC=e.uint32();break;case 2:r.payloads=e.uint32();break;default:e.skipType(7&t)}}return r},e.Payload=function(){const e={},t=Object.create(e);return t[e[1]="AACELD_24000"]=1,t[e[2]="EVS_32000"]=2,t[e[4]="CN"]=4,t[e[8]="RED"]=8,t[e[15]="SupportedMask"]=15,t}(),e})(),_c.VCMediaNegotiationBlobV2VideoPayload=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.videoPayload=1,e.prototype.parameterSet=0,e.prototype.encodeFormats=0,e.prototype.decodeFormats=0,e.encode=function(e,t){return t||(t=Nc.create()),null!=e.videoPayload&&Object.hasOwnProperty.call(e,"videoPayload")&&t.uint32(8).uint32(e.videoPayload),null!=e.parameterSet&&Object.hasOwnProperty.call(e,"parameterSet")&&t.uint32(16).uint32(e.parameterSet),null!=e.encodeFormats&&Object.hasOwnProperty.call(e,"encodeFormats")&&t.uint32(24).uint32(e.encodeFormats),null!=e.decodeFormats&&Object.hasOwnProperty.call(e,"decodeFormats")&&t.uint32(32).uint32(e.decodeFormats),t},e.decode=function(e,t){e instanceof jc||(e=jc.create(e));let n=void 0===t?e.len:e.pos+t,r=new _c.VCMediaNegotiationBlobV2VideoPayload;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.videoPayload=e.uint32();break;case 2:r.parameterSet=e.uint32();break;case 3:r.encodeFormats=e.uint32();break;case 4:r.decodeFormats=e.uint32();break;default:e.skipType(7&t)}}return r},e.VideoPayload=function(){const e={},t=Object.create(e);return t[e[1]="H264"]=1,t[e[2]="HEVC"]=2,t[e[3]="SupportedMask"]=3,t}(),e.ParameterSet=function(){const e={},t=Object.create(e);return t[e[1]="ImageDescription"]=1,t[e[2]="SPS"]=2,t[e[4]="PPS"]=4,t[e[8]="VPS"]=8,t[e[15]="SupportedMask"]=15,t}(),e.VideoFormat=function(){const e={},t=Object.create(e);return t[e[1]="video_192x112_15"]=1,t[e[2]="video_320x240_15"]=2,t[e[4]="video_320x240_30"]=4,t[e[8]="video_480x272_15"]=8,t[e[16]="video_480x272_30"]=16,t[e[32]="video_480x368_15"]=32,t[e[64]="video_480x368_30"]=64,t[e[128]="video_640x480_15"]=128,t[e[256]="video_640x480_30"]=256,t[e[512]="video_848x480_15"]=512,t[e[1024]="video_848x480_30"]=1024,t[e[2048]="video_896x672_15"]=2048,t[e[4096]="video_896x672_30"]=4096,t[e[8192]="video_896x672_60"]=8192,t[e[16384]="video_1024x576_15"]=16384,t[e[32768]="video_1024x768_15"]=32768,t[e[65536]="video_1024x768_30"]=65536,t[e[131072]="video_1024x768_60"]=131072,t[e[262144]="video_1280x720_15"]=262144,t[e[524288]="video_1024x576_30"]=524288,t[e[1048576]="video_1280x720_30"]=1048576,t[e[2097152]="video_1280x720_60"]=2097152,t[e[4194304]="video_1440x1080_30"]=4194304,t[e[8388608]="video_1664x1248_30"]=8388608,t[e[16777216]="video_1664x1248_60"]=16777216,t[e[33554432]="video_1920x1080_30"]=33554432,t[e[67108864]="video_1920x1080_60"]=67108864,t[e[134217727]="video_SUPPORTED"]=134217727,t}(),e})(),_c.VCMediaNegotiationBlobV2CameraSettingsU1=(()=>{function e(e){if(this.payloads=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.rtpSSRC=0,e.prototype.payloads=Bc.emptyArray,e.prototype.orientMismatchDisplayRatio=196610,e.encode=function(e,t){if(t||(t=Nc.create()),null!=e.rtpSSRC&&Object.hasOwnProperty.call(e,"rtpSSRC")&&t.uint32(8).uint32(e.rtpSSRC),null!=e.payloads&&e.payloads.length)for(let n=0;n<e.payloads.length;++n)_c.VCMediaNegotiationBlobV2VideoPayload.encode(e.payloads[n],t.uint32(18).fork()).ldelim();return null!=e.orientMismatchDisplayRatio&&Object.hasOwnProperty.call(e,"orientMismatchDisplayRatio")&&t.uint32(24).uint32(e.orientMismatchDisplayRatio),t},e.decode=function(e,t){e instanceof jc||(e=jc.create(e));let n=void 0===t?e.len:e.pos+t,r=new _c.VCMediaNegotiationBlobV2CameraSettingsU1;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.rtpSSRC=e.uint32();break;case 2:r.payloads&&r.payloads.length||(r.payloads=[]),r.payloads.push(_c.VCMediaNegotiationBlobV2VideoPayload.decode(e,e.uint32()));break;case 3:r.orientMismatchDisplayRatio=e.uint32();break;default:e.skipType(7&t)}}return r},e})(),_c.VCMediaNegotiationBlobV2MomentsSettings=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.capabilities=4,e.prototype.supportedCodecs=10,e.encode=function(e,t){return t||(t=Nc.create()),null!=e.capabilities&&Object.hasOwnProperty.call(e,"capabilities")&&t.uint32(8).uint32(e.capabilities),null!=e.supportedCodecs&&Object.hasOwnProperty.call(e,"supportedCodecs")&&t.uint32(16).uint32(e.supportedCodecs),t},e.decode=function(e,t){e instanceof jc||(e=jc.create(e));let n=void 0===t?e.len:e.pos+t,r=new _c.VCMediaNegotiationBlobV2MomentsSettings;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.capabilities=e.uint32();break;case 2:r.supportedCodecs=e.uint32();break;default:e.skipType(7&t)}}return r},e.Capabilities=function(){const e={},t=Object.create(e);return t[e[1]="history_image"]=1,t[e[2]="history_video"]=2,t[e[4]="multiway_history_image"]=4,t[e[8]="multiway_history_video"]=8,t[e[15]="SupportedMask"]=15,t}(),e.Codec=function(){const e={},t=Object.create(e);return t[e[1]="H264"]=1,t[e[2]="HEVC"]=2,t[e[4]="JPEG"]=4,t[e[8]="HEIF"]=8,t[e[15]="SupportedMask"]=15,t}(),e})(),_c.VCMediaNegotiationBlobV2StreamGroupStream=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.metadata=0,e.prototype.payloadSpecOrPayloads=0,e.prototype.qualityIndex=0,e.prototype.rtpSSRC=0,e.prototype.streamID=0,e.prototype.maxNetworkBitrate=0,e.prototype.repairedMaxNetworkBitrate=0,e.prototype.audioChannelCount=1,e.prototype.streamIndex=0,e.encode=function(e,t){return t||(t=Nc.create()),null!=e.metadata&&Object.hasOwnProperty.call(e,"metadata")&&t.uint32(8).uint32(e.metadata),null!=e.payloadSpecOrPayloads&&Object.hasOwnProperty.call(e,"payloadSpecOrPayloads")&&t.uint32(16).uint32(e.payloadSpecOrPayloads),null!=e.qualityIndex&&Object.hasOwnProperty.call(e,"qualityIndex")&&t.uint32(24).uint32(e.qualityIndex),null!=e.rtpSSRC&&Object.hasOwnProperty.call(e,"rtpSSRC")&&t.uint32(32).uint32(e.rtpSSRC),null!=e.streamID&&Object.hasOwnProperty.call(e,"streamID")&&t.uint32(40).uint32(e.streamID),null!=e.maxNetworkBitrate&&Object.hasOwnProperty.call(e,"maxNetworkBitrate")&&t.uint32(48).uint32(e.maxNetworkBitrate),null!=e.repairedMaxNetworkBitrate&&Object.hasOwnProperty.call(e,"repairedMaxNetworkBitrate")&&t.uint32(56).uint32(e.repairedMaxNetworkBitrate),null!=e.audioChannelCount&&Object.hasOwnProperty.call(e,"audioChannelCount")&&t.uint32(64).uint32(e.audioChannelCount),null!=e.streamIndex&&Object.hasOwnProperty.call(e,"streamIndex")&&t.uint32(72).uint32(e.streamIndex),t},e.decode=function(e,t){e instanceof jc||(e=jc.create(e));let n=void 0===t?e.len:e.pos+t,r=new _c.VCMediaNegotiationBlobV2StreamGroupStream;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.metadata=e.uint32();break;case 2:r.payloadSpecOrPayloads=e.uint32();break;case 3:r.qualityIndex=e.uint32();break;case 4:r.rtpSSRC=e.uint32();break;case 5:r.streamID=e.uint32();break;case 6:r.maxNetworkBitrate=e.uint32();break;case 7:r.repairedMaxNetworkBitrate=e.uint32();break;case 8:r.audioChannelCount=e.uint32();break;case 9:r.streamIndex=e.uint32();break;default:e.skipType(7&t)}}return r},e.Metadata=function(){const e={},t=Object.create(e);return t[e[1]="SubStream"]=1,t[e[2]="TemporalStream"]=2,t[e[4]="onDemand"]=4,t[e[8]="UsePayloadSpec"]=8,t[e[15]="SupportedMask"]=15,t}(),e.Payload=function(){const e={},t=Object.create(e);return t[e[0]="Invalid"]=0,t[e[1]="H264"]=1,t[e[2]="HEVC"]=2,t[e[4]="Data"]=4,t[e[8]="OPUS"]=8,t[e[16]="AACELD_24000"]=16,t[e[32]="EVS_32000"]=32,t[e[64]="AACELD_48000"]=64,t[e[128]="RED"]=128,t[e[256]="CN"]=256,t[e[511]="SupportedMask"]=511,t}(),e})(),_c.VCMediaNegotiationBlobV2StreamGroupPayload=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.codecType=0,e.prototype.rtpPayload=0,e.prototype.pTime=0,e.prototype.rtcpFlags=0,e.prototype.mediaFlags=0,e.prototype.profileLevelId=0,e.prototype.rtpSampleRate=0,e.prototype.cipherSuite=0,e.encode=function(e,t){return t||(t=Nc.create()),null!=e.codecType&&Object.hasOwnProperty.call(e,"codecType")&&t.uint32(8).uint32(e.codecType),null!=e.rtpPayload&&Object.hasOwnProperty.call(e,"rtpPayload")&&t.uint32(16).uint32(e.rtpPayload),null!=e.pTime&&Object.hasOwnProperty.call(e,"pTime")&&t.uint32(24).uint32(e.pTime),null!=e.rtcpFlags&&Object.hasOwnProperty.call(e,"rtcpFlags")&&t.uint32(32).uint32(e.rtcpFlags),null!=e.mediaFlags&&Object.hasOwnProperty.call(e,"mediaFlags")&&t.uint32(40).uint32(e.mediaFlags),null!=e.profileLevelId&&Object.hasOwnProperty.call(e,"profileLevelId")&&t.uint32(48).uint32(e.profileLevelId),null!=e.rtpSampleRate&&Object.hasOwnProperty.call(e,"rtpSampleRate")&&t.uint32(56).uint32(e.rtpSampleRate),null!=e.cipherSuite&&Object.hasOwnProperty.call(e,"cipherSuite")&&t.uint32(64).uint32(e.cipherSuite),t},e.decode=function(e,t){e instanceof jc||(e=jc.create(e));let n=void 0===t?e.len:e.pos+t,r=new _c.VCMediaNegotiationBlobV2StreamGroupPayload;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.codecType=e.uint32();break;case 2:r.rtpPayload=e.uint32();break;case 3:r.pTime=e.uint32();break;case 4:r.rtcpFlags=e.uint32();break;case 5:r.mediaFlags=e.uint32();break;case 6:r.profileLevelId=e.uint32();break;case 7:r.rtpSampleRate=e.uint32();break;case 8:r.cipherSuite=e.uint32();break;default:e.skipType(7&t)}}return r},e.RTCPFlag=function(){const e={},t=Object.create(e);return t[e[0]="None"]=0,t[e[1]="PSFB_PLI"]=1,t[e[2]="PSFB_FIR"]=2,t[e[4]="SR"]=4,t[e[7]="SupportedMask"]=7,t}(),e.MediaFlag=function(){const e={},t=Object.create(e);return t[e[0]="None"]=0,t[e[1]="UseInBandFEC"]=1,t}(),e.CipherSuite=function(){const e={},t=Object.create(e);return t[e[1]="CipherNoneAuthNone"]=1,t[e[2]="CipherSFRAME_AESCM128AuthSHA256_80"]=2,t[e[3]="CipherSFRAME_AESCM128AuthSHA256_32"]=3,t[e[4]="CipherSRTP_AESCM128AuthNoneRCCM3"]=4,t}(),e.CodecType=function(){const e={},t=Object.create(e);return t[e[0]="Invalid"]=0,t[e[1]="H264"]=1,t[e[2]="HEVC"]=2,t[e[3]="OPUS16K"]=3,t[e[4]="OPUS24K"]=4,t[e[5]="AACELD48K"]=5,t[e[6]="Data"]=6,t[e[7]="AACELD24K"]=7,t[e[8]="EVSSWB"]=8,t[e[9]="CN"]=9,t}(),e})(),_c.VCMediaNegotiationBlobV2StreamGroup=(()=>{function e(e){if(this.payloads=[],this.streams=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.streamGroup=0,e.prototype.payloads=Bc.emptyArray,e.prototype.streams=Bc.emptyArray,e.encode=function(e,t){if(t||(t=Nc.create()),null!=e.streamGroup&&Object.hasOwnProperty.call(e,"streamGroup")&&t.uint32(8).uint32(e.streamGroup),null!=e.payloads&&e.payloads.length)for(let n=0;n<e.payloads.length;++n)_c.VCMediaNegotiationBlobV2StreamGroupPayload.encode(e.payloads[n],t.uint32(18).fork()).ldelim();if(null!=e.streams&&e.streams.length)for(let n=0;n<e.streams.length;++n)_c.VCMediaNegotiationBlobV2StreamGroupStream.encode(e.streams[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof jc||(e=jc.create(e));let n=void 0===t?e.len:e.pos+t,r=new _c.VCMediaNegotiationBlobV2StreamGroup;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.streamGroup=e.uint32();break;case 2:r.payloads&&r.payloads.length||(r.payloads=[]),r.payloads.push(_c.VCMediaNegotiationBlobV2StreamGroupPayload.decode(e,e.uint32()));break;case 3:r.streams&&r.streams.length||(r.streams=[]),r.streams.push(_c.VCMediaNegotiationBlobV2StreamGroupStream.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.StreamGroup=function(){const e={},t=Object.create(e);return t[e[0]="Invalid"]=0,t[e[1]="Camera"]=1,t[e[2]="Microphone"]=2,t[e[3]="Screen"]=3,t[e[4]="SystemAudio"]=4,t[e[5]="CameraWebRTC"]=5,t[e[6]="MicrophoneWebRTC"]=6,t[e[7]="Captions"]=7,t}(),e})()),Uc=_c.VCMediaNegotiationBlobV2=(()=>{function e(e){if(this.streamGroups=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.generalInfo=null,e.prototype.bandwidthSettings=null,e.prototype.codecSupport=null,e.prototype.microphoneU1=null,e.prototype.cameraU1=null,e.prototype.momentsSettings=null,e.prototype.streamGroups=Bc.emptyArray,e.encode=function(e,t){if(t||(t=Nc.create()),null!=e.generalInfo&&Object.hasOwnProperty.call(e,"generalInfo")&&_c.VCMediaNegotiationBlobV2GeneralInfo.encode(e.generalInfo,t.uint32(10).fork()).ldelim(),null!=e.bandwidthSettings&&Object.hasOwnProperty.call(e,"bandwidthSettings")&&_c.VCMediaNegotiationBlobV2BandwidthSettings.encode(e.bandwidthSettings,t.uint32(18).fork()).ldelim(),null!=e.codecSupport&&Object.hasOwnProperty.call(e,"codecSupport")&&_c.VCMediaNegotiationBlobV2CodecFeatures.encode(e.codecSupport,t.uint32(26).fork()).ldelim(),null!=e.microphoneU1&&Object.hasOwnProperty.call(e,"microphoneU1")&&_c.VCMediaNegotiationBlobV2MicrophoneSettingsU1.encode(e.microphoneU1,t.uint32(34).fork()).ldelim(),null!=e.cameraU1&&Object.hasOwnProperty.call(e,"cameraU1")&&_c.VCMediaNegotiationBlobV2CameraSettingsU1.encode(e.cameraU1,t.uint32(42).fork()).ldelim(),null!=e.momentsSettings&&Object.hasOwnProperty.call(e,"momentsSettings")&&_c.VCMediaNegotiationBlobV2MomentsSettings.encode(e.momentsSettings,t.uint32(50).fork()).ldelim(),null!=e.streamGroups&&e.streamGroups.length)for(let n=0;n<e.streamGroups.length;++n)_c.VCMediaNegotiationBlobV2StreamGroup.encode(e.streamGroups[n],t.uint32(58).fork()).ldelim();return t},e.decode=function(e,t){e instanceof jc||(e=jc.create(e));let n=void 0===t?e.len:e.pos+t,r=new _c.VCMediaNegotiationBlobV2;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.generalInfo=_c.VCMediaNegotiationBlobV2GeneralInfo.decode(e,e.uint32());break;case 2:r.bandwidthSettings=_c.VCMediaNegotiationBlobV2BandwidthSettings.decode(e,e.uint32());break;case 3:r.codecSupport=_c.VCMediaNegotiationBlobV2CodecFeatures.decode(e,e.uint32());break;case 4:r.microphoneU1=_c.VCMediaNegotiationBlobV2MicrophoneSettingsU1.decode(e,e.uint32());break;case 5:r.cameraU1=_c.VCMediaNegotiationBlobV2CameraSettingsU1.decode(e,e.uint32());break;case 6:r.momentsSettings=_c.VCMediaNegotiationBlobV2MomentsSettings.decode(e,e.uint32());break;case 7:r.streamGroups&&r.streamGroups.length||(r.streamGroups=[]),r.streamGroups.push(_c.VCMediaNegotiationBlobV2StreamGroup.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e})();function Lc(e,{interval:t,maxDelay:n=Number.MAX_SAFE_INTEGER,minDelay:r=0}){let i,o,s=NaN,a=0;return function(...c){o=c,s=Date.now(),function c(l){if(i)return;const d=Date.now(),u=n-(d-l),p=t-(d-s),h=r-(d-a),f=Math.max(Math.min(u,p),h);f<=0?(a=d,e(...o)):i=window.setTimeout(()=>{i=null,c(l)},f)}(s)}}const Kc=br.Reader,qc=br.Writer,Vc=br.util,Fc=br.roots.default||(br.roots.default={}),Gc=Fc.VCMediaNegotiationBlob=(()=>{function e(e){if(this.bandwidthSettings=[],this.multiwayAudioStreams=[],this.multiwayVideoStream=[],this.multiwayScreenStream=[],this.streamGroups=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.allowDynamicMaxBitrate=!1,e.prototype.allowsContentsChangeWithAspectPreservation=!1,e.prototype.audioSettings=null,e.prototype.videoSettings=null,e.prototype.screenSettings=null,e.prototype.userAgent="",e.prototype.basebandCodec="",e.prototype.basebandCodecSampleRate=0,e.prototype.bandwidthSettings=Vc.emptyArray,e.prototype.captionsSettings=null,e.prototype.multiwayAudioStreams=Vc.emptyArray,e.prototype.momentsSettings=null,e.prototype.ntpTime=Vc.Long?Vc.Long.fromBits(0,0,!0):0,e.prototype.blobVersion=0,e.prototype.multiwayVideoStream=Vc.emptyArray,e.prototype.mediaControlInfoVersion=1,e.prototype.faceTimeSettings=null,e.prototype.multiwayScreenStream=Vc.emptyArray,e.prototype.streamGroups=Vc.emptyArray,e.encode=function(e,t){if(t||(t=qc.create()),null!=e.allowDynamicMaxBitrate&&Object.hasOwnProperty.call(e,"allowDynamicMaxBitrate")&&t.uint32(8).bool(e.allowDynamicMaxBitrate),null!=e.allowsContentsChangeWithAspectPreservation&&Object.hasOwnProperty.call(e,"allowsContentsChangeWithAspectPreservation")&&t.uint32(16).bool(e.allowsContentsChangeWithAspectPreservation),null!=e.audioSettings&&Object.hasOwnProperty.call(e,"audioSettings")&&Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobAudioSettings.encode(e.audioSettings,t.uint32(26).fork()).ldelim(),null!=e.videoSettings&&Object.hasOwnProperty.call(e,"videoSettings")&&Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobVideoSettings.encode(e.videoSettings,t.uint32(34).fork()).ldelim(),null!=e.screenSettings&&Object.hasOwnProperty.call(e,"screenSettings")&&Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobVideoSettings.encode(e.screenSettings,t.uint32(42).fork()).ldelim(),null!=e.userAgent&&Object.hasOwnProperty.call(e,"userAgent")&&t.uint32(50).string(e.userAgent),null!=e.basebandCodec&&Object.hasOwnProperty.call(e,"basebandCodec")&&t.uint32(58).string(e.basebandCodec),null!=e.basebandCodecSampleRate&&Object.hasOwnProperty.call(e,"basebandCodecSampleRate")&&t.uint32(64).uint32(e.basebandCodecSampleRate),null!=e.bandwidthSettings&&e.bandwidthSettings.length)for(let n=0;n<e.bandwidthSettings.length;++n)Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobBandwidthSettings.encode(e.bandwidthSettings[n],t.uint32(74).fork()).ldelim();if(null!=e.captionsSettings&&Object.hasOwnProperty.call(e,"captionsSettings")&&Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobCaptionsSettings.encode(e.captionsSettings,t.uint32(82).fork()).ldelim(),null!=e.multiwayAudioStreams&&e.multiwayAudioStreams.length)for(let n=0;n<e.multiwayAudioStreams.length;++n)Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobMultiwayAudioStream.encode(e.multiwayAudioStreams[n],t.uint32(90).fork()).ldelim();if(null!=e.momentsSettings&&Object.hasOwnProperty.call(e,"momentsSettings")&&Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobMomentsSettings.encode(e.momentsSettings,t.uint32(98).fork()).ldelim(),null!=e.ntpTime&&Object.hasOwnProperty.call(e,"ntpTime")&&t.uint32(104).uint64(e.ntpTime),null!=e.blobVersion&&Object.hasOwnProperty.call(e,"blobVersion")&&t.uint32(112).uint32(e.blobVersion),null!=e.multiwayVideoStream&&e.multiwayVideoStream.length)for(let n=0;n<e.multiwayVideoStream.length;++n)Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobMultiwayVideoStream.encode(e.multiwayVideoStream[n],t.uint32(122).fork()).ldelim();if(null!=e.mediaControlInfoVersion&&Object.hasOwnProperty.call(e,"mediaControlInfoVersion")&&t.uint32(128).uint32(e.mediaControlInfoVersion),null!=e.faceTimeSettings&&Object.hasOwnProperty.call(e,"faceTimeSettings")&&Fc.VCMediaNegotiationBlob.VCMediaNegotiationFaceTimeSettings.encode(e.faceTimeSettings,t.uint32(138).fork()).ldelim(),null!=e.multiwayScreenStream&&e.multiwayScreenStream.length)for(let n=0;n<e.multiwayScreenStream.length;++n)Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobMultiwayVideoStream.encode(e.multiwayScreenStream[n],t.uint32(146).fork()).ldelim();if(null!=e.streamGroups&&e.streamGroups.length)for(let n=0;n<e.streamGroups.length;++n)Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobStreamGroup.encode(e.streamGroups[n],t.uint32(154).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.allowDynamicMaxBitrate=e.bool();break;case 2:r.allowsContentsChangeWithAspectPreservation=e.bool();break;case 3:r.audioSettings=Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobAudioSettings.decode(e,e.uint32());break;case 4:r.videoSettings=Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobVideoSettings.decode(e,e.uint32());break;case 5:r.screenSettings=Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobVideoSettings.decode(e,e.uint32());break;case 6:r.userAgent=e.string();break;case 7:r.basebandCodec=e.string();break;case 8:r.basebandCodecSampleRate=e.uint32();break;case 9:r.bandwidthSettings&&r.bandwidthSettings.length||(r.bandwidthSettings=[]),r.bandwidthSettings.push(Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobBandwidthSettings.decode(e,e.uint32()));break;case 10:r.captionsSettings=Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobCaptionsSettings.decode(e,e.uint32());break;case 11:r.multiwayAudioStreams&&r.multiwayAudioStreams.length||(r.multiwayAudioStreams=[]),r.multiwayAudioStreams.push(Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobMultiwayAudioStream.decode(e,e.uint32()));break;case 12:r.momentsSettings=Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobMomentsSettings.decode(e,e.uint32());break;case 13:r.ntpTime=e.uint64();break;case 14:r.blobVersion=e.uint32();break;case 15:r.multiwayVideoStream&&r.multiwayVideoStream.length||(r.multiwayVideoStream=[]),r.multiwayVideoStream.push(Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobMultiwayVideoStream.decode(e,e.uint32()));break;case 16:r.mediaControlInfoVersion=e.uint32();break;case 17:r.faceTimeSettings=Fc.VCMediaNegotiationBlob.VCMediaNegotiationFaceTimeSettings.decode(e,e.uint32());break;case 18:r.multiwayScreenStream&&r.multiwayScreenStream.length||(r.multiwayScreenStream=[]),r.multiwayScreenStream.push(Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobMultiwayVideoStream.decode(e,e.uint32()));break;case 19:r.streamGroups&&r.streamGroups.length||(r.streamGroups=[]),r.streamGroups.push(Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobStreamGroup.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.VCMediaNegotiationBlobAudioSettings=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.rtpSSRC=0,e.prototype.audioUnitModel=0,e.prototype.supportFlags=0,e.prototype.payloadFlags=0,e.prototype.secondaryFlags=0,e.prototype.useSBR=!1,e.encode=function(e,t){return t||(t=qc.create()),t.uint32(8).uint32(e.rtpSSRC),null!=e.audioUnitModel&&Object.hasOwnProperty.call(e,"audioUnitModel")&&t.uint32(16).uint32(e.audioUnitModel),t.uint32(24).uint32(e.supportFlags),t.uint32(32).uint32(e.payloadFlags),t.uint32(40).uint32(e.secondaryFlags),t.uint32(48).bool(e.useSBR),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobAudioSettings;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.rtpSSRC=e.uint32();break;case 2:r.audioUnitModel=e.uint32();break;case 3:r.supportFlags=e.uint32();break;case 4:r.payloadFlags=e.uint32();break;case 5:r.secondaryFlags=e.uint32();break;case 6:r.useSBR=e.bool();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("rtpSSRC"))throw Vc.ProtocolError("missing required 'rtpSSRC'",{instance:r});if(!r.hasOwnProperty("supportFlags"))throw Vc.ProtocolError("missing required 'supportFlags'",{instance:r});if(!r.hasOwnProperty("payloadFlags"))throw Vc.ProtocolError("missing required 'payloadFlags'",{instance:r});if(!r.hasOwnProperty("secondaryFlags"))throw Vc.ProtocolError("missing required 'secondaryFlags'",{instance:r});if(!r.hasOwnProperty("useSBR"))throw Vc.ProtocolError("missing required 'useSBR'",{instance:r});return r},e.AudioFlags=function(){const e={},t=Object.create(e);return t[e[1]="ALLOW_AUDIO_SWITCHING"]=1,t[e[2]="ALLOW_AUDIO_RECORDING"]=2,t[e[-1]="INVALID"]=-1,t}(),e.AudioPayload=function(){const e={},t=Object.create(e);return t[e[1]="G722"]=1,t[e[2]="AACELD_16000"]=2,t[e[4]="AACELD_22050"]=4,t[e[8]="AACELD_24000"]=8,t[e[16]="SPEEX_8K"]=16,t[e[32]="SPEEX_16K"]=32,t[e[64]="OPUS"]=64,t[e[128]="AMR_8000"]=128,t[e[256]="AMR_16000"]=256,t[e[512]="CN"]=512,t[e[1024]="RED"]=1024,t[e[2048]="EVS_32000"]=2048,t[e[4096]="AACELD_48000"]=4096,t[e[8191]="SUPPORTED"]=8191,t[e[-1]="INVALID"]=-1,t}(),e}(),e.VCMediaNegotiationBlobVideoRuleCollection=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.transport=1,e.prototype.operation=1,e.prototype.formats=0,e.prototype.preferredFormat=0,e.prototype.formatsExt1=0,e.prototype.preferredFormatExt1=0,e.encode=function(e,t){return t||(t=qc.create()),t.uint32(8).int32(e.transport),t.uint32(16).int32(e.operation),t.uint32(24).uint32(e.formats),null!=e.preferredFormat&&Object.hasOwnProperty.call(e,"preferredFormat")&&t.uint32(32).uint32(e.preferredFormat),null!=e.formatsExt1&&Object.hasOwnProperty.call(e,"formatsExt1")&&t.uint32(40).uint32(e.formatsExt1),null!=e.preferredFormatExt1&&Object.hasOwnProperty.call(e,"preferredFormatExt1")&&t.uint32(48).uint32(e.preferredFormatExt1),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobVideoRuleCollection;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.transport=e.int32();break;case 2:r.operation=e.int32();break;case 3:r.formats=e.uint32();break;case 4:r.preferredFormat=e.uint32();break;case 5:r.formatsExt1=e.uint32();break;case 6:r.preferredFormatExt1=e.uint32();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("transport"))throw Vc.ProtocolError("missing required 'transport'",{instance:r});if(!r.hasOwnProperty("operation"))throw Vc.ProtocolError("missing required 'operation'",{instance:r});if(!r.hasOwnProperty("formats"))throw Vc.ProtocolError("missing required 'formats'",{instance:r});return r},e.VideoFormat=function(){const e={},t=Object.create(e);return t[e[0]="video_INVALID"]=0,t[e[1]="video_320x240_15"]=1,t[e[2]="video_320x240_30"]=2,t[e[4]="video_480x368_15"]=4,t[e[8]="video_480x368_30"]=8,t[e[16]="video_640x480_15"]=16,t[e[32]="video_640x480_30"]=32,t[e[64]="video_848x480_15"]=64,t[e[128]="video_848x480_30"]=128,t[e[256]="video_1024x768_15"]=256,t[e[512]="video_1024x768_30"]=512,t[e[1024]="video_1280x720_15"]=1024,t[e[2048]="video_1280x720_30"]=2048,t[e[4096]="video_1024x768_60"]=4096,t[e[8192]="video_1280x720_60"]=8192,t[e[16384]="video_480x272_15"]=16384,t[e[32768]="video_480x272_30"]=32768,t[e[65536]="video_1280x720_15_dec"]=65536,t[e[131072]="video_1280x720_30_dec"]=131072,t[e[262144]="video_1280x720_60_dec"]=262144,t[e[524288]="video_192x112_15"]=524288,t[e[1048576]="video_192x192_15"]=1048576,t[e[2097152]="video_240x240_15"]=2097152,t[e[4194304]="video_320x320_30"]=4194304,t[e[8388608]="video_480x480_30"]=8388608,t[e[16777216]="video_640x640_30"]=16777216,t[e[33554432]="video_720x720_30"]=33554432,t[e[67108864]="video_1024x576_30"]=67108864,t[e[134217728]="video_1920x1080_30"]=134217728,t[e[268435456]="video_1440x1080_30"]=268435456,t[e[536870912]="video_896_672_30"]=536870912,t[e[1073741824]="video_1920x1080_60"]=1073741824,t[e[2147483647]="video_SUPPORTED"]=2147483647,t}(),e.VideoFormatExt1=function(){const e={},t=Object.create(e);return t[e[0]="video_INVALID"]=0,t[e[1]="video_896x672_60"]=1,t[e[2]="video_1664x1248_30"]=2,t[e[4]="video_1664x1248_60"]=4,t[e[8]="video_1024x576_15"]=8,t[e[16]="video_896x672_15"]=16,t[e[32]="video_96x96_15"]=32,t[e[63]="video_SUPPORTED"]=63,t}(),e.ScreenFormat=function(){const e={},t=Object.create(e);return t[e[0]="screen_INVALID"]=0,t[e[1]="screen_1024x768_30"]=1,t[e[2]="screen_1024x768_60"]=2,t[e[4]="screen_1136x640_30"]=4,t[e[8]="screen_1136x640_60"]=8,t[e[16]="screen_1334x750_30"]=16,t[e[32]="screen_1334x750_60"]=32,t[e[64]="screen_1664x1248_30"]=64,t[e[128]="screen_1664x1248_60"]=128,t[e[256]="screen_1920x1080_30"]=256,t[e[512]="screen_1920x1080_60"]=512,t[e[1024]="screen_2208x1242_30"]=1024,t[e[2048]="screen_2208x1242_60"]=2048,t[e[4096]="screen_2048x1536_30"]=4096,t[e[8192]="screen_2048x1536_60"]=8192,t[e[16384]="screen_1280x720_30"]=16384,t[e[32768]="screen_1280x720_60"]=32768,t[e[65536]="screen_1920x896_30"]=65536,t[e[131072]="screen_1920x896_60"]=131072,t[e[262144]="screen_2732x2048_60"]=262144,t[e[524288]="screen_2388x1668_60"]=524288,t[e[1048576]="screen_2224x1668_60"]=1048576,t[e[2097151]="screen_SUPPORTED"]=2097151,t}(),e.TransportType=function(){const e={},t=Object.create(e);return t[e[1]="NEGOTIATION_TRANSPORT_TYPE_WIFI"]=1,t[e[2]="NEGOTIATION_TRANSPORT_TYPE_CELLULAR"]=2,t}(),e.OperationType=function(){const e={},t=Object.create(e);return t[e[1]="NEGOTIATION_OPERATION_TYPE_ENCODE"]=1,t[e[2]="NEGOTIATION_OPERATION_TYPE_DECODE"]=2,t}(),e}(),e.VCMediaNegotiationBlobVideoPayloadSettings=function(){function e(e){if(this.videoRuleCollections=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.payload=0,e.prototype.videoRuleCollections=Vc.emptyArray,e.prototype.featureString="",e.prototype.parameterSet=0,e.encode=function(e,t){if(t||(t=qc.create()),t.uint32(8).uint32(e.payload),null!=e.videoRuleCollections&&e.videoRuleCollections.length)for(let n=0;n<e.videoRuleCollections.length;++n)Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobVideoRuleCollection.encode(e.videoRuleCollections[n],t.uint32(18).fork()).ldelim();return t.uint32(26).string(e.featureString),t.uint32(32).uint32(e.parameterSet),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobVideoPayloadSettings;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.payload=e.uint32();break;case 2:r.videoRuleCollections&&r.videoRuleCollections.length||(r.videoRuleCollections=[]),r.videoRuleCollections.push(Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobVideoRuleCollection.decode(e,e.uint32()));break;case 3:r.featureString=e.string();break;case 4:r.parameterSet=e.uint32();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("payload"))throw Vc.ProtocolError("missing required 'payload'",{instance:r});if(!r.hasOwnProperty("featureString"))throw Vc.ProtocolError("missing required 'featureString'",{instance:r});if(!r.hasOwnProperty("parameterSet"))throw Vc.ProtocolError("missing required 'parameterSet'",{instance:r});return r},e.parameterSetSupport=function(){const e={},t=Object.create(e);return t[e[0]="Invalid"]=0,t[e[1]="ImageDescription"]=1,t[e[2]="SPS"]=2,t[e[4]="PPS"]=4,t[e[8]="VPS"]=8,t[e[15]="ValidMask"]=15,t}(),e}(),e.VCMediaNegotiationBlobVideoSettings=function(){function e(e){if(this.videoPayloadCollections=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.rtpSSRC=0,e.prototype.allowRTCPFB=!1,e.prototype.videoPayloadCollections=Vc.emptyArray,e.prototype.customVideoWidth=0,e.prototype.customVideoHeight=0,e.prototype.tilesPerFrame=1,e.prototype.ltrpEnabled=!1,e.prototype.pixelFormats=0,e.encode=function(e,t){if(t||(t=qc.create()),t.uint32(8).uint32(e.rtpSSRC),t.uint32(16).bool(e.allowRTCPFB),null!=e.videoPayloadCollections&&e.videoPayloadCollections.length)for(let n=0;n<e.videoPayloadCollections.length;++n)Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobVideoPayloadSettings.encode(e.videoPayloadCollections[n],t.uint32(26).fork()).ldelim();return null!=e.customVideoWidth&&Object.hasOwnProperty.call(e,"customVideoWidth")&&t.uint32(32).uint32(e.customVideoWidth),null!=e.customVideoHeight&&Object.hasOwnProperty.call(e,"customVideoHeight")&&t.uint32(40).uint32(e.customVideoHeight),null!=e.tilesPerFrame&&Object.hasOwnProperty.call(e,"tilesPerFrame")&&t.uint32(48).uint32(e.tilesPerFrame),null!=e.ltrpEnabled&&Object.hasOwnProperty.call(e,"ltrpEnabled")&&t.uint32(56).bool(e.ltrpEnabled),null!=e.pixelFormats&&Object.hasOwnProperty.call(e,"pixelFormats")&&t.uint32(64).uint32(e.pixelFormats),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobVideoSettings;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.rtpSSRC=e.uint32();break;case 2:r.allowRTCPFB=e.bool();break;case 3:r.videoPayloadCollections&&r.videoPayloadCollections.length||(r.videoPayloadCollections=[]),r.videoPayloadCollections.push(Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobVideoPayloadSettings.decode(e,e.uint32()));break;case 4:r.customVideoWidth=e.uint32();break;case 5:r.customVideoHeight=e.uint32();break;case 6:r.tilesPerFrame=e.uint32();break;case 7:r.ltrpEnabled=e.bool();break;case 8:r.pixelFormats=e.uint32();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("rtpSSRC"))throw Vc.ProtocolError("missing required 'rtpSSRC'",{instance:r});if(!r.hasOwnProperty("allowRTCPFB"))throw Vc.ProtocolError("missing required 'allowRTCPFB'",{instance:r});return r},e.VideoPayload=function(){const e={},t=Object.create(e);return t[e[1]="H264"]=1,t[e[2]="HEVC"]=2,t[e[3]="SUPPORTED"]=3,t[e[-1]="INVALID"]=-1,t}(),e.PixelFormat=function(){const e={},t=Object.create(e);return t[e[0]="format_invalid"]=0,t[e[1]="format_420_8bit_FullRange"]=1,t[e[2]="format_420_8bit_VideoRange"]=2,t[e[4]="format_420_10bit_VideoRange"]=4,t[e[8]="format_444_8bit_FullRange"]=8,t[e[16]="format_444_8bit_VideoRange"]=16,t}(),e}(),e.VCMediaNegotiationBlobBandwidthSettings=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.configuration=0,e.prototype.maxBandwidth=0,e.prototype.configurationExtension=0,e.encode=function(e,t){return t||(t=qc.create()),t.uint32(8).int32(e.configuration),t.uint32(16).uint32(e.maxBandwidth),null!=e.configurationExtension&&Object.hasOwnProperty.call(e,"configurationExtension")&&t.uint32(24).int32(e.configurationExtension),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobBandwidthSettings;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.configuration=e.int32();break;case 2:r.maxBandwidth=e.uint32();break;case 3:r.configurationExtension=e.int32();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("configuration"))throw Vc.ProtocolError("missing required 'configuration'",{instance:r});if(!r.hasOwnProperty("maxBandwidth"))throw Vc.ProtocolError("missing required 'maxBandwidth'",{instance:r});return r},e.BandwidthConfiguration=function(){const e={},t=Object.create(e);return t[e[0]="mode_Invalid"]=0,t[e[1]="mode_Default_Wifi"]=1,t[e[2]="mode_Default_LTE"]=2,t[e[4]="mode_FaceTime_Wifi"]=4,t[e[8]="mode_FaceTime_LTE"]=8,t[e[16]="mode_Screen_Wifi"]=16,t[e[32]="mode_Screen_LTE"]=32,t[e[64]="mode_FaceTime_3G"]=64,t[e[128]="mode_Screen_3G"]=128,t[e[256]="mode_Default_3G"]=256,t[e[512]="mode_FaceTime_2G"]=512,t[e[1024]="mode_Screen_2G"]=1024,t[e[2048]="mode_Default_2G"]=2048,t[e[4096]="mode_iPadCompanion_AWDL"]=4096,t[e[8192]="mode_iPadCompanion_USB"]=8192,t[e[16384]="mode_FaceTime_5G"]=16384,t[e[32767]="mode_SUPPORTED"]=32767,t}(),e}(),e.VCMediaNegotiationBlobCaptionsSettings=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.canDisplayCaptions=!1,e.prototype.senderLanguages=0,e.encode=function(e,t){return t||(t=qc.create()),null!=e.canDisplayCaptions&&Object.hasOwnProperty.call(e,"canDisplayCaptions")&&t.uint32(8).bool(e.canDisplayCaptions),null!=e.senderLanguages&&Object.hasOwnProperty.call(e,"senderLanguages")&&t.uint32(16).uint32(e.senderLanguages),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobCaptionsSettings;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.canDisplayCaptions=e.bool();break;case 2:r.senderLanguages=e.uint32();break;default:e.skipType(7&t)}}return r},e.Lanaguage=function(){const e={},t=Object.create(e);return t[e[0]="invalid"]=0,t[e[1]="en_us"]=1,t[e[2]="zh_cn"]=2,t[e[3]="supported"]=3,t}(),e}(),e.VCMediaNegotiationBlobMultiwayAudioStream=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ssrc=0,e.prototype.maxNetworkBitrate=0,e.prototype.supportedPayloads=0,e.prototype.streamID=0,e.prototype.qualityIndex=0,e.prototype.maxMediaBitrate=0,e.prototype.maxPacketsPerSecond=0,e.prototype.repairedStreamID=0,e.prototype.repairedMaxNetworkBitrate=0,e.encode=function(e,t){return t||(t=qc.create()),t.uint32(8).uint32(e.ssrc),null!=e.maxNetworkBitrate&&Object.hasOwnProperty.call(e,"maxNetworkBitrate")&&t.uint32(16).uint32(e.maxNetworkBitrate),null!=e.supportedPayloads&&Object.hasOwnProperty.call(e,"supportedPayloads")&&t.uint32(24).uint32(e.supportedPayloads),t.uint32(32).uint32(e.streamID),t.uint32(40).uint32(e.qualityIndex),null!=e.maxMediaBitrate&&Object.hasOwnProperty.call(e,"maxMediaBitrate")&&t.uint32(48).uint32(e.maxMediaBitrate),null!=e.maxPacketsPerSecond&&Object.hasOwnProperty.call(e,"maxPacketsPerSecond")&&t.uint32(61).float(e.maxPacketsPerSecond),null!=e.repairedStreamID&&Object.hasOwnProperty.call(e,"repairedStreamID")&&t.uint32(64).uint32(e.repairedStreamID),null!=e.repairedMaxNetworkBitrate&&Object.hasOwnProperty.call(e,"repairedMaxNetworkBitrate")&&t.uint32(72).uint32(e.repairedMaxNetworkBitrate),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobMultiwayAudioStream;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.ssrc=e.uint32();break;case 2:r.maxNetworkBitrate=e.uint32();break;case 3:r.supportedPayloads=e.uint32();break;case 4:r.streamID=e.uint32();break;case 5:r.qualityIndex=e.uint32();break;case 6:r.maxMediaBitrate=e.uint32();break;case 7:r.maxPacketsPerSecond=e.float();break;case 8:r.repairedStreamID=e.uint32();break;case 9:r.repairedMaxNetworkBitrate=e.uint32();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("ssrc"))throw Vc.ProtocolError("missing required 'ssrc'",{instance:r});if(!r.hasOwnProperty("streamID"))throw Vc.ProtocolError("missing required 'streamID'",{instance:r});if(!r.hasOwnProperty("qualityIndex"))throw Vc.ProtocolError("missing required 'qualityIndex'",{instance:r});return r},e}(),e.VCMediaNegotiationBlobMomentsSettings=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.capabilities=0,e.prototype.supportedVideoCodecs=0,e.prototype.supportedImageTypes=0,e.prototype.multiwayCapabilities=0,e.encode=function(e,t){return t||(t=qc.create()),t.uint32(8).uint32(e.capabilities),null!=e.supportedVideoCodecs&&Object.hasOwnProperty.call(e,"supportedVideoCodecs")&&t.uint32(16).uint32(e.supportedVideoCodecs),null!=e.supportedImageTypes&&Object.hasOwnProperty.call(e,"supportedImageTypes")&&t.uint32(24).uint32(e.supportedImageTypes),null!=e.multiwayCapabilities&&Object.hasOwnProperty.call(e,"multiwayCapabilities")&&t.uint32(32).uint32(e.multiwayCapabilities),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobMomentsSettings;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.capabilities=e.uint32();break;case 2:r.supportedVideoCodecs=e.uint32();break;case 3:r.supportedImageTypes=e.uint32();break;case 4:r.multiwayCapabilities=e.uint32();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("capabilities"))throw Vc.ProtocolError("missing required 'capabilities'",{instance:r});return r},e.Capabilities=function(){const e={},t=Object.create(e);return t[e[1]="no_history"]=1,t[e[2]="history_image"]=2,t[e[4]="history_video"]=4,t[e[119]="supported"]=119,t}(),e.VideoCodec=function(){const e={},t=Object.create(e);return t[e[1]="H264"]=1,t[e[2]="HEVC"]=2,t[e[3]="SUPPORTED"]=3,t}(),e.ImageType=function(){const e={},t=Object.create(e);return t[e[1]="JPEG"]=1,t[e[2]="HEIF"]=2,t[e[3]="SUPPORTED"]=3,t}(),e}(),e.VCMediaNegotiationFaceTimeSettings=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.capabilities=0,e.prototype.switches=0,e.prototype.oneToOneModeSupported=!1,e.prototype.mediaControlInfoSubVersion=0,e.prototype.linkProbingCapabilityVersion=0,e.encode=function(e,t){return t||(t=qc.create()),null!=e.capabilities&&Object.hasOwnProperty.call(e,"capabilities")&&t.uint32(8).uint32(e.capabilities),null!=e.switches&&Object.hasOwnProperty.call(e,"switches")&&t.uint32(16).uint32(e.switches),null!=e.oneToOneModeSupported&&Object.hasOwnProperty.call(e,"oneToOneModeSupported")&&t.uint32(24).bool(e.oneToOneModeSupported),null!=e.mediaControlInfoSubVersion&&Object.hasOwnProperty.call(e,"mediaControlInfoSubVersion")&&t.uint32(32).uint32(e.mediaControlInfoSubVersion),null!=e.linkProbingCapabilityVersion&&Object.hasOwnProperty.call(e,"linkProbingCapabilityVersion")&&t.uint32(40).uint32(e.linkProbingCapabilityVersion),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationFaceTimeSettings;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.capabilities=e.uint32();break;case 2:r.switches=e.uint32();break;case 3:r.oneToOneModeSupported=e.bool();break;case 4:r.mediaControlInfoSubVersion=e.uint32();break;case 5:r.linkProbingCapabilityVersion=e.uint32();break;default:e.skipType(7&t)}}return r},e.ControlChannelCapabilities=function(){const e={},t=Object.create(e);return t[e[1]="SecureMessaging"]=1,t[e[2]="DisablingSIP"]=2,t}(),e.ABTestingSwitches=function(){const e={},t=Object.create(e);return t[e[1]="preferRelayOverP2P"]=1,t[e[2]="alwaysOnAudioRedundancyEnabled"]=2,t[e[4]="highFecEnabled"]=4,t[e[8]="lowFpsVideoEnabled"]=8,t[e[16]="vplrFecEnabled"]=16,t[e[32]="rampDownBWDropEnabled"]=32,t[e[64]="fastMediaDuplicationEnabled"]=64,t[e[128]="iRATRtpEnabled"]=128,t[e[256]="preWarmCellEnabled"]=256,t[e[512]="duplicateImportantPktsEnabled"]=512,t[e[1024]="allowBurstyLossRampDownEnabled"]=1024,t[e[2048]="hevcWifiTiersEnabled"]=2048,t[e[4096]="viewpointCorrectionEnabled"]=4096,t[e[8192]="heifHevcLivePhotosEnabled"]=8192,t[e[16384]="wifiLowTierRedundancyEnabled"]=16384,t[e[32768]="cellularLowTierRedundancyEnabled"]=32768,t[e[65536]="iRATMetricsEnabled"]=65536,t[e[131072]="fecHeaderV1Enabled"]=131072,t[e[262144]="updatedAFRCHeaderEnabled"]=262144,t[e[524288]="secureMessagingEnabled"]=524288,t[e[1048576]="disableSIPEnabled"]=1048576,t[e[2097152]="wifiAssistDuplicationEnabled"]=2097152,t[e[4194304]="wifiAssistBudgetStatusEnabled"]=4194304,t[e[8388608]="wifiAssistStatusBarEnabled"]=8388608,t[e[16777216]="lowNetworkModeEnabled"]=16777216,t[e[33554432]="duplicationEnhancementEnabled"]=33554432,t[e[67108864]="videoJBEnabled"]=67108864,t[e[134217728]="iRATDuplicationEnabled"]=134217728,t[e[268435456]="wrmThresholdEnabled"]=268435456,t}(),e}(),e.VCMediaNegotiationBlobMultiwayVideoStream=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ssrc=0,e.prototype.maxNetworkBitrate=0,e.prototype.payload=0,e.prototype.streamID=0,e.prototype.metadata=0,e.prototype.qualityIndex=0,e.prototype.supportedVideoFormats=0,e.prototype.frameRate=0,e.prototype.keyFrameInterval=0,e.prototype.maxMediaBitrate=0,e.prototype.maxPacketsPerSecond=0,e.prototype.repairedStreamID=0,e.prototype.repairedMaxNetworkBitrate=0,e.encode=function(e,t){return t||(t=qc.create()),t.uint32(8).uint32(e.ssrc),null!=e.maxNetworkBitrate&&Object.hasOwnProperty.call(e,"maxNetworkBitrate")&&t.uint32(16).uint32(e.maxNetworkBitrate),t.uint32(24).uint32(e.payload),t.uint32(32).uint32(e.streamID),null!=e.metadata&&Object.hasOwnProperty.call(e,"metadata")&&t.uint32(40).uint32(e.metadata),t.uint32(48).uint32(e.qualityIndex),t.uint32(56).uint32(e.supportedVideoFormats),t.uint32(64).uint32(e.frameRate),t.uint32(72).uint32(e.keyFrameInterval),null!=e.maxMediaBitrate&&Object.hasOwnProperty.call(e,"maxMediaBitrate")&&t.uint32(80).uint32(e.maxMediaBitrate),null!=e.maxPacketsPerSecond&&Object.hasOwnProperty.call(e,"maxPacketsPerSecond")&&t.uint32(88).uint32(e.maxPacketsPerSecond),null!=e.repairedStreamID&&Object.hasOwnProperty.call(e,"repairedStreamID")&&t.uint32(96).uint32(e.repairedStreamID),null!=e.repairedMaxNetworkBitrate&&Object.hasOwnProperty.call(e,"repairedMaxNetworkBitrate")&&t.uint32(104).uint32(e.repairedMaxNetworkBitrate),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobMultiwayVideoStream;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.ssrc=e.uint32();break;case 2:r.maxNetworkBitrate=e.uint32();break;case 3:r.payload=e.uint32();break;case 4:r.streamID=e.uint32();break;case 5:r.metadata=e.uint32();break;case 6:r.qualityIndex=e.uint32();break;case 7:r.supportedVideoFormats=e.uint32();break;case 8:r.frameRate=e.uint32();break;case 9:r.keyFrameInterval=e.uint32();break;case 10:r.maxMediaBitrate=e.uint32();break;case 11:r.maxPacketsPerSecond=e.uint32();break;case 12:r.repairedStreamID=e.uint32();break;case 13:r.repairedMaxNetworkBitrate=e.uint32();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("ssrc"))throw Vc.ProtocolError("missing required 'ssrc'",{instance:r});if(!r.hasOwnProperty("payload"))throw Vc.ProtocolError("missing required 'payload'",{instance:r});if(!r.hasOwnProperty("streamID"))throw Vc.ProtocolError("missing required 'streamID'",{instance:r});if(!r.hasOwnProperty("qualityIndex"))throw Vc.ProtocolError("missing required 'qualityIndex'",{instance:r});if(!r.hasOwnProperty("supportedVideoFormats"))throw Vc.ProtocolError("missing required 'supportedVideoFormats'",{instance:r});if(!r.hasOwnProperty("frameRate"))throw Vc.ProtocolError("missing required 'frameRate'",{instance:r});if(!r.hasOwnProperty("keyFrameInterval"))throw Vc.ProtocolError("missing required 'keyFrameInterval'",{instance:r});return r},e.Metadata=function(){const e={},t=Object.create(e);return t[e[0]="metadata_Invalid"]=0,t[e[1]="metadata_SubStream"]=1,t}(),e.VideoPayload=function(){const e={},t=Object.create(e);return t[e[1]="H264"]=1,t[e[2]="HEVC"]=2,t[e[3]="SUPPORTED"]=3,t[e[-1]="INVALID"]=-1,t}(),e.VideoFormat=function(){const e={},t=Object.create(e);return t[e[0]="video_INVALID"]=0,t[e[1]="video_320x176"]=1,t[e[2]="video_320x240"]=2,t[e[4]="video_480x272"]=4,t[e[8]="video_480x368"]=8,t[e[16]="video_640x368"]=16,t[e[32]="video_640x480"]=32,t[e[64]="video_1024x768"]=64,t[e[128]="video_1280x720"]=128,t[e[256]="video_192x112"]=256,t[e[512]="video_192x192"]=512,t[e[1024]="video_240x240"]=1024,t[e[2048]="video_320x320"]=2048,t[e[4096]="video_480x480"]=4096,t[e[8192]="video_640x640"]=8192,t[e[16384]="video_720x720_UNSHIPPED"]=16384,t[e[32768]="video_720x720"]=32768,t[e[65536]="video_128x128"]=65536,t[e[131072]="video_256x256"]=131072,t[e[262144]="video_512x512"]=262144,t[e[524288]="video_96x96"]=524288,t[e[1048575]="video_SUPPORTED"]=1048575,t}(),e}(),e.VCMediaNegotiationBlobStreamGroupStream=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ssrc=0,e.prototype.streamID=0,e.prototype.metadata=0,e.prototype.qualityIndex=0,e.prototype.maxNetworkBitrate=0,e.prototype.maxMediaBitrate=0,e.prototype.maxPacketsPerSecond=0,e.prototype.repairedStreamID=0,e.prototype.repairedMaxNetworkBitrate=0,e.prototype.rtpSampleRate=0,e.prototype.type=0,e.prototype.parentStreamID=0,e.prototype.codecs=0,e.prototype.extensions=0,e.encode=function(e,t){return t||(t=qc.create()),null!=e.ssrc&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(8).uint32(e.ssrc),null!=e.streamID&&Object.hasOwnProperty.call(e,"streamID")&&t.uint32(16).uint32(e.streamID),null!=e.metadata&&Object.hasOwnProperty.call(e,"metadata")&&t.uint32(24).uint32(e.metadata),null!=e.qualityIndex&&Object.hasOwnProperty.call(e,"qualityIndex")&&t.uint32(32).uint32(e.qualityIndex),null!=e.maxNetworkBitrate&&Object.hasOwnProperty.call(e,"maxNetworkBitrate")&&t.uint32(40).uint32(e.maxNetworkBitrate),null!=e.maxMediaBitrate&&Object.hasOwnProperty.call(e,"maxMediaBitrate")&&t.uint32(48).uint32(e.maxMediaBitrate),null!=e.maxPacketsPerSecond&&Object.hasOwnProperty.call(e,"maxPacketsPerSecond")&&t.uint32(56).uint32(e.maxPacketsPerSecond),null!=e.repairedStreamID&&Object.hasOwnProperty.call(e,"repairedStreamID")&&t.uint32(64).uint32(e.repairedStreamID),null!=e.repairedMaxNetworkBitrate&&Object.hasOwnProperty.call(e,"repairedMaxNetworkBitrate")&&t.uint32(72).uint32(e.repairedMaxNetworkBitrate),null!=e.rtpSampleRate&&Object.hasOwnProperty.call(e,"rtpSampleRate")&&t.uint32(80).uint32(e.rtpSampleRate),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(88).uint32(e.type),null!=e.parentStreamID&&Object.hasOwnProperty.call(e,"parentStreamID")&&t.uint32(96).uint32(e.parentStreamID),null!=e.codecs&&Object.hasOwnProperty.call(e,"codecs")&&t.uint32(104).uint32(e.codecs),null!=e.extensions&&Object.hasOwnProperty.call(e,"extensions")&&t.uint32(112).uint32(e.extensions),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobStreamGroupStream;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.ssrc=e.uint32();break;case 2:r.streamID=e.uint32();break;case 3:r.metadata=e.uint32();break;case 4:r.qualityIndex=e.uint32();break;case 5:r.maxNetworkBitrate=e.uint32();break;case 6:r.maxMediaBitrate=e.uint32();break;case 7:r.maxPacketsPerSecond=e.uint32();break;case 8:r.repairedStreamID=e.uint32();break;case 9:r.repairedMaxNetworkBitrate=e.uint32();break;case 10:r.rtpSampleRate=e.uint32();break;case 11:r.type=e.uint32();break;case 12:r.parentStreamID=e.uint32();break;case 13:r.codecs=e.uint32();break;case 14:r.extensions=e.uint32();break;default:e.skipType(7&t)}}return r},e.Type=function(){const e={},t=Object.create(e);return t[e[0]="Normal"]=0,t[e[1]="Temporal"]=1,t[e[2]="RTX"]=2,t}(),e}(),e.VCMediaNegotiationBlobStreamGroupCodec=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.codecType=0,e.prototype.rtpPayload=0,e.prototype.pTime=0,e.prototype.rtcpFlags=0,e.prototype.mediaFlags=0,e.prototype.profileLevelId=0,e.prototype.packetizationMode=1,e.prototype.featureString="",e.encode=function(e,t){return t||(t=qc.create()),null!=e.codecType&&Object.hasOwnProperty.call(e,"codecType")&&t.uint32(8).uint32(e.codecType),null!=e.rtpPayload&&Object.hasOwnProperty.call(e,"rtpPayload")&&t.uint32(16).uint32(e.rtpPayload),null!=e.pTime&&Object.hasOwnProperty.call(e,"pTime")&&t.uint32(24).uint32(e.pTime),null!=e.rtcpFlags&&Object.hasOwnProperty.call(e,"rtcpFlags")&&t.uint32(32).uint32(e.rtcpFlags),null!=e.mediaFlags&&Object.hasOwnProperty.call(e,"mediaFlags")&&t.uint32(40).uint32(e.mediaFlags),null!=e.profileLevelId&&Object.hasOwnProperty.call(e,"profileLevelId")&&t.uint32(48).uint32(e.profileLevelId),null!=e.packetizationMode&&Object.hasOwnProperty.call(e,"packetizationMode")&&t.uint32(56).uint32(e.packetizationMode),null!=e.featureString&&Object.hasOwnProperty.call(e,"featureString")&&t.uint32(66).string(e.featureString),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobStreamGroupCodec;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.codecType=e.uint32();break;case 2:r.rtpPayload=e.uint32();break;case 3:r.pTime=e.uint32();break;case 4:r.rtcpFlags=e.uint32();break;case 5:r.mediaFlags=e.uint32();break;case 6:r.profileLevelId=e.uint32();break;case 7:r.packetizationMode=e.uint32();break;case 8:r.featureString=e.string();break;default:e.skipType(7&t)}}return r},e.RTCPFlag=function(){const e={},t=Object.create(e);return t[e[0]="None"]=0,t[e[1]="NACK"]=1,t[e[2]="PLI"]=2,t[e[4]="FIR"]=4,t[e[8]="SR"]=8,t}(),e.MediaFlag=function(){const e={},t=Object.create(e);return t[e[0]="None"]=0,t[e[1]="H264LevelAsymmetryAllowed"]=1,t[e[2]="UseInBandFEC"]=2,t}(),e.CodecType=function(){const e={},t=Object.create(e);return t[e[0]="Invalid"]=0,t[e[1]="H264"]=1,t[e[2]="HEVC"]=2,t[e[3]="OPUS16K"]=3,t[e[4]="OPUS24K"]=4,t[e[10]="RTX"]=10,t[e[300]="Data"]=300,t}(),e}(),e.VCMediaNegotiationBlobStreamGroupExtension=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.extensionType=0,e.prototype.extensionID=0,e.encode=function(e,t){return t||(t=qc.create()),null!=e.extensionType&&Object.hasOwnProperty.call(e,"extensionType")&&t.uint32(8).uint32(e.extensionType),null!=e.extensionID&&Object.hasOwnProperty.call(e,"extensionID")&&t.uint32(16).uint32(e.extensionID),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobStreamGroupExtension;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.extensionType=e.uint32();break;case 2:r.extensionID=e.uint32();break;default:e.skipType(7&t)}}return r},e.ExtensionType=function(){const e={},t=Object.create(e);return t[e[0]="None"]=0,t[e[1]="CVO"]=1,t}(),e}(),e.VCMediaNegotiationBlobStreamGroup=function(){function e(e){if(this.codecs=[],this.extensions=[],this.streams=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.groupID=0,e.prototype.mediaType=0,e.prototype.mediaSubtype=0,e.prototype.cipherSuites=0,e.prototype.rtcpFlags=0,e.prototype.codecs=Vc.emptyArray,e.prototype.extensions=Vc.emptyArray,e.prototype.streams=Vc.emptyArray,e.prototype.syncGroupID=0,e.encode=function(e,t){if(t||(t=qc.create()),null!=e.groupID&&Object.hasOwnProperty.call(e,"groupID")&&t.uint32(8).uint32(e.groupID),null!=e.mediaType&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(16).uint32(e.mediaType),null!=e.mediaSubtype&&Object.hasOwnProperty.call(e,"mediaSubtype")&&t.uint32(24).uint32(e.mediaSubtype),null!=e.cipherSuites&&Object.hasOwnProperty.call(e,"cipherSuites")&&t.uint32(32).uint32(e.cipherSuites),null!=e.rtcpFlags&&Object.hasOwnProperty.call(e,"rtcpFlags")&&t.uint32(40).uint32(e.rtcpFlags),null!=e.codecs&&e.codecs.length)for(let n=0;n<e.codecs.length;++n)Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobStreamGroupCodec.encode(e.codecs[n],t.uint32(50).fork()).ldelim();if(null!=e.extensions&&e.extensions.length)for(let n=0;n<e.extensions.length;++n)Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobStreamGroupExtension.encode(e.extensions[n],t.uint32(58).fork()).ldelim();if(null!=e.streams&&e.streams.length)for(let n=0;n<e.streams.length;++n)Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobStreamGroupStream.encode(e.streams[n],t.uint32(66).fork()).ldelim();return null!=e.syncGroupID&&Object.hasOwnProperty.call(e,"syncGroupID")&&t.uint32(72).uint32(e.syncGroupID),t},e.decode=function(e,t){e instanceof Kc||(e=Kc.create(e));let n=void 0===t?e.len:e.pos+t,r=new Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobStreamGroup;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.groupID=e.uint32();break;case 2:r.mediaType=e.uint32();break;case 3:r.mediaSubtype=e.uint32();break;case 4:r.cipherSuites=e.uint32();break;case 5:r.rtcpFlags=e.uint32();break;case 6:r.codecs&&r.codecs.length||(r.codecs=[]),r.codecs.push(Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobStreamGroupCodec.decode(e,e.uint32()));break;case 7:r.extensions&&r.extensions.length||(r.extensions=[]),r.extensions.push(Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobStreamGroupExtension.decode(e,e.uint32()));break;case 8:r.streams&&r.streams.length||(r.streams=[]),r.streams.push(Fc.VCMediaNegotiationBlob.VCMediaNegotiationBlobStreamGroupStream.decode(e,e.uint32()));break;case 9:r.syncGroupID=e.uint32();break;default:e.skipType(7&t)}}return r},e.RTCPFlag=function(){const e={},t=Object.create(e);return t[e[0]="None"]=0,t[e[1]="ReducedSize"]=1,t[e[2]="MuxWithRTP"]=2,t}(),e.CipherSuite=function(){const e={},t=Object.create(e);return t[e[1]="SFRAME_CIPHER_AESCM128_AuthSHA256_80"]=1,t[e[2]="SFRAME_CIPHER_AESCM128_AuthSHA256_32"]=2,t[e[4]="SRTP_CIPHER_AESCM128_AuthNone_RCCM3"]=4,t}(),e}(),e})();var Hc;!function(e){e[e.None=0]="None",e[e.NACK=1]="NACK",e[e.PLI=2]="PLI",e[e.FIR=4]="FIR",e[e.SR=8]="SR"}(Hc||(Hc={}));const Wc=Gc.VCMediaNegotiationBlobStreamGroupCodec.MediaFlag,Qc=Gc.VCMediaNegotiationBlobStreamGroupCodec.CodecType;function zc(e){const{codecType:t,rtpPayload:n,pTime:r,rtcpFlags:i,mediaFlags:o,profileLevelId:s,packetizationMode:a,encodingParameters:c}=e;return{codecType:t,rtpPayload:n,pTime:r,rtcpFlags:i,mediaFlags:o,profileLevelId:s,packetizationMode:a,encodingParameters:c}}var Jc;function Yc(e){return{extensionType:e.extensionType,extensionID:e.extensionID,attributes:e.attributes}}!function(e){e[e.None=0]="None",e[e.CVO=1]="CVO",e[e.AudioLevel=2]="AudioLevel",e[e.TWCC=3]="TWCC",e[e.AbsoluteSendTime=6]="AbsoluteSendTime"}(Jc||(Jc={}));const Zc=Gc.VCMediaNegotiationBlobStreamGroupStream.Type;function Xc(e,t,n){const{ssrc:r,repairSsrc:i,rtxSsrc:o,mid:s,streamID:a,metadata:c,streamIndex:l,qualityIndex:d,maxNetworkBitrate:u,maxMediaBitrate:p,maxPacketsPerSecond:h,repairedStreamID:f,repairedMaxNetworkBitrate:g,rtpSampleRate:b,type:y,parentStreamID:m,codecs:v,extensions:w}=e;return{ssrc:r,repairSsrc:i,rtxSsrc:o,mid:s,streamID:a,metadata:c,streamIndex:l,qualityIndex:d,maxNetworkBitrate:u,maxMediaBitrate:p,maxPacketsPerSecond:h,repairedStreamID:f,repairedMaxNetworkBitrate:g,rtpSampleRate:b,type:y,parentStreamID:m,codecs:v.map(e=>{const n=t.get(e);if(n)return n;const r=zc(e);return t.set(e,r),r}),extensions:w.map(e=>{const t=n.get(e);if(t)return t;const r=Yc(e);return n.set(e,r),r})}}var el,tl,nl;!function(e){e.WebCompatibleMicrophone="micw",e.WebCompatibleCamera="camw"}(el||(el={})),function(e){e.Video="vide",e.Audio="soun"}(tl||(tl={})),function(e){e.Video420v="420v",e.AudioLPCM="lpcm"}(nl||(nl={}));const rl=Gc.VCMediaNegotiationBlobStreamGroup.CipherSuite,il=Gc.VCMediaNegotiationBlobStreamGroup.RTCPFlag;function ol(e){const{groupID:t,mediaType:n,mediaSubtype:r,cipherSuites:i,rtcpFlags:o,syncGroupID:s,streams:a}=e,c=new Map,l=new Map;return{groupID:t,mediaType:n,mediaSubtype:r,cipherSuites:i,rtcpFlags:o,syncGroupID:s,streams:a.map(e=>Xc(e,c,l))}}const sl=fn.nack?Hc.NACK:0,al=123,cl={H264:{codecType:Qc.H264,rtpPayload:al,pTime:null,rtcpFlags:Hc.FIR|Hc.SR|Hc.PLI|sl,mediaFlags:Wc.H264LevelAsymmetryAllowed,profileLevelId:4374559,packetizationMode:1,encodingParameters:null},Opus16K:{codecType:Qc.OPUS16K,rtpPayload:96,pTime:60,rtcpFlags:0,mediaFlags:Wc.None,profileLevelId:null,packetizationMode:null,encodingParameters:"2"},Opus24K:{codecType:Qc.OPUS24K,rtpPayload:97,pTime:40,rtcpFlags:0,mediaFlags:Wc.UseInBandFEC,profileLevelId:null,packetizationMode:null,encodingParameters:"2"},RTX:{codecType:Qc.RTX,rtpPayload:al+1,pTime:null,rtcpFlags:Hc.None,mediaFlags:Wc.None,profileLevelId:null,packetizationMode:null,encodingParameters:null}},ll={[Qc.Data]:"data",[Qc.RTX]:"rtx",[Qc.HEVC]:"HEVC",[Qc.H264]:"H264",[Qc.OPUS16K]:"opus",[Qc.OPUS24K]:"opus",[Qc.Invalid]:"bad"},dl={CVO:{extensionType:Jc.CVO,extensionID:1},AudioLevel:{extensionType:Jc.AudioLevel,extensionID:2,attributes:"vad=off"},TWCC:{extensionType:Jc.TWCC,extensionID:3},AbsoluteSendTime:{extensionType:Jc.AbsoluteSendTime,extensionID:6}},ul=new Map([[Jc.CVO,"urn:3gpp:video-orientation"],[Jc.AudioLevel,"urn:ietf:params:rtp-hdrext:ssrc-audio-level"],[Jc.TWCC,"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"],[Jc.AbsoluteSendTime,"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"]]),pl=48e3,hl=15,{twcc:fl}=fn;var gl,bl;!function(e){e[e.Low=0]="Low",e[e.Mid=1]="Mid",e[e.High=2]="High"}(gl||(gl={})),function(e){e[e.Low=93]="Low",e[e.Mid=400]="Mid",e[e.High=1250]="High"}(bl||(bl={}));const yl={low:{name:"low",mediaType:tl.Video,streamIndex:gl.Low,qualityIndex:bl.Low,resolution:192,encodingBitrate:5e4,networkBitrate:62e3,frameRate:hl,sampleRate:9e4,codecs:[cl.H264,cl.RTX],extensions:fl?[dl.CVO,dl.AbsoluteSendTime,dl.TWCC]:[dl.CVO,dl.AbsoluteSendTime]},mid:{name:"mid",mediaType:tl.Video,streamIndex:gl.Mid,qualityIndex:bl.Mid,resolution:320,encodingBitrate:2e5,networkBitrate:23e4,frameRate:30,sampleRate:9e4,codecs:[cl.H264,cl.RTX],extensions:fl?[dl.CVO,dl.AbsoluteSendTime,dl.TWCC]:[dl.CVO,dl.AbsoluteSendTime]},high:{name:"high",mediaType:tl.Video,streamIndex:gl.High,qualityIndex:bl.High,resolution:720,encodingBitrate:8e5,networkBitrate:872e3,frameRate:30,sampleRate:9e4,codecs:[cl.H264,cl.RTX],extensions:fl?[dl.CVO,dl.AbsoluteSendTime,dl.TWCC]:[dl.CVO,dl.AbsoluteSendTime]}};var ml,vl;!function(e){e[e.Low=0]="Low",e[e.High=1]="High"}(ml||(ml={})),function(e){e[e.Low=27]="Low",e[e.High=162]="High"}(vl||(vl={}));const wl={low:{name:"low",mediaType:tl.Audio,streamIndex:ml.Low,qualityIndex:vl.Low,encodingBitrate:13200,networkBitrate:26e3,sampleRate:pl,ptime:60,codecs:[cl.Opus16K],extensions:fl?[dl.AudioLevel,dl.AbsoluteSendTime,dl.TWCC]:[dl.AudioLevel,dl.AbsoluteSendTime]},high:{name:"high",mediaType:tl.Audio,streamIndex:ml.High,qualityIndex:vl.High,encodingBitrate:48e3,networkBitrate:69e3,sampleRate:pl,ptime:40,codecs:[cl.Opus24K],extensions:fl?[dl.AudioLevel,dl.AbsoluteSendTime,dl.TWCC]:[dl.AudioLevel,dl.AbsoluteSendTime]}};function Pl(e){return e===yl.high.streamIndex?yl.high:e===yl.mid.streamIndex?yl.mid:yl.low}function Sl(e){return e===wl.high.streamIndex?wl.high:wl.low}function $l(e,{ssrc:t,repairSsrc:n,rtxSsrc:r,mid:i,streamID:o}){return{ssrc:t,repairSsrc:n,rtxSsrc:r,mid:i,streamID:o,type:Zc.Normal,rtpSampleRate:e.sampleRate,codecs:e.codecs,extensions:e.extensions,metadata:null,streamIndex:e.streamIndex,qualityIndex:e.qualityIndex,maxNetworkBitrate:e.networkBitrate,maxMediaBitrate:e.networkBitrate/2,maxPacketsPerSecond:null,repairedStreamID:null,repairedMaxNetworkBitrate:null,parentStreamID:null}}function Ol(e,{ssrc:t,mid:n,streamID:r}){return{ssrc:t,mid:n,streamID:r,type:Zc.Normal,rtpSampleRate:e.sampleRate,codecs:e.codecs,extensions:e.extensions,metadata:null,streamIndex:e.streamIndex,qualityIndex:e.qualityIndex,maxNetworkBitrate:e.networkBitrate,maxMediaBitrate:e.networkBitrate/2,maxPacketsPerSecond:null,repairedStreamID:null,repairedMaxNetworkBitrate:null,parentStreamID:null}}let kl=0;const Il=Date.now()-(0|performance.now());function Cl(){const e=Il+(0|performance.now())+kl,t=Math.floor(e/1e3);return[t,(e/1e3-t)*2**32]}function Rl(e){const t=e.map(({streamID:e,ssrc:t,repairSsrc:n,rtxSsrc:r,mid:i,tier:o})=>$l(o,{ssrc:null!=t?t:null,repairSsrc:null!=n?n:null,rtxSsrc:null!=r?r:null,mid:null!=i?i:null,streamID:e}));return{groupID:el.WebCompatibleCamera,mediaType:tl.Video,mediaSubtype:nl.Video420v,cipherSuites:rl.SFRAME_CIPHER_AESCM128_AuthSHA256_80,rtcpFlags:Hc.FIR|Hc.NACK|Hc.PLI|Hc.SR,syncGroupID:null,streams:t}}function Ml(e){const t=e.map(({streamID:e,ssrc:t,mid:n,tier:r})=>Ol(r,{ssrc:null!=t?t:null,mid:null!=n?n:null,streamID:e}));return{groupID:el.WebCompatibleMicrophone,mediaType:tl.Audio,mediaSubtype:nl.AudioLPCM,cipherSuites:rl.SFRAME_CIPHER_AESCM128_AuthSHA256_32,rtcpFlags:0,syncGroupID:null,streams:t}}function Tl(e,t,n=function([e,t]){return BigInt(e)<<BigInt(32)|BigInt(t)}(Cl())){return{ntpTime:n,streamGroups:[Rl(e),Ml(t)]}}function Dl(e,t,n,r){return{participantID:e,cname:""+e,media:Tl(t,n,r)}}var El=T("counters");var Al,jl,Nl;!function(e){e.VCSessionMessageTopicStreamGroupsState="VCSessionMessageTopicStreamGroupsState"}(Al||(Al={})),function(e){e.Invalid="0",e.Camera="1",e.Microphone="2",e.Screen="3",e.SystemAudio="4",e.CameraWebRTC="5",e.MicrophoneWebRTC="6",e.Captions="7"}(jl||(jl={})),function(e){e[e.Disabled=0]="Disabled",e[e.Enabled=1]="Enabled",e[e.Paused=2]="Paused"}(Nl||(Nl={}));class Bl{constructor(e,t){Object.defineProperty(this,"allTiers",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"requestedTiers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_entries",{enumerable:!0,configurable:!0,writable:!0,value:null})}get entries(){return this._entries||(this._entries=this.compute()),this._entries}matchesTiers(e,t){return zo(e,this.allTiers)&&zo(t,this.requestedTiers)}shouldAddEntry(e){return this.isRequestedEntry(e)||this.shouldAddBackupEntry(e)}shouldAddBackupEntry(e){return this.requestedTiers.some(t=>t.mediaType===e.mediaType&&t.networkBitrate>e.networkBitrate)}isRequestedEntry(e){return this.requestedTiers.includes(e)}maybeRemoveBackupEntry(e){const t=e[e.length-1];return!t||this.isRequestedEntry(t)?0:(e.pop(),-t.networkBitrate)}appendEntry(e,t){return e.push(t),t.networkBitrate}getMediaTiers(e,t){let n=e.get(t);return n||(n=[],e.set(t,n)),n}compute(){const e=this.allTiers.slice().sort((e,t)=>e.qualityIndex-t.qualityIndex),t=new Map,n=[];let r=0;for(const i of e){if(!this.shouldAddEntry(i))continue;const e=this.getMediaTiers(t,i.mediaType);r+=this.maybeRemoveBackupEntry(e),r+=this.appendEntry(e,i);const o=new Map(Array.from(t,([e,t])=>[e,t.slice()]));n.push({bandwidth:r,tiersMap:o})}return n.sort((e,t)=>t.bandwidth-e.bandwidth),n}}function _l(e,t){for(const n of e.streamGroups)for(const e of n.streams)if(e.streamID===t){if(n.mediaType===tl.Video)return Pl(e.streamIndex);if(n.mediaType===tl.Audio)return Sl(e.streamIndex)}return null}function xl(e,t){for(const n of e.streamGroups)for(const e of n.streams)if(t.mediaType===n.mediaType&&t.streamIndex===e.streamIndex)return e.streamID;return-1}class Ul{constructor(e){Object.defineProperty(this,"mediaConfig",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"bandwidthTable",{enumerable:!0,configurable:!0,writable:!0,value:new Bl([],[])}),Object.defineProperty(this,"statsToLog",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}computedCompoundingInfo(e,t,n){const r=n,i=[];for(const n of t){const t=r.findIndex(e=>e.networkBitrate>n.networkBitrate),o=t<0?[]:r.splice(t,r.length-t);i.push([xl(e,n),o.map(t=>xl(e,t))])}return i}getTable(e,t){return this.bandwidthTable.matchesTiers(e,t)||(this.bandwidthTable=new Bl(e,t)),this.bandwidthTable}getFallbackEntry(e){return e[e.length-1]}computePickedTiers(e,t,n){const r=e.streamGroups.flatMap(e=>e.streams).map(t=>_l(e,t.streamID)).filter(e=>!!e),i=t.map(t=>_l(e,t)).filter(e=>!!e),o=i.some(e=>e.mediaType===tl.Video),s=i.some(e=>e.mediaType===tl.Audio),a=this.mediaConfig.UplinkBandwidthAlwaysTryVideo?(s?wl.low.networkBitrate:0)+(o?yl.low.networkBitrate:0):0,c=Math.max(a,n),{entries:l}=this.getTable(r,i),d=l.find(e=>e.bandwidth<=c)||this.getFallbackEntry(l),u=null==d?void 0:d.tiersMap;return u?(this.statsToLog={wantsAudio:s,wantsVideo:o,minBandwidth:a,targetBandwidth:c},Array.from(u,([e,t])=>({picked:t,others:r.filter(n=>n.mediaType===e&&!t.includes(n))}))):[]}getActiveStreamIds(e,t,n){const r=this.computePickedTiers(e,t,n);return{activeStreams:r.flatMap(e=>e.picked).map(t=>({id:xl(e,t),tier:t.name,type:t.mediaType})),compoundingInfo:r.flatMap(t=>this.computedCompoundingInfo(e,t.picked,t.others))}}}class Ll{constructor(e,t,n,r){Object.defineProperty(this,"provider",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"delegate",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"qrConnectionRTC",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"sessionDescription",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"mediaConfig",{enumerable:!0,configurable:!0,writable:!0,value:va(this.provider)}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this.provider).child`UplinkStreamsController`.id`${this.sessionDescription}`().package`Media`.subsystem`Bandwidth`.category`Uplink`}),Object.defineProperty(this,"uplinkBandwidthAllocator",{enumerable:!0,configurable:!0,writable:!0,value:new Ul(this.mediaConfig)}),Object.defineProperty(this,"compoundingInfo",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"activeStreams",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"requestedOutgoingStreamIds",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_uplinkBandwidthOverride",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"unsubscribeStatsListener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"statsToLog",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.unsubscribeStatsListener=n.statsCollector.schedule("uplinkBandwidthEstimator",e=>this.updateOutgoingStreams(e),this.mediaConfig.UplinkBandwidthCheckDelay)}set uplinkBandwidthOverride(e){this._uplinkBandwidthOverride=e,this.updateOutgoingStreamsImmediately()}async setRequestedStreamIds(e){return this.logger.silly`Set requested stream ids to ${e}`,this.requestedOutgoingStreamIds=e,this.updateOutgoingStreamsImmediately()}close(){var e;null===(e=this.unsubscribeStatsListener)||void 0===e||e.call(this),this.unsubscribeStatsListener=void 0}getAvailableUplinkBandwidth(e){return this._uplinkBandwidthOverride?this._uplinkBandwidthOverride:this.mediaConfig.UplinkBandwidthAllocation?((e,t)=>{const{stats:n,statTypeMap:r}=t,i=r["candidate-pair"];return i?i.map(e=>n.get(e)).filter(Yo).reduce((t,n)=>t+(n[e]||0),0):0})("availableOutgoingBitrate",e):Number.MAX_SAFE_INTEGER}areSameCompoundingInfo(e,t){return zo(e,t,(e,t)=>e[0]===t[0]&&zo(e[1],t[1]))}async updateOutgoingStreamsImmediately(){const e=window.performance.memory;if(e){const{totalJSHeapSize:n,usedJSHeapSize:r,jsHeapSizeLimit:i}=e;this.logger.debug`Memory: ${(t={totalJSHeapSize:n,usedJSHeapSize:r,jsHeapSizeLimit:i},V(JSON.stringify(t)).withDataType(El)).userAgent()}`}var t;return this.updateOutgoingStreams(await this.qrConnectionRTC.statsCollector.getStats())}logBandwidthDetails(){this.logger.silly`Uplink bandwidth estimate components: ${tc(this.uplinkBandwidthAllocator.statsToLog)}`}async updateOutgoingStreams(e){const t=this.getAvailableUplinkBandwidth(e),{media:n}=this.qrConnectionRTC.getOurParticipant(),{activeStreams:r,compoundingInfo:i}=this.uplinkBandwidthAllocator.getActiveStreamIds(n,this.requestedOutgoingStreamIds,t);this.logBandwidthDetails(),this.areSameCompoundingInfo(this.compoundingInfo,i)||(this.compoundingInfo=i,this.delegate.compoundingRequest(i)),this.logger.silly`Evaluated uplink streams for estimated bandwidth of ${tc((t/1e3).toFixed(1))}kbps`,zo(this.activeStreams,r,({id:e},{id:t})=>e===t)||(this.logger.info`Switching uplink streams to ${V(r).session()}`,this.activeStreams=r,this.qrConnectionRTC.setOurActiveAndRequestedStreamids(r.map(({id:e})=>e),this.requestedOutgoingStreamIds))}}var Kl;!function(e){e[e.No=0]="No",e[e.Maybe=1]="Maybe",e[e.Yes=2]="Yes"}(Kl||(Kl={}));Kl.Yes,Kl.Maybe,Kl.No;var ql,Vl;!function(e){e[e.newVideoOrAudioTrack=0]="newVideoOrAudioTrack",e[e.isVideoDegraded=1]="isVideoDegraded",e[e.audioState=2]="audioState",e[e.isAudioReceiving=3]="isAudioReceiving",e[e.isVideoEnabled=4]="isVideoEnabled",e[e.isVideoPaused=5]="isVideoPaused",e[e.isVideoReceiving=6]="isVideoReceiving",e[e.audioPriority=7]="audioPriority",e[e.lastVideoDecryptSuccess=8]="lastVideoDecryptSuccess",e[e.lastAudioDecryptSuccess=9]="lastAudioDecryptSuccess"}(ql||(ql={})),function(e){e[e.None=0]="None",e[e.MaybeSpeaking=1]="MaybeSpeaking",e[e.Speaking=2]="Speaking",e[e.UserPromoted=3]="UserPromoted"}(Vl||(Vl={}));const Fl=Object.freeze({isVideoDegraded:!1});class Gl{constructor(e,t,n=500){Object.defineProperty(this,"statsCollector",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"checkInterval",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"qualityByParticipant",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"unschedule",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"unlistenersByParticipant",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"onStatsUpdated",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkConnectionQuality",{enumerable:!0,configurable:!0,writable:!0,value:({stats:e})=>{var t;const n=Date.now();for(const[r,i]of this.qualityByParticipant.entries()){const o=e.get("RTCInboundRTPVideoStream_"+i.ssrc);if(!o)continue;const s=null!==(t=o.timestamp)&&void 0!==t?t:n,a=o.framesDecoded||0;if(a!==i.lastFramesDecoded)i.lastFramesDecoded=a,i.lastDecodedFrameTime=s,i.isVideoDegraded=!1,i.videoDegradedStartTime=-1;else if(!i.isVideoDegraded){const e=s-i.lastDecodedFrameTime>5e3,t=s-i.trackingStartTime<=1e4;e&&!t&&(this.logger.silly`${V(t?"transient":"full").constant()} degradation detected for participant ${to(r)}`,i.isVideoDegraded=!0,i.videoDegradedStartTime=s)}}this.onStatsUpdated.notifyListeners(this)}}),this.logger=t.begin`ConnectionQualityTracker`(),this.unschedule=e.schedule("connection quality tracker",this.checkConnectionQuality,n)}updateParticipants(e){const{unlistenersByParticipant:t}=this,n=new Map(t);for(const t of e){const{participantId:e}=t;n.delete(e),this.trackParticipant(t)}for(const[e,r]of n)r(),t.delete(e),this.qualityByParticipant.delete(e)}trackParticipant(e){const{participantId:t}=e;this.updateTrackerForParticipant(e);const n=e.onChange.listen((t,n)=>{n!==ql.newVideoOrAudioTrack&&n!==ql.isVideoEnabled||this.updateTrackerForParticipant(e)});this.unlistenersByParticipant.set(t,n)}updateTrackerForParticipant(e){const{qualityByParticipant:t}=this,{participantId:n}=e,r=function(e){const{videoTrack:t}=e;return null==t?void 0:t.ssrc}(e);if(void 0===r||!e.isVideoEnabled)return this.logger.silly`lost ssrc for participant ${to(n)}`,void t.delete(n);const i=t.get(n);if(i)this.logger.silly`updated ssrc for participant ${to(n)} to ssrc ${Pa(r)}`,i.ssrc=r;else{this.logger.silly`tracking participant ${to(n)} with ssrc ${Pa(r)}`;const e=Date.now(),i={ssrc:r,lastDecodedFrameTime:e,trackingStartTime:e,lastFramesDecoded:0,isVideoDegraded:!1,videoDegradedStartTime:-1};t.set(n,i)}}getQualityForParticipant(e){const{participantId:t}=e;if(!t)return Fl;const n=this.qualityByParticipant.get(t);return n&&n.isVideoDegraded?{isVideoDegraded:!0,videoDegradedStartTime:n.videoDegradedStartTime}:Fl}stop(){var e;null===(e=this.unschedule)||void 0===e||e.call(this),this.unschedule=void 0,this.unlistenersByParticipant.forEach(e=>e()),this.unlistenersByParticipant.clear(),this.qualityByParticipant.clear()}}class Hl{constructor(e=!1){Object.defineProperty(this,"resolvable",{enumerable:!0,configurable:!0,writable:!0,value:null}),e&&this.acquireLock()}async acquireLock(){for(;this.resolvable;)await this.resolvable.promise;this.resolvable=Dr()}async release(){const{resolve:e}=this.resolvable;this.resolvable=null,e()}async withLock(e){try{return await this.acquireLock(),await e()}finally{this.release()}}}function Wl(e){const t=e.streamGroups.flatMap(e=>e.streams).map(e=>e.streamID).join();return e.streamGroups.flatMap(n=>n.streams.map(r=>[e,n,r,t]))}function Ql(e){return{ntpTime:e.ntpTime,streamGroups:e.streamGroups.map(e=>ol(e))}}var zl,Jl;function Yl(e){return{...e}}function Zl(e){return{cname:e.cname,participantID:e.participantID,media:Ql(e.media)}}function Xl(e){return{connectionParameters:e.connectionParameters?Yl(e.connectionParameters):void 0,us:Zl(e.us),them:e.them.map(e=>Zl(e)),dataChannelMID:e.dataChannelMID}}function ed(e){return e.them.flatMap(t=>Wl(t.media).map(([n,r,i,o])=>[e,t,n,r,i,o]))}function td(e){return Wl(e.us.media).map(([t,n,r,i])=>[e,e.us,t,n,r,i])}function nd(e){return{us:td(e),them:ed(e)}}!function(e){e[e.ANY=0]="ANY",e[e.ACTIVE=1]="ACTIVE",e[e.PASSIVE=2]="PASSIVE"}(zl||(zl={}));class rd{constructor(e,t){Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}async waitFor(e,t=this.timeout){const n=this.map.get(e);if(n)return n.promise;const{promise:r,resolve:i}=Dr(),o=Fn(r,t,this.message);this.map.set(e,{promise:o,resolve:i});const s=await o;return this.map.delete(e),s}resolve(e,t){const n=this.map.get(e);n&&n.resolve(t)}has(e){return this.map.has(e)}delete(e){return this.map.delete(e)}}!function(e){e[e.Pending=0]="Pending",e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.RequestClose=3]="RequestClose"}(Jl||(Jl={}));class id extends Is{constructor(e,t,n,r){super(),Object.defineProperty(this,"delegate",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"provider",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"dataChannel",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"sessionDescription",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"waitingOnRepliesWithUUIDs",{enumerable:!0,configurable:!0,writable:!0,value:new rd(Se`Timeout waiting on reply`,1e4)}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this.provider).child`QRDataChannel`.id`${this.sessionDescription}`().package`Media`.subsystem`QR`.category`DataChannel`}),Object.defineProperty(this,"openResolver",{enumerable:!0,configurable:!0,writable:!0,value:Dr()}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Jl.Pending}),n.addEventListener("close",()=>{this.logger.info`Data Channel closed`,this.state=Jl.Closed}),n.addEventListener("error",e=>{this.state!==Jl.RequestClose&&this.logger.error`Data Channel error: ${e.error}`}),n.addEventListener("message",e=>{this.logger.info`Got Data Channel message`,this.handleIncomingMessage(e.data)}),n.addEventListener("open",()=>{this.logger.info`Data Channel open`,this.state=Jl.Open,this.openResolver.resolve(this)}),"open"===n.readyState&&(this.logger.info`Data Channel already open`,this.openResolver.resolve(this),this.state=Jl.Open)}get isClosed(){return this.state===Jl.Closed}get isOpen(){return this.state===Jl.Open}ready(){return this.openResolver.promise}sendDataMessage(e,t){return this.logger.debug`Building data channel message`,this.sendMessage({uuid:Yr(),innerMessage:"dataMessage",dataMessage:{data:t,...e}})}sendMessage(e){const t=Zr(e.uuid),n=(async()=>{await this.ready(),this.logger.debug`Encoding data channel message`;const t=mo(Ac.QuickRelayWebProtocolMessage,e);"open"===this.dataChannel.readyState?(this.logger.debug`Sending data channel message`,this.dataChannel.send(t)):"closing"!==this.dataChannel.readyState&&this.logger.warn`QRDataChannel is not in the open state to send the message, readyState is:${V(this.dataChannel.readyState).constant()}`})();return{response:async e=>(await n,this.waitingOnRepliesWithUUIDs.waitFor(t,e))}}async handleIncomingMessage(e){const t=yo(Ac.QuickRelayWebProtocolMessage,new Uint8Array(e));if(t instanceof Error)return this.logger.warn`Could not parse message protobuf`,t;const n=Zr(t.uuid);n instanceof Error||!this.waitingOnRepliesWithUUIDs.has(n)||this.waitingOnRepliesWithUUIDs.resolve(n,t);const r=t.dataMessage;return r&&r.data&&null!==r.participantId&&void 0!==r.participantId?(this.logger.debug`Is a control channel message for ${to(r.participantId)}. Handing to delegate...`,this.delegate.handleIncomingControlChannelMessage(da(r.participantId),t)):this.dispatch(t)}close(){this.state=Jl.RequestClose,this.dataChannel.close()}}class od{constructor(){Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"reuseKeys",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"pool",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"nextUnallocatedID",{enumerable:!0,configurable:!0,writable:!0,value:0})}allocateIDWithReuseKey(e){for(let t=0;t<this.pool.length;t++)if(this.reuseKeys.get(this.pool[t])===e){const e=this.pool[t];return this.pool.splice(t,1),e}const t=this.nextUnallocatedID++;return this.reuseKeys.set(t,e),t}get(e,t=null){var n;const r=null!==(n=this.map.get(e))&&void 0!==n?n:null;if(null!==r||null===t)return r;const i=this.allocateIDWithReuseKey(t);return this.map.set(e,i),i}assignIDsForKeys(e){const t=new Set(e.map(e=>e.key));for(const[e,n]of this.map)t.has(e)||this.pool.push(n);const n=this.map,r=new Map;for(const{key:t,reuseKey:i}of e){const e=n.get(t);void 0!==e?r.set(t,e):r.set(t,this.allocateIDWithReuseKey(i))}this.map=r}reserveIDs(e){this.map.clear();for(const{id:t,key:n,reuseKey:r}of e)this.map.set(n,t),this.reuseKeys.set(t,r);this.nextUnallocatedID=Math.max(...e.map(e=>e.id))+1}}class sd{constructor(){Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:new od})}reserveMIDs(e){const t=nd(e).us.map(e=>({id:Number(e[4].mid),key:ad(e),reuseKey:ld(e)})).concat({id:Number(e.dataChannelMID),key:"webrtc-datachannel",reuseKey:"data:webrtc-datachannel`"});this.map.reserveIDs(t)}midFor(e,t,n){const r=this.map.get(cd(e,t,n));return null===r?r:""+r}midForHandle(e){const t=this.map.get(ad(e));return null===t?t:""+t}assignMIDs(e){const t=Xl(e),n=nd(t),r=[...n.them,...n.us];this.map.assignIDsForKeys([...r.map(e=>({key:ad(e),reuseKey:ld(e)})),{key:"webrtc-datachannel",reuseKey:"data:webrtc-datachannel`"}]);for(const e of r){const t=this.map.get(ad(e)),[,,,,n]=e;n.mid=""+t}return t}}function ad([,e,,,t,n]){return cd(e.cname,t.streamID,n)}function cd(e,t,n){return`${e}:${n}:${t}`}function ld(e){return ad(e)}class dd{constructor(e){if(Object.defineProperty(this,"used",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"max",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e>32)throw new Ce(Se`bit length out of bounds`);this.max=2**e-1}n(){let e=1e3;for(;e>0;){const t=crypto.getRandomValues(new Uint32Array(1))[0]&this.max;if(!this.used.has(t))return this.used.add(t),t;e--}throw new Ce(Se`tried 1,000 times but could not find an unused number`)}}function ud(e,t){const n=[];for(const r of e)r instanceof Error?t.push(r):n.push(r);return n}const pd={key:"rtcp",port:"9",networkType:"IN",addressType:"IP4",address:"0.0.0.0"},hd={rtcp:pd,multiplex:!0,reducedSize:!0,protocol:"UDP/TLS/RTP/SAVPF",attributes:[],iceMismatch:!1,restrictionsByID:{},bandwidthInfo:[]},fd={version:"0",bandwidthInfo:[],attributes:[],sessionName:"-",timeDescriptions:[{time:"0 0",repeatTimes:[]}],iceLite:!0},{twcc:gd}=fn;var bd;!function(e){e[e.Offer=1]="Offer",e[e.Answer=2]="Answer",e[e.ForUs=4]="ForUs",e[e.ForThem=8]="ForThem",e[e.OfferForUs=5]="OfferForUs",e[e.OfferForThem=9]="OfferForThem",e[e.AnswerForUs=6]="AnswerForUs",e[e.AnswerForThem=10]="AnswerForThem"}(bd||(bd={}));class yd{constructor(e=new Ho){Object.defineProperty(this,"provider",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"versionCounter",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"mediaConfig",{enumerable:!0,configurable:!0,writable:!0,value:va(this.provider)})}timestamp(){const[e]=Cl(),t=BigInt(this.versionCounter);return BigInt(e)<<BigInt(32)|t}to(e,t){const{us:n,them:r}=nd(e),i=[],o=ud(n.map(e=>this.mediaDescriptionForStream(e,!0,t)).flat(2),i),s=ud(r.map(e=>this.mediaDescriptionForStream(e,!1,t)).flat(2),i),a=[...ud(e.connectionParameters&&e.dataChannelMID?[this.mediaDescriptionForDataChannel(e)].flat(2):[],i),...o,...s].sort((e,t)=>Number(e.mid)-Number(t.mid));return[{...fd,origin:this.createSessionOrigin(),connectionInfo:[],groups:[{key:"group",identifiers:a.map(e=>e.mid),semantics:"BUNDLE"}],mediaDescriptions:a},i]}portsForStream(){return{firstPort:9}}createSessionConnectionInfo(e){return["IN IP4 127.0.0.1"]}createSessionOrigin(){return{username:"-",sessionID:this.timestamp().toString(10),sessionVersion:this.timestamp().toString(10),networkType:"IN",addressType:"IP4",address:"127.0.0.1"}}setupForRole(e){switch(e){case zl.ANY:return"actpass";case zl.ACTIVE:return"active";case zl.PASSIVE:return"passive"}}createCandidates(e){const t=e.connectionParameters;return t?[`1 1 udp 1 ${t.serverIP} ${t.serverPort} typ host`,...fn.tcpFallback?[`1 1 tcp 1 ${t.serverIP} 80 typ host`]:[]]:[]}mediaDescriptionForDataChannel(e){const t=e.connectionParameters;if(!t)return new Ce(Se`data channel definition requires connectionParameters`);const{sctpPort:n,maxMessageSize:r,role:i}=t;return[{type:"application",formats:{"webrtc-datachannel":{id:"webrtc-datachannel",feedbackCapabilities:[],parameters:void 0}},formatOrder:["webrtc-datachannel"],rtcp:pd,setup:this.setupForRole(i),multiplex:!0,reducedSize:!0,protocol:"UDP/DTLS/SCTP",attributes:[],iceMismatch:!1,sourceGroups:[],restrictionsByID:{},streamsByID:{},bandwidthInfo:[],firstPort:9,sctpPort:n,sctpMaxMessageSize:r,connectionInfo:this.createSessionConnectionInfo(e),candidate:this.createCandidates(e),ice:{options:["trickle"],...e.connectionParameters?{ufrag:e.connectionParameters.iceUserFragment,password:e.connectionParameters.icePassword}:{}},fingerprint:this.fingerprintDescriptionForSession(e),mid:e.dataChannelMID,sourcesByID:{},extensionsByID:{}},[]]}mediaDescriptionForStream([e,t,n,r,o],s,a){var c,l,d;if(!function(e){return e.groupID===i.GroupID.WebCompatibleCamera||e.groupID===i.GroupID.WebCompatibleMicrophone}(r))return new Ce(Se`Stream is not web-compatible`);const u=a&bd.ForThem,p=s!==!!u,{ssrc:h,repairSsrc:f,rtxSsrc:g}=o,b=[],y=Object.fromEntries(ud(o.extensions.map(e=>this.extensionDescriptionForExtension(e)),b).map(e=>[e.localID,e])),m=ud(o.codecs.filter(e=>!p||p&&e.codecType!==i.Codecs.RTX.codecType).map(e=>this.codecDescriptionForCodec(o,e,s)),b).map(e=>[e.id,e]),v=Object.fromEntries(m);if(0===m.length)return new Ce(Se`no usable codecs for m-line`);const w=o.mid||"-",P=o.mid||"1234",S=null!==h&&"number"==typeof f?[{key:"ssrc-group",semantics:"FID",ssrcs:[h,f]}]:[],$=null!==h&&"number"==typeof f&&"number"==typeof g?[{key:"ssrc-group",semantics:"FID",ssrcs:[h,g,f]}]:[],O=null!==h&&"number"==typeof f?{[h]:{id:h,cname:t.cname,attributes:[{key:"msid",msid:w,appData:P},{key:"mslabel",mslabel:w},{key:"label",label:P}],previousSSRCs:[],formats:{}},[f]:{id:f,cname:t.cname,attributes:[{key:"msid",msid:w,appData:P}],previousSSRCs:[],formats:{}}}:null!==h?{[h]:{id:h,cname:t.cname,attributes:[],previousSSRCs:[],formats:{}}}:{},k=null!==h&&"number"==typeof f&&"number"==typeof g?{[h]:{id:h,cname:t.cname,attributes:[{key:"msid",msid:w,appData:P},{key:"mslabel",mslabel:w},{key:"label",label:P}],previousSSRCs:[],formats:{}},[f]:{id:f,cname:t.cname,attributes:[{key:"msid",msid:w,appData:P}],previousSSRCs:[],formats:{}},[g]:{id:g,cname:t.cname,attributes:[{key:"msid",msid:w,appData:P}],previousSSRCs:[],formats:{}}}:null!==h?{[h]:{id:h,cname:t.cname,attributes:[],previousSSRCs:[],formats:{}}}:{};return[{type:r.groupID===el.WebCompatibleCamera?"video":"audio",direction:s&&u||!s&&!u?"sendonly":"recvonly",...hd,...this.portsForStream(),setup:this.setupForRole(null!==(l=null===(c=e.connectionParameters)||void 0===c?void 0:c.role)&&void 0!==l?l:zl.ANY),connectionInfo:this.createSessionConnectionInfo(e),candidate:this.createCandidates(e),ice:{options:["trickle"],...e.connectionParameters?{ufrag:e.connectionParameters.iceUserFragment,password:e.connectionParameters.icePassword}:{}},fingerprint:this.fingerprintDescriptionForSession(e),mid:null!==(d=o.mid)&&void 0!==d?d:void 0,extensionsByID:y,formats:v,streamsByID:null!==h&&"number"==typeof f?{1:{key:"msid",msid:w,appData:P}}:{},sourceGroups:p?S:$,sourcesByID:p?O:k},b]}fingerprintDescriptionForSession(e){if(e.connectionParameters)return{key:"fingerprint",hashFunction:"sha-256",bytes:e.connectionParameters.certificateFingerprint}}codecDescriptionForCodec(e,t,n){var r,o;const s={id:t.rtpPayload.toString(10),feedbackCapabilities:[]};if(t.codecType===Gc.VCMediaNegotiationBlobStreamGroupCodec.CodecType.H264){if(n&&!this.mediaConfig.CanEncodeH264)return new Ce(Se`device cannot encode h264`);if(!n&&!this.mediaConfig.CanDecodeH264)return new Ce(Se`device cannot decode h264`)}t.rtcpFlags&i.CodecRTCPFlag.NACK&&s.feedbackCapabilities.push({type:"nack",valueType:void 0}),t.rtcpFlags&i.CodecRTCPFlag.PLI&&s.feedbackCapabilities.push({type:"nack",valueType:"pli"}),t.rtcpFlags&i.CodecRTCPFlag.FIR&&s.feedbackCapabilities.push({type:"ccm",valueType:"fir"}),t.codecType!==i.Codecs.RTX.codecType&&s.feedbackCapabilities.push({type:"goog-remb",valueType:void 0}),n&&gd&&s.feedbackCapabilities.push({type:"transport-cc",valueType:void 0});const a=[];return null!==t.pTime&&a.push("ptime="+t.pTime),t.mediaFlags&i.CodecMediaFlag.UseInBandFEC&&a.push("useinbandfec=1"),t.mediaFlags&i.CodecMediaFlag.H264LevelAsymmetryAllowed&&a.push("level-asymmetry-allowed=1"),null!==t.packetizationMode&&a.push("packetization-mode="+t.packetizationMode),null!==t.profileLevelId&&a.push("profile-level-id="+t.profileLevelId.toString(16)),t.codecType===i.Codecs.RTX.codecType&&a.push("apt="+((null===(r=e.codecs.find(e=>e.codecType!==i.CodecType.Data&&e.codecType!==i.CodecType.Invalid&&e.codecType!==i.CodecType.RTX))||void 0===r?void 0:r.rtpPayload)||al)),s.parameters=a.join(";"),s.encoding={encodingName:ll[t.codecType],clockRate:e.rtpSampleRate,parameters:null!==(o=t.encodingParameters)&&void 0!==o?o:void 0},s}extensionDescriptionForExtension(e){const t=ul.get(e.extensionType);return t?{key:"extmap",localID:e.extensionID,attributes:e.attributes,uri:t}:new Ce(Se`unknown extension type: ${e.extensionType}`)}}a(()=>new yd);function md(e,t=[]){const n=[...t],r=Object.keys(e);for(const e of r)n.includes(+e)||n.includes(""+e)||n.push(e);return n}const vd=/[-0-9A-Za-z!#$%&'*+.^_`{|}~]+/.source,wd=/[\u0021-\u007e\u0080-\u00ff]/.source,Pd=new RegExp(`(${vd})(.*)?$`);function Sd(e){let t=e;return function(){if(!t)return;const e=function(e){const t=e.match(Pd);if(!t)return;const[,n,r]=t;return[n,r]}(t);if(!e)return;const[n,r]=e;return""!==n.trim()?(t=r,n.trim()):void 0}}function $d(e){const t=[];for(;;){const n=e();if(!n)break;t.push(n)}return t}const Od=`^(${vd}) ([0-9]+)(/([0-9]+))? (${vd}(/${vd})*) (.*)$`;function kd(e){const t=e.match(new RegExp(Od));if(!t)throw new Ce(Se`SDP could not parse m-line: ${e}`);const[,n,r,,i,o,,s]=t,a=$d(Sd(s)),c={},l=[];for(const e of a)c[e]={id:e,feedbackCapabilities:[],parameters:void 0},l.push(e);return{type:n,firstPort:parseInt(r),numberOfPorts:void 0!==i?parseInt(i):void 0,protocol:o,formats:c,formatOrder:l}}function Id(e){const t=md(e.formats,e.formatOrder),n=void 0!==e.numberOfPorts?`${e.firstPort}/${e.numberOfPorts}`:""+e.firstPort;return`${e.type} ${n} ${e.protocol} ${t.join(" ")}`}function Cd(e,t){const n=e.match(t);if(!n)return[e];const r=n.index;return[e.substr(0,r),e.substr(r+n[0].length)]}function Rd(...e){return e}Rd("cname","candidate","formats","formatOrder","sourceGroups","sourcesByID","sourceOrder","direction","simulcast","rtcp","mid","setup","fingerprint","multiplex","restrictionsByID","restrictionIDOrder","streamsByID","streamOrder","extensionsByID","extensionOrder","reducedSize","ice","iceMismatch","previousSSRCs","label","mslabel");const Md=Rd("direction","iceLite","groups","setup","fingerprint","extensionsByID","extensionOrder","ice","reducedSize","title","connectionInfo","bandwidthInfo","encryptionKey","msidSemantic","rtcp","groups","multiplex","streamsByID","streamOrder","reducedSize"),Td=Rd("type","candidate","firstPort","numberOfPorts","protocol","title","connectionInfo","bandwidthInfo","encryptionKey","groups","setup","fingerprint","ice","reducedSize","sctpPort","sctpMaxMessageSize","formats","formatOrder","direction","iceMismatch","sourceGroups","sourcesByID","sourceOrder","simulcast","mid","multiplex","restrictionsByID","restrictionIDOrder","streamsByID","streamOrder","extensionsByID","extensionOrder","reducedSize","label","mslabel","rtcp"),Dd=Rd("cname","formats","formatOrder","previousSSRCs","label","mslabel","streamsByID","streamOrder");function Ed(e){return{read:e=>({key:e}),write:()=>({key:e,value:""})}}function Ad(e,t,n,r){return{read:(e,r)=>({key:e,[t]:n(r)}),write(e){const n=e.key,i=e[t];return{key:n,value:r(i)}}}}function jd(e,t){return Ad(0,t,e=>parseInt(e),e=>e.toString(10))}function Nd(e,t,n=!0){return Ad(0,t,e=>n?e.trim():e,e=>e)}function Bd(e,t,n){return Ad(0,t,t=>{if(!n.includes(t))throw new Ce(Se`SDP invalid value for ${e}. Got ${t}, expected one of ${n.join(", ")}`);return t},e=>e)}const _d={cat:Nd(0,"category"),keywds:Nd(0,"keywords"),tool:Nd(0,"nameAndVersion"),ptime:jd(0,"packetDuration"),maxptime:jd(0,"maximumPacketDuration"),candidate:Nd(0,"candidate"),rtpmap:{read(e,t){const n=t.trim().match(new RegExp(`([0-9]+) (${vd})/(${vd})(/(${vd}))?`));if(!n)throw new Ce(Se`Could not parse SDP rtpmap attribute: ${t}`);const[,r,i,o,,s]=n;return{key:"rtpmap",payloadTypeNumber:parseInt(r,10),encodingName:i,clockRate:parseInt(o,10),encodingParameters:s}},write:({key:e,payloadTypeNumber:t,encodingName:n,clockRate:r,encodingParameters:i})=>({key:e,value:`${t} ${n}/${r}${i?"/"+i:""}`})},orient:Bd("orient","orientation",["portrait","landscape","seascape"]),type:Bd("type","conferenceType",["broadcast","meeting","moderated","test","H332"]),charset:Nd(0,"charset"),sdplang:Nd(0,"sdpLanguage"),lang:Nd(0,"language"),framerate:jd(0,"framerate"),quality:jd(0,"quality"),fmtp:{read(e,t){const n=t.match(new RegExp(`(${vd}) ([^\0]*)`));if(!n)throw new Ce(Se`Could not parse SDP fmtp attribute: ${t}`);const[,r,i]=n;return{key:"fmtp",format:r,parameters:i}},write:({key:e,format:t,parameters:n})=>({key:e,value:`${t} ${n}`})},sendrecv:Ed("sendrecv"),recvonly:Ed("recvonly"),sendonly:Ed("sendonly"),inactive:Ed("inactive")},xd={msid:{read(e,t){const n=Sd(t),r=n(),i=n();if(!r)throw new Ce(Se`msid attribute must have an msid`);return{key:e,msid:r,appData:i}},write:({key:e,msid:t,appData:n})=>({key:e,value:[t,n].join(" ")})},"msid-semantic":{read(e,t){const n=Sd(t),r=n(),i=$d(n);if(!r)throw new Ce(Se`a=group expects \`semantics\``);return{key:e,semantics:r,identifiers:i}},write:({key:e,semantics:t,identifiers:n})=>({key:e,value:`${t} ${n.join(" ")}`})}};const Ud=[["max-width","maxWidth"],["max-height","maxHeight"],["max-fps","maxFPS"],["max-fs","maxFS"],["max-br","maxBitrate"],["max-pps","maxPPS"],["max-bpp","maxBPP"]],Ld=Ud.reduce((e,[t,n])=>(e[t]=n,e),{}),Kd=(Ud.reduce((e,[t,n])=>(e[n]=t,e),{}),{rid:{read(e,t){function n(e){const n=t.match(e);if(!n){const e=[t,void 0];return t="",e}const r=n.index,i=t.substr(0,r);return t=t.substr(r+n[0].length),[i,n[0]]}const[r]=n(/ /),[i]=n(/ /);let o=[];if((t=t.trim()).startsWith("pt=")){t=t.replace(/^pt=/,"");const[e]=n(/;/);o=e.split(",")}const s=(t=t.trim()).length>0?t.split(";"):[],a={key:e,id:r,direction:i,formats:o,dependsOn:[],unknownParameters:{}};for(const e of s){const[t,n=""]=Cd(e,/=/);"depend"===t?a.dependsOn.push(...n.split(",")):t in Ld?a[Ld[t]]=parseFloat(n):a.unknownParameters[t]=n}return a},write(e){const t=[];for(const[n,r]of Ud)r in e&&t.push(`${n}=${e[r]}`);e.dependsOn.length>0&&t.push("depend="+e.dependsOn.join(","));for(const n in e.unknownParameters)t.push(`${n}=${e.unknownParameters[n]}`);const n=[],r=e.formats;r.length>0&&n.push("pt="+r.join(",")),t.length>0&&n.push(t.join(";"));let i=`${e.id} ${e.direction}`;return n.length>0&&(i+=" "+n.join(";")),{key:e.key,value:i}}}}),qd={"sctp-port":jd(0,"sctpPort"),"max-message-size":jd(0,"sctpMaxMessageSize")},Vd={simulcast:{read(e,t){const n=t.split(" "),r={key:"simulcast",send:[],receive:[]};for(;;){const e=n.shift();if(!e)break;const t=n.shift();if(!t)break;const i=t.split(";");let o;if("send"===e)o=r.send;else{if("recv"!==e)throw new Ce(Se`Unknown simulcast direction: ${e}`);o=r.receive}for(const e of i){const t={rids:[]};o.push(t);const n=e.split(",");for(const e of n)t.rids.push(e.startsWith("~")?{rid:e.substr(1),enabled:!1}:{rid:e,enabled:!0})}}return r},write({key:e,send:t,receive:n}){const r=[];t.length>0&&r.push("send "+t.map(e=>e.rids.map(({rid:e,enabled:t})=>t?e:"~"+e).join(",")).join(";")),n.length>0&&r.push("recv "+n.map(e=>e.rids.map(({rid:e,enabled:t})=>t?e:"~"+e).join(",")).join(";"));return{key:e,value:r.join(" ")}}}},Fd={"ice-lite":Ed("ice-lite"),"ice-mismatch":Ed("ice-mismatch"),"ice-pwd":{read:(e,t)=>({key:"ice-pwd",password:t.trim()}),write:({key:e,password:t})=>({key:e,value:t})},"ice-ufrag":{read:(e,t)=>({key:"ice-ufrag",ufrag:t.trim()}),write:({key:e,ufrag:t})=>({key:e,value:t})},"ice-options":{read:(e,t)=>({key:"ice-options",tags:t.split(/ /g).map(e=>e.trim()).filter(e=>!!e)}),write:({key:e,tags:t})=>({key:e,value:t.join(" ")})}},Gd={"rtcp-mux":Ed("rtcp-mux")},Hd={"rtcp-fb":{read(e,t){const n=Sd(t);const r=function(){const e=n();if(!e)throw new Ce(Se`SDP rtcp-fb: could not parse; espected a format, got nothing.`);return e}(),i=function(){const e=n();if(!e)throw new Ce(Se`SDP could not parse rtcp-fb attribute: ${i}`);if("trr-int"===e){return{type:e,minimumInterval:parseInt(n(),10)}}{const t=n(),r=$d(n).join("").trim();return{type:e,valueType:t,...r.length>0?{payload:r}:{}}}}();return{key:"rtcp-fb",format:r,value:i}},write({key:e,format:t,value:n}){const r=n,i=n,o=[t];return"trr-int"===n.type?o.push(""+r.minimumInterval):(o.push(i.type),i.valueType&&o.push(i.valueType),i.payload&&o.push(i.payload)),{key:e,value:o.join(" ")}}}},Wd={setup:Bd("setup","setup",["active","passive","actpass","holdconn"])},Qd={fingerprint:{read(e,t){const n=t.match(new RegExp(`^(${vd}) (.*)$`));if(!n)throw new Ce(Se`SDP could not parse fingerprint: ${t}`);return{key:"fingerprint",hashFunction:n[1],bytes:n[2]}},write:({key:e,hashFunction:t,bytes:n})=>({key:e,value:`${t} ${n}`})}},zd={label:Nd(0,"label"),mslabel:Nd(0,"mslabel")},Jd={extmap:{read(e,t){const n=t.match(new RegExp(`^([0-9]+)(/(${vd}))? ([^ ]+)( (.*))?$`));if(!n)throw new Ce(Se`SDP could not parse extmap: ${t}`);const[,r,,i,o,,s]=n;if("sendonly"!==i&&"recvonly"!==i&&"sendrecv"!==i&&"inactive"!==i&&void 0!==i)throw new Ce(Se`SDP extmap got invalid direction ${i}: "sendonly" | "recvonly" | "sendrecv" | "inactive"`);return{key:"extmap",localID:parseInt(r),direction:i,uri:o,attributes:s}},write:({key:e,localID:t,direction:n,uri:r,attributes:i})=>({key:e,value:`${t}${n?"/"+n:""} ${r} ${null!=i?i:""}`.trim()})}},Yd={"rtcp-rsize":Ed("rtcp-rsize")},Zd={"ssrc-group":{read(e,t){const n=Sd(t),r=n(),i=$d(n).map(e=>parseInt(e,10));if(!r)throw new Ce(Se`a=group expects \`semantics\``);return{key:e,semantics:r,ssrcs:i}},write:({key:e,semantics:t,ssrcs:n})=>({key:e,value:`${t} ${n.join(" ")}`})},ssrc:{read(e,t){const[n,r]=Cd(t,/ /);return{key:e,ssrc:parseInt(n,10),rawAttribute:r}},write:({key:e,ssrc:t,rawAttribute:n})=>({key:e,value:`${t} ${n}`})},cname:Nd(0,"cname",!0),"previous-ssrc":Ad(0,"previousSSRCs",e=>e.split(" ").map(e=>parseInt(e,10)),e=>e.join(" "))},Xd={mid:{read:(e,t)=>({key:e,identifier:t}),write:({key:e,identifier:t})=>({key:e,value:t})},group:{read(e,t){const n=Sd(t),r=n(),i=$d(n);if(!r)throw new Ce(Se`a=group expects \`semantics\``);return{key:e,semantics:r,identifiers:i}},write:({key:e,semantics:t,identifiers:n})=>({key:e,value:`${t} ${n.join(" ")}`})}},eu={group:Xd.group,mid:Xd.mid,msid:xd.msid,"msid-semantic":xd["msid-semantic"],rtcp:{rtcp:{read(e,t){const n=$d(Sd(t)),[r,i,o,s]=n;return{key:"rtcp",port:r,networkType:i,addressType:o,address:s}},write:({key:e,port:t,networkType:n,addressType:r,address:i})=>({key:e,value:[t,n,r,i].filter(e=>!!e).join(" ")})}}.rtcp,candidate:_d.candidate,"ice-lite":Fd["ice-lite"],"ice-mismatch":Fd["ice-mismatch"],"ice-options":Fd["ice-options"],"ice-pwd":Fd["ice-pwd"],"ice-ufrag":Fd["ice-ufrag"],"sctp-port":qd["sctp-port"],"max-message-size":qd["max-message-size"],"rtcp-mux":Gd["rtcp-mux"],cat:_d.cat,keywds:_d.keywds,tool:_d.tool,ptime:_d.ptime,maxptime:_d.maxptime,rtpmap:_d.rtpmap,orient:_d.orient,type:_d.type,charset:_d.charset,sdplang:_d.sdplang,lang:_d.lang,framerate:_d.framerate,quality:_d.quality,fmtp:_d.fmtp,sendrecv:_d.sendrecv,recvonly:_d.recvonly,sendonly:_d.sendonly,inactive:_d.inactive,setup:Wd.setup,fingerprint:Qd.fingerprint,extmap:Jd.extmap,"rtcp-rsize":Yd["rtcp-rsize"],"rtcp-fb":Hd["rtcp-fb"],rid:Kd.rid,simulcast:Vd.simulcast,ssrc:Zd.ssrc,cname:Zd.cname,"previous-ssrc":Zd["previous-ssrc"],"ssrc-group":Zd["ssrc-group"],label:zd.label,mslabel:zd.mslabel};function tu(e){return e.map(e=>{const[t,n]=Cd(e,/:/),r=eu[t];return r?r.read(t,n||""):{key:t,value:n||""}})}function nu(e,t){return void 0!==e?t(e):void 0}const ru={cname:{reduce:(e,t)=>e.cname=t.cname,expand:e=>nu(e.cname,e=>({cname:e}))},candidate:{reduce:(e,t)=>e.candidate.push(t.candidate),expand:e=>{var t;return null===(t=e.candidate)||void 0===t?void 0:t.map(e=>({candidate:e}))}},rtcp:{reduce:(e,t)=>e.rtcp=t,expand:e=>e.rtcp},"msid-semantic":{reduce:(e,t)=>e.msidSemantic=t,expand:e=>e.msidSemantic},"ice-lite":{reduce:(e,t)=>e.iceLite=!0,expand:e=>nu(e.iceLite,e=>e?{}:void 0)},group:{reduce:(e,t)=>e.groups.push(t),expand:e=>e.groups},label:{reduce:(e,t)=>e.label=t.label,expand:e=>nu(e.label,e=>({label:e}))},mslabel:{reduce:(e,t)=>e.mslabel=t.mslabel,expand:e=>nu(e.mslabel,e=>({mslabel:e}))},"previous-ssrc":{reduce:(e,t)=>e.previousSSRCs.push(...t.previousSSRCs),expand:e=>nu(e.previousSSRCs,e=>e.length>0?{previousSSRCs:e}:void 0)},ssrc:{reduce:(e,t)=>function(e,t){return e.sourcesByID[t]||(e.sourcesByID[t]={id:t,cname:void 0,attributes:[],previousSSRCs:[],formats:{}},e.sourceOrder=e.sourceOrder||[],e.sourceOrder.push(t)),e.sourcesByID[t]}(e,t.ssrc).attributes.push(...tu([t.rawAttribute])),expand:e=>{const t=[],n=e.sourcesByID;if(!n)return t;const r=md(n,e.sourceOrder);for(const e of r){const r=n[+e],i=[...au({...r,formats:Object.fromEntries(Object.entries(r.formats).filter(([e,t])=>!(!t.encoding&&0===t.feedbackCapabilities.length&&!t.parameters)))}),...r.attributes].map(t=>{const n=(eu[t.key]||(t.key,{read:(e,t)=>({key:e,value:t}),write:({key:e,value:t})=>({key:e,value:t})})).write(t);return{key:"ssrc",ssrc:+e,rawAttribute:`${n.key}:${n.value}`}});t.push(...i)}return t}},"ssrc-group":{reduce:(e,t)=>e.sourceGroups.push(t),expand:e=>nu(e.sourceGroups,e=>e)},"ice-ufrag":{reduce:(e,t)=>{e.ice=e.ice||{},e.ice.ufrag=t.ufrag},expand:e=>{var t;return nu(null===(t=e.ice)||void 0===t?void 0:t.ufrag,e=>({ufrag:e}))}},"ice-pwd":{reduce:(e,t)=>{e.ice=e.ice||{},e.ice.password=t.password},expand:e=>{var t;return nu(null===(t=e.ice)||void 0===t?void 0:t.password,e=>({password:e}))}},"ice-options":{reduce:(e,t)=>{e.ice=e.ice||{},e.ice.options=t.tags},expand:e=>{var t;return nu(null===(t=e.ice)||void 0===t?void 0:t.options,e=>({tags:e}))}},"ice-mismatch":{reduce:(e,t)=>{e.ice=e.ice||{},e.iceMismatch=!0},expand:e=>nu(e.iceMismatch,e=>e?{}:void 0)},setup:{reduce:(e,t)=>e.setup=t.setup,expand:e=>nu(e.setup,e=>({setup:e}))},"rtcp-mux":{reduce:(e,t)=>e.multiplex=!0,expand:e=>nu(e.multiplex,e=>e?{}:void 0)},"sctp-port":{reduce:(e,t)=>e.sctpPort=t.sctpPort,expand:e=>void 0!==e.sctpPort?{key:"sctp-port",sctpPort:e.sctpPort}:void 0},"max-message-size":{reduce:(e,t)=>e.sctpMaxMessageSize=t.sctpMaxMessageSize,expand:e=>void 0!==e.sctpMaxMessageSize?{key:"max-message-size",sctpMaxMessageSize:e.sctpMaxMessageSize}:void 0},sendrecv:{reduce:(e,t)=>e.direction="sendrecv",expand:e=>"sendrecv"===e.direction?{}:void 0},sendonly:{reduce:(e,t)=>e.direction="sendonly",expand:e=>"sendonly"===e.direction?{}:void 0},recvonly:{reduce:(e,t)=>e.direction="recvonly",expand:e=>"recvonly"===e.direction?{}:void 0},inactive:{reduce:(e,t)=>e.direction="inactive",expand:e=>"inactive"===e.direction?{}:void 0},msid:{reduce:(e,t)=>{e.streamOrder=e.streamOrder||[],e.streamOrder.push(t.msid),e.streamsByID[t.msid]=t},expand:e=>{const t=e.streamsByID||{};return md(t,e.streamOrder).map(e=>t[e])}},extmap:{reduce:(e,t)=>{e.extensionsByID[t.localID]||(e.extensionOrder=e.extensionOrder||[],e.extensionOrder.push(t.localID)),e.extensionsByID[t.localID]=t},expand:e=>{const t=e.extensionsByID||{};return md(t,e.extensionOrder).map(e=>t[+e])}},simulcast:{reduce:(e,t)=>e.simulcast=t,expand:e=>e.simulcast},mid:{reduce:(e,t)=>e.mid=t.identifier,expand:({mid:e})=>void 0!==e?{identifier:e}:void 0},rid:{reduce:(e,t)=>{e.restrictionsByID[t.id]||(e.restrictionIDOrder=e.restrictionIDOrder||[],e.restrictionIDOrder.push(t.id)),e.restrictionsByID[t.id]=t},expand:e=>{const t=e.restrictionsByID||{};return md(t,e.restrictionIDOrder).map(e=>t[e])}},fingerprint:{reduce:(e,t)=>e.fingerprint=t,expand:e=>e.fingerprint},"rtcp-rsize":{reduce:(e,t)=>e.reducedSize=!0,expand:e=>e.reducedSize?{}:void 0},"rtcp-fb":{reduce:(e,t)=>{const n=e.formats[t.format];if(!n)throw new Ce(Se`SDP found rtcp-fb attribute for undeclared format: ${JSON.stringify(t)}`);n.feedbackCapabilities.push(t.value)},expand:e=>{}},fmtp:{reduce:(e,t)=>{const n=e.formats[t.format];if(!n)throw new Ce(Se`SDP found fmtp attribute for undeclared format: ${JSON.stringify(t)}`);n.parameters=t.parameters},expand:e=>{}},rtpmap:{reduce:(e,t)=>{const n=e.formats[t.payloadTypeNumber];if(!n)throw new Ce(Se`SDP found rtpmap attribute for undeclared format: ${JSON.stringify(t)}`);n.encoding={encodingName:t.encodingName,clockRate:t.clockRate,parameters:t.encodingParameters}},expand:e=>{const t=e.formats;if(!t)return;return md(t,e.formatOrder).map(e=>{const n=t[e],r=[];n.encoding&&r.push({key:"rtpmap",payloadTypeNumber:+e,encodingName:n.encoding.encodingName,clockRate:n.encoding.clockRate,encodingParameters:n.encoding.parameters||""});for(const t of n.feedbackCapabilities)r.push({key:"rtcp-fb",value:t,format:e});return n.parameters&&r.push({key:"fmtp",format:""+e,parameters:n.parameters}),r}).flat()}}},iu=["group","msid-semantic","rtcp","candidate","ice-lite","ice-ufrag","ice-pwd","ice-options","fingerprint","setup","mid","ice-mismatch","extmap","sendonly","recvonly","sendrecv","inactive","cname","msid","mslabel","label","sctp-port","max-message-size","rtcp-mux","rtcp-rsize","orient","type","charset","lang","sdplang","framerate","quality","rtpmap","rtcp-fb","fmtp","ssrc-group","ssrc","previous-ssrc","rid","simulcast"];for(const e in ru)iu.indexOf(e)<0&&iu.push(e);function ou(e,t={},n=Object.keys(eu)){const r=new Set(n),i=[],o={candidate:[],formats:{},restrictionsByID:{},streamsByID:{},extensionsByID:{},sourcesByID:{},sourceGroups:[],previousSSRCs:[],groups:[],connectionInfo:[],bandwidthInfo:[],multiplex:!1,reducedSize:!1,iceMismatch:!1,iceLite:!1,...t};for(const t of e){const e=ru[t.key];e?e.reduce(o,t):i.push(t)}for(const e in o.sourcesByID){const t=o.sourcesByID[e],n={};for(const e in o.formats)n[e]={id:e,feedbackCapabilities:[]};const[r,i]=ou(t.attributes,{formats:n},Dd);if(r.formats=Object.fromEntries(Object.entries(r.formats).filter(([e,t])=>!(0===t.feedbackCapabilities.length&&!t.encoding&&!t.parameters))),t.attributes=i,t.cname=r.cname,!t.cname)throw new Ce(Se`SDP sources require cname attributes`);o.sourcesByID[e]={...t,...r}}for(const e in o)r.has(e)||e in t||delete o[e],void 0===o[e]&&delete o[e];return[o,i]}function su(e,t,n){return[n.expand(t)].flat().filter(e=>!!e).map(t=>({key:e,...t}))}function au(e){const t=[];for(const n of iu){const r=ru[n];if(!r)continue;const i=su(n,e,r);t.push(...i)}return t}function cu(e){const t=function(e){return e.split(/[\n\r]+/g).map(e=>Cd(e,/=/)).filter(e=>e.length>1)}(e);function n(e){return!!t[0]&&t[0][0]===e}function r(e){const[n,r]=t.shift();if(n!==e)throw new Ce(Se`SDP parser expected ${e}, got ${n}`);return r}function i(e){if(t[0][0]!==e)return;const[,n]=t.shift();return n}const o=r("v"),s=function(e){const t=`^(${wd}) ([0-9]+) ([0-9]+) (${vd}) (${vd}) (${vd})$`,n=e.match(new RegExp(t));if(!n)throw new Ce(Se`Failed to parse SDP Origin: ${V(e).user()}`);return{username:n[1],sessionID:n[2],sessionVersion:n[3],networkType:n[4],addressType:n[5],address:n[6]}}(r("o")),a=r("s"),c=i("i"),l=i("u"),d=i("e"),u=i("p"),p=[];for(;n("c");)p.push(r("c"));const h=[];for(;n("b");)h.push(r("b"));const f=[];for(;n("t");){const e=r("t"),t=[];for(;n("r");)t.push(r("r"));f.push({time:e,repeatTimes:t})}if(0===f.length)throw new Ce(Se`Expected at least one time description.`);const g=i("z"),b=i("k"),y=[];for(;n("a");)y.push(r("a"));const m=tu(y),v=[];for(;n("m");){const e=r("m"),t=i("i"),o=[];for(;n("c");)o.push(r("c"));if(0===p.length&&0===o.length)throw new Ce(Se`Either root or media connection info must be present`);const s=[];for(;n("b");)s.push(r("b"));const a=i("k"),c=[];for(;n("a");)c.push(r("a"));const l=tu(c),d={...kd(e),title:t,connectionInfo:o,bandwidthInfo:h,encryptionKey:a},[u,f]=ou(l,d,Td);v.push({...u,attributes:f})}const[w,P]=ou(m,{},Md);return{...w,version:o,origin:s,sessionName:a,sessionInfo:c,descriptionURI:l,email:d,phoneNumber:u,connectionInfo:p,bandwidthInfo:h,timeDescriptions:f,timeZoneAdjustment:g,encryptionKey:b,attributes:P,mediaDescriptions:v}}function lu(e){const t=[];function n(e,n){void 0!==n&&t.push(`${e}=${n}`)}var r;n("v",e.version),n("o",`${(r=e.origin).username} ${r.sessionID} ${r.sessionVersion} ${r.networkType} ${r.addressType} ${r.address}`),n("s",e.sessionName),n("i",e.sessionInfo),n("u",e.descriptionURI),n("e",e.email),n("p",e.phoneNumber);for(const t of e.connectionInfo)n("c",t);for(const t of e.bandwidthInfo)n("b",t);for(const t of e.timeDescriptions){n("t",t.time);for(const e of t.repeatTimes)n("r",e)}n("z",e.timeZoneAdjustment),n("k",e.encryptionKey);const i=[...au(e),...e.attributes];for(const e of i){const t=(eu[e.key]||(e.key,{read:(e,t)=>({key:e,value:t}),write:({key:e,value:t})=>({key:e,value:t})})).write(e);n("a",t.value?`${t.key}:${t.value}`:t.key)}for(const t of e.mediaDescriptions){n("m",Id(t)),n("i",t.title);for(const e of t.connectionInfo)n("c",e);for(const e of t.bandwidthInfo)n("b",e);n("k",t.encryptionKey);const e=[...au(t),...t.attributes];for(const t of e){const e=eu[t.key].write(t);n("a",e.value?`${e.key}:${e.value}`:e.key)}}return t.join("\r\n")+"\r\n"}var du;!function(e){e[e.QR_ERROR=0]="QR_ERROR",e[e.NO_DATA_FROM_PROTOBUF=4e3]="NO_DATA_FROM_PROTOBUF",e[e.NO_CONNECTION_FROM_PROTOBUF=4001]="NO_CONNECTION_FROM_PROTOBUF",e[e.QR_CONNECTION_TIMEOUT=4002]="QR_CONNECTION_TIMEOUT",e[e.QR_CONNECTION_NOT_ESTABLISHED=4003]="QR_CONNECTION_NOT_ESTABLISHED",e[e.QR_SESSION_ALLOCATE_RESPONSE_LACKED_FIELDS=4004]="QR_SESSION_ALLOCATE_RESPONSE_LACKED_FIELDS",e[e.BLOCKED_BY_FAIL_LOCAL_SDP_FEATURE_FLAG=4005]="BLOCKED_BY_FAIL_LOCAL_SDP_FEATURE_FLAG",e[e.BLOCKED_BY_FAIL_REMOTE_SDP_FEATURE_FLAG=4006]="BLOCKED_BY_FAIL_REMOTE_SDP_FEATURE_FLAG",e[e.QR_SESSION_ALLOCATE_RESPONSE_NOT_ACKED=4007]="QR_SESSION_ALLOCATE_RESPONSE_NOT_ACKED",e[e.CONNECTION_IS_CLOSING=4008]="CONNECTION_IS_CLOSING",e[e.NON_CURRENT_CONNECTION_FAILED=4009]="NON_CURRENT_CONNECTION_FAILED",e[e.FAILED_TOO_MANY_TIMES=4010]="FAILED_TOO_MANY_TIMES",e[e.PARTICIPANT_ALLOCATE_ERROR_RESPONSE=4011]="PARTICIPANT_ALLOCATE_ERROR_RESPONSE",e[e.SELF_MEDIA_REQUEST_TIMEOUT=4012]="SELF_MEDIA_REQUEST_TIMEOUT",e[e.PARTICIPANT_ALLOCATE_TIMEOUT=4013]="PARTICIPANT_ALLOCATE_TIMEOUT",e[e.QR_SESSION_ALLOCATE_RESPONSE_TIMEOUT=4014]="QR_SESSION_ALLOCATE_RESPONSE_TIMEOUT",e[e.QR_TCP_CONNECTION_TIMEOUT=4015]="QR_TCP_CONNECTION_TIMEOUT",e[e.QR_UDP_CONNECTION_TIMEOUT=4016]="QR_UDP_CONNECTION_TIMEOUT"}(du||(du={}));const uu=Re("RelayFailedError",(e,t,n,r)=>Se`RelayFailedError<${V(`${e} ${du[e]}`).constant()}: ${V(t).notPII().forCertain()}>${r?Se`: qrErrorCode ${Xa(r)}`:""}${n?Se`; wrapped error: ${In(String(n))}`:""}`),pu=Object.assign((e,t,n,r)=>{const i=uu(e,t,n,r),[o,s]=r&&e===du.QR_ERROR?["QuickRelay",String(r)]:["QuickRelayWeb",`(${e}) ${du[e]}`],a={endReason:(c=r,3603===c||603===c?_n.Kicked:_n.CallFailed),endReasonClass:o,endReasonDetail:s,endReasonQuickRelayWeb:e};var c;return r&&(a.endReasonQuickRelay=r),Object.assign(i,a)},{is:uu.is,id:uu.id});const hu=e=>e;class fu{constructor(e,t=fn.cacheStatKeys){Object.defineProperty(this,"rtc",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cacheStatKeys",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"statKeys",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"statTypeMap",{enumerable:!0,configurable:!0,writable:!0,value:null}),this.rtc.addEventListener("signalingstatechange",()=>{this.invalidateStatKeys()}),this.rtc.addEventListener("icegatheringstatechange",()=>{this.invalidateStatKeys()})}async getStatsAndKeys(){const e=await this.rtc.getStats();return{stats:e,statKeys:this.getStatKeys(e),statTypeMap:this.getStatTypeMap(e)}}getStatKeys(e){return this.statKeys&&this.cacheStatKeys||(this.statKeys=[...e.keys()]),[...this.statKeys]}getStatTypeMap(e){if(!this.statTypeMap||!this.cacheStatKeys){const t={};for(const n of e.keys()){const r=e.get(n);if(!r)continue;const{type:i}=r;if(!i)continue;const o=t[i];o?o.push(n):t[i]=[n]}this.statTypeMap=t}return this.statTypeMap}invalidateStatKeys(){this.statKeys=null,this.statTypeMap=null}}class gu{constructor(e,t){Object.defineProperty(this,"baseInterval",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"getParams",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"timeoutToken",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"scheduledCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"intervalsElapsed",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"tick",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{await this.fireCallbacks(),this.intervalsElapsed++,this.scheduleTimeout()}})}get isRunning(){return-1!==this.timeoutToken}schedule(e,t,n){const r={name:e,callback:t,intervalCount:Math.round(n/this.baseInterval)},{scheduledCallbacks:i}=this;return i.add(r),()=>i.delete(r)}scheduleTimeout(){clearTimeout(this.timeoutToken),this.timeoutToken=setTimeout(this.tick,this.baseInterval)}async fireCallbacks(){const{intervalsElapsed:e}=this;let t;for(const n of this.scheduledCallbacks){const{intervalCount:r,callback:i}=n;e%r==0&&(void 0===t&&(t=await this.getParams(),await Kn()),i(...t),await Kn())}}start(){this.scheduleTimeout()}pause(){clearTimeout(this.timeoutToken),this.timeoutToken=-1}stop(){this.pause(),this.scheduledCallbacks.clear()}forward(){this.isRunning&&(this.intervalsElapsed=0,this.tick())}}class bu{constructor(){Object.defineProperty(this,"stats",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"connection",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"scheduler",{enumerable:!0,configurable:!0,writable:!0,value:new gu(250,async()=>[await this.getStats()])}),Object.defineProperty(this,"forward",{enumerable:!0,configurable:!0,writable:!0,value:Lc(()=>{this.scheduler.forward()},{interval:1})})}init(e){this.connection=e,this.stats=new fu(e),this.scheduler.start()}schedule(e,t,n){return this.scheduler.schedule(e,t,n)}stop(){this.scheduler.stop()}async getStats(){return this.stats.getStatsAndKeys()}}let yu;const mu=a(()=>null!=yu?yu:yu=new bu);const vu=c(class extends Ds{constructor(e,t,n,r,i){super(e),Object.defineProperty(this,"provider",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"delegate",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"participantId",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"sessionDescription",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this).child`QRConnectionRTC`.id`${this.sessionDescription}`().package`Media`.subsystem`QR`.category`RTC`}),Object.defineProperty(this,"rtcPeerConnection",{enumerable:!0,configurable:!0,writable:!0,value:hu(new RTCPeerConnection({rtcpMuxPolicy:"require",bundlePolicy:"max-bundle",encodedInsertableStreams:!0}))}),Object.defineProperty(this,"dataChannel",{enumerable:!0,configurable:!0,writable:!0,value:new id(this.delegate,this,this.rtcPeerConnection.createDataChannel("0"),this.sessionDescription)}),Object.defineProperty(this,"midMap",{enumerable:!0,configurable:!0,writable:!0,value:new sd}),Object.defineProperty(this,"sdpModifyLock",{enumerable:!0,configurable:!0,writable:!0,value:new Hl(!0)}),Object.defineProperty(this,"conversationSdpBuilder",{enumerable:!0,configurable:!0,writable:!0,value:new yd}),Object.defineProperty(this,"transceiverInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"conversation",{enumerable:!0,configurable:!0,writable:!0,value:{us:Dl(this.participantId,[],[]),them:[]}}),Object.defineProperty(this,"theirConnectionParameters",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"protocol",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mediaStreamManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"unlisteners",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"ourActiveStreamIds",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:va(this)}),Object.defineProperty(this,"ourRequestedStreamIds",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"requestedClose",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"statsCollector",{enumerable:!0,configurable:!0,writable:!0,value:mu(this)}),Object.defineProperty(this,"restrictOurVideoFPS",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ssrcToStreamID",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"waitingForDisconnected",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"offlineEventListener",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.logger.error`We have gone offline. The QRConnection should be discarded immediately.`,this.delegate.connectionFailed()}}),this.unlisteners.push(this.dataChannel.subscribe(e=>this.delegate.handleIncomingDataChannelMessage(e))),this.rtcPeerConnection.addEventListener("connectionstatechange",()=>{var e;this.logger.info`${Ya(null!==(e=this.protocol)&&void 0!==e?e:"unknown protocol")} rtcPeerConnection state changed to ${za(this.rtcPeerConnection.connectionState)}`}),this.statsCollector.init(this.rtcPeerConnection)}async updateOurTracks(){const e=Wl(this.conversation.us.media),t=this.rtcPeerConnection.getTransceivers(),{audioIsEnabled:n,videoIsPaused:r,videoIsEnabled:i}=this.mediaStreamManager||{};return this.logger.verbose`Updating our tracks, audioIsEnabled: ${V(n).notPII().forCertain()}, videoIsPaused: ${V(r).notPII().forCertain()}, videoIsEnabled: ${V(i).notPII().forCertain()}`,Promise.all(t.filter(e=>"sendonly"===e.direction).map(t=>({transceiver:t,streamHandle:e.find(([,,e])=>e.mid===t.mid)})).filter(({streamHandle:e})=>e).map(({transceiver:e,streamHandle:t})=>this.updateTrack(e,t)))}async updateTrack(e,t){const[n,r,i]=t;return r.mediaType===tl.Video?this.updateVideoTrack(e,i):r.mediaType===tl.Audio?this.updateAudioTrack(e,i):void 0}setRemoteParticipantCount(e){const t=e>4;t!==this.restrictOurVideoFPS&&(this.restrictOurVideoFPS=t,this.logger.verbose`Will restrict FPS: ${V(this.restrictOurVideoFPS).constant()} (remote participant count ${V(e).notPII().forCertain()} > 4)`,this.updateOurTracks())}async updateVideoTrack(e,t){var n,r;const[i]=null!==(r=null===(n=this.mediaStreamManager)||void 0===n?void 0:n.getVideoTracks())&&void 0!==r?r:[];if(e.sender.track&&e.sender.track.stop(),i&&i.enabled&&this.ourActiveStreamIds.includes(t.streamID)){const n=i.clone(),r=Pl(t.streamIndex),o=this.restrictOurVideoFPS?15:r.frameRate;await n.applyConstraints({aspectRatio:{exact:1},frameRate:{max:o},width:{max:r.resolution},height:{max:r.resolution}}),this.logger.verbose`Track resolution: ${V(n.getSettings().width).session()}`,await e.sender.replaceTrack(n);const s=e.sender.getParameters();await e.sender.setParameters({...s,encodings:s.encodings.map(e=>({...e,maxBitrate:r.encodingBitrate,maxFramerate:o,active:!0}))})}else await e.sender.replaceTrack(null)}async updateAudioTrack(e,t){var n,r,i;null===(n=this.mediaStreamManager)||void 0===n||n.syncAudioMuted();const[o]=null!==(i=null===(r=this.mediaStreamManager)||void 0===r?void 0:r.getAudioTracks())&&void 0!==i?i:[];if(o&&o.enabled&&this.ourActiveStreamIds.includes(t.streamID)){const n=Sl(t.streamIndex),r=e.sender.getParameters();await e.sender.setParameters({...r,encodings:r.encodings.map(e=>({...e,maxBitrate:n.encodingBitrate,active:!0}))}),this.logger.info`Replacing our audio track to ${Ca(t.streamID)}`,await e.sender.replaceTrack(o)}else this.logger.info`Clearing our audio track`,await e.sender.replaceTrack(null)}async startConnection(e){var t;this.mediaStreamManager=e,this.mediaStreamManager&&(this.unlisteners.push(this.mediaStreamManager.onVideoStateDidChange.listen(()=>{this.updateOurTracks()})),this.unlisteners.push(this.mediaStreamManager.onAudioStateDidChange.listen(()=>{this.updateOurTracks()}))),this.listenForTracks();const n=await this.rtcPeerConnection.createOffer({voiceActivityDetection:!1}),r=await this.setLocalDescription(n);if(r)return r;const i=cu(n.sdp),o=function(e,t){const n=t.mediaDescriptions[0],r=null==n?void 0:n.protocol,i=t.ice||n.ice,o=null==n?void 0:n.fingerprint,s=null==n?void 0:n.setup,a=n&&{sctpPort:n.sctpPort,sctpMaxMessageSize:n.sctpMaxMessageSize};if(!i)throw new Ce(Se`no ice`);if(!o)throw new Ce(Se`no fingerprint`);if(!s)throw new Ce(Se`no setup`);if(!a)throw new Ce(Se`no sctp`);return{role:"actpass"===s?zl.ANY:"active"===s?zl.ACTIVE:zl.PASSIVE,iceUserFragment:i.ufrag,icePassword:i.password,certificateFingerprint:o.bytes,sctpPort:a.sctpPort,maxMessageSize:a.sctpMaxMessageSize,serverIP:sn(e.ipAddress),serverPort:e.port,protocol:r}}(this.serverInfo,i);this.protocol=o.protocol;const{mediaDescriptions:s}=i,a=null===(t=s.find(e=>"application"===e.type))||void 0===t?void 0:t.mid;return this.conversation={...this.conversation,dataChannelMID:a},this.midMap.reserveMIDs(this.conversation),o}createOurParticipantDescription(){const e=new dd(16);return Dl(this.participantId,this.config.CanEncodeH264?[{streamID:e.n(),tier:yl.low},{streamID:e.n(),tier:yl.mid},{streamID:e.n(),tier:yl.high}]:[],[{streamID:e.n(),tier:wl.low},{streamID:e.n(),tier:wl.high}])}qrConnectionTimeout(e,t){var n;const r=null==t?void 0:t.replace(/\/.*/,"");return pu(null!==(n={TCP:du.QR_TCP_CONNECTION_TIMEOUT,UDP:du.QR_UDP_CONNECTION_TIMEOUT}[r])&&void 0!==n?n:du.QR_CONNECTION_TIMEOUT,Se`${Ya(t)} QR connection timeout error`,e)}async finishConnection(e){var t;const n=this.logger.begin`finishConnection`();n.verbose``,n.verbose`finishing data channel setup`;const r=await this.finishDataChannelSetup(e);if(r instanceof Error)return r;const i=cu(this.rtcPeerConnection.remoteDescription.sdp);n.silly`Parsed remoteDescription (data channel only): ${i}`,this.conversation=this.midMap.assignMIDs({connectionParameters:this.theirConnectionParameters,dataChannelMID:i.mediaDescriptions[0].mid,them:[],us:this.createOurParticipantDescription()});const[o]=this.conversationSdpBuilder.to(this.conversation,bd.OfferForUs);n.silly`Setting to generated offer`;const s=await this.setRemoteDescription({type:"offer",sdp:lu(o)});if(s)return s;this.rtcPeerConnection.getTransceivers().forEach(e=>e.direction="sendonly"),n.debug`Transceivers:\n${this.rtcPeerConnection.getTransceivers().map(e=>`    Transceiver: ${e.mid} ${e.currentDirection} (desires ${e.direction})`).join("\n")}`;const a=await this.rtcPeerConnection.createAnswer({voiceActivityDetection:!1}),c=await this.setLocalDescription(a);if(c)return c;const l=function(e){const t={};for(const n of e.mediaDescriptions){const{mid:e,sourcesByID:r}=n;if(!e)continue;const i=Object.keys(r).map(e=>parseInt(e,10));t[e]=i}return t}(cu(a.sdp));this.assignConversationSSRCs(l);const d=null!==(t=this.protocol)&&void 0!==t?t:"unknown protocol",u=await Fn(this.connectionEstablisedPromise(),1e4,Se`${Ya(d)} RTC connection did not complete`);return u instanceof Un?this.qrConnectionTimeout(u,this.protocol):"connected"!==u?pu(du.QR_CONNECTION_NOT_ESTABLISHED,Se`QR connection not established`):(this.logger.info`finishConnection, release`,this.sdpModifyLock.release(),this.rtcPeerConnection.addEventListener("connectionstatechange",()=>{this.logConnectionFailures(),this.onDisconnected()}),window.addEventListener("offline",this.offlineEventListener),this.unlisteners.push(()=>{window.removeEventListener("offline",this.offlineEventListener)}),this.conversation.us)}async sendMessageAndWait(e,t){return await this.dataChannel.ready(),this.dataChannel.sendMessage(e).response(t)}async sendMessage(e){await this.dataChannel.ready(),this.dataChannel.sendMessage(e)}setOurActiveAndRequestedStreamids(e,t){this.logger.debug`Setting our active stream ids to ${new Pe(e.map(e=>Ca(e)))}`,this.logger.debug`Setting our requested stream ids to ${new Pe(t.map(e=>Ca(e)))}`,this.ourActiveStreamIds=e,this.ourRequestedStreamIds=t,this.updateOurTracks()}async addParticipants(e){return this.sdpModifyLock.withLock(()=>this._addParticipants(e))}getParticipants(){return this.sdpModifyLock.withLock(async()=>[...this.conversation.them])}getOurParticipant(){return this.conversation.us}getStreamIDForSSRC(e){return this.ssrcToStreamID[e]}async _addParticipants(e){const t=this.logger.begin`addParticipant`(),n=this.conversation.them.length,r=this.conversation.them.concat(e);t.debug`Adding participant to conversation model`,t.silly`Before: ${this.conversation}`,this.conversation=this.midMap.assignMIDs({...this.conversation,them:r}),e=this.conversation.them.slice(n),t.silly`After: ${this.conversation}`;const i=lu(this.conversationSdpBuilder.to(this.conversation,bd.OfferForUs)[0]),o=await this.setRemoteDescription({type:"offer",sdp:i});if(o)return o;const s=await this.rtcPeerConnection.createAnswer({voiceActivityDetection:!1}),a=await this.setLocalDescription(s);if(a)return a;const c=this.rtcPeerConnection.getTransceivers();t.verbose`Getting tracks...`;for(const n of e){for(const e of n.media.streamGroups)for(const r of e.streams){t.debug`looking up transceiver for ${r.streamID} (mid ${r.mid})`;const i=c.find(e=>e.mid&&e.mid===r.mid);if(!i)return;const o=r.ssrc;this.ssrcToStreamID[o]=r.streamID,this.transceiverInfoMap.set(i,{ssrc:o,qualityIndex:r.qualityIndex,streamIndex:r.streamIndex,participantId:n.participantID,groupID:e.groupID}),i.receiver.track&&this.handleNewTrack(i.receiver.track,i)}t.info`Updated SDP for adding peer: ${n.participantID}`}}async setLocalDescription(e){try{if(e.sdp=this._mungeSDP(e.sdp),this.config.FailLocalSDP)throw new Ce(Se`config.FailLocalSDP=true`);await this.rtcPeerConnection.setLocalDescription(e),this.logger.debug`Set local SDP: ${e.sdp}`}catch(t){const n=t;return this.logger.error`Failed setting local description: ${V(n.message).device()}`,this.logger.error`Failed local SDP: ${e.sdp}`,pu(du.BLOCKED_BY_FAIL_LOCAL_SDP_FEATURE_FLAG,n.description)}}async setRemoteDescription(e){try{if("closed"!==this.rtcPeerConnection.connectionState){if(this.config.FailRemoteSDP)throw new Ce(Se`config.FailRemoteSDP=true`);await this.rtcPeerConnection.setRemoteDescription(e),this.logger.debug`Set remote SDP: ${V(e.sdp).session()}`}}catch(t){const n=t;return this.logger.error`Failed setting remote description: ${V(n.message).device()}`,this.logger.error`Failed remote SDP: ${V(e.sdp).session()}`,pu(du.BLOCKED_BY_FAIL_REMOTE_SDP_FEATURE_FLAG,n.description)}}assignConversationSSRCs(e){const t=Xl(this.conversation),n=this.logger.begin`assignConversationSSRCs`();n.debug`Writing ssrcs into Conversation`;return nd(t).us.forEach(t=>{const[,r,,,i]=t;n.debug`StreamID: ${ka(r.cname)} ${Ca(i.streamID)}`;const o=this.midMap.midForHandle(t);if(n.debug`mid: ${$a(o)}`,null===o)return;const s=e[o];n.debug`ssrc: ${Pa(s)}`,s&&0!==s.length&&(i.ssrc=s[0])}),this.conversation=t,this.conversation}_mungeSDP(e){let t=e.replace(/ssrc-audio-level$/gm,"ssrc-audio-level vad=off");return t=t.replace(/profile-level-id=42[0-9a-zA-Z]{4}$/gm,"profile-level-id=42e01f"),t}getOurTransceiverInfo(e){return this.conversation.us.media.streamGroups.filter(t=>t.mediaType===e).flatMap(e=>e.streams).map(e=>({transceiver:this.getTransceiverByMid(e.mid),ssrc:e.ssrc,streamIndex:e.streamIndex}))}close(){this.logger.info`rtcPeerConnection is closing down`,this.requestedClose||(this.requestedClose=!0,this.unlisteners.forEach(e=>e()),this.dataChannel.close(),this.rtcPeerConnection.getTransceivers().filter(e=>{var t;return"video"===(null===(t=e.sender.track)||void 0===t?void 0:t.kind)}).forEach(e=>{var t;return null===(t=e.sender.track)||void 0===t?void 0:t.stop()}),this.rtcPeerConnection.close(),this.statsCollector.stop())}getTransceiverByMid(e){return this.rtcPeerConnection.getTransceivers().find(t=>t.mid===e)}isCompletedState(e){return"connected"===e||"closed"===e||"failed"===e}async connectionEstablisedPromise(){for(;!this.isCompletedState(this.rtcPeerConnection.connectionState);)await ya(this.rtcPeerConnection,"connectionstatechange");return this.rtcPeerConnection.connectionState}listenForTracks(){this.rtcPeerConnection.addEventListener("track",e=>{this.handleNewTrack(e.track,e.transceiver)})}handleNewTrack(e,t){const n=this.transceiverInfoMap.get(t);if(this.logger.info`Maybe adding track for ${t.mid}...`,!n)return;const{participantId:r,ssrc:i,qualityIndex:o,streamIndex:s,groupID:a}=n;this.logger.info`Adding track for participant ${to(r)} (ssrc: ${Pa(i)})`,this.delegate.participantTrackAdded(r,e,t,i,a,o,s)}async finishDataChannelSetup(e){const t=this.logger.begin`ParticipantAllocate.Response`();t.info`ParticipantAllocate.Response: ${e}`;const n=function(e,t){const{connectionParameters:n}=t,{conn:r,data:i}=n||{};return r?i?{role:r.role===Ac.ConnectionParameters.Connection.Role.ANY?zl.ANY:r.role===Ac.ConnectionParameters.Connection.Role.ACTIVE?zl.ACTIVE:zl.PASSIVE,iceUserFragment:r.iceUserFragment,icePassword:r.icePassword,certificateFingerprint:r.certificateFingerprint,sctpPort:i.sctpPort,maxMessageSize:i.maxMessageSize,serverIP:sn(e.ipAddress),serverPort:e.port,protocol:"UDP/DTLS/SCTP"}:pu(du.NO_DATA_FROM_PROTOBUF,Se`No data from protobuf`):pu(du.NO_CONNECTION_FROM_PROTOBUF,Se`No connection from protobuf`)}(this.serverInfo,e);if(n instanceof Error)return n;this.theirConnectionParameters=n,t.verbose``,t.verbose`generating sdp`,t.silly`conversation: ${this.conversation}`,t.silly`connection parameters: ${this.theirConnectionParameters}`;const r=this.conversationSdpBuilder.to({us:Dl(this.participantId,[],[]),them:[],connectionParameters:this.theirConnectionParameters,dataChannelMID:this.conversation.dataChannelMID},bd.AnswerForUs),[i,o]=r;t.silly`Session Description: ${i}`,t.debug`Errors generating SessionDescription: ${o}`,t.verbose`Serializing SDP`;const s=lu(i),a=await this.setRemoteDescription({type:"answer",sdp:s});if(a)return a;this.logger.debug`Updated SDP data channel setup.`}logConnectionFailures(){var e;const{connectionState:t}=this.rtcPeerConnection;if("disconnected"!==t&&"failed"!==t)return;const{serverIP:n,serverPort:r,sctpPort:i}=this.theirConnectionParameters||{};this.logger.info`${Ya(null!==(e=this.protocol)&&void 0!==e?e:"unknown protocol")} connection entered ${za(t)} state [to ${Da(n)}:${Aa(r)}, sctpPort: ${Aa(i)}]`}async onDisconnected(){this.waitingForDisconnected||(this.waitingForDisconnected=!0,await qn(this.config.QRFailureTimeout,Se``),this.waitingForDisconnected=!1,"disconnected"===this.rtcPeerConnection.connectionState||"failed"===this.rtcPeerConnection.connectionState?(this.logger.info`Connection remained disconnected or failed for timeout duration; marking as failed`,this.delegate.connectionFailed()):this.logger.verbose`Connection entered disconnected state but did not stay long enough to time out.`)}async diagnose(e){var t,n;e.h4.info`QRConnectionRTC ${this.sessionDescription} (participant=${to(this.participantId)})`,e.info`- Server Info: ${Ma(this.serverInfo)}`,e.info``,e.info``,e.h4.info`theirConnectionParameters`,e.info`${V(this.theirConnectionParameters).session()}`,e.info``,e.info``,e.h4.info`Conversation Model`,e.info`${V(this.conversation).personal()}`,e.info``,e.info``,e.h4.info`Local Description`;const r=null===(t=this.rtcPeerConnection.localDescription)||void 0===t?void 0:t.sdp,i=null===(n=this.rtcPeerConnection.remoteDescription)||void 0===n?void 0:n.sdp;e.info`${r?V(r).personal():V("None").constant()}`,e.info``,e.info``,e.h4.info`Remote Description`,e.info`${i?V(i).personal():V("None").constant()}`,e.info``,e.h4.info`Transceiver Info Map`,e.info`${V(Array.from(this.transceiverInfoMap.entries())).session()}`}});var wu=n(12),Pu=n.n(wu);const Su=()=>Pu()({ua:navigator.userAgent,platform:navigator.platform,vendor:navigator.vendor}),$u=e=>Object.keys(e).find(t=>!0===e[t])||"other";function Ou(){const{browser:e}=Su();return`${$u(e).replace(/[A-Z].*/,"")}${function(e){const{major:t}=e;return t?" "+t:""}(e.version)}`}const ku=32768,Iu=BigInt(1|2|4|8|64|2048|4096),Cu=Iu|BigInt(ku),{twcc:Ru,singleSsrc:Mu}=fn,Tu=BigInt(0|(Mu?2:0)|(Ru?1:0));function Du(e,t,n){const r=t?Cu:Iu;return{serverIp:sn(e.ipAddress),serverPort:e.port,sessionParameters:{qrAccessToken:e.relaySessionToken,softwareVersion:Ou(),participantCapabilities:r,webParticipantCapabilities:Tu,serviceId:n},authenticated:!1}}function Eu(e){switch(e.mediaType){case tl.Video:return"camera_video";case tl.Audio:return"micr_audio";default:throw new Ce(Se`Unknown media type`)}}function Au(e,t,n){if(t===Ac.MediaParameters.MediaType.Audio)return;const r=e.codecs.length>0?e.codecs[0].rtpPayload+1:0;if(0!==r)return[new Ac.MediaParameters.Codec({MimeType:"rtx",ClockRate:e.rtpSampleRate,SDPFmtpLine:`fmtp:${r} apt=${r-1}`,PayloadType:r})];null==n||n.error(Se`Media request composition: could not add rtx codec info to stream:${Ca(e.streamID)}`)}function ju(e,t){return e.map(e=>{const n=function(e){switch(e.mediaType){case tl.Video:return Ac.MediaParameters.MediaType.Video;case tl.Audio:return Ac.MediaParameters.MediaType.Audio;default:throw new Ce(Se`Unknown media type`)}}(e);return e.streams.map(r=>({mid:Eu(e),qrStreamId:r.streamID,ssrc:r.ssrc,repairSsrc:r.repairSsrc,rtxSsrc:r.rtxSsrc,mediaType:n,rtpCodecs:Au(r,n,t)}))}).flat(1)}let Nu=0;const Bu=c(class extends Ds{constructor(e,t,n,r,i,o,s,a=null){super(e),Object.defineProperty(this,"provider",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"delegate",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"groupId",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"relaySessionToken",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"ipAddress",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"port",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"participantId",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"encodedPreKey",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"sessionDescription",{enumerable:!0,configurable:!0,writable:!0,value:Se`${ao(this.groupId)} on ${V(an(this.ipAddress,this.port)).session()}`}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this).child`QRConnection`.id`${this.sessionDescription}`().package`Media`.subsystem`QR`.category`Connection`}),Object.defineProperty(this,"metrics",{enumerable:!0,configurable:!0,writable:!0,value:us(this)}),Object.defineProperty(this,"idsConfig",{enumerable:!0,configurable:!0,writable:!0,value:Rc(this)}),Object.defineProperty(this,"pushSender",{enumerable:!0,configurable:!0,writable:!0,value:Gs(this)}),Object.defineProperty(this,"pushDispatcher",{enumerable:!0,configurable:!0,writable:!0,value:zs(this)}),Object.defineProperty(this,"serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:{ipAddress:this.ipAddress,port:this.port,relaySessionToken:this.relaySessionToken}}),Object.defineProperty(this,"rtc",{enumerable:!0,configurable:!0,writable:!0,value:vu(this).create(this.provider,this,this.participantId,this.serverInfo,this.sessionDescription)}),Object.defineProperty(this,"uplinkStreamsController",{enumerable:!0,configurable:!0,writable:!0,value:new Ll(this.provider,this,this.rtc,this.sessionDescription)}),Object.defineProperty(this,"participantStatsGenerationCounter",{enumerable:!0,configurable:!0,writable:!0,value:Number.MIN_SAFE_INTEGER}),Object.defineProperty(this,"sessionInfoGenerationCounter",{enumerable:!0,configurable:!0,writable:!0,value:Number.MIN_SAFE_INTEGER}),Object.defineProperty(this,"pendingParticipants",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"addPendingParticipantsDebounced",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"connectionQualityTracker",{enumerable:!0,configurable:!0,writable:!0,value:new Gl(this.rtc.statsCollector,this.logger)}),this.addPendingParticipantsDebounced=Lc(()=>{this.addPendingParticipants()},{interval:1})}async requestConnection(e,t,n){const r=[];this.encodedPreKey&&(this.logger.info`Exporting pre key for use in allocate request...`,r.push({ownerParticipantId:this.participantId,materialInfo:[this.encodedPreKey]}));const{participantAllocateRequest:i,participantAllocateRequestMessageBytes:o}=function(e,t,n,r,i){const{certificateFingerprint:o,icePassword:s,iceUserFragment:a,sctpPort:c,maxMessageSize:l}=e,d={uuid:Yr(),...Du(t,r,i),connectionParameters:{conn:{role:Ac.ConnectionParameters.Connection.Role.ACTIVE,iceUserFragment:a,icePassword:s,certificateFingerprint:o},data:{enabled:!0,sctpPort:c,maxMessageSize:l}},materials:n},u={uuid:d.uuid,participantAllocateRequest:d};return{participantAllocateRequest:d,participantAllocateRequestMessageBytes:mo(Ac.QuickRelayWebProtocolMessage,u)}}(e,this.serverInfo,r,t,n);this.logger.info`Sending participant allocate request`,this.logger.debug`${i}`,this.pushSender.sendPush(Ns.QuickRelaySignaling,o,"ParticipantAllocateRequest");const s=new Sn,a=Zr(i.uuid);let c;const l=await this.pushDispatcher.topic(Ns.QuickRelaySignaling).waitFor(async e=>{var t;const n=yo(Ac.QuickRelayWebProtocolMessage,e.message);if(n instanceof Error)return this.logger.error`Failed to decode QuickRelayWebProtocolMessage`,!1;if(!n.participantAllocateResponse)return!1;s.stopTimer(),this.metrics.log(new es(s));const r=Zr(n.participantAllocateResponse.uuid);if(r instanceof Error)return this.logger.error`Failed to parse uuid from QuickRelayWebProtocolMessage`,!1;if(r!==a)return!1;if(n.error){this.logger.error`Allocate error: ${In(n.error)}`;const e=n.error.errorCode;pu(du.PARTICIPANT_ALLOCATE_ERROR_RESPONSE,Se`${In(null!==(t=n.error.errorMessage)&&void 0!==t?t:"Participant allocate response error")}`,void 0,e).endReasonQuickRelayWeb;return!1}return c=n.participantAllocateResponse,!0},this.idsConfig.ParticipantAllocateResponseTimeout);return l instanceof Un?pu(du.PARTICIPANT_ALLOCATE_TIMEOUT,Se`QR participant allocate timed out`,l):c}async requestDisconnection(){const e={uuid:Yr(),unallocbindRequest:{reason:Ac.UnAllocBind.Request.Reason.VOLUNTARY_LEAVE}};return this.logger.debug`Sending unAllocBind request: ${V(e).session()}`,this.rtc.sendMessage(e)}createAvcBlob(e){return{generalInfo:{ntpTime:e.media.ntpTime,cname:Jr()},streamGroups:e.media.streamGroups.map(e=>({streamGroup:e.groupID===el.WebCompatibleMicrophone?xc.StreamGroup.MicrophoneWebRTC:xc.StreamGroup.CameraWebRTC,streams:e.streams.map(e=>({rtpSSRC:e.ssrc,streamID:e.streamID,qualityIndex:e.qualityIndex,streamIndex:e.streamIndex}))}))}}repairSsrcForSsrc(e){return e+2}rtxSsrcForSsrc(e){return e+1}handleMediaBlob(e,t){var n;this.logger.debug`Handling a media blob: ${t}`;const r=Dl(e,t.streamGroups.filter(e=>e.streamGroup===xc.StreamGroup.CameraWebRTC).map(e=>{var t;return(null===(t=e.streams)||void 0===t?void 0:t.map(e=>({ssrc:e.rtpSSRC,repairSsrc:this.repairSsrcForSsrc(e.rtpSSRC),rtxSsrc:this.rtxSsrcForSsrc(e.rtpSSRC),streamID:e.streamID,tier:Pl(e.streamIndex||0)})))||[]}).flat(1),t.streamGroups.filter(e=>e.streamGroup===xc.StreamGroup.MicrophoneWebRTC).map(e=>{var t;return(null===(t=e.streams)||void 0===t?void 0:t.map(e=>({ssrc:e.rtpSSRC,streamID:e.streamID,tier:Sl(e.streamIndex||0)})))||[]}).flat(1),(null===(n=t.generalInfo)||void 0===n?void 0:n.ntpTime)||void 0);this.pendingParticipants.push(r),this.addPendingParticipantsDebounced()}addPendingParticipants(){const e=this.pendingParticipants.slice();this.pendingParticipants.length=0,this.rtc.addParticipants(e),this.peerMediaRequest(e)}async requestStreams(e,t){const n=await this.sessionInfoRequest(e,t);this.logger.debug`Result from session info request: ${V(n).session()}`}async compoundingRequest(e){const t=function(e){Nu+=1;const t=e.map(([e,t])=>({primaryStreamId:e,secondaryStreamId:t}));return{uuid:Yr(),streamCompoundRequest:{requestId:Nu,streamCompoundConfigs:t}}}(e);return this.logger.debug`Sending compounding request: ${V(t).session()}`,this.rtc.sendMessageAndWait(t,1e4)}async participantStatsRequest(){const e={uuid:Yr(),participantStatsRequest:{}};return this.logger.debug`Sending participant stats request: ${V(e).session()}`,this.rtc.sendMessageAndWait(e,1e4)}async reportingBlobRequest(){const e={uuid:Yr(),reportingBlobRequest:{}};return this.logger.debug`Sending reporting blob request: ${V(e).session()}`,this.rtc.sendMessageAndWait(e,1e4)}async putmaterialRequest(e){const t=function(e){return{uuid:Yr(),putmaterialRequest:{materials:e}}}(e);return this.logger.debug`Sending putmaterial request: ${V(t).session()}`,this.rtc.sendMessageAndWait(t,1e4)}async getmaterialRequest(e){const t=function(e){return{uuid:Yr(),getmaterialRequest:{materialOwners:e}}}(e);return this.logger.debug`Sending getmaterial request: ${V(t).session()}`,this.rtc.sendMessageAndWait(t,1e4)}async sessionInfoRequest(e,t){const n=function(e,t){return{uuid:Yr(),sessionInfoRequest:{requestId:t,subscribedStreams:e.map(({peerParticipantId:e,peerStreams:t})=>({peerParticipantId:e,peerStreamIds:t.map(({id:e})=>e)}))}}}(e,t);return this.logger.debug`Sending session info request: ${V(n).session()}`,this.rtc.sendMessageAndWait(n,1e4)}async selfMediaRequest(e){const t=function(e,t){return{uuid:Yr(),mediaInfoRequest:{selfMediaParameters:{mediaConfigs:ju(e.media.streamGroups,t),ntpTimestamp:e.media.ntpTime}}}}(e,this.logger);return this.logger.debug`Sending self media request: ${V(t).session()}`,this.rtc.sendMessageAndWait(t,1e4)}async peerMediaRequest(e){const t=function(e,t){const n=e.map(e=>({peerParticipantId:e.participantID,mediaParameters:{mediaConfigs:ju(e.media.streamGroups,t),ntpTimestamp:e.media.ntpTime}}));return{uuid:Yr(),mediaInfoRequest:{peerStreamInfo:n}}}(e,this.logger);return this.logger.debug`Sending peer media request: ${V(t).session()}`,this.rtc.sendMessageAndWait(t,1e4)}setParticipantStats(e,t){if(t<this.participantStatsGenerationCounter)return;const n=e.find(e=>e.source===Ac.ParticipantStats.Data.Source.TWCC);n&&this.delegate.availableDownlinkBandwidthChanged(n)}async qrAllocBind(e,t,n){const r=await this.rtc.startConnection(e);if(pu.is(r))return r;this.logger.debug`Using params: ${Wa(r)}`;const i=await this.requestConnection(r,null!=t&&t,null!=n?n:0);if(pu.is(i))return i;this.logger.debug`Got allocate response:${i}`,this.delegate.receiveMaterials(i.materials||[]);const o=await this.rtc.finishConnection(i);if(pu.is(o))return o;this.logger.debug`Our info:${o}`;const s=await this.selfMediaRequest(o);return s instanceof Un?pu(du.SELF_MEDIA_REQUEST_TIMEOUT,Se`Failed self media request`,s):(this.logger.debug`Registered our ssrc mapping, result: ${s}`,this.createAvcBlob(o))}qrUnAllocBind(){this.requestDisconnection()}close(){this.rtc.close(),this.uplinkStreamsController.close()}connectionFailed(){this.delegate.connectionFailed(this)}get statsCollector(){return this.rtc.statsCollector}async participantTrackAdded(...e){return this.delegate.participantTrackAdded(...e)}handleIncomingControlChannelMessage(...e){return this.delegate.handleIncomingControlChannelMessage(...e)}async handleSessionInfoResult(e){var t;const{generationCounter:n,peerPublishedStreams:r,peerSubscribedStreams:i}=e;if(null==n)return;if(n<=this.sessionInfoGenerationCounter)return;this.sessionInfoGenerationCounter=n,this.uplinkStreamsController.setRequestedStreamIds(null!=i?i:[]);const o=new Set;null==r||r.forEach(({peerParticipantId:e})=>{e&&o.add(da(e))});for(const n of null!==(t=e.lightweightParticipantIdList)&&void 0!==t?t:[])o.add(da(n));const s=Array.from(o);this.rtc.setRemoteParticipantCount(s.length),this.delegate.activeParticipantsChanged(s)}async handleIncomingDataChannelMessage(e){var t,n,r,i,o;this.logger.info`Got a QR message: ${e}`;const{sessionInfoUpdate:s,sessionInfoResponse:a,participantUpdateUpdate:c,participantStatsUpdate:l,participantStatsResponse:d,error:u,goAwayIndication:p,getmaterialResponse:h,putmaterialIndication:f}=e;let g=!1;if(s&&(this.handleSessionInfoResult(s),g=!0),a&&(this.handleSessionInfoResult(a),g=!0),c)switch(c.operation){case Ac.ParticipantUpdate.Operation.OPERATION_BLOCKLIST:this.delegate.participantsBlocked((null!==(t=c.participantIdList)&&void 0!==t?t:[]).map(da)),g=!0}return l&&(this.setParticipantStats(null!==(n=l.data)&&void 0!==n?n:[],null!==(r=l.generationCounter)&&void 0!==r?r:Number.MIN_SAFE_INTEGER),g=!0),d&&(this.setParticipantStats(null!==(i=d.data)&&void 0!==i?i:[],null!==(o=d.generationCounter)&&void 0!==o?o:Number.MIN_SAFE_INTEGER),g=!0),u&&u.errorCode&&(this.delegate.onQuickRelayError(u.errorCode,u.errorMessage||void 0),g=!0),p&&(this.delegate.handleGoAwayIndication(p),g=!0),h&&(this.delegate.receiveMaterials(h.materials||[]),g=!0),f&&(this.delegate.receiveMaterials(f.materials||[]),g=!0),g}dbg_injectQRError(e){this.handleIncomingDataChannelMessage({error:{errorCode:e}})}async diagnose(e){e.h4.info`QRConnection ${this.sessionDescription} (participant=${to(this.participantId)})`,e.info`- Relay Session Token: ${Ga(sr(this.relaySessionToken))}`,e.info`- Server Info: ${Ga(this.serverInfo)}`,e.info``,await this.rtc.diagnose(e)}async dbg_sendTestMessage(){const e={uuid:Yr(),testRequest:{operation:Ac.Test.Operation.TEST_GOAWAY}};return this.rtc.sendMessageAndWait(e,1e4)}});class _u extends Ds{constructor(e){super(e),Object.defineProperty(this,"bplistParser",{enumerable:!0,configurable:!0,writable:!0,value:Qi(this.provider)})}async encodePreKey(e,t,n){const r=await crypto.subtle.exportKey("raw",e),i=Date.now()/1e3,o=this.bplistParser.write({"public-prekey":new Uint8Array(r),"creation-date":i,"wrap-mode":1}),s=new Float64Array([i]),a=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);return this.encodeAndSign(o,a,Ac.MaterialInfo.MaterialType.PREKEY,t,n)}async encodeAVCBlob(e,t,n){const r=crypto.getRandomValues(new Uint8Array(12)),i=new Uint8Array([1,0,0,0,0,0,0,0,0]);let o;try{o=await crypto.subtle.encrypt({name:"AES-GCM",iv:r,additionalData:i},t,e)}catch(e){return e}const s=new Uint8Array([1]),a=new Uint8Array(s.length+r.length+o.byteLength);a.set(s,0),a.set(r,s.length),a.set(new Uint8Array(o),s.length+r.length);const c=new Uint8Array(a.length+n.length);return c.set(n),c.set(a,n.length),{materialContent:c,materialId:c.slice(0,16),materialType:Ac.MaterialInfo.MaterialType.AVCBLOB}}async encodeMKM(e,t,n,r,i,o){let s;try{s=await e.wrapBy(t)}catch(e){return e}if(s instanceof Error)return s;const a=this.bplistParser.write({mkm:s.mkm,mki:s.mki,mks:s.mks,participantID:i,rtmpwm:1,mkgc:o});return this.encodeAndSign(a,s.mki,Ac.MaterialInfo.MaterialType.MKM,n,r)}async encodeSKM(e,t,n,r,i,o){let s;try{s=await e.wrapBy(t)}catch(e){return e}if(s instanceof Error)return s;const a=this.bplistParser.write({skm:s.skm,ski:s.ski,sks:s.sks,participantID:i,rtmpwm:1,skgc:o});return this.encodeAndSign(a,s.ski,Ac.MaterialInfo.MaterialType.SKM,n,r)}async encodeAndSign(e,t,n,r,i){const o=new TextEncoder,s=o.encode("com.apple.FaceTime.QRKeying"),a=o.encode(r),c=new Uint8Array(s.length+a.length+e.length);let l;c.set(s),c.set(a,s.length),c.set(e,s.length+a.length);try{l=await crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},i,c)}catch(e){return e}return{materialId:t,materialType:n,materialContent:this.bplistParser.write({payload:e,sessionID:r,signature:new Uint8Array(l)})}}}const xu=a(e=>new _u(e));class Uu extends Ds{constructor(e,t,n,r=window.navigator,i=!1,o=0){super(t.ids),Object.defineProperty(this,"groupId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_idsController",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"delegate",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"navigator",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"isLightweight",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"serviceId",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this).child`QRSession`.id`${this.groupId}`().package`Media`.subsystem`QR`.category`Session`}),Object.defineProperty(this,"metrics",{enumerable:!0,configurable:!0,writable:!0,value:us(this)}),Object.defineProperty(this,"mediaConfig",{enumerable:!0,configurable:!0,writable:!0,value:va(this)}),Object.defineProperty(this,"pushConnectionComponent",{enumerable:!0,configurable:!0,writable:!0,value:la(this)}),Object.defineProperty(this,"qrMaterialEncoder",{enumerable:!0,configurable:!0,writable:!0,value:xu(this)}),Object.defineProperty(this,"mediaBlobMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"allocationMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"currentConnection",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_relayIP",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_relayPort",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"relaySessionToken",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"participantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"relaySessionId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"relayAllocTime",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"mediaStreamManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"connectionAttemptTimestamps",{enumerable:!0,configurable:!0,writable:!0,value:new Array(4).fill(0)}),Object.defineProperty(this,"onCurrentConnectionDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"isClosing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isWaitingForNewAlloc",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get dbg_qrid(){return this.participantId}get hasConnection(){return!!this.currentConnection}get relayIP(){return this._relayIP}get relayPort(){return this._relayPort}withCurrentConnection(e){let t=e(this.currentConnection);const n=this.onCurrentConnectionDidChange.listen(n=>{t&&t(),t=e(this.currentConnection)});return()=>{t&&t(),n()}}async handleQuickRelayAllocateResponse(e){this.logger.info`Getting QuickRelay allocate response...`,this.logger.info`${e}`;const{qal:t,qri:n,qrip:r,qrp:i,qrst:o,qrsi:s,qsat:a}=e,c=!!this.currentConnection;if(null!==this.relayAllocTime&&a<this.relayAllocTime)return new Ce(Se`Discarding QR session as it is out of date.`);const l=this.updateQuickRelayInformation(r,Number(i),s,o,a,da(n)),d=t.filter(({qrs:e})=>Number(e)==ua.OK),u=[];for(const{qri:e,tP:t,t:n}of d){const r=da(e);this.allocationMap.set(r,t),u.push({participantId:r,uri:t,pushToken:sr(n)})}const p=await this.delegate.updateAllocations(da(n),u);return p instanceof Error?p:(l&&c&&!this.isWaitingForNewAlloc&&(this.isWaitingForNewAlloc=!0,(async()=>{this.clearMediaBlobMap(),this.logger.silly`Waiting five seconds to use new session.`,await Ln(5e3),this.logger.info`Switching over to new QR session`,this.qrAllocBind(this.mediaStreamManager)})().finally(()=>{this.isWaitingForNewAlloc=!1})),!0)}clearMediaBlobMap(){for(const[e]of this.mediaBlobMap.entries()){ha(this.allocationMap.get(e))&&this.mediaBlobMap.delete(e)}}blobsMatch(e,t){return zo(e.streamGroups.flatMap(e=>e.streams).map(e=>null==e?void 0:e.rtpSSRC),t.streamGroups.flatMap(e=>e.streams).map(e=>null==e?void 0:e.rtpSSRC))}existingBlobNewer(e,t){var n,r;return!(!(null===(n=null==t?void 0:t.generalInfo)||void 0===n?void 0:n.ntpTime)||!(null===(r=null==e?void 0:e.generalInfo)||void 0===r?void 0:r.ntpTime))&&t.generalInfo.ntpTime>e.generalInfo.ntpTime}handleMediaBlob(e,t){this.logger.debug`Got an AVC blob for ${to(e)}: ${t}`;const n=this.mediaBlobMap.get(e);if(n){if(this.blobsMatch(t,n))return void this.logger.debug`Already had a matching blob for ${to(e)}`;if(this.existingBlobNewer(t,n))return void this.logger.debug`Existing blob is newer than the blob we received`;this.logger.debug`Updating blob for ${to(e)}`}this.mediaBlobMap.set(e,t),this.currentConnection&&this.currentConnection.handleMediaBlob(e,t)}participantTrackAdded(...e){return this.delegate.participantTrackAdded(...e)}handleIncomingControlChannelMessage(...e){return this.delegate.handleIncomingControlChannelMessage(...e)}availableDownlinkBandwidthChanged(...e){return this.delegate.availableDownlinkBandwidthChanged(...e)}receiveMaterials(...e){return this.delegate.receiveMaterials(...e)}connectionFailed(e){e.close(),e===this.currentConnection?(this.logger.info`Connection failed. Attempting reconnect cycle.`,this.reconnect(e)):this.logger.error`Non-current connection failed`}async reconnect(e=this.currentConnection,t=0){this.logger.info`QR reconnect: aggregating new media quality metrics segment`,ba(this.provider).startNewSegment();const n=new Sn,r=await this.connectWithRetries(e,t);return r instanceof Error?(this.logger.info`Could not reconnect. Marking connection as failed`,this.delegate.handleConnectionFailed(r),r):(this.metrics.log(new ns(n.stopTimer())),n.duration)}sessionInfoRequest(e,t){this.currentConnection&&this.currentConnection.requestStreams(e,t)}participantStatsRequest(){this.currentConnection&&this.currentConnection.participantStatsRequest()}async reportingBlobRequest(){return this.currentConnection?this.currentConnection.reportingBlobRequest():this.logger.error`No QR connection!`}async getmaterialRequest(e){return this.currentConnection?this.currentConnection.getmaterialRequest(e):this.logger.error`No QR connection!`}async putmaterialRequest(e){return this.currentConnection?this.currentConnection.putmaterialRequest(e):this.logger.error`No QR connection!`}get statsCollector(){var e;return null===(e=this.currentConnection)||void 0===e?void 0:e.statsCollector}async qrAllocBind(e){return this.isClosing?this.logger.error`Cannot rejoin when the connection is closing.`:(this.mediaStreamManager=e,this.connectWithRetries(this.currentConnection,3))}qrUnAllocBind(){this.isClosing=!0,this.disconnect(),this.currentConnection&&(this.currentConnection.close(),this.currentConnection=null,this.onCurrentConnectionDidChange.notifyListeners(null))}async connect(e){return this.connectionAttemptTimestamps.unshift(Date.now()),this.connectionAttemptTimestamps.length=4,e.qrAllocBind(this.mediaStreamManager,this.isLightweight,this.serviceId)}disconnect(){var e;null===(e=this.currentConnection)||void 0===e||e.qrUnAllocBind()}getTimeToRetry(){const e=Date.now(),t=this.connectionAttemptTimestamps.filter(t=>e-t<3e4);return Math.max(t.length-1,0)*this.mediaConfig.qrSessionReconnectDelayPerAttempt}closingError(){return pu(du.CONNECTION_IS_CLOSING,Se`Connection is closing`)}async connectWithRetries(e,t){const n=this.logger.begin`connectWithRetries`();if(n.debug`Connecting with ${t} attempts remaining`,this.isClosing)return this.closingError();if(e!==this.currentConnection)return pu(du.NON_CURRENT_CONNECTION_FAILED,Se`Non-current connection failed`);const r=!!this.currentConnection;if(this.currentConnection&&(this.currentConnection.close(),this.currentConnection=null,this.onCurrentConnectionDidChange.notifyListeners(null)),"hidden"===window.document.visibilityState&&(n.debug`Waiting for page to be visible`,await async function(){for(;"hidden"===window.document.visibilityState;)await ya(window.document,"visibilitychange")}()),!1===this.navigator.onLine&&(n.debug`Waiting to return online`,await ya(window,"online")),this.isClosing)return this.closingError();const i=this.getTimeToRetry();if(i>0&&(n.debug`Waiting ${i}ms to connect`,await Ln(i)),this.isClosing)return this.closingError();n.debug`Attempting to connect to QR`;const o=await this.delegate.getCurrentPreKey(),s=await this.createConnection(o);if(s instanceof Error)return pu(du.QR_SESSION_ALLOCATE_RESPONSE_LACKED_FIELDS,Se`QR connection failed`,s);const a=await this.connect(s);if(!pu.is(a)){if(this.isClosing)return s.close(),this.closingError();r&&(n.debug`Sending our updated media blob`,this.delegate.updateMediaBlob(a)),n.debug`Re-adding known remote particiants`;for(const[e,t]of this.mediaBlobMap.entries())s.handleMediaBlob(e,t);return this.currentConnection=s,this.onCurrentConnectionDidChange.notifyListeners(this.currentConnection),a}return 0===t?a:(n.error`Failed connecting to QR with error: ${a.description}. Will retry.`,await this.pushConnectionComponent.attemptReconnect(),this.connectWithRetries(null,t-1))}activeParticipantsChanged(e){this.logger.info`Active participants changed to ${e.map(to)}`,this.delegate.activeParticipantsChanged(e)}participantsBlocked(e){this.logger.info`Received blocked participants ${e.map(to)}`,this.delegate.participantsBlocked(e)}onQuickRelayError(e){this.logger.info`Encountered QR errorCode ${Xa(e)}`,this.delegate.onQuickRelayError(e)}async handleGoAwayIndication({errorCode:e,errorMessage:t}){if(!e||!t)return this.logger.error`Received GoAway indication but it does not contain all information. Ignoring.`;this.logger.warn`Received GoAway indication with errorCode ${V(e).constant()} and error message ${V(t).constant()}. Will create a new connection.`;return await this.delegate.performQRReallocation(e,this.relaySessionToken,this.relayIP,this.relayAllocTime)instanceof Error?this.logger.error`Failed to allocate new QR session.`:void 0}updateQuickRelayInformation(e,t,n,r,i,o){return!(this._relayIP&&this._relayPort&&zo(this._relayIP,e)&&this._relayPort===t)&&(this.connectionInformationChanged(e,t,r,n,i,o),!0)}connectionInformationChanged(e,t,n,r,i,o){this.logger.info`Relay Session ID (qrsi): ${Va(Zr(r))}`,this._relayIP&&this._relayPort?this.logger.info`Relay address changed from ${Da(this._relayIP)}:${Aa(this._relayPort)} to ${Da(e)}:${Aa(t)}`:this.logger.info`Relay address is ${Da(e)}:${Aa(t)}`,this._relayIP=e,this._relayPort=t,this.relaySessionToken=n,this.participantId=o,this.relayAllocTime=i,this.relaySessionId=r}async wrapPreKeyForConnection(e){if(!fn.useQRForKeyExchange)return this.logger.silly`QR for key exchange is disabled. Will not send.`,null;const t=await this.qrMaterialEncoder.encodePreKey(e,this.groupId,this._idsController.identity.signingKeyPair.privateKey);return t instanceof Error?(this.logger.warn`Could not encode prekey: ${In(t)}`,null):t}async createConnection(e){return this.relaySessionToken?this.relayIP?this.relayPort?this.participantId?(this.logger.info`Creating a QR Connection`,Bu(this).create(this.provider,this,this.groupId,this.relaySessionToken,this.relayIP,this.relayPort,this.participantId,e&&await this.wrapPreKeyForConnection(e))):new Ce(Se`Failed to create QR connection due to missing of participantId`):new Ce(Se`Failed to create QR connection due to missing of relayPort`):new Ce(Se`Failed to create QR connection due to missing of relayIP`):new Ce(Se`Failed to create QR connection due to missing of relaySessionToken`)}async diagnose(e){e.h2.info`QRSession: ${Va(this.relaySessionId?Zr(this.relaySessionId):"no relay session ID yet")}`,e.info`- Relay: ${Aa(this.relayIP)}:${Aa(this.relayPort)}`,e.info`- Session Token: ${Ga(this.relaySessionToken?sr(this.relaySessionToken):"no relay session token yet")}`,e.info``,e.h4.info`Connection Attempt Timestamps:`,e.info`${V(this.connectionAttemptTimestamps).session()}`,this.currentConnection&&await this.currentConnection.diagnose(e)}dbg_injectQRError(e){var t;null===(t=this.currentConnection)||void 0===t||t.dbg_injectQRError(e)}dbg_sendTestMessage(){this.currentConnection?this.currentConnection.dbg_sendTestMessage():this.logger.error`Can't send test message when disconnected`}}class Lu extends Ds{constructor(e,t=[]){super(e),Object.defineProperty(this,"didChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"idsConfig",{enumerable:!0,configurable:!0,writable:!0,value:Rc(this)}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this).child`IDSGroupMasterKeyMaterialStore`()}),Object.defineProperty(this,"_mkmMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"promises",{enumerable:!0,configurable:!0,writable:!0,value:new rd(Se`Timeout waiting for mkm`,this.idsConfig.MKMPreRecoveryInterval)});for(const e of t){const t=Qn(e.mki,!0);this._mkmMap.has(t)||this._mkmMap.set(t,e)}}get mkmMap(){return this._mkmMap}get mkms(){return new Set(this._mkmMap.values())}addMKMs(e,t=!0){for(const t of e){const e=Qn(t.mki,!0);this._mkmMap.has(e)||(this._mkmMap.set(e,t),this.promises.resolve(e,t))}this.cleanUpExpiredMKMs(t)}async waitForMKMWithKeyId(e,t){const n=this.getMKMFromKeyId(e);return n||this.promises.waitFor(e,t)}getMKMFromKeyId(e){var t;return null!==(t=this._mkmMap.get(e))&&void 0!==t?t:null}cleanUpExpiredMKMs(e=!0){const t=Date.now()-this.idsConfig.MKMExpireDuration;for(const e of this._mkmMap.keys()){const n=this._mkmMap.get(e);n.createdAt<t&&(this._mkmMap.delete(e),this.logger.verbose`Deleting ${oo(e)}; expiration root time: ${V(""+t).notPII().forCertain()}, mkm created time: ${V(""+n.createdAt).notPII().forCertain()}`)}e&&this.didChange.notifyListeners(this._mkmMap)}clear(e=!0){this._mkmMap.clear(),this.logger.silly`Clearing all saved MKMs from this store`,e&&this.didChange.notifyListeners(this._mkmMap)}}const Ku=a(e=>new Lu(e));function qu(e,t,n){return`${e.toString()}:${t}${n}`}class Vu extends Ds{constructor(e){super(e),Object.defineProperty(this,"didChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"idsConfig",{enumerable:!0,configurable:!0,writable:!0,value:Rc(this)}),Object.defineProperty(this,"_skmMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"derivedKeyCache",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"promises",{enumerable:!0,configurable:!0,writable:!0,value:new rd(Se`Timeout waiting for skm`,this.idsConfig.MKMPreRecoveryInterval)})}get skms(){return new Set(this._skmMap.values())}addSKM(e){const t=Qn(e.ski,!0);this._skmMap.has(t)||(this._skmMap.set(t,e),this.promises.resolve(t,e))}async waitForSKMWithKeyId(e,t){const n=this.getSKMFromKeyId(e);return n||this.promises.waitFor(e,t)}getSKMFromKeyId(e){var t;return null!==(t=this._skmMap.get(e))&&void 0!==t?t:null}async getDerivedKey(e,t,n){const r=qu(e,t,n),i=this.derivedKeyCache.get(r);if(i)return i;const o=await this.waitForSKMWithKeyId(e);return o instanceof Error?o:this.deriveKey(o,t,n)}async deriveKey(e,t,n){const r=qu(Qn(e.ski,!0),t,n);let i;try{i=await crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:e.sks,info:(new TextEncoder).encode(`${t}${n}`)},e.skm,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}catch(e){return e}return this.derivedKeyCache.set(r,i),i}}const Fu=a(e=>new Vu(e));class Gu extends Error{constructor(e,t,n=Se`IDS query failed`,r=function(e,t){return Se`IDSQueryError${t?Se`[${V(t).notPII().forCertain()}]`:""}${e?Se`: ${In(e)}`:""}`}(t,n)){super(r.toString()),Object.defineProperty(this,"uri",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"underlyingError",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"logString",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"isLoggable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}}const Hu=br.Reader,Wu=br.Writer,Qu=br.util,zu=br.roots.default||(br.roots.default={}),Ju=zu.callservicesd=(()=>{const e={};return e.RelayMessage=function(){function e(e){if(this.protoCall=[],this.otherUniqueProxyIdentifiers=[],this.providers=[],this.remoteParticipantHandles=[],this.routes=[],this.endpointIDSDestinationURIs=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=0,e.prototype.uniqueProxyIdentifier="",e.prototype.destinationID="",e.prototype.sourceIdentifier="",e.prototype.protoCallModelState=null,e.prototype.protoService=0,e.prototype.protoWantsHoldMusic=!1,e.prototype.protoCannotBeAnswered=!1,e.prototype.protoDTMFKey=Qu.newBuffer([]),e.prototype.protoDisconnectedReason=0,e.prototype.OBSOLETEConferenceIdentifier="",e.prototype.protoVoicemail=!1,e.prototype.callerNameFromNetwork="",e.prototype.protoCall=Qu.emptyArray,e.prototype.hardPauseDigits="",e.prototype.hardPauseState=0,e.prototype.receivedMessageType=0,e.prototype.protoProtocolVersion=0,e.prototype.protoShouldSuppressRingtone=!1,e.prototype.dummyPayload=Qu.newBuffer([]),e.prototype.hostCallCreationTime=0,e.prototype.messageSendTime=0,e.prototype.protoNeedsManualInCallSounds=!1,e.prototype.protoCannotRelayAudioOrVideoOnPairedDevice=!1,e.prototype.protoExpectedEndpointOnMessagingDevice=!1,e.prototype.contactIdentifier="",e.prototype.protoCallCapabilitiesState=null,e.prototype.protoSoundRegion=0,e.prototype.protoEmergency=!1,e.prototype.otherUniqueProxyIdentifiers=Qu.emptyArray,e.prototype.protoCallModel=null,e.prototype.handle=null,e.prototype.protoSOS=!1,e.prototype.providers=Qu.emptyArray,e.prototype.protoDisplayContext=null,e.prototype.inviteData=null,e.prototype.protoProvider=null,e.prototype.protoVideo=!1,e.prototype.protoUplinkMuted=!1,e.prototype.protoRemoteUplinkMuted=!1,e.prototype.systemVolume=0,e.prototype.localSenderIdentityUUIDString="",e.prototype.remoteParticipantHandles=Qu.emptyArray,e.prototype.localSenderIdentityAccountUUIDString="",e.prototype.protoTTYType=0,e.prototype.protoSupportsTTYWithVoice=!1,e.prototype.requestActionType=0,e.prototype.routes=Qu.emptyArray,e.prototype.route=null,e.prototype.endpointIDSDestinationURIs=Qu.emptyArray,e.prototype.isoCountryCode="",e.prototype.protoPriority=0,e.prototype.protoOriginatingUIType=0,e.prototype.protoFailureExpected=!1,e.prototype.protoSupportsEmergencyFallback=!1,e.encode=function(e,t){if(t||(t=Wu.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.uniqueProxyIdentifier&&Object.hasOwnProperty.call(e,"uniqueProxyIdentifier")&&t.uint32(18).string(e.uniqueProxyIdentifier),null!=e.destinationID&&Object.hasOwnProperty.call(e,"destinationID")&&t.uint32(26).string(e.destinationID),null!=e.sourceIdentifier&&Object.hasOwnProperty.call(e,"sourceIdentifier")&&t.uint32(34).string(e.sourceIdentifier),null!=e.protoCallModelState&&Object.hasOwnProperty.call(e,"protoCallModelState")&&zu.callservicesd.CallModelState.encode(e.protoCallModelState,t.uint32(42).fork()).ldelim(),null!=e.protoService&&Object.hasOwnProperty.call(e,"protoService")&&t.uint32(48).uint32(e.protoService),null!=e.protoWantsHoldMusic&&Object.hasOwnProperty.call(e,"protoWantsHoldMusic")&&t.uint32(56).bool(e.protoWantsHoldMusic),null!=e.protoCannotBeAnswered&&Object.hasOwnProperty.call(e,"protoCannotBeAnswered")&&t.uint32(64).bool(e.protoCannotBeAnswered),null!=e.protoDTMFKey&&Object.hasOwnProperty.call(e,"protoDTMFKey")&&t.uint32(74).bytes(e.protoDTMFKey),null!=e.protoDisconnectedReason&&Object.hasOwnProperty.call(e,"protoDisconnectedReason")&&t.uint32(80).uint32(e.protoDisconnectedReason),null!=e.OBSOLETEConferenceIdentifier&&Object.hasOwnProperty.call(e,"OBSOLETEConferenceIdentifier")&&t.uint32(90).string(e.OBSOLETEConferenceIdentifier),null!=e.protoVoicemail&&Object.hasOwnProperty.call(e,"protoVoicemail")&&t.uint32(96).bool(e.protoVoicemail),null!=e.callerNameFromNetwork&&Object.hasOwnProperty.call(e,"callerNameFromNetwork")&&t.uint32(106).string(e.callerNameFromNetwork),null!=e.protoCall&&e.protoCall.length)for(let n=0;n<e.protoCall.length;++n)zu.callservicesd.Call.encode(e.protoCall[n],t.uint32(114).fork()).ldelim();if(null!=e.hardPauseDigits&&Object.hasOwnProperty.call(e,"hardPauseDigits")&&t.uint32(122).string(e.hardPauseDigits),null!=e.hardPauseState&&Object.hasOwnProperty.call(e,"hardPauseState")&&t.uint32(128).uint32(e.hardPauseState),null!=e.receivedMessageType&&Object.hasOwnProperty.call(e,"receivedMessageType")&&t.uint32(136).int32(e.receivedMessageType),null!=e.protoProtocolVersion&&Object.hasOwnProperty.call(e,"protoProtocolVersion")&&t.uint32(144).uint32(e.protoProtocolVersion),null!=e.protoShouldSuppressRingtone&&Object.hasOwnProperty.call(e,"protoShouldSuppressRingtone")&&t.uint32(152).bool(e.protoShouldSuppressRingtone),null!=e.dummyPayload&&Object.hasOwnProperty.call(e,"dummyPayload")&&t.uint32(162).bytes(e.dummyPayload),null!=e.hostCallCreationTime&&Object.hasOwnProperty.call(e,"hostCallCreationTime")&&t.uint32(169).double(e.hostCallCreationTime),null!=e.messageSendTime&&Object.hasOwnProperty.call(e,"messageSendTime")&&t.uint32(177).double(e.messageSendTime),null!=e.protoNeedsManualInCallSounds&&Object.hasOwnProperty.call(e,"protoNeedsManualInCallSounds")&&t.uint32(184).bool(e.protoNeedsManualInCallSounds),null!=e.protoCannotRelayAudioOrVideoOnPairedDevice&&Object.hasOwnProperty.call(e,"protoCannotRelayAudioOrVideoOnPairedDevice")&&t.uint32(192).bool(e.protoCannotRelayAudioOrVideoOnPairedDevice),null!=e.protoExpectedEndpointOnMessagingDevice&&Object.hasOwnProperty.call(e,"protoExpectedEndpointOnMessagingDevice")&&t.uint32(200).bool(e.protoExpectedEndpointOnMessagingDevice),null!=e.contactIdentifier&&Object.hasOwnProperty.call(e,"contactIdentifier")&&t.uint32(210).string(e.contactIdentifier),null!=e.protoCallCapabilitiesState&&Object.hasOwnProperty.call(e,"protoCallCapabilitiesState")&&zu.callservicesd.CallCapabilitiesState.encode(e.protoCallCapabilitiesState,t.uint32(218).fork()).ldelim(),null!=e.protoSoundRegion&&Object.hasOwnProperty.call(e,"protoSoundRegion")&&t.uint32(224).uint32(e.protoSoundRegion),null!=e.protoEmergency&&Object.hasOwnProperty.call(e,"protoEmergency")&&t.uint32(232).bool(e.protoEmergency),null!=e.otherUniqueProxyIdentifiers&&e.otherUniqueProxyIdentifiers.length)for(let n=0;n<e.otherUniqueProxyIdentifiers.length;++n)t.uint32(250).string(e.otherUniqueProxyIdentifiers[n]);if(null!=e.protoCallModel&&Object.hasOwnProperty.call(e,"protoCallModel")&&zu.callservicesd.CallModel.encode(e.protoCallModel,t.uint32(258).fork()).ldelim(),null!=e.handle&&Object.hasOwnProperty.call(e,"handle")&&zu.callservicesd.Handle.encode(e.handle,t.uint32(266).fork()).ldelim(),null!=e.protoSOS&&Object.hasOwnProperty.call(e,"protoSOS")&&t.uint32(272).bool(e.protoSOS),null!=e.providers&&e.providers.length)for(let n=0;n<e.providers.length;++n)zu.callservicesd.CallProvider.encode(e.providers[n],t.uint32(282).fork()).ldelim();if(null!=e.protoDisplayContext&&Object.hasOwnProperty.call(e,"protoDisplayContext")&&zu.callservicesd.CallDisplayContext.encode(e.protoDisplayContext,t.uint32(290).fork()).ldelim(),null!=e.inviteData&&Object.hasOwnProperty.call(e,"inviteData")&&zu.callservicesd.AVConferenceInviteData.encode(e.inviteData,t.uint32(298).fork()).ldelim(),null!=e.protoProvider&&Object.hasOwnProperty.call(e,"protoProvider")&&zu.callservicesd.CallProvider.encode(e.protoProvider,t.uint32(306).fork()).ldelim(),null!=e.protoVideo&&Object.hasOwnProperty.call(e,"protoVideo")&&t.uint32(312).bool(e.protoVideo),null!=e.protoUplinkMuted&&Object.hasOwnProperty.call(e,"protoUplinkMuted")&&t.uint32(320).bool(e.protoUplinkMuted),null!=e.protoRemoteUplinkMuted&&Object.hasOwnProperty.call(e,"protoRemoteUplinkMuted")&&t.uint32(328).bool(e.protoRemoteUplinkMuted),null!=e.systemVolume&&Object.hasOwnProperty.call(e,"systemVolume")&&t.uint32(341).float(e.systemVolume),null!=e.localSenderIdentityUUIDString&&Object.hasOwnProperty.call(e,"localSenderIdentityUUIDString")&&t.uint32(346).string(e.localSenderIdentityUUIDString),null!=e.remoteParticipantHandles&&e.remoteParticipantHandles.length)for(let n=0;n<e.remoteParticipantHandles.length;++n)zu.callservicesd.Handle.encode(e.remoteParticipantHandles[n],t.uint32(354).fork()).ldelim();if(null!=e.localSenderIdentityAccountUUIDString&&Object.hasOwnProperty.call(e,"localSenderIdentityAccountUUIDString")&&t.uint32(362).string(e.localSenderIdentityAccountUUIDString),null!=e.protoTTYType&&Object.hasOwnProperty.call(e,"protoTTYType")&&t.uint32(368).uint32(e.protoTTYType),null!=e.protoSupportsTTYWithVoice&&Object.hasOwnProperty.call(e,"protoSupportsTTYWithVoice")&&t.uint32(376).bool(e.protoSupportsTTYWithVoice),null!=e.requestActionType&&Object.hasOwnProperty.call(e,"requestActionType")&&t.uint32(384).int32(e.requestActionType),null!=e.routes&&e.routes.length)for(let n=0;n<e.routes.length;++n)zu.callservicesd.Route.encode(e.routes[n],t.uint32(394).fork()).ldelim();if(null!=e.route&&Object.hasOwnProperty.call(e,"route")&&zu.callservicesd.Route.encode(e.route,t.uint32(402).fork()).ldelim(),null!=e.endpointIDSDestinationURIs&&e.endpointIDSDestinationURIs.length)for(let n=0;n<e.endpointIDSDestinationURIs.length;++n)t.uint32(410).string(e.endpointIDSDestinationURIs[n]);return null!=e.isoCountryCode&&Object.hasOwnProperty.call(e,"isoCountryCode")&&t.uint32(418).string(e.isoCountryCode),null!=e.protoPriority&&Object.hasOwnProperty.call(e,"protoPriority")&&t.uint32(424).uint32(e.protoPriority),null!=e.protoOriginatingUIType&&Object.hasOwnProperty.call(e,"protoOriginatingUIType")&&t.uint32(432).uint32(e.protoOriginatingUIType),null!=e.protoFailureExpected&&Object.hasOwnProperty.call(e,"protoFailureExpected")&&t.uint32(440).bool(e.protoFailureExpected),null!=e.protoSupportsEmergencyFallback&&Object.hasOwnProperty.call(e,"protoSupportsEmergencyFallback")&&t.uint32(448).bool(e.protoSupportsEmergencyFallback),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.RelayMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.type=e.int32();break;case 2:r.uniqueProxyIdentifier=e.string();break;case 3:r.destinationID=e.string();break;case 4:r.sourceIdentifier=e.string();break;case 5:r.protoCallModelState=zu.callservicesd.CallModelState.decode(e,e.uint32());break;case 6:r.protoService=e.uint32();break;case 7:r.protoWantsHoldMusic=e.bool();break;case 8:r.protoCannotBeAnswered=e.bool();break;case 9:r.protoDTMFKey=e.bytes();break;case 10:r.protoDisconnectedReason=e.uint32();break;case 11:r.OBSOLETEConferenceIdentifier=e.string();break;case 12:r.protoVoicemail=e.bool();break;case 13:r.callerNameFromNetwork=e.string();break;case 14:r.protoCall&&r.protoCall.length||(r.protoCall=[]),r.protoCall.push(zu.callservicesd.Call.decode(e,e.uint32()));break;case 15:r.hardPauseDigits=e.string();break;case 16:r.hardPauseState=e.uint32();break;case 17:r.receivedMessageType=e.int32();break;case 18:r.protoProtocolVersion=e.uint32();break;case 19:r.protoShouldSuppressRingtone=e.bool();break;case 20:r.dummyPayload=e.bytes();break;case 21:r.hostCallCreationTime=e.double();break;case 22:r.messageSendTime=e.double();break;case 23:r.protoNeedsManualInCallSounds=e.bool();break;case 24:r.protoCannotRelayAudioOrVideoOnPairedDevice=e.bool();break;case 25:r.protoExpectedEndpointOnMessagingDevice=e.bool();break;case 26:r.contactIdentifier=e.string();break;case 27:r.protoCallCapabilitiesState=zu.callservicesd.CallCapabilitiesState.decode(e,e.uint32());break;case 28:r.protoSoundRegion=e.uint32();break;case 29:r.protoEmergency=e.bool();break;case 31:r.otherUniqueProxyIdentifiers&&r.otherUniqueProxyIdentifiers.length||(r.otherUniqueProxyIdentifiers=[]),r.otherUniqueProxyIdentifiers.push(e.string());break;case 32:r.protoCallModel=zu.callservicesd.CallModel.decode(e,e.uint32());break;case 33:r.handle=zu.callservicesd.Handle.decode(e,e.uint32());break;case 34:r.protoSOS=e.bool();break;case 35:r.providers&&r.providers.length||(r.providers=[]),r.providers.push(zu.callservicesd.CallProvider.decode(e,e.uint32()));break;case 36:r.protoDisplayContext=zu.callservicesd.CallDisplayContext.decode(e,e.uint32());break;case 37:r.inviteData=zu.callservicesd.AVConferenceInviteData.decode(e,e.uint32());break;case 38:r.protoProvider=zu.callservicesd.CallProvider.decode(e,e.uint32());break;case 39:r.protoVideo=e.bool();break;case 40:r.protoUplinkMuted=e.bool();break;case 41:r.protoRemoteUplinkMuted=e.bool();break;case 42:r.systemVolume=e.float();break;case 43:r.localSenderIdentityUUIDString=e.string();break;case 44:r.remoteParticipantHandles&&r.remoteParticipantHandles.length||(r.remoteParticipantHandles=[]),r.remoteParticipantHandles.push(zu.callservicesd.Handle.decode(e,e.uint32()));break;case 45:r.localSenderIdentityAccountUUIDString=e.string();break;case 46:r.protoTTYType=e.uint32();break;case 47:r.protoSupportsTTYWithVoice=e.bool();break;case 48:r.requestActionType=e.int32();break;case 49:r.routes&&r.routes.length||(r.routes=[]),r.routes.push(zu.callservicesd.Route.decode(e,e.uint32()));break;case 50:r.route=zu.callservicesd.Route.decode(e,e.uint32());break;case 51:r.endpointIDSDestinationURIs&&r.endpointIDSDestinationURIs.length||(r.endpointIDSDestinationURIs=[]),r.endpointIDSDestinationURIs.push(e.string());break;case 52:r.isoCountryCode=e.string();break;case 53:r.protoPriority=e.uint32();break;case 54:r.protoOriginatingUIType=e.uint32();break;case 55:r.protoFailureExpected=e.bool();break;case 56:r.protoSupportsEmergencyFallback=e.bool();break;default:e.skipType(7&t)}}return r},e.RelayMessageType=function(){const e={},t=Object.create(e);return t[e[0]="NoAction"]=0,t[e[1]="IncomingCall"]=1,t[e[2]="DialCall"]=2,t[e[3]="CallDialed"]=3,t[e[4]="AnswerCall"]=4,t[e[5]="CallAnsweredElsewhere"]=5,t[e[6]="CallDisconnected"]=6,t[e[7]="PlayDTMFToneForKey"]=7,t[e[8]="CallConnected"]=8,t[e[9]="DisconnectCall"]=9,t[e[10]="PullRelayingCalls"]=10,t[e[11]="HoldCall"]=11,t[e[12]="UnholdCall"]=12,t[e[13]="GroupCall"]=13,t[e[14]="UngroupCall"]=14,t[e[15]="ResetWantsHoldMusic"]=15,t[e[16]="SwapCalls"]=16,t[e[17]="UpdateCallModel"]=17,t[e[18]="DeviceUnavailable"]=18,t[e[19]="EndActiveAndAnswer"]=19,t[e[20]="EndHeldAndAnswer"]=20,t[e[21]="DisconnectCurrentCallAndActivateHeld"]=21,t[e[22]="DisconnectAllCalls"]=22,t[e[23]="ResetState"]=23,t[e[24]="HardPauseDigitsAvailability"]=24,t[e[25]="SendHardPauseDigits"]=25,t[e[26]="UpdateRemoteCallState"]=26,t[e[27]="SuppressRingtone"]=27,t[e[28]="RequestCallContext"]=28,t[e[29]="CallStartedConnecting"]=29,t[e[30]="PushHostedCalls"]=30,t[e[31]="PullHostedCalls"]=31,t[e[32]="PushRelayingCalls"]=32,t[e[33]="UpdateCallContext"]=33,t[e[34]="NeedsManualInCallSoundsChange"]=34,t[e[35]="InvitationSent"]=35,t[e[36]="HoldActiveAndAnswer"]=36,t[e[37]="UpdateCallDisplayContext"]=37,t[e[38]="SetUplinkMuted"]=38,t[e[39]="UpdateRemoteUplinkMuted"]=39,t[e[40]="UpdateSystemVolume"]=40,t[e[41]="UpdateSupportsTTYWithVoice"]=41,t[e[42]="SetTTYType"]=42,t[e[43]="RequestAction"]=43,t[e[44]="UpdateRoutes"]=44,t[e[45]="PickRoute"]=45,t[e[46]="DowngradeToAudio"]=46,t[e[47]="UpdateFailureExpected"]=47,t[e[48]="UpdateSupportsEmergencyFallback"]=48,t}(),e}(),e.Call=function(){function e(e){if(this.remoteParticipantHandles=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uniqueProxyIdentifier="",e.prototype.protoStatus=0,e.prototype.protoConferenced=!1,e.prototype.destinationID="",e.prototype.sourceIdentifier="",e.prototype.protoService=0,e.prototype.protoWantsHoldMusic=!1,e.prototype.protoDisconnectedReason=0,e.prototype.protoVoicemail=!1,e.prototype.callerNameFromNetwork="",e.prototype.protoTimeConnected=0,e.prototype.protoOutgoing=!1,e.prototype.protoShouldSuppressRingtone=!1,e.prototype.protoNeedsManualInCallSounds=!1,e.prototype.protoSoundRegion=0,e.prototype.protoEmergency=!1,e.prototype.protoHasSentInvitation=!1,e.prototype.handle=null,e.prototype.protoSOS=!1,e.prototype.protoProvider=null,e.prototype.protoVideo=!1,e.prototype.protoUplinkMuted=!1,e.prototype.protoCallModel=null,e.prototype.localSenderIdentityUUIDString="",e.prototype.remoteParticipantHandles=Qu.emptyArray,e.prototype.localSenderIdentityAccountUUIDString="",e.prototype.protoTTYType=0,e.prototype.protoSupportsTTYWithVoice=!1,e.prototype.isoCountryCode="",e.prototype.protoOriginatingUIType=0,e.prototype.protoFailureExpected=!1,e.prototype.protoSupportsEmergencyFallback=!1,e.encode=function(e,t){if(t||(t=Wu.create()),null!=e.uniqueProxyIdentifier&&Object.hasOwnProperty.call(e,"uniqueProxyIdentifier")&&t.uint32(10).string(e.uniqueProxyIdentifier),null!=e.protoStatus&&Object.hasOwnProperty.call(e,"protoStatus")&&t.uint32(16).uint32(e.protoStatus),null!=e.protoConferenced&&Object.hasOwnProperty.call(e,"protoConferenced")&&t.uint32(24).bool(e.protoConferenced),null!=e.destinationID&&Object.hasOwnProperty.call(e,"destinationID")&&t.uint32(34).string(e.destinationID),null!=e.sourceIdentifier&&Object.hasOwnProperty.call(e,"sourceIdentifier")&&t.uint32(42).string(e.sourceIdentifier),null!=e.protoService&&Object.hasOwnProperty.call(e,"protoService")&&t.uint32(48).uint32(e.protoService),null!=e.protoWantsHoldMusic&&Object.hasOwnProperty.call(e,"protoWantsHoldMusic")&&t.uint32(56).bool(e.protoWantsHoldMusic),null!=e.protoDisconnectedReason&&Object.hasOwnProperty.call(e,"protoDisconnectedReason")&&t.uint32(64).uint32(e.protoDisconnectedReason),null!=e.protoVoicemail&&Object.hasOwnProperty.call(e,"protoVoicemail")&&t.uint32(72).bool(e.protoVoicemail),null!=e.callerNameFromNetwork&&Object.hasOwnProperty.call(e,"callerNameFromNetwork")&&t.uint32(82).string(e.callerNameFromNetwork),null!=e.protoTimeConnected&&Object.hasOwnProperty.call(e,"protoTimeConnected")&&t.uint32(89).double(e.protoTimeConnected),null!=e.protoOutgoing&&Object.hasOwnProperty.call(e,"protoOutgoing")&&t.uint32(96).bool(e.protoOutgoing),null!=e.protoShouldSuppressRingtone&&Object.hasOwnProperty.call(e,"protoShouldSuppressRingtone")&&t.uint32(104).bool(e.protoShouldSuppressRingtone),null!=e.protoNeedsManualInCallSounds&&Object.hasOwnProperty.call(e,"protoNeedsManualInCallSounds")&&t.uint32(112).bool(e.protoNeedsManualInCallSounds),null!=e.protoSoundRegion&&Object.hasOwnProperty.call(e,"protoSoundRegion")&&t.uint32(120).uint32(e.protoSoundRegion),null!=e.protoEmergency&&Object.hasOwnProperty.call(e,"protoEmergency")&&t.uint32(128).bool(e.protoEmergency),null!=e.protoHasSentInvitation&&Object.hasOwnProperty.call(e,"protoHasSentInvitation")&&t.uint32(136).bool(e.protoHasSentInvitation),null!=e.handle&&Object.hasOwnProperty.call(e,"handle")&&zu.callservicesd.Handle.encode(e.handle,t.uint32(146).fork()).ldelim(),null!=e.protoSOS&&Object.hasOwnProperty.call(e,"protoSOS")&&t.uint32(152).bool(e.protoSOS),null!=e.protoProvider&&Object.hasOwnProperty.call(e,"protoProvider")&&zu.callservicesd.CallProvider.encode(e.protoProvider,t.uint32(162).fork()).ldelim(),null!=e.protoVideo&&Object.hasOwnProperty.call(e,"protoVideo")&&t.uint32(168).bool(e.protoVideo),null!=e.protoUplinkMuted&&Object.hasOwnProperty.call(e,"protoUplinkMuted")&&t.uint32(176).bool(e.protoUplinkMuted),null!=e.protoCallModel&&Object.hasOwnProperty.call(e,"protoCallModel")&&zu.callservicesd.CallModel.encode(e.protoCallModel,t.uint32(186).fork()).ldelim(),null!=e.localSenderIdentityUUIDString&&Object.hasOwnProperty.call(e,"localSenderIdentityUUIDString")&&t.uint32(194).string(e.localSenderIdentityUUIDString),null!=e.remoteParticipantHandles&&e.remoteParticipantHandles.length)for(let n=0;n<e.remoteParticipantHandles.length;++n)zu.callservicesd.Handle.encode(e.remoteParticipantHandles[n],t.uint32(202).fork()).ldelim();return null!=e.localSenderIdentityAccountUUIDString&&Object.hasOwnProperty.call(e,"localSenderIdentityAccountUUIDString")&&t.uint32(210).string(e.localSenderIdentityAccountUUIDString),null!=e.protoTTYType&&Object.hasOwnProperty.call(e,"protoTTYType")&&t.uint32(216).uint32(e.protoTTYType),null!=e.protoSupportsTTYWithVoice&&Object.hasOwnProperty.call(e,"protoSupportsTTYWithVoice")&&t.uint32(224).bool(e.protoSupportsTTYWithVoice),null!=e.isoCountryCode&&Object.hasOwnProperty.call(e,"isoCountryCode")&&t.uint32(234).string(e.isoCountryCode),null!=e.protoOriginatingUIType&&Object.hasOwnProperty.call(e,"protoOriginatingUIType")&&t.uint32(240).uint32(e.protoOriginatingUIType),null!=e.protoFailureExpected&&Object.hasOwnProperty.call(e,"protoFailureExpected")&&t.uint32(248).bool(e.protoFailureExpected),null!=e.protoSupportsEmergencyFallback&&Object.hasOwnProperty.call(e,"protoSupportsEmergencyFallback")&&t.uint32(256).bool(e.protoSupportsEmergencyFallback),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.Call;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.uniqueProxyIdentifier=e.string();break;case 2:r.protoStatus=e.uint32();break;case 3:r.protoConferenced=e.bool();break;case 4:r.destinationID=e.string();break;case 5:r.sourceIdentifier=e.string();break;case 6:r.protoService=e.uint32();break;case 7:r.protoWantsHoldMusic=e.bool();break;case 8:r.protoDisconnectedReason=e.uint32();break;case 9:r.protoVoicemail=e.bool();break;case 10:r.callerNameFromNetwork=e.string();break;case 11:r.protoTimeConnected=e.double();break;case 12:r.protoOutgoing=e.bool();break;case 13:r.protoShouldSuppressRingtone=e.bool();break;case 14:r.protoNeedsManualInCallSounds=e.bool();break;case 15:r.protoSoundRegion=e.uint32();break;case 16:r.protoEmergency=e.bool();break;case 17:r.protoHasSentInvitation=e.bool();break;case 18:r.handle=zu.callservicesd.Handle.decode(e,e.uint32());break;case 19:r.protoSOS=e.bool();break;case 20:r.protoProvider=zu.callservicesd.CallProvider.decode(e,e.uint32());break;case 21:r.protoVideo=e.bool();break;case 22:r.protoUplinkMuted=e.bool();break;case 23:r.protoCallModel=zu.callservicesd.CallModel.decode(e,e.uint32());break;case 24:r.localSenderIdentityUUIDString=e.string();break;case 25:r.remoteParticipantHandles&&r.remoteParticipantHandles.length||(r.remoteParticipantHandles=[]),r.remoteParticipantHandles.push(zu.callservicesd.Handle.decode(e,e.uint32()));break;case 26:r.localSenderIdentityAccountUUIDString=e.string();break;case 27:r.protoTTYType=e.uint32();break;case 28:r.protoSupportsTTYWithVoice=e.bool();break;case 29:r.isoCountryCode=e.string();break;case 30:r.protoOriginatingUIType=e.uint32();break;case 31:r.protoFailureExpected=e.bool();break;case 32:r.protoSupportsEmergencyFallback=e.bool();break;default:e.skipType(7&t)}}return r},e}(),e.CallModel=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.supportsHolding=!1,e.prototype.supportsGrouping=!1,e.prototype.supportsUngrouping=!1,e.prototype.supportsDTMF=!1,e.prototype.supportsUnambiguousMultiPartyState=!1,e.prototype.supportsAddCall=!1,e.prototype.supportsSendingToVoicemail=!1,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.supportsHolding&&Object.hasOwnProperty.call(e,"supportsHolding")&&t.uint32(8).bool(e.supportsHolding),null!=e.supportsGrouping&&Object.hasOwnProperty.call(e,"supportsGrouping")&&t.uint32(16).bool(e.supportsGrouping),null!=e.supportsUngrouping&&Object.hasOwnProperty.call(e,"supportsUngrouping")&&t.uint32(24).bool(e.supportsUngrouping),null!=e.supportsDTMF&&Object.hasOwnProperty.call(e,"supportsDTMF")&&t.uint32(32).bool(e.supportsDTMF),null!=e.supportsUnambiguousMultiPartyState&&Object.hasOwnProperty.call(e,"supportsUnambiguousMultiPartyState")&&t.uint32(48).bool(e.supportsUnambiguousMultiPartyState),null!=e.supportsAddCall&&Object.hasOwnProperty.call(e,"supportsAddCall")&&t.uint32(56).bool(e.supportsAddCall),null!=e.supportsSendingToVoicemail&&Object.hasOwnProperty.call(e,"supportsSendingToVoicemail")&&t.uint32(64).bool(e.supportsSendingToVoicemail),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.CallModel;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.supportsHolding=e.bool();break;case 2:r.supportsGrouping=e.bool();break;case 3:r.supportsUngrouping=e.bool();break;case 4:r.supportsDTMF=e.bool();break;case 6:r.supportsUnambiguousMultiPartyState=e.bool();break;case 7:r.supportsAddCall=e.bool();break;case 8:r.supportsSendingToVoicemail=e.bool();break;default:e.skipType(7&t)}}return r},e}(),e.CallCapabilitiesState=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.faceTimeAudioAvailable=!1,e.prototype.faceTimeVideoAvailable=!1,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.faceTimeAudioAvailable&&Object.hasOwnProperty.call(e,"faceTimeAudioAvailable")&&t.uint32(8).bool(e.faceTimeAudioAvailable),null!=e.faceTimeVideoAvailable&&Object.hasOwnProperty.call(e,"faceTimeVideoAvailable")&&t.uint32(16).bool(e.faceTimeVideoAvailable),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.CallCapabilitiesState;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.faceTimeAudioAvailable=e.bool();break;case 2:r.faceTimeVideoAvailable=e.bool();break;default:e.skipType(7&t)}}return r},e}(),e.CallProvider=function(){function e(e){if(this.handoffIdentifier=[],this.protoSupportedHandleType=[],this.emergencyLabeledHandles=[],this.prioritizedSenderIdentities=[],this.emergencyHandles=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.identifier="",e.prototype.localizedName="",e.prototype.bundleURLString="",e.prototype.maximumCallGroups=0,e.prototype.maximumCallsPerCallGroup=0,e.prototype.supportsAudioOnly=!1,e.prototype.supportsAudioAndVideo=!1,e.prototype.supportsEmergency=!1,e.prototype.supportsVoicemail=!1,e.prototype.ringtoneSoundURLString="",e.prototype.originalRingtoneSoundURLString="",e.prototype.handoffIdentifier=Qu.emptyArray,e.prototype.protoSupportedHandleType=Qu.emptyArray,e.prototype.emergencyLabeledHandles=Qu.emptyArray,e.prototype.supportsRecents=!1,e.prototype.prioritizedSenderIdentities=Qu.emptyArray,e.prototype.emergencyHandles=Qu.emptyArray,e.encode=function(e,t){if(t||(t=Wu.create()),null!=e.identifier&&Object.hasOwnProperty.call(e,"identifier")&&t.uint32(10).string(e.identifier),null!=e.localizedName&&Object.hasOwnProperty.call(e,"localizedName")&&t.uint32(18).string(e.localizedName),null!=e.bundleURLString&&Object.hasOwnProperty.call(e,"bundleURLString")&&t.uint32(26).string(e.bundleURLString),null!=e.maximumCallGroups&&Object.hasOwnProperty.call(e,"maximumCallGroups")&&t.uint32(32).uint32(e.maximumCallGroups),null!=e.maximumCallsPerCallGroup&&Object.hasOwnProperty.call(e,"maximumCallsPerCallGroup")&&t.uint32(40).uint32(e.maximumCallsPerCallGroup),null!=e.supportsAudioOnly&&Object.hasOwnProperty.call(e,"supportsAudioOnly")&&t.uint32(48).bool(e.supportsAudioOnly),null!=e.supportsAudioAndVideo&&Object.hasOwnProperty.call(e,"supportsAudioAndVideo")&&t.uint32(56).bool(e.supportsAudioAndVideo),null!=e.supportsEmergency&&Object.hasOwnProperty.call(e,"supportsEmergency")&&t.uint32(64).bool(e.supportsEmergency),null!=e.supportsVoicemail&&Object.hasOwnProperty.call(e,"supportsVoicemail")&&t.uint32(72).bool(e.supportsVoicemail),null!=e.ringtoneSoundURLString&&Object.hasOwnProperty.call(e,"ringtoneSoundURLString")&&t.uint32(82).string(e.ringtoneSoundURLString),null!=e.originalRingtoneSoundURLString&&Object.hasOwnProperty.call(e,"originalRingtoneSoundURLString")&&t.uint32(90).string(e.originalRingtoneSoundURLString),null!=e.handoffIdentifier&&e.handoffIdentifier.length)for(let n=0;n<e.handoffIdentifier.length;++n)t.uint32(98).string(e.handoffIdentifier[n]);if(null!=e.protoSupportedHandleType&&e.protoSupportedHandleType.length)for(let n=0;n<e.protoSupportedHandleType.length;++n)t.uint32(104).uint32(e.protoSupportedHandleType[n]);if(null!=e.emergencyLabeledHandles&&e.emergencyLabeledHandles.length)for(let n=0;n<e.emergencyLabeledHandles.length;++n)zu.callservicesd.LabeledHandle.encode(e.emergencyLabeledHandles[n],t.uint32(114).fork()).ldelim();if(null!=e.supportsRecents&&Object.hasOwnProperty.call(e,"supportsRecents")&&t.uint32(120).bool(e.supportsRecents),null!=e.prioritizedSenderIdentities&&e.prioritizedSenderIdentities.length)for(let n=0;n<e.prioritizedSenderIdentities.length;++n)zu.callservicesd.SenderIdentity.encode(e.prioritizedSenderIdentities[n],t.uint32(130).fork()).ldelim();if(null!=e.emergencyHandles&&e.emergencyHandles.length)for(let n=0;n<e.emergencyHandles.length;++n)zu.callservicesd.Handle.encode(e.emergencyHandles[n],t.uint32(138).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.CallProvider;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.identifier=e.string();break;case 2:r.localizedName=e.string();break;case 3:r.bundleURLString=e.string();break;case 4:r.maximumCallGroups=e.uint32();break;case 5:r.maximumCallsPerCallGroup=e.uint32();break;case 6:r.supportsAudioOnly=e.bool();break;case 7:r.supportsAudioAndVideo=e.bool();break;case 8:r.supportsEmergency=e.bool();break;case 9:r.supportsVoicemail=e.bool();break;case 10:r.ringtoneSoundURLString=e.string();break;case 11:r.originalRingtoneSoundURLString=e.string();break;case 12:r.handoffIdentifier&&r.handoffIdentifier.length||(r.handoffIdentifier=[]),r.handoffIdentifier.push(e.string());break;case 13:if(r.protoSupportedHandleType&&r.protoSupportedHandleType.length||(r.protoSupportedHandleType=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.protoSupportedHandleType.push(e.uint32())}else r.protoSupportedHandleType.push(e.uint32());break;case 14:r.emergencyLabeledHandles&&r.emergencyLabeledHandles.length||(r.emergencyLabeledHandles=[]),r.emergencyLabeledHandles.push(zu.callservicesd.LabeledHandle.decode(e,e.uint32()));break;case 15:r.supportsRecents=e.bool();break;case 16:r.prioritizedSenderIdentities&&r.prioritizedSenderIdentities.length||(r.prioritizedSenderIdentities=[]),r.prioritizedSenderIdentities.push(zu.callservicesd.SenderIdentity.decode(e,e.uint32()));break;case 17:r.emergencyHandles&&r.emergencyHandles.length||(r.emergencyHandles=[]),r.emergencyHandles.push(zu.callservicesd.Handle.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.CallModelState=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ambiguityState=0,e.prototype.swappable=!1,e.prototype.mergeable=!1,e.prototype.holdAllowed=!1,e.prototype.addCallAllowed=!1,e.prototype.takingCallsPrivateAllowed=!1,e.prototype.hardPauseAvailable=!1,e.prototype.endAndAnswerAllowed=!1,e.prototype.holdAndAnswerAllowed=!1,e.prototype.sendToVoicemailAllowed=!1,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.ambiguityState&&Object.hasOwnProperty.call(e,"ambiguityState")&&t.uint32(8).uint32(e.ambiguityState),null!=e.swappable&&Object.hasOwnProperty.call(e,"swappable")&&t.uint32(16).bool(e.swappable),null!=e.mergeable&&Object.hasOwnProperty.call(e,"mergeable")&&t.uint32(24).bool(e.mergeable),null!=e.holdAllowed&&Object.hasOwnProperty.call(e,"holdAllowed")&&t.uint32(32).bool(e.holdAllowed),null!=e.addCallAllowed&&Object.hasOwnProperty.call(e,"addCallAllowed")&&t.uint32(40).bool(e.addCallAllowed),null!=e.takingCallsPrivateAllowed&&Object.hasOwnProperty.call(e,"takingCallsPrivateAllowed")&&t.uint32(48).bool(e.takingCallsPrivateAllowed),null!=e.hardPauseAvailable&&Object.hasOwnProperty.call(e,"hardPauseAvailable")&&t.uint32(56).bool(e.hardPauseAvailable),null!=e.endAndAnswerAllowed&&Object.hasOwnProperty.call(e,"endAndAnswerAllowed")&&t.uint32(64).bool(e.endAndAnswerAllowed),null!=e.holdAndAnswerAllowed&&Object.hasOwnProperty.call(e,"holdAndAnswerAllowed")&&t.uint32(72).bool(e.holdAndAnswerAllowed),null!=e.sendToVoicemailAllowed&&Object.hasOwnProperty.call(e,"sendToVoicemailAllowed")&&t.uint32(80).bool(e.sendToVoicemailAllowed),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.CallModelState;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.ambiguityState=e.uint32();break;case 2:r.swappable=e.bool();break;case 3:r.mergeable=e.bool();break;case 4:r.holdAllowed=e.bool();break;case 5:r.addCallAllowed=e.bool();break;case 6:r.takingCallsPrivateAllowed=e.bool();break;case 7:r.hardPauseAvailable=e.bool();break;case 8:r.endAndAnswerAllowed=e.bool();break;case 9:r.holdAndAnswerAllowed=e.bool();break;case 10:r.sendToVoicemailAllowed=e.bool();break;default:e.skipType(7&t)}}return r},e}(),e.CallMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=0,e.prototype.protoProtocolVersion=0,e.prototype.protoWantsVideo=!1,e.prototype.inviteData=null,e.prototype.OBSOLETEProtoMomentsAvailable=!1,e.prototype.protoSenderMuteUplink=!1,e.prototype.protoShouldSuppressInCallUI=!1,e.prototype.protoMomentsV2Available=!1,e.prototype.protoUpgradeSessionUUID="",e.encode=function(e,t){return t||(t=Wu.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.protoProtocolVersion&&Object.hasOwnProperty.call(e,"protoProtocolVersion")&&t.uint32(16).uint32(e.protoProtocolVersion),null!=e.protoWantsVideo&&Object.hasOwnProperty.call(e,"protoWantsVideo")&&t.uint32(24).bool(e.protoWantsVideo),null!=e.inviteData&&Object.hasOwnProperty.call(e,"inviteData")&&zu.callservicesd.AVConferenceInviteData.encode(e.inviteData,t.uint32(34).fork()).ldelim(),null!=e.OBSOLETEProtoMomentsAvailable&&Object.hasOwnProperty.call(e,"OBSOLETEProtoMomentsAvailable")&&t.uint32(40).bool(e.OBSOLETEProtoMomentsAvailable),null!=e.protoSenderMuteUplink&&Object.hasOwnProperty.call(e,"protoSenderMuteUplink")&&t.uint32(48).bool(e.protoSenderMuteUplink),null!=e.protoShouldSuppressInCallUI&&Object.hasOwnProperty.call(e,"protoShouldSuppressInCallUI")&&t.uint32(56).bool(e.protoShouldSuppressInCallUI),null!=e.protoMomentsV2Available&&Object.hasOwnProperty.call(e,"protoMomentsV2Available")&&t.uint32(64).bool(e.protoMomentsV2Available),null!=e.protoUpgradeSessionUUID&&Object.hasOwnProperty.call(e,"protoUpgradeSessionUUID")&&t.uint32(74).string(e.protoUpgradeSessionUUID),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.CallMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.type=e.int32();break;case 2:r.protoProtocolVersion=e.uint32();break;case 3:r.protoWantsVideo=e.bool();break;case 4:r.inviteData=zu.callservicesd.AVConferenceInviteData.decode(e,e.uint32());break;case 5:r.OBSOLETEProtoMomentsAvailable=e.bool();break;case 6:r.protoSenderMuteUplink=e.bool();break;case 7:r.protoShouldSuppressInCallUI=e.bool();break;case 8:r.protoMomentsV2Available=e.bool();break;case 9:r.protoUpgradeSessionUUID=e.string();break;default:e.skipType(7&t)}}return r},e.CallMessageType=function(){const e={},t=Object.create(e);return t[e[0]="Unknown"]=0,t[e[1]="Invite"]=1,t[e[2]="SenderMuteUplink"]=2,t}(),e}(),e.AVConferenceInviteData=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.SKEBlob=Qu.newBuffer([]),e.prototype.mediaBlob=Qu.newBuffer([]),e.prototype.callInfoBlob=Qu.newBuffer([]),e.encode=function(e,t){return t||(t=Wu.create()),null!=e.SKEBlob&&Object.hasOwnProperty.call(e,"SKEBlob")&&t.uint32(10).bytes(e.SKEBlob),null!=e.mediaBlob&&Object.hasOwnProperty.call(e,"mediaBlob")&&t.uint32(18).bytes(e.mediaBlob),null!=e.callInfoBlob&&Object.hasOwnProperty.call(e,"callInfoBlob")&&t.uint32(26).bytes(e.callInfoBlob),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.AVConferenceInviteData;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.SKEBlob=e.bytes();break;case 2:r.mediaBlob=e.bytes();break;case 3:r.callInfoBlob=e.bytes();break;default:e.skipType(7&t)}}return r},e}(),e.Handle=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=0,e.prototype.value="",e.prototype.normalizedValue="",e.prototype.isoCountryCode="",e.encode=function(e,t){return t||(t=Wu.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.normalizedValue&&Object.hasOwnProperty.call(e,"normalizedValue")&&t.uint32(26).string(e.normalizedValue),null!=e.isoCountryCode&&Object.hasOwnProperty.call(e,"isoCountryCode")&&t.uint32(34).string(e.isoCountryCode),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.Handle;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.type=e.int32();break;case 2:r.value=e.string();break;case 3:r.normalizedValue=e.string();break;case 4:r.isoCountryCode=e.string();break;default:e.skipType(7&t)}}return r},e.HandleType=function(){const e={},t=Object.create(e);return t[e[0]="None"]=0,t[e[1]="Generic"]=1,t[e[2]="PhoneNumber"]=2,t[e[3]="EmailAddress"]=3,t}(),e}(),e.LabeledHandle=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.handle=null,e.prototype.label="",e.encode=function(e,t){return t||(t=Wu.create()),null!=e.handle&&Object.hasOwnProperty.call(e,"handle")&&zu.callservicesd.Handle.encode(e.handle,t.uint32(10).fork()).ldelim(),null!=e.label&&Object.hasOwnProperty.call(e,"label")&&t.uint32(18).string(e.label),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.LabeledHandle;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.handle=zu.callservicesd.Handle.decode(e,e.uint32());break;case 2:r.label=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.SenderIdentity=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.protoUUID="",e.prototype.handle=null,e.prototype.localizedName="",e.prototype.localizedShortName="",e.prototype.accountUUIDString="",e.prototype.localizedServiceName="",e.encode=function(e,t){return t||(t=Wu.create()),null!=e.protoUUID&&Object.hasOwnProperty.call(e,"protoUUID")&&t.uint32(10).string(e.protoUUID),null!=e.handle&&Object.hasOwnProperty.call(e,"handle")&&zu.callservicesd.Handle.encode(e.handle,t.uint32(18).fork()).ldelim(),null!=e.localizedName&&Object.hasOwnProperty.call(e,"localizedName")&&t.uint32(26).string(e.localizedName),null!=e.localizedShortName&&Object.hasOwnProperty.call(e,"localizedShortName")&&t.uint32(34).string(e.localizedShortName),null!=e.accountUUIDString&&Object.hasOwnProperty.call(e,"accountUUIDString")&&t.uint32(42).string(e.accountUUIDString),null!=e.localizedServiceName&&Object.hasOwnProperty.call(e,"localizedServiceName")&&t.uint32(50).string(e.localizedServiceName),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.SenderIdentity;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.protoUUID=e.string();break;case 2:r.handle=zu.callservicesd.Handle.decode(e,e.uint32());break;case 3:r.localizedName=e.string();break;case 4:r.localizedShortName=e.string();break;case 5:r.accountUUIDString=e.string();break;case 6:r.localizedServiceName=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.PersonNameComponents=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.namePrefix="",e.prototype.givenName="",e.prototype.middleName="",e.prototype.familyName="",e.prototype.nameSuffix="",e.prototype.nickname="",e.prototype.phoneticRepresentation=null,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.namePrefix&&Object.hasOwnProperty.call(e,"namePrefix")&&t.uint32(10).string(e.namePrefix),null!=e.givenName&&Object.hasOwnProperty.call(e,"givenName")&&t.uint32(18).string(e.givenName),null!=e.middleName&&Object.hasOwnProperty.call(e,"middleName")&&t.uint32(26).string(e.middleName),null!=e.familyName&&Object.hasOwnProperty.call(e,"familyName")&&t.uint32(34).string(e.familyName),null!=e.nameSuffix&&Object.hasOwnProperty.call(e,"nameSuffix")&&t.uint32(42).string(e.nameSuffix),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(50).string(e.nickname),null!=e.phoneticRepresentation&&Object.hasOwnProperty.call(e,"phoneticRepresentation")&&zu.callservicesd.PersonNameComponents.encode(e.phoneticRepresentation,t.uint32(58).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.PersonNameComponents;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.namePrefix=e.string();break;case 2:r.givenName=e.string();break;case 3:r.middleName=e.string();break;case 4:r.familyName=e.string();break;case 5:r.nameSuffix=e.string();break;case 6:r.nickname=e.string();break;case 7:r.phoneticRepresentation=zu.callservicesd.PersonNameComponents.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e.CallDisplayContext=function(){function e(e){if(this.contactIdentifiers=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.protoPersonNameComponents=null,e.prototype.suggestedName="",e.prototype.label="",e.prototype.companyName="",e.prototype.mapName="",e.prototype.location="",e.prototype.contactName="",e.prototype.contactLabel="",e.prototype.callDirectoryLabel="",e.prototype.callDirectoryLocalizedExtensionContainingAppName="",e.prototype.callDirectoryExtensionIdentifier="",e.prototype.contactIdentifier="",e.prototype.contactIdentifiers=Qu.emptyArray,e.encode=function(e,t){if(t||(t=Wu.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.protoPersonNameComponents&&Object.hasOwnProperty.call(e,"protoPersonNameComponents")&&zu.callservicesd.PersonNameComponents.encode(e.protoPersonNameComponents,t.uint32(18).fork()).ldelim(),null!=e.suggestedName&&Object.hasOwnProperty.call(e,"suggestedName")&&t.uint32(26).string(e.suggestedName),null!=e.label&&Object.hasOwnProperty.call(e,"label")&&t.uint32(34).string(e.label),null!=e.companyName&&Object.hasOwnProperty.call(e,"companyName")&&t.uint32(42).string(e.companyName),null!=e.mapName&&Object.hasOwnProperty.call(e,"mapName")&&t.uint32(50).string(e.mapName),null!=e.location&&Object.hasOwnProperty.call(e,"location")&&t.uint32(58).string(e.location),null!=e.contactName&&Object.hasOwnProperty.call(e,"contactName")&&t.uint32(66).string(e.contactName),null!=e.contactLabel&&Object.hasOwnProperty.call(e,"contactLabel")&&t.uint32(74).string(e.contactLabel),null!=e.callDirectoryLabel&&Object.hasOwnProperty.call(e,"callDirectoryLabel")&&t.uint32(82).string(e.callDirectoryLabel),null!=e.callDirectoryLocalizedExtensionContainingAppName&&Object.hasOwnProperty.call(e,"callDirectoryLocalizedExtensionContainingAppName")&&t.uint32(90).string(e.callDirectoryLocalizedExtensionContainingAppName),null!=e.callDirectoryExtensionIdentifier&&Object.hasOwnProperty.call(e,"callDirectoryExtensionIdentifier")&&t.uint32(98).string(e.callDirectoryExtensionIdentifier),null!=e.contactIdentifier&&Object.hasOwnProperty.call(e,"contactIdentifier")&&t.uint32(106).string(e.contactIdentifier),null!=e.contactIdentifiers&&e.contactIdentifiers.length)for(let n=0;n<e.contactIdentifiers.length;++n)t.uint32(114).string(e.contactIdentifiers[n]);return t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.CallDisplayContext;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.name=e.string();break;case 2:r.protoPersonNameComponents=zu.callservicesd.PersonNameComponents.decode(e,e.uint32());break;case 3:r.suggestedName=e.string();break;case 4:r.label=e.string();break;case 5:r.companyName=e.string();break;case 6:r.mapName=e.string();break;case 7:r.location=e.string();break;case 8:r.contactName=e.string();break;case 9:r.contactLabel=e.string();break;case 10:r.callDirectoryLabel=e.string();break;case 11:r.callDirectoryLocalizedExtensionContainingAppName=e.string();break;case 12:r.callDirectoryExtensionIdentifier=e.string();break;case 13:r.contactIdentifier=e.string();break;case 14:r.contactIdentifiers&&r.contactIdentifiers.length||(r.contactIdentifiers=[]),r.contactIdentifiers.push(e.string());break;default:e.skipType(7&t)}}return r},e}(),e.ConversationParticipantDidJoinContext=function(){function e(e){if(this.members=[],this.otherInvitedHandles=[],this.lightweightMembers=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.members=Qu.emptyArray,e.prototype.message=null,e.prototype.messagesGroupUUIDString="",e.prototype.messagesGroupName="",e.prototype.isMomentsAvailable=!1,e.prototype.activitySession=null,e.prototype.video=!1,e.prototype.isScreenSharingAvailable=!1,e.prototype.providerIdentifier="",e.prototype.otherInvitedHandles=Qu.emptyArray,e.prototype.isMirageAvailable=!1,e.prototype.lightweightMembers=Qu.emptyArray,e.prototype.isLightweight=!1,e.prototype.isGondolaCallingAvailable=!1,e.prototype.videoEnabled=!1,e.prototype.sharePlayProtocolVersion=0,e.prototype.isGFTDowngradeToOneToOneAvailable=!1,e.prototype.participantAssociation=null,e.prototype.isUPlusNDowngradeAvailable=!1,e.prototype.avMode=0,e.encode=function(e,t){if(t||(t=Wu.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.members&&e.members.length)for(let n=0;n<e.members.length;++n)zu.callservicesd.ConversationMember.encode(e.members[n],t.uint32(18).fork()).ldelim();if(null!=e.message&&Object.hasOwnProperty.call(e,"message")&&zu.callservicesd.ConversationMessage.encode(e.message,t.uint32(26).fork()).ldelim(),null!=e.messagesGroupUUIDString&&Object.hasOwnProperty.call(e,"messagesGroupUUIDString")&&t.uint32(34).string(e.messagesGroupUUIDString),null!=e.messagesGroupName&&Object.hasOwnProperty.call(e,"messagesGroupName")&&t.uint32(42).string(e.messagesGroupName),null!=e.isMomentsAvailable&&Object.hasOwnProperty.call(e,"isMomentsAvailable")&&t.uint32(48).bool(e.isMomentsAvailable),null!=e.activitySession&&Object.hasOwnProperty.call(e,"activitySession")&&zu.callservicesd.ConversationActivitySession.encode(e.activitySession,t.uint32(58).fork()).ldelim(),null!=e.video&&Object.hasOwnProperty.call(e,"video")&&t.uint32(64).bool(e.video),null!=e.isScreenSharingAvailable&&Object.hasOwnProperty.call(e,"isScreenSharingAvailable")&&t.uint32(72).bool(e.isScreenSharingAvailable),null!=e.providerIdentifier&&Object.hasOwnProperty.call(e,"providerIdentifier")&&t.uint32(82).string(e.providerIdentifier),null!=e.otherInvitedHandles&&e.otherInvitedHandles.length)for(let n=0;n<e.otherInvitedHandles.length;++n)zu.callservicesd.Handle.encode(e.otherInvitedHandles[n],t.uint32(90).fork()).ldelim();if(null!=e.isMirageAvailable&&Object.hasOwnProperty.call(e,"isMirageAvailable")&&t.uint32(96).bool(e.isMirageAvailable),null!=e.lightweightMembers&&e.lightweightMembers.length)for(let n=0;n<e.lightweightMembers.length;++n)zu.callservicesd.ConversationMember.encode(e.lightweightMembers[n],t.uint32(106).fork()).ldelim();return null!=e.isLightweight&&Object.hasOwnProperty.call(e,"isLightweight")&&t.uint32(112).bool(e.isLightweight),null!=e.isGondolaCallingAvailable&&Object.hasOwnProperty.call(e,"isGondolaCallingAvailable")&&t.uint32(120).bool(e.isGondolaCallingAvailable),null!=e.videoEnabled&&Object.hasOwnProperty.call(e,"videoEnabled")&&t.uint32(128).bool(e.videoEnabled),null!=e.sharePlayProtocolVersion&&Object.hasOwnProperty.call(e,"sharePlayProtocolVersion")&&t.uint32(136).uint32(e.sharePlayProtocolVersion),null!=e.isGFTDowngradeToOneToOneAvailable&&Object.hasOwnProperty.call(e,"isGFTDowngradeToOneToOneAvailable")&&t.uint32(144).bool(e.isGFTDowngradeToOneToOneAvailable),null!=e.participantAssociation&&Object.hasOwnProperty.call(e,"participantAssociation")&&zu.callservicesd.ConversationParticipantAssociation.encode(e.participantAssociation,t.uint32(154).fork()).ldelim(),null!=e.isUPlusNDowngradeAvailable&&Object.hasOwnProperty.call(e,"isUPlusNDowngradeAvailable")&&t.uint32(160).bool(e.isUPlusNDowngradeAvailable),null!=e.avMode&&Object.hasOwnProperty.call(e,"avMode")&&t.uint32(168).uint32(e.avMode),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationParticipantDidJoinContext;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.uint32();break;case 2:r.members&&r.members.length||(r.members=[]),r.members.push(zu.callservicesd.ConversationMember.decode(e,e.uint32()));break;case 3:r.message=zu.callservicesd.ConversationMessage.decode(e,e.uint32());break;case 4:r.messagesGroupUUIDString=e.string();break;case 5:r.messagesGroupName=e.string();break;case 6:r.isMomentsAvailable=e.bool();break;case 7:r.activitySession=zu.callservicesd.ConversationActivitySession.decode(e,e.uint32());break;case 8:r.video=e.bool();break;case 9:r.isScreenSharingAvailable=e.bool();break;case 10:r.providerIdentifier=e.string();break;case 11:r.otherInvitedHandles&&r.otherInvitedHandles.length||(r.otherInvitedHandles=[]),r.otherInvitedHandles.push(zu.callservicesd.Handle.decode(e,e.uint32()));break;case 12:r.isMirageAvailable=e.bool();break;case 13:r.lightweightMembers&&r.lightweightMembers.length||(r.lightweightMembers=[]),r.lightweightMembers.push(zu.callservicesd.ConversationMember.decode(e,e.uint32()));break;case 14:r.isLightweight=e.bool();break;case 15:r.isGondolaCallingAvailable=e.bool();break;case 16:r.videoEnabled=e.bool();break;case 17:r.sharePlayProtocolVersion=e.uint32();break;case 18:r.isGFTDowngradeToOneToOneAvailable=e.bool();break;case 19:r.participantAssociation=zu.callservicesd.ConversationParticipantAssociation.decode(e,e.uint32());break;case 20:r.isUPlusNDowngradeAvailable=e.bool();break;case 21:r.avMode=e.uint32();break;default:e.skipType(7&t)}}return r},e}(),e.LinkSyncMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.type=0,e.prototype.updateMessage=null,e.prototype.checkInMessage=null,e.prototype.recoverMessage=null,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),null!=e.updateMessage&&Object.hasOwnProperty.call(e,"updateMessage")&&zu.callservicesd.LinkSyncUpdateMessage.encode(e.updateMessage,t.uint32(26).fork()).ldelim(),null!=e.checkInMessage&&Object.hasOwnProperty.call(e,"checkInMessage")&&zu.callservicesd.LinkSyncCheckInMessage.encode(e.checkInMessage,t.uint32(34).fork()).ldelim(),null!=e.recoverMessage&&Object.hasOwnProperty.call(e,"recoverMessage")&&zu.callservicesd.LinkSyncRecoverMessage.encode(e.recoverMessage,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.LinkSyncMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.uint32();break;case 2:r.type=e.int32();break;case 3:r.updateMessage=zu.callservicesd.LinkSyncUpdateMessage.decode(e,e.uint32());break;case 4:r.checkInMessage=zu.callservicesd.LinkSyncCheckInMessage.decode(e,e.uint32());break;case 5:r.recoverMessage=zu.callservicesd.LinkSyncRecoverMessage.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.LinkSyncMessageType=function(){const e={},t=Object.create(e);return t[e[0]="Unknown"]=0,t[e[1]="Update"]=1,t[e[2]="CheckIn"]=2,t[e[3]="Recover"]=3,t}(),e}(),e.LinkSyncUpdateMessage=function(){function e(e){if(this.link=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.link=Qu.emptyArray,e.encode=function(e,t){if(t||(t=Wu.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.link&&e.link.length)for(let n=0;n<e.link.length;++n)zu.callservicesd.ConversationLink.encode(e.link[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.LinkSyncUpdateMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.uint32();break;case 2:r.link&&r.link.length||(r.link=[]),r.link.push(zu.callservicesd.ConversationLink.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.LinkSyncCheckInMessage=function(){function e(e){if(this.generatorDescriptors=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.shouldCheckAllGenerators=!1,e.prototype.generatorDescriptors=Qu.emptyArray,e.encode=function(e,t){if(t||(t=Wu.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.shouldCheckAllGenerators&&Object.hasOwnProperty.call(e,"shouldCheckAllGenerators")&&t.uint32(16).bool(e.shouldCheckAllGenerators),null!=e.generatorDescriptors&&e.generatorDescriptors.length)for(let n=0;n<e.generatorDescriptors.length;++n)zu.callservicesd.ConversationLinkGeneratorDescriptor.encode(e.generatorDescriptors[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.LinkSyncCheckInMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.uint32();break;case 2:r.shouldCheckAllGenerators=e.bool();break;case 3:r.generatorDescriptors&&r.generatorDescriptors.length||(r.generatorDescriptors=[]),r.generatorDescriptors.push(zu.callservicesd.ConversationLinkGeneratorDescriptor.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.LinkSyncRecoverMessage=function(){function e(e){if(this.pseudonym=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.pseudonym=Qu.emptyArray,e.encode=function(e,t){if(t||(t=Wu.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.pseudonym&&e.pseudonym.length)for(let n=0;n<e.pseudonym.length;++n)t.uint32(18).string(e.pseudonym[n]);return t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.LinkSyncRecoverMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.uint32();break;case 2:r.pseudonym&&r.pseudonym.length||(r.pseudonym=[]),r.pseudonym.push(e.string());break;default:e.skipType(7&t)}}return r},e}(),e.ConversationMessage=function(){function e(e){if(this.activeParticipants=[],this.addedMembers=[],this.activitySessions=[],this.invitationPreferences=[],this.removedMembers=[],this.lightweightMembers=[],this.activeLightweightParticipants=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.type=0,e.prototype.shouldSuppressInCallUI=!1,e.prototype.activeParticipants=Qu.emptyArray,e.prototype.conversationGroupUUIDString="",e.prototype.addedMembers=Qu.emptyArray,e.prototype.disconnectedReason=0,e.prototype.protoUpgradeSessionUUID="",e.prototype.activitySessions=Qu.emptyArray,e.prototype.nickname="",e.prototype.link=null,e.prototype.reportData=null,e.prototype.isLetMeInApproved=!1,e.prototype.encryptedMessage=null,e.prototype.letMeInDelegationHandle="",e.prototype.letMeInDelegationUUID="",e.prototype.enclosedEncryptedType=0,e.prototype.invitationPreferences=Qu.emptyArray,e.prototype.removedMembers=Qu.emptyArray,e.prototype.unicastConnectorBlob=Qu.newBuffer([]),e.prototype.lightweightMembers=Qu.emptyArray,e.prototype.activeLightweightParticipants=Qu.emptyArray,e.prototype.guestModeEnabled=!1,e.prototype.highlightIdentifier="",e.encode=function(e,t){if(t||(t=Wu.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),null!=e.shouldSuppressInCallUI&&Object.hasOwnProperty.call(e,"shouldSuppressInCallUI")&&t.uint32(24).bool(e.shouldSuppressInCallUI),null!=e.activeParticipants&&e.activeParticipants.length)for(let n=0;n<e.activeParticipants.length;++n)zu.callservicesd.ConversationParticipant.encode(e.activeParticipants[n],t.uint32(34).fork()).ldelim();if(null!=e.conversationGroupUUIDString&&Object.hasOwnProperty.call(e,"conversationGroupUUIDString")&&t.uint32(42).string(e.conversationGroupUUIDString),null!=e.addedMembers&&e.addedMembers.length)for(let n=0;n<e.addedMembers.length;++n)zu.callservicesd.ConversationMember.encode(e.addedMembers[n],t.uint32(50).fork()).ldelim();if(null!=e.disconnectedReason&&Object.hasOwnProperty.call(e,"disconnectedReason")&&t.uint32(56).uint32(e.disconnectedReason),null!=e.protoUpgradeSessionUUID&&Object.hasOwnProperty.call(e,"protoUpgradeSessionUUID")&&t.uint32(66).string(e.protoUpgradeSessionUUID),null!=e.activitySessions&&e.activitySessions.length)for(let n=0;n<e.activitySessions.length;++n)zu.callservicesd.ConversationActivitySession.encode(e.activitySessions[n],t.uint32(74).fork()).ldelim();if(null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(82).string(e.nickname),null!=e.link&&Object.hasOwnProperty.call(e,"link")&&zu.callservicesd.ConversationLink.encode(e.link,t.uint32(90).fork()).ldelim(),null!=e.reportData&&Object.hasOwnProperty.call(e,"reportData")&&zu.callservicesd.ConversationReport.encode(e.reportData,t.uint32(98).fork()).ldelim(),null!=e.isLetMeInApproved&&Object.hasOwnProperty.call(e,"isLetMeInApproved")&&t.uint32(104).bool(e.isLetMeInApproved),null!=e.encryptedMessage&&Object.hasOwnProperty.call(e,"encryptedMessage")&&zu.callservicesd.EncryptedConversationMessage.encode(e.encryptedMessage,t.uint32(114).fork()).ldelim(),null!=e.letMeInDelegationHandle&&Object.hasOwnProperty.call(e,"letMeInDelegationHandle")&&t.uint32(122).string(e.letMeInDelegationHandle),null!=e.letMeInDelegationUUID&&Object.hasOwnProperty.call(e,"letMeInDelegationUUID")&&t.uint32(130).string(e.letMeInDelegationUUID),null!=e.enclosedEncryptedType&&Object.hasOwnProperty.call(e,"enclosedEncryptedType")&&t.uint32(136).int32(e.enclosedEncryptedType),null!=e.invitationPreferences&&e.invitationPreferences.length)for(let n=0;n<e.invitationPreferences.length;++n)zu.callservicesd.ConversationInvitationPreference.encode(e.invitationPreferences[n],t.uint32(154).fork()).ldelim();if(null!=e.removedMembers&&e.removedMembers.length)for(let n=0;n<e.removedMembers.length;++n)zu.callservicesd.ConversationMember.encode(e.removedMembers[n],t.uint32(162).fork()).ldelim();if(null!=e.unicastConnectorBlob&&Object.hasOwnProperty.call(e,"unicastConnectorBlob")&&t.uint32(170).bytes(e.unicastConnectorBlob),null!=e.lightweightMembers&&e.lightweightMembers.length)for(let n=0;n<e.lightweightMembers.length;++n)zu.callservicesd.ConversationMember.encode(e.lightweightMembers[n],t.uint32(178).fork()).ldelim();if(null!=e.activeLightweightParticipants&&e.activeLightweightParticipants.length)for(let n=0;n<e.activeLightweightParticipants.length;++n)zu.callservicesd.ConversationParticipant.encode(e.activeLightweightParticipants[n],t.uint32(186).fork()).ldelim();return null!=e.guestModeEnabled&&Object.hasOwnProperty.call(e,"guestModeEnabled")&&t.uint32(192).bool(e.guestModeEnabled),null!=e.highlightIdentifier&&Object.hasOwnProperty.call(e,"highlightIdentifier")&&t.uint32(202).string(e.highlightIdentifier),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.uint32();break;case 2:r.type=e.int32();break;case 3:r.shouldSuppressInCallUI=e.bool();break;case 4:r.activeParticipants&&r.activeParticipants.length||(r.activeParticipants=[]),r.activeParticipants.push(zu.callservicesd.ConversationParticipant.decode(e,e.uint32()));break;case 5:r.conversationGroupUUIDString=e.string();break;case 6:r.addedMembers&&r.addedMembers.length||(r.addedMembers=[]),r.addedMembers.push(zu.callservicesd.ConversationMember.decode(e,e.uint32()));break;case 7:r.disconnectedReason=e.uint32();break;case 8:r.protoUpgradeSessionUUID=e.string();break;case 9:r.activitySessions&&r.activitySessions.length||(r.activitySessions=[]),r.activitySessions.push(zu.callservicesd.ConversationActivitySession.decode(e,e.uint32()));break;case 10:r.nickname=e.string();break;case 11:r.link=zu.callservicesd.ConversationLink.decode(e,e.uint32());break;case 12:r.reportData=zu.callservicesd.ConversationReport.decode(e,e.uint32());break;case 13:r.isLetMeInApproved=e.bool();break;case 14:r.encryptedMessage=zu.callservicesd.EncryptedConversationMessage.decode(e,e.uint32());break;case 15:r.letMeInDelegationHandle=e.string();break;case 16:r.letMeInDelegationUUID=e.string();break;case 17:r.enclosedEncryptedType=e.int32();break;case 19:r.invitationPreferences&&r.invitationPreferences.length||(r.invitationPreferences=[]),r.invitationPreferences.push(zu.callservicesd.ConversationInvitationPreference.decode(e,e.uint32()));break;case 20:r.removedMembers&&r.removedMembers.length||(r.removedMembers=[]),r.removedMembers.push(zu.callservicesd.ConversationMember.decode(e,e.uint32()));break;case 21:r.unicastConnectorBlob=e.bytes();break;case 22:r.lightweightMembers&&r.lightweightMembers.length||(r.lightweightMembers=[]),r.lightweightMembers.push(zu.callservicesd.ConversationMember.decode(e,e.uint32()));break;case 23:r.activeLightweightParticipants&&r.activeLightweightParticipants.length||(r.activeLightweightParticipants=[]),r.activeLightweightParticipants.push(zu.callservicesd.ConversationParticipant.decode(e,e.uint32()));break;case 24:r.guestModeEnabled=e.bool();break;case 25:r.highlightIdentifier=e.string();break;default:e.skipType(7&t)}}return r},e.ConversationMessageType=function(){const e={},t=Object.create(e);return t[e[0]="Unknown"]=0,t[e[1]="Invitation"]=1,t[e[2]="Upgrade"]=2,t[e[3]="AddMember"]=3,t[e[4]="ResendAVCBlobRequest"]=4,t[e[5]="ResendAVCBlobResponse"]=5,t[e[6]="RespondedElsewhere"]=6,t[e[7]="RequestShareScreen"]=7,t[e[8]="AddActivitySession"]=8,t[e[9]="Decline"]=9,t[e[10]="LetMeInRequest"]=10,t[e[11]="LinkCreated"]=11,t[e[12]="NicknameUpdated"]=12,t[e[13]="EncryptedConversationMessage"]=13,t[e[14]="LetMeInDelegation"]=14,t[e[15]="LetMeInDelegationResponse"]=15,t[e[16]="LetMeInResponse"]=16,t[e[19]="RemoveMember"]=19,t[e[20]="UnicastConnector"]=20,t[e[21]="RemoveActivitySession"]=21,t[e[22]="RequestVideoUpgrade"]=22,t[e[23]="UpdateActivity"]=23,t[e[24]="LinkInvalidated"]=24,t[e[25]="AddLightweightMember"]=25,t[e[26]="LinkChanged"]=26,t[e[27]="UpdateActivityImage"]=27,t[e[28]="GuestModeUpdated"]=28,t[e[29]="Endorse"]=29,t[e[30]="AddHighlight"]=30,t}(),e}(),e.EncryptedConversationMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.publicKey=Qu.newBuffer([]),e.prototype.conversationMessageBytes=Qu.newBuffer([]),e.encode=function(e,t){return t||(t=Wu.create()),null!=e.publicKey&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(10).bytes(e.publicKey),null!=e.conversationMessageBytes&&Object.hasOwnProperty.call(e,"conversationMessageBytes")&&t.uint32(18).bytes(e.conversationMessageBytes),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.EncryptedConversationMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.publicKey=e.bytes();break;case 2:r.conversationMessageBytes=e.bytes();break;default:e.skipType(7&t)}}return r},e}(),e.ConversationMember=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.handle=null,e.prototype.nickname="",e.prototype.lightweightPrimary=null,e.prototype.lightweightPrimaryParticipantID=Qu.Long?Qu.Long.fromBits(0,0,!0):0,e.prototype.validationSource=0,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.handle&&Object.hasOwnProperty.call(e,"handle")&&zu.callservicesd.Handle.encode(e.handle,t.uint32(18).fork()).ldelim(),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(26).string(e.nickname),null!=e.lightweightPrimary&&Object.hasOwnProperty.call(e,"lightweightPrimary")&&zu.callservicesd.Handle.encode(e.lightweightPrimary,t.uint32(34).fork()).ldelim(),null!=e.lightweightPrimaryParticipantID&&Object.hasOwnProperty.call(e,"lightweightPrimaryParticipantID")&&t.uint32(40).uint64(e.lightweightPrimaryParticipantID),null!=e.validationSource&&Object.hasOwnProperty.call(e,"validationSource")&&t.uint32(48).int32(e.validationSource),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationMember;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.uint32();break;case 2:r.handle=zu.callservicesd.Handle.decode(e,e.uint32());break;case 3:r.nickname=e.string();break;case 4:r.lightweightPrimary=zu.callservicesd.Handle.decode(e,e.uint32());break;case 5:r.lightweightPrimaryParticipantID=e.uint64();break;case 6:r.validationSource=e.int32();break;default:e.skipType(7&t)}}return r},e.ValidationSource=function(){const e={},t=Object.create(e);return t[e[0]="None"]=0,t[e[1]="Endorsement"]=1,t}(),e}(),e.ConversationParticipant=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.identifier=Qu.Long?Qu.Long.fromBits(0,0,!0):0,e.prototype.handle=null,e.prototype.avcData=Qu.newBuffer([]),e.prototype.isMomentsAvailable=!1,e.prototype.isScreenSharingAvailable=!1,e.prototype.isGondolaCallingAvailable=!1,e.prototype.isMirageAvailable=!1,e.prototype.isLightweight=!1,e.prototype.sharePlayProtocolVersion=0,e.prototype.options=0,e.prototype.isGFTDowngradeToOneToOneAvailable=!1,e.prototype.guestModeEnabled=!1,e.prototype.association=null,e.prototype.isUPlusNDowngradeAvailable=!1,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.identifier&&Object.hasOwnProperty.call(e,"identifier")&&t.uint32(16).uint64(e.identifier),null!=e.handle&&Object.hasOwnProperty.call(e,"handle")&&zu.callservicesd.Handle.encode(e.handle,t.uint32(26).fork()).ldelim(),null!=e.avcData&&Object.hasOwnProperty.call(e,"avcData")&&t.uint32(34).bytes(e.avcData),null!=e.isMomentsAvailable&&Object.hasOwnProperty.call(e,"isMomentsAvailable")&&t.uint32(40).bool(e.isMomentsAvailable),null!=e.isScreenSharingAvailable&&Object.hasOwnProperty.call(e,"isScreenSharingAvailable")&&t.uint32(48).bool(e.isScreenSharingAvailable),null!=e.isGondolaCallingAvailable&&Object.hasOwnProperty.call(e,"isGondolaCallingAvailable")&&t.uint32(56).bool(e.isGondolaCallingAvailable),null!=e.isMirageAvailable&&Object.hasOwnProperty.call(e,"isMirageAvailable")&&t.uint32(64).bool(e.isMirageAvailable),null!=e.isLightweight&&Object.hasOwnProperty.call(e,"isLightweight")&&t.uint32(72).bool(e.isLightweight),null!=e.sharePlayProtocolVersion&&Object.hasOwnProperty.call(e,"sharePlayProtocolVersion")&&t.uint32(80).uint32(e.sharePlayProtocolVersion),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&t.uint32(88).uint32(e.options),null!=e.isGFTDowngradeToOneToOneAvailable&&Object.hasOwnProperty.call(e,"isGFTDowngradeToOneToOneAvailable")&&t.uint32(96).bool(e.isGFTDowngradeToOneToOneAvailable),null!=e.guestModeEnabled&&Object.hasOwnProperty.call(e,"guestModeEnabled")&&t.uint32(104).bool(e.guestModeEnabled),null!=e.association&&Object.hasOwnProperty.call(e,"association")&&zu.callservicesd.ConversationParticipantAssociation.encode(e.association,t.uint32(114).fork()).ldelim(),null!=e.isUPlusNDowngradeAvailable&&Object.hasOwnProperty.call(e,"isUPlusNDowngradeAvailable")&&t.uint32(120).bool(e.isUPlusNDowngradeAvailable),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationParticipant;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.uint32();break;case 2:r.identifier=e.uint64();break;case 3:r.handle=zu.callservicesd.Handle.decode(e,e.uint32());break;case 4:r.avcData=e.bytes();break;case 5:r.isMomentsAvailable=e.bool();break;case 6:r.isScreenSharingAvailable=e.bool();break;case 7:r.isGondolaCallingAvailable=e.bool();break;case 8:r.isMirageAvailable=e.bool();break;case 9:r.isLightweight=e.bool();break;case 10:r.sharePlayProtocolVersion=e.uint32();break;case 11:r.options=e.uint32();break;case 12:r.isGFTDowngradeToOneToOneAvailable=e.bool();break;case 13:r.guestModeEnabled=e.bool();break;case 14:r.association=zu.callservicesd.ConversationParticipantAssociation.decode(e,e.uint32());break;case 15:r.isUPlusNDowngradeAvailable=e.bool();break;default:e.skipType(7&t)}}return r},e}(),e.ConversationParticipantAssociation=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.identifier=Qu.Long?Qu.Long.fromBits(0,0,!0):0,e.prototype.avcIdentifier="",e.encode=function(e,t){return t||(t=Wu.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.identifier&&Object.hasOwnProperty.call(e,"identifier")&&t.uint32(16).uint64(e.identifier),null!=e.avcIdentifier&&Object.hasOwnProperty.call(e,"avcIdentifier")&&t.uint32(26).string(e.avcIdentifier),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationParticipantAssociation;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.uint32();break;case 2:r.identifier=e.uint64();break;case 3:r.avcIdentifier=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.ConversationActivityContext=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.contextIdentifier="",e.prototype.actionDescription="",e.prototype.ongoingDescription="",e.prototype.completedDescription="",e.encode=function(e,t){return t||(t=Wu.create()),null!=e.contextIdentifier&&Object.hasOwnProperty.call(e,"contextIdentifier")&&t.uint32(10).string(e.contextIdentifier),null!=e.actionDescription&&Object.hasOwnProperty.call(e,"actionDescription")&&t.uint32(18).string(e.actionDescription),null!=e.ongoingDescription&&Object.hasOwnProperty.call(e,"ongoingDescription")&&t.uint32(26).string(e.ongoingDescription),null!=e.completedDescription&&Object.hasOwnProperty.call(e,"completedDescription")&&t.uint32(34).string(e.completedDescription),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationActivityContext;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.contextIdentifier=e.string();break;case 2:r.actionDescription=e.string();break;case 3:r.ongoingDescription=e.string();break;case 4:r.completedDescription=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.ConversationActivityMetadata=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.fallbackURL="",e.prototype.supportsContinuationOnTV=!1,e.prototype.title="",e.prototype.subtitle="",e.prototype.image=Qu.newBuffer([]),e.prototype.preferredBroadcastingAttributes=0,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.fallbackURL&&Object.hasOwnProperty.call(e,"fallbackURL")&&t.uint32(10).string(e.fallbackURL),null!=e.supportsContinuationOnTV&&Object.hasOwnProperty.call(e,"supportsContinuationOnTV")&&t.uint32(16).bool(e.supportsContinuationOnTV),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(26).string(e.title),null!=e.subtitle&&Object.hasOwnProperty.call(e,"subtitle")&&t.uint32(34).string(e.subtitle),null!=e.image&&Object.hasOwnProperty.call(e,"image")&&t.uint32(42).bytes(e.image),null!=e.preferredBroadcastingAttributes&&Object.hasOwnProperty.call(e,"preferredBroadcastingAttributes")&&t.uint32(48).uint32(e.preferredBroadcastingAttributes),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationActivityMetadata;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.fallbackURL=e.string();break;case 2:r.supportsContinuationOnTV=e.bool();break;case 3:r.title=e.string();break;case 4:r.subtitle=e.string();break;case 5:r.image=e.bytes();break;case 6:r.preferredBroadcastingAttributes=e.uint32();break;default:e.skipType(7&t)}}return r},e}(),e.ConversationActivity=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.identifierUUIDString="",e.prototype.applicationContext=Qu.newBuffer([]),e.prototype.bundleIdentifier="",e.prototype.activityIdentifier="",e.prototype.metadata=Qu.newBuffer([]),e.prototype.activityContext=null,e.prototype.originatorHandle=null,e.prototype.updatedDateEpochTime=0,e.prototype.fallbackApplicationName="",e.prototype.activityMetadata=null,e.prototype.isSystemActivity=!1,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.identifierUUIDString&&Object.hasOwnProperty.call(e,"identifierUUIDString")&&t.uint32(10).string(e.identifierUUIDString),null!=e.applicationContext&&Object.hasOwnProperty.call(e,"applicationContext")&&t.uint32(18).bytes(e.applicationContext),null!=e.bundleIdentifier&&Object.hasOwnProperty.call(e,"bundleIdentifier")&&t.uint32(26).string(e.bundleIdentifier),null!=e.activityIdentifier&&Object.hasOwnProperty.call(e,"activityIdentifier")&&t.uint32(34).string(e.activityIdentifier),null!=e.metadata&&Object.hasOwnProperty.call(e,"metadata")&&t.uint32(42).bytes(e.metadata),null!=e.activityContext&&Object.hasOwnProperty.call(e,"activityContext")&&zu.callservicesd.ConversationActivityContext.encode(e.activityContext,t.uint32(58).fork()).ldelim(),null!=e.originatorHandle&&Object.hasOwnProperty.call(e,"originatorHandle")&&zu.callservicesd.Handle.encode(e.originatorHandle,t.uint32(66).fork()).ldelim(),null!=e.updatedDateEpochTime&&Object.hasOwnProperty.call(e,"updatedDateEpochTime")&&t.uint32(73).double(e.updatedDateEpochTime),null!=e.fallbackApplicationName&&Object.hasOwnProperty.call(e,"fallbackApplicationName")&&t.uint32(82).string(e.fallbackApplicationName),null!=e.activityMetadata&&Object.hasOwnProperty.call(e,"activityMetadata")&&zu.callservicesd.ConversationActivityMetadata.encode(e.activityMetadata,t.uint32(90).fork()).ldelim(),null!=e.isSystemActivity&&Object.hasOwnProperty.call(e,"isSystemActivity")&&t.uint32(96).bool(e.isSystemActivity),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationActivity;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.identifierUUIDString=e.string();break;case 2:r.applicationContext=e.bytes();break;case 3:r.bundleIdentifier=e.string();break;case 4:r.activityIdentifier=e.string();break;case 5:r.metadata=e.bytes();break;case 7:r.activityContext=zu.callservicesd.ConversationActivityContext.decode(e,e.uint32());break;case 8:r.originatorHandle=zu.callservicesd.Handle.decode(e,e.uint32());break;case 9:r.updatedDateEpochTime=e.double();break;case 10:r.fallbackApplicationName=e.string();break;case 11:r.activityMetadata=zu.callservicesd.ConversationActivityMetadata.decode(e,e.uint32());break;case 12:r.isSystemActivity=e.bool();break;default:e.skipType(7&t)}}return r},e}(),e.ConversationActivitySession=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.identifierUUIDString="",e.prototype.activity=null,e.prototype.creationDateEpochTime=0,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.identifierUUIDString&&Object.hasOwnProperty.call(e,"identifierUUIDString")&&t.uint32(10).string(e.identifierUUIDString),null!=e.activity&&Object.hasOwnProperty.call(e,"activity")&&zu.callservicesd.ConversationActivity.encode(e.activity,t.uint32(18).fork()).ldelim(),null!=e.creationDateEpochTime&&Object.hasOwnProperty.call(e,"creationDateEpochTime")&&t.uint32(25).double(e.creationDateEpochTime),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationActivitySession;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.identifierUUIDString=e.string();break;case 2:r.activity=zu.callservicesd.ConversationActivity.decode(e,e.uint32());break;case 3:r.creationDateEpochTime=e.double();break;default:e.skipType(7&t)}}return r},e}(),e.ConversationLink=function(){function e(e){if(this.invitedHandles=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.pseudonym="",e.prototype.publicKey=Qu.newBuffer([]),e.prototype.privateKey=Qu.newBuffer([]),e.prototype.invitedHandles=Qu.emptyArray,e.prototype.creationDateEpochTime=0,e.prototype.groupUUIDString="",e.prototype.originatorHandle=null,e.prototype.pseudonymExpirationDateEpochTime=0,e.prototype.isActivated=!1,e.prototype.generatorDescriptor=null,e.prototype.linkName="",e.prototype.linkLifetimeScope=0,e.encode=function(e,t){if(t||(t=Wu.create()),null!=e.pseudonym&&Object.hasOwnProperty.call(e,"pseudonym")&&t.uint32(10).string(e.pseudonym),null!=e.publicKey&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(18).bytes(e.publicKey),null!=e.privateKey&&Object.hasOwnProperty.call(e,"privateKey")&&t.uint32(26).bytes(e.privateKey),null!=e.invitedHandles&&e.invitedHandles.length)for(let n=0;n<e.invitedHandles.length;++n)zu.callservicesd.Handle.encode(e.invitedHandles[n],t.uint32(34).fork()).ldelim();return null!=e.creationDateEpochTime&&Object.hasOwnProperty.call(e,"creationDateEpochTime")&&t.uint32(41).double(e.creationDateEpochTime),null!=e.groupUUIDString&&Object.hasOwnProperty.call(e,"groupUUIDString")&&t.uint32(50).string(e.groupUUIDString),null!=e.originatorHandle&&Object.hasOwnProperty.call(e,"originatorHandle")&&zu.callservicesd.Handle.encode(e.originatorHandle,t.uint32(58).fork()).ldelim(),null!=e.pseudonymExpirationDateEpochTime&&Object.hasOwnProperty.call(e,"pseudonymExpirationDateEpochTime")&&t.uint32(65).double(e.pseudonymExpirationDateEpochTime),null!=e.isActivated&&Object.hasOwnProperty.call(e,"isActivated")&&t.uint32(72).bool(e.isActivated),null!=e.generatorDescriptor&&Object.hasOwnProperty.call(e,"generatorDescriptor")&&zu.callservicesd.ConversationLinkGeneratorDescriptor.encode(e.generatorDescriptor,t.uint32(82).fork()).ldelim(),null!=e.linkName&&Object.hasOwnProperty.call(e,"linkName")&&t.uint32(90).string(e.linkName),null!=e.linkLifetimeScope&&Object.hasOwnProperty.call(e,"linkLifetimeScope")&&t.uint32(96).int32(e.linkLifetimeScope),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationLink;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.pseudonym=e.string();break;case 2:r.publicKey=e.bytes();break;case 3:r.privateKey=e.bytes();break;case 4:r.invitedHandles&&r.invitedHandles.length||(r.invitedHandles=[]),r.invitedHandles.push(zu.callservicesd.Handle.decode(e,e.uint32()));break;case 5:r.creationDateEpochTime=e.double();break;case 6:r.groupUUIDString=e.string();break;case 7:r.originatorHandle=zu.callservicesd.Handle.decode(e,e.uint32());break;case 8:r.pseudonymExpirationDateEpochTime=e.double();break;case 9:r.isActivated=e.bool();break;case 10:r.generatorDescriptor=zu.callservicesd.ConversationLinkGeneratorDescriptor.decode(e,e.uint32());break;case 11:r.linkName=e.string();break;case 12:r.linkLifetimeScope=e.int32();break;default:e.skipType(7&t)}}return r},e.ConversationLinkLifetimeScope=function(){const e={},t=Object.create(e);return t[e[0]="Indefinite"]=0,t[e[1]="CallDuration"]=1,t}(),e}(),e.ConversationLinkGeneratorDescriptor=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.generatorID="",e.prototype.generatorVersion=0,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.generatorID&&Object.hasOwnProperty.call(e,"generatorID")&&t.uint32(10).string(e.generatorID),null!=e.generatorVersion&&Object.hasOwnProperty.call(e,"generatorVersion")&&t.uint32(16).uint32(e.generatorVersion),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationLinkGeneratorDescriptor;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.generatorID=e.string();break;case 2:r.generatorVersion=e.uint32();break;default:e.skipType(7&t)}}return r},e}(),e.ConversationInvitationPreference=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.handleType=0,e.prototype.notificationStyles=0,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.handleType&&Object.hasOwnProperty.call(e,"handleType")&&t.uint32(16).int32(e.handleType),null!=e.notificationStyles&&Object.hasOwnProperty.call(e,"notificationStyles")&&t.uint32(24).uint32(e.notificationStyles),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationInvitationPreference;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.uint32();break;case 2:r.handleType=e.int32();break;case 3:r.notificationStyles=e.uint32();break;default:e.skipType(7&t)}}return r},e.PreferenceHandleType=function(){const e={},t=Object.create(e);return t[e[0]="None"]=0,t[e[1]="Generic"]=1,t[e[2]="PhoneNumber"]=2,t[e[3]="EmailAddress"]=3,t}(),e}(),e.Route=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uniqueIdentifier="",e.prototype.name="",e.prototype.deviceType=0,e.prototype.protoCurrentlyPicked=!1,e.prototype.protoGuest=!1,e.prototype.protoSupportsRelay=!1,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.uniqueIdentifier&&Object.hasOwnProperty.call(e,"uniqueIdentifier")&&t.uint32(10).string(e.uniqueIdentifier),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.deviceType&&Object.hasOwnProperty.call(e,"deviceType")&&t.uint32(24).int32(e.deviceType),null!=e.protoCurrentlyPicked&&Object.hasOwnProperty.call(e,"protoCurrentlyPicked")&&t.uint32(32).bool(e.protoCurrentlyPicked),null!=e.protoGuest&&Object.hasOwnProperty.call(e,"protoGuest")&&t.uint32(40).bool(e.protoGuest),null!=e.protoSupportsRelay&&Object.hasOwnProperty.call(e,"protoSupportsRelay")&&t.uint32(48).bool(e.protoSupportsRelay),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.Route;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.uniqueIdentifier=e.string();break;case 2:r.name=e.string();break;case 3:r.deviceType=e.int32();break;case 4:r.protoCurrentlyPicked=e.bool();break;case 5:r.protoGuest=e.bool();break;case 6:r.protoSupportsRelay=e.bool();break;default:e.skipType(7&t)}}return r},e.RouteDeviceType=function(){const e={},t=Object.create(e);return t[e[0]="Unknown"]=0,t[e[1]="AirPods"]=1,t[e[2]="BeatsSolo"]=2,t[e[3]="BeatsX"]=3,t[e[4]="Powerbeats"]=4,t[e[5]="BeatsStudio"]=5,t[e[6]="HomePod"]=6,t[e[7]="iPod"]=7,t[e[8]="iPad"]=8,t[e[9]="iMac"]=9,t[e[10]="MacBook"]=10,t[e[11]="MacMini"]=11,t[e[12]="MacPro"]=12,t[e[13]="Watch"]=13,t[e[14]="HomePodStereoPair"]=14,t[e[15]="iPadPro"]=15,t[e[16]="PowerbeatsPro"]=16,t[e[17]="BeatsSoloPro"]=17,t[e[18]="AirPodsPro"]=18,t[e[19]="Powerbeats4"]=19,t[e[20]="HeadPods"]=20,t[e[21]="BeatsX2"]=21,t[e[22]="HomePodMini"]=22,t[e[23]="HomePodMiniStereoPair"]=23,t[e[24]="BeatsStudioBuds"]=24,t[e[25]="BeatsFitPro"]=25,t[e[26]="AirPods3"]=26,t}(),e}(),e.Conversation=function(){function e(e){if(this.remoteMembers=[],this.activeRemoteParticipants=[],this.activitySessions=[],this.otherInvitedHandles=[],this.lightweightMembers=[],this.activeLightweightParticipants=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.UUIDString="",e.prototype.groupUUIDString="",e.prototype.messagesGroupUUIDString="",e.prototype.locallyCreated=!1,e.prototype.initiator=null,e.prototype.localMember=null,e.prototype.remoteMembers=Qu.emptyArray,e.prototype.activeRemoteParticipants=Qu.emptyArray,e.prototype.activitySessions=Qu.emptyArray,e.prototype.link=null,e.prototype.reportData=null,e.prototype.conversationProviderIdentifier="",e.prototype.otherInvitedHandles=Qu.emptyArray,e.prototype.lightweightMembers=Qu.emptyArray,e.prototype.activeLightweightParticipants=Qu.emptyArray,e.prototype.highlightIdentifier="",e.encode=function(e,t){if(t||(t=Wu.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.UUIDString&&Object.hasOwnProperty.call(e,"UUIDString")&&t.uint32(18).string(e.UUIDString),null!=e.groupUUIDString&&Object.hasOwnProperty.call(e,"groupUUIDString")&&t.uint32(26).string(e.groupUUIDString),null!=e.messagesGroupUUIDString&&Object.hasOwnProperty.call(e,"messagesGroupUUIDString")&&t.uint32(34).string(e.messagesGroupUUIDString),null!=e.locallyCreated&&Object.hasOwnProperty.call(e,"locallyCreated")&&t.uint32(40).bool(e.locallyCreated),null!=e.initiator&&Object.hasOwnProperty.call(e,"initiator")&&zu.callservicesd.Handle.encode(e.initiator,t.uint32(50).fork()).ldelim(),null!=e.localMember&&Object.hasOwnProperty.call(e,"localMember")&&zu.callservicesd.ConversationMember.encode(e.localMember,t.uint32(58).fork()).ldelim(),null!=e.remoteMembers&&e.remoteMembers.length)for(let n=0;n<e.remoteMembers.length;++n)zu.callservicesd.ConversationMember.encode(e.remoteMembers[n],t.uint32(66).fork()).ldelim();if(null!=e.activeRemoteParticipants&&e.activeRemoteParticipants.length)for(let n=0;n<e.activeRemoteParticipants.length;++n)zu.callservicesd.ConversationParticipant.encode(e.activeRemoteParticipants[n],t.uint32(74).fork()).ldelim();if(null!=e.activitySessions&&e.activitySessions.length)for(let n=0;n<e.activitySessions.length;++n)zu.callservicesd.ConversationActivitySession.encode(e.activitySessions[n],t.uint32(82).fork()).ldelim();if(null!=e.link&&Object.hasOwnProperty.call(e,"link")&&zu.callservicesd.ConversationLink.encode(e.link,t.uint32(90).fork()).ldelim(),null!=e.reportData&&Object.hasOwnProperty.call(e,"reportData")&&zu.callservicesd.ConversationReport.encode(e.reportData,t.uint32(98).fork()).ldelim(),null!=e.conversationProviderIdentifier&&Object.hasOwnProperty.call(e,"conversationProviderIdentifier")&&t.uint32(114).string(e.conversationProviderIdentifier),null!=e.otherInvitedHandles&&e.otherInvitedHandles.length)for(let n=0;n<e.otherInvitedHandles.length;++n)zu.callservicesd.Handle.encode(e.otherInvitedHandles[n],t.uint32(122).fork()).ldelim();if(null!=e.lightweightMembers&&e.lightweightMembers.length)for(let n=0;n<e.lightweightMembers.length;++n)zu.callservicesd.ConversationMember.encode(e.lightweightMembers[n],t.uint32(130).fork()).ldelim();if(null!=e.activeLightweightParticipants&&e.activeLightweightParticipants.length)for(let n=0;n<e.activeLightweightParticipants.length;++n)zu.callservicesd.ConversationParticipant.encode(e.activeLightweightParticipants[n],t.uint32(138).fork()).ldelim();return null!=e.highlightIdentifier&&Object.hasOwnProperty.call(e,"highlightIdentifier")&&t.uint32(146).string(e.highlightIdentifier),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.Conversation;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.uint32();break;case 2:r.UUIDString=e.string();break;case 3:r.groupUUIDString=e.string();break;case 4:r.messagesGroupUUIDString=e.string();break;case 5:r.locallyCreated=e.bool();break;case 6:r.initiator=zu.callservicesd.Handle.decode(e,e.uint32());break;case 7:r.localMember=zu.callservicesd.ConversationMember.decode(e,e.uint32());break;case 8:r.remoteMembers&&r.remoteMembers.length||(r.remoteMembers=[]),r.remoteMembers.push(zu.callservicesd.ConversationMember.decode(e,e.uint32()));break;case 9:r.activeRemoteParticipants&&r.activeRemoteParticipants.length||(r.activeRemoteParticipants=[]),r.activeRemoteParticipants.push(zu.callservicesd.ConversationParticipant.decode(e,e.uint32()));break;case 10:r.activitySessions&&r.activitySessions.length||(r.activitySessions=[]),r.activitySessions.push(zu.callservicesd.ConversationActivitySession.decode(e,e.uint32()));break;case 11:r.link=zu.callservicesd.ConversationLink.decode(e,e.uint32());break;case 12:r.reportData=zu.callservicesd.ConversationReport.decode(e,e.uint32());break;case 14:r.conversationProviderIdentifier=e.string();break;case 15:r.otherInvitedHandles&&r.otherInvitedHandles.length||(r.otherInvitedHandles=[]),r.otherInvitedHandles.push(zu.callservicesd.Handle.decode(e,e.uint32()));break;case 16:r.lightweightMembers&&r.lightweightMembers.length||(r.lightweightMembers=[]),r.lightweightMembers.push(zu.callservicesd.ConversationMember.decode(e,e.uint32()));break;case 17:r.activeLightweightParticipants&&r.activeLightweightParticipants.length||(r.activeLightweightParticipants=[]),r.activeLightweightParticipants.push(zu.callservicesd.ConversationParticipant.decode(e,e.uint32()));break;case 18:r.highlightIdentifier=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.ConversationReport=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.conversationID="",e.prototype.timebase=0,e.encode=function(e,t){return t||(t=Wu.create()),null!=e.conversationID&&Object.hasOwnProperty.call(e,"conversationID")&&t.uint32(10).string(e.conversationID),null!=e.timebase&&Object.hasOwnProperty.call(e,"timebase")&&t.uint32(17).double(e.timebase),t},e.decode=function(e,t){e instanceof Hu||(e=Hu.create(e));let n=void 0===t?e.len:e.pos+t,r=new zu.callservicesd.ConversationReport;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.conversationID=e.string();break;case 2:r.timebase=e.double();break;default:e.skipType(7&t)}}return r},e}(),e})();async function Yu(e,t){return await crypto.subtle.deriveKey({name:"ECDH",public:e},t,{name:"HKDF",hash:"",salt:new Uint8Array,info:new Uint8Array},!1,["deriveKey"])}async function Zu(e,t,n){const{mki:r,mkm:i,mks:o}=e,s=await lp(i,t,"MKM");if(s instanceof Error)return s;const[a,c]=s;return ep.initWithData(r,a,o,n,c)}class Xu{constructor(e,t,n,r,i){Object.defineProperty(this,"mki",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"mkm",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"mks",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"createdAt",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"mkmForInternalUseOnly",{enumerable:!0,configurable:!0,writable:!0,value:i})}async wrapBy(e){const t=await dp(this.mkmForInternalUseOnly,e);return t instanceof Error?t:{mki:this.mki,mkm:t,mks:this.mks,rtmpwm:1}}}class ep extends Xu{static initWithData(e,t,n,r,i){return new ep(e,t,n,r,i)}}class tp extends Xu{constructor(e,t,n,r){super(e,t,r,Date.now(),n),Object.defineProperty(this,"mki",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"mkm",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"mks",{enumerable:!0,configurable:!0,writable:!0,value:r})}static async create(){const e=Yr(),t=sp(16),[n,r]=await up();return new tp(e,n,r,t)}}async function np(e,t){const{ski:n,skm:r,sks:i}=e,o=await lp(r,t,"SKM");if(o instanceof Error)return o;const[s,a]=o;return ip.initWithData(n,s,i,a)}class rp{constructor(e,t,n,r){Object.defineProperty(this,"ski",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"skm",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"sks",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"skmForInternalUseOnly",{enumerable:!0,configurable:!0,writable:!0,value:r})}async wrapBy(e){const t=await dp(this.skmForInternalUseOnly,e);return t instanceof Error?t:{ski:this.ski,skm:t,sks:this.sks,rtmpwm:1}}}class ip extends rp{static initWithData(e,t,n,r){return new ip(e,t,n,r)}}class op extends rp{constructor(e,t,n,r){super(e,t,r,n),Object.defineProperty(this,"ski",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"skm",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"sks",{enumerable:!0,configurable:!0,writable:!0,value:r})}static async create(){const e=Yr(),t=sp(16),[n,r]=await up();return new op(e,n,r,t)}}function sp(e){const t=new Uint8Array(e);return crypto.getRandomValues(t),t}async function ap(e,t,n){const[r,i]=await Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.exportKey("raw",n)]),o=cp(new Uint8Array(r));if(o instanceof Error)return o;const s=cp(new Uint8Array(i));if(s instanceof Error)return s;const a=(new TextEncoder).encode("GFT-MKM-Wrapping"),c=new Uint8Array(a.byteLength+o.byteLength+s.byteLength);return c.set(a),c.set(o,a.byteLength),c.set(s,a.byteLength+o.byteLength),await crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array,info:c},e,{name:"AES-KW",length:256},!1,["wrapKey","unwrapKey"])}function cp(e){return 64===e.byteLength?e:65===e.byteLength&&4===e[0]?e.subarray(1):new Ce(Se`Failed to convert publicKey from x963 to raw representation.`)}async function lp(e,t,n){if(e.byteLength<=65)return new Ce(Se`Wrapped ${V(n).constant()} is too short.`);if((e.byteLength-65)%40!=0)return new Ce(Se`Wrapped ${V(n).constant()} has incorrect length.`);let r,i,o,s,a;try{r=await crypto.subtle.importKey("raw",e.subarray(0,65),{name:"ECDH",namedCurve:"P-256"},!0,[])}catch(e){return new Ce(Se`Incorrect ephemeral public key for ${V(n).constant()}.`)}try{i=await Yu(r,t.privateKey)}catch(e){return new Ce(Se`Internal shared secret derivation issue unwrapping ${V(n).constant()}.`)}try{o=await ap(i,t.publicKey,r)}catch(e){return new Ce(Se`Internal wrapping key derivation issue unwrapping ${V(n).constant()}.`)}if(o instanceof Error)return o;try{[s,a]=await Promise.all([crypto.subtle.unwrapKey("raw",e.subarray(65),o,"AES-KW","HKDF",!1,["deriveBits","deriveKey"]),crypto.subtle.unwrapKey("raw",e.subarray(65),o,"AES-KW",{name:"HMAC",hash:"SHA-256"},!0,["sign","verify"])])}catch(e){return new Ce(Se`Internal key unwrap issue. Unable to unwrap ${V(n).constant()}`)}return[s,a]}async function dp(e,t){const n=await crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]),[r,i]=await Promise.all([crypto.subtle.exportKey("raw",n.publicKey),Yu(t,n.privateKey)]),o=await ap(i,t,n.publicKey);if(o instanceof Error)return o;const s=await crypto.subtle.wrapKey("raw",e,o,"AES-KW"),a=new Uint8Array(s.byteLength+r.byteLength);return a.set(new Uint8Array(r)),a.set(new Uint8Array(s),r.byteLength),a}async function up(){const e=sp(32);return Promise.all([crypto.subtle.importKey("raw",e,"HKDF",!1,["deriveBits","deriveKey"]),crypto.subtle.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!0,["sign","verify"])])}const pp=br.Reader,hp=br.Writer,fp=br.util,gp=br.roots.default||(br.roots.default={}),bp=gp.VCCallInfoBlob=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.callID=0,e.prototype.clientVersion=0,e.prototype.deviceType="",e.prototype.frameworkVersion="",e.prototype.osVersion="",e.encode=function(e,t){return t||(t=hp.create()),t.uint32(8).uint32(e.callID),t.uint32(16).uint32(e.clientVersion),t.uint32(26).string(e.deviceType),t.uint32(34).string(e.frameworkVersion),t.uint32(42).string(e.osVersion),t},e.decode=function(e,t){e instanceof pp||(e=pp.create(e));let n=void 0===t?e.len:e.pos+t,r=new gp.VCCallInfoBlob;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.callID=e.uint32();break;case 2:r.clientVersion=e.uint32();break;case 3:r.deviceType=e.string();break;case 4:r.frameworkVersion=e.string();break;case 5:r.osVersion=e.string();break;default:e.skipType(7&t)}}if(!r.hasOwnProperty("callID"))throw fp.ProtocolError("missing required 'callID'",{instance:r});if(!r.hasOwnProperty("clientVersion"))throw fp.ProtocolError("missing required 'clientVersion'",{instance:r});if(!r.hasOwnProperty("deviceType"))throw fp.ProtocolError("missing required 'deviceType'",{instance:r});if(!r.hasOwnProperty("frameworkVersion"))throw fp.ProtocolError("missing required 'frameworkVersion'",{instance:r});if(!r.hasOwnProperty("osVersion"))throw fp.ProtocolError("missing required 'osVersion'",{instance:r});return r},e})();function yp(e){const{Generic:t,PhoneNumber:n,EmailAddress:r}=Ju.Handle.HandleType;return{type:e.startsWith("mailto:")?r:e.startsWith("tel:")?n:t,value:e.replace(/^(mailto:|tel:)/,"")}}const mp=new r.BPlistParser;function vp(e,t,n){return mp.write({vcSessionParticipantKeyUUID:t.participantUUID,...!n&&{b2n:mo(Uc,t.avcBlob||{})},vcSessionParticipantKeyCallInfoBlob:mo(bp,{callID:e,clientVersion:1,deviceType:"Web",frameworkVersion:"1",osVersion:"1.0"})})}function wp(e,t,n){return t.filter(e=>!!e.avcBlob).map(t=>({identifier:t.participantId,handle:yp(t.uri),avcData:vp(e,t,n)}))}class Pp{constructor(e,t,n){Object.defineProperty(this,"key",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"signaturePayload",{enumerable:!0,configurable:!0,writable:!0,value:n})}async verify(e){const t=await this.checkSignature(e);return t instanceof Error?t:t?this.key:new Ce(Se`Failed to verify key.`)}async checkSignature(e){let t;try{t=await crypto.subtle.verify({name:"ECDSA",hash:"SHA-256"},e,this.signature,this.signaturePayload)}catch(e){return Qr(e)}return t}}class Sp extends Ds{constructor(){super(...arguments),Object.defineProperty(this,"bplistParser",{enumerable:!0,configurable:!0,writable:!0,value:Qi(this.provider)})}async getPreKeyFromMaterial(e){if(!e.materialContent)return new Ce(Se`Attempt to decode PreKey failed due to lack of materialContent`);const t=this.bplistParser.parse(e.materialContent);if(t instanceof Error)return t;const n=this.bplistParser.parse(t.payload);if(n instanceof Error)return n;let r;try{r=await crypto.subtle.importKey("raw",n["public-prekey"],{name:"ECDH",namedCurve:"P-256"},!0,[])}catch(e){return Qr(e)}return this.createUnverifiedKey(r,t)}getAVCBlobFromMaterial(e){if(!e.materialContent)return new Ce(Se`Attempt to decode AVCblob failed due to lack of materialContent`);const t=e.materialContent.slice(16),n=t[0];if(1!==n)return new Ce(Se`We were sent an unexpected version number: ${V(n).notPII().forCertain()}`);const r=new Uint8Array([n,0,0,0,0,0,0,0,0]),i=t.slice(1,13),o=t.slice(13);return{ski:e.materialContent.slice(0,16),payload:o,nonce:i,additionalData:r}}getMKMfromMaterial(e){if(!e.materialContent)return new Ce(Se`Attempt to decode MKM failed due to lack of materialContent`);const t=this.bplistParser.parse(e.materialContent);if(t instanceof Error)return t;const n=this.bplistParser.parse(t.payload);return n instanceof Error?n:this.createUnverifiedKey({...n,rtmpwm:1},t)}getSKMfromMaterial(e){if(!e.materialContent)return new Ce(Se`Attempt to decode SKM failed due to lack of materialContent`);const t=this.bplistParser.parse(e.materialContent);if(t instanceof Error)return t;const n=this.bplistParser.parse(t.payload);return n instanceof Error?n:this.createUnverifiedKey({...n,rtmpwm:1},t)}createUnverifiedKey(e,t){const n=new TextEncoder,r=n.encode("com.apple.FaceTime.QRKeying"),i=n.encode(t.sessionID),o=new Uint8Array(r.length+i.length+t.payload.length);return o.set(r),o.set(i,r.length),o.set(t.payload,r.length+i.length),new Pp(e,t.signature,o)}}const $p=a(e=>new Sp(e)),Op=[100,500,1e3,1500];function kp(e,t){const n=new Set(e);return t.forEach(e=>n.delete(e)),n}function Ip(e,t){const n=[];return e.currentPreKey||n.push(Ac.MaterialInfo.MaterialType.PREKEY),n.push(Ac.MaterialInfo.MaterialType.SKM),t||n.push(Ac.MaterialInfo.MaterialType.MKM),e.avcBlob||t||n.push(Ac.MaterialInfo.MaterialType.AVCBLOB),n}class Cp{constructor(e,t,n,r,i,o=Ns.FaceTimeMulti,s=!1){Object.defineProperty(this,"delegate",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"sessionId",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"idsController",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"idsGroupSession",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"qrSession",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"pushTopic",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"isLightweight",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this.idsGroupSession).child`QRMaterialExchangeController`().package`Media`}),Object.defineProperty(this,"qrMaterialEncoder",{enumerable:!0,configurable:!0,writable:!0,value:xu(this.idsGroupSession)}),Object.defineProperty(this,"qrMaterialDecoder",{enumerable:!0,configurable:!0,writable:!0,value:$p(this.idsGroupSession)}),Object.defineProperty(this,"mkmStore",{enumerable:!0,configurable:!0,writable:!0,value:Ku(this.idsGroupSession)}),Object.defineProperty(this,"skmStore",{enumerable:!0,configurable:!0,writable:!0,value:Fu(this.idsGroupSession)}),Object.defineProperty(this,"currentPreKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"currentMkm",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"currentSkm",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"currentAvcBlob",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"listeners",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"activeParticipants",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"participantsWithOurMkm",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"participantsWithOurSkm",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"unknownEncryptedAvcBlobs",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sentCurrentPrekey",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"sentCurrentAvcBlob",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isClosed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.initialize(!0)}async initialize(e){var t;if(this.listeners.forEach(e=>{e()}),!fn.useQRForKeyExchange)return void this.logger.info`QR for key exchange is disabled.`;const n=await this.idsGroupSession.waitForLocalParticipant();if(n instanceof Error)return this.logger.error`Error waiting for local participant: ${n}`,void this.listeners.push(this.idsGroupSession.onLocalParticipantDidChange.listen(()=>{this.initialize(e)}));this.listeners.push(n.onCurrentPreKeyDidChange.listen(e=>{this.currentPreKey=e,this.sentCurrentPrekey=!1,this.knownKeysDidChange()}),n.onNextMKMDidChange.listen(e=>{++this.idsGroupSession.generationCounter,this.currentMkm=e,this.participantsWithOurMkm=[],this.knownKeysDidChange()}),n.onNextSKMDidChange.listen(e=>{++this.idsGroupSession.generationCounter,this.currentSkm=e,this.participantsWithOurSkm=[],this.sentCurrentAvcBlob=!1,this.knownKeysDidChange()}),this.idsGroupSession.onLocalParticipantDidChange.listen(()=>{this.initialize(!1)}),this.qrSession.withCurrentConnection(e=>{this.participantsWithOurMkm=[],this.participantsWithOurSkm=[],this.sentCurrentPrekey=!1,this.sentCurrentAvcBlob=!1,this.knownKeysDidChange(),this.requestNewMaterials()})),(null===(t=n.currentPreKeyPair)||void 0===t?void 0:t.publicKey)&&this.currentPreKey!==n.currentPreKeyPair.publicKey&&(this.currentPreKey=n.currentPreKeyPair.publicKey,this.sentCurrentPrekey=e),n.currentMKM!==this.currentMkm&&(this.currentMkm=n.currentMKM,this.participantsWithOurMkm=[]);const r=await n.waitForCurrentSKM();r&&r!==this.currentSkm&&(this.currentSkm=r,this.participantsWithOurSkm=[]),this.activeParticipants=[...this.idsGroupSession.remoteParticipants.filter(e=>e.active)],this.requestNewMaterials(),this.knownKeysDidChange()}close(){this.isClosed=!0}updateAvcBlob(e){this.isLightweight||e!==this.currentAvcBlob&&(this.currentAvcBlob=e,this.sentCurrentAvcBlob=!1,this.knownKeysDidChange())}updateActiveIDSRemoteParticipants(e){this.activeParticipants=[...e.map(e=>e)],this.requestNewMaterials(),this.knownKeysDidChange()}updateActiveParticipants(e){this.activeParticipants=[...e.map(e=>e.idsParticipant)],this.requestNewMaterials(),this.knownKeysDidChange()}async receiveMaterials(e){const t=this.logger.begin`receiveMaterials`();if(fn.useQRForKeyExchange){if(e.length){t.verbose`beginning recieveMaterials. ${V(e.length).notPII().forCertain()} materials received`;for(const n of e)if(n.ownerParticipantId&&n.materialInfo)for(const e of n.materialInfo)switch(e.materialType){case Ac.MaterialInfo.MaterialType.PREKEY:this.receivePreKey(n,e,t);break;case Ac.MaterialInfo.MaterialType.AVCBLOB:this.receiveAvcBlob(n,e,t);break;case Ac.MaterialInfo.MaterialType.MKM:this.receiveMkm(n,e,t);break;case Ac.MaterialInfo.MaterialType.SKM:this.receiveSkm(n,e,t);break;default:t.warn`invalid material type ${V(e.materialType).constant()}`}else t.verbose`material has no owner or materialInfo. discarded`}}else t.info`QR for key exchange is disabled.`}async requestMaterialsForParticipant(e,t){await this.sendMaterialOwnersWithRetries([{participantId:e,materialType:t}])}async requestNeededMaterialsForParticipant(e){const t=Ip(e,this.isLightweight);t.length?(this.logger.verbose`Was requested for recovery. Attempting to recover ${V(t.length).notPII().forCertain()} pii types: ${V(t.join(",")).constant()} for participant ${to(e.participantId)}`,await this.sendMaterialOwnersWithRetries([{participantId:e.participantId,materialType:t}])):this.logger.info`Was requested to get materials for participant ${to(e.participantId)} but nothing was needed.`}async verifyKey(e,t){this.logger.verbose`Verifying received SKM or MKM key`;const n=await this.idsGroupSession.waitForRemoteParticipantWithId(t);if(n instanceof Error)return this.logger.error`No remote participant ${to(t)}`,null;const r=await this.idsController.endpointsFor(n.uri,this.pushTopic);if(0===r.length)return this.logger.warn`Can't verify received SKM or MKM key, no endpoints, discarding`,null;for(const t of r){if(t instanceof Gu){this.logger.warn`Skipping IDS endpoint cause of IDSQueryError`;continue}const n=await e.verify(t.theirs.publicSigningKey.key);if(!(n instanceof Error))return this.logger.verbose`Verified received SKM or MKM key`,n}return this.logger.warn`Can't verify received SKM or MKM key, discarding`,null}async receivePreKey(e,t,n){n.verbose`Found preKey.`;const r=await this.qrMaterialDecoder.getPreKeyFromMaterial(t);if(r instanceof Error)return void n.warn`Received error decoding preKey. ${In(r)}`;await this.idsGroupSession.receivePreKeyDirectly(da(e.ownerParticipantId),r)&&this.knownKeysDidChange(),this.delegate.reportQRMaterialsReceived(da(e.ownerParticipantId),t.materialType)}async receiveAvcBlob(e,t,n){n.verbose`found AVC blob`;const r=this.qrMaterialDecoder.getAVCBlobFromMaterial(t);if(r instanceof Error)return void n.warn`Received error unpacking avc blob payload. ${In(r)}`;const{ski:i,payload:o,nonce:s,additionalData:a}=r,c=Qn(i,!0);n.verbose`received encrypted AVC blob with ski ${oo(c)}`;const l=await this.skmStore.getDerivedKey(c,this.sessionId,"datablob-context");if(l instanceof Error)return n.verbose`Didn't get SKM with SKI ${oo(c)} in time. Error: ${In(l)}`,this.requestMaterialsForParticipant(da(e.ownerParticipantId),[Ac.MaterialInfo.MaterialType.SKM]),void this.unknownEncryptedAvcBlobs.set(c,[e,t]);const d=await crypto.subtle.decrypt({name:"AES-GCM",iv:s,additionalData:a},l,o);n.silly`parsing conversation participant`;const u=yo(Ju.ConversationParticipant,new Uint8Array(d));u instanceof Error?n.warn`Error decoding conversation participant: ${In(u)}`:(this.idsGroupSession.parseParticipantData(da(e.ownerParticipantId),u.avcData,!1,n),this.delegate.reportQRMaterialsReceived(da(e.ownerParticipantId),t.materialType))}async receiveMkm(e,t,n){n.verbose`found MKM`;const r=this.qrMaterialDecoder.getMKMfromMaterial(t);if(r instanceof Error)return void n.warn`Unable to decode MKM: ${In(r)}`;const i=await this.verifyKey(r,da(e.ownerParticipantId));if(!i)return void n.warn`Unable to verify MKM: ${In(i)}`;n.silly`wait for local participant`;const o=await this.idsGroupSession.waitForLocalParticipant();if(o instanceof Error)return void n.error`No local participant. This should not happen.`;n.silly`waiting for our prekey pair`;const[s,a]=await Promise.all([o.waitForCurrentPreKeyPair(),o.previousPreKeyPair]);if(s instanceof Error)return void n.error`No preKey found.`;const c=Date.now();let l=await Zu(i,s,c);l instanceof Error&&a&&(l=await Zu(i,a,c)),l instanceof Error?n.warn`Could not unwrap received MKM.`:(this.mkmStore.addMKMs([l]),this.delegate.reportQRMaterialsReceived(da(e.ownerParticipantId),t.materialType))}async receiveSkm(e,t,n){n.verbose`found SKM`;const r=this.qrMaterialDecoder.getSKMfromMaterial(t);if(r instanceof Error)return void n.warn`Unable to decode SKM: ${In(r)}`;const i=await this.verifyKey(r,da(e.ownerParticipantId));if(!i)return void n.warn`Unable to verify SKM: ${In(i)}`;n.silly`wait for local participant`;const o=await this.idsGroupSession.waitForLocalParticipant();if(o instanceof Error)return void n.error`No local participant. This should not happen.`;n.silly`waiting for our prekey pair`;const[s,a]=await Promise.all([o.waitForCurrentPreKeyPair(),o.previousPreKeyPair]);if(s instanceof Error)return void n.error`No preKey found.`;let c=await np(i,s);if(c instanceof Error&&a&&(c=await np(i,a)),c instanceof Error)return void n.warn`Could not unwrap received SKM.`;this.skmStore.addSKM(c),this.delegate.reportQRMaterialsReceived(da(e.ownerParticipantId),t.materialType);const l=Qn(c.ski,!0);if(this.unknownEncryptedAvcBlobs.has(l)){n.info`Was waiting on ski ${oo(l)} for an existing AVC blob.`;const[e,t]=this.unknownEncryptedAvcBlobs.get(l);this.unknownEncryptedAvcBlobs.delete(l),this.receiveAvcBlob(e,t,n)}}async requestNewMaterials(){const e=this.logger.begin`requestNewMaterials`(),t=[];this.qrSession.hasConnection?(this.activeParticipants.forEach(n=>{const r=Ip(n,this.isLightweight);r.length&&(e.verbose`Sending requestMaterials for ${da(n.participantId)}. We need: ${V(r.join(",")).constant()}`,t.push({participantId:n.participantId,materialType:r}))}),t.length&&this.sendMaterialOwnersWithRetries(t)):e.verbose`No connection yet. Can't request materials`}async sendMaterialOwnersWithRetries(e,t=Op){var n;const r=this.logger.begin`sendMaterialOwnersWithRetries`(),i=await this.qrSession.getmaterialRequest(e);if(i instanceof Error)return void r.warn`Could not get materials over QR. Error: ${In(i)}`;let o,s=!1;if((null===(n=i.getmaterialResponse)||void 0===n?void 0:n.materials)&&0!=i.getmaterialResponse.materials.length){o=[];const{getmaterialResponse:{materials:t}}=i;for(const n of e){const{participantId:e,materialType:i}=n,s={participantId:e,materialType:[]};for(const n of i){!!t.find(t=>{var r;return t.ownerParticipantId===e&&!!(null===(r=t.materialInfo)||void 0===r?void 0:r.find(e=>e.materialType===n))})||s.materialType.push(n)}s.materialType.length?(r.verbose`Examining received materials for ${da(e)}. We still need: ${V(s.materialType.join(",")).constant()}`,o.push(s)):r.verbose`Examining received materials for ${da(e)}. We got everything necessary.`}o.length&&(r.info`Missing materials. Setting timeout and requesting more.`,s=!0)}else r.info`Received no materials. Setting timeout and requesting more`,o=e,s=!0;if(s){const e=t.slice(),n=e.shift();if(!n)return void r.info`Materials still not received over QR and we are out of timeouts`;if(r.silly`Waiting ${V(n).constant()}ms and then will request again.`,await qn(n,Se``),this.isClosed)return;this.sendMaterialOwnersWithRetries(o,e)}}async knownKeysDidChange(){const e=this.logger.begin`knownKeysDidChange`(),t=this.idsController.identity.signingKeyPair.privateKey,n=await this.idsGroupSession.waitForLocalParticipant();if(n instanceof Error)return void this.logger.error`Error waiting for local participant: ${n}`;if(!this.qrSession.hasConnection)return void this.logger.verbose`No connection yet. Will resend known keys when connection is available.`;const r=[],i=[];if(this.currentPreKey&&!this.sentCurrentPrekey){e.verbose`Encoding preKey for QR server`;const n=await this.qrMaterialEncoder.encodePreKey(this.currentPreKey,this.sessionId,t);n instanceof Error?e.warn`Failed to encode preKey: ${n}`:(i.push(n),this.sentCurrentPrekey=!0)}if(this.currentSkm&&!this.sentCurrentAvcBlob&&this.currentAvcBlob&&!this.isLightweight){e.verbose`Encoding avcBlob for QR server`;const t=(o=this.idsGroupSession.callID,s=n.participantId,a=n.participantUUID,c=n.uri,l=this.currentAvcBlob,d=this.isLightweight,{identifier:s,handle:yp(c),avcData:mp.write({vcSessionParticipantKeyUUID:a,...!d&&{b2n:mo(Uc,l)},vcSessionParticipantKeyCallInfoBlob:mo(bp,{callID:o,clientVersion:1,deviceType:"Web",frameworkVersion:"1",osVersion:"1.0"})})}),r=mo(Ju.ConversationParticipant,t),u=await this.skmStore.deriveKey(this.currentSkm,this.sessionId,"datablob-context");if(u instanceof Error)e.verbose`Didn't get SKM-derived key in time or other error. Error: ${In(u)}`;else{const t=await this.qrMaterialEncoder.encodeAVCBlob(r,u,this.currentSkm.ski);t instanceof Error?e.verbose`Failed to encode. Error: ${In(t)}`:(i.push(t),this.sentCurrentAvcBlob=!0)}}var o,s,a,c,l,d;if(i.length&&r.push({ownerParticipantId:n.participantId,materialInfo:i}),this.currentMkm||this.currentSkm){const e=kp(this.activeParticipants,this.participantsWithOurMkm),i=kp(this.activeParticipants,this.participantsWithOurSkm),o=new Set([...e,...i]);if(o.size){const s=await Promise.all([...o].map(async r=>{if(!r.currentPreKey)return new Ce(Se`Failed to send MKM to  ${to(r.participantId)}: missing their preKey`);const o=[];if(this.currentMkm&&e.has(r)&&!this.isLightweight){const e=await this.qrMaterialEncoder.encodeMKM(this.currentMkm,r.currentPreKey,this.sessionId,t,n.participantId,this.idsGroupSession.generationCounter);if(e instanceof Error)return e;o.push(e),this.participantsWithOurMkm.push(r)}if(this.currentSkm&&i.has(r)){const e=await this.qrMaterialEncoder.encodeSKM(this.currentSkm,r.currentPreKey,this.sessionId,t,n.participantId,this.idsGroupSession.generationCounter);if(e instanceof Error)return e;o.push(e),this.participantsWithOurSkm.push(r)}return o.length?{ownerParticipantId:n.participantId,receiverParticipantId:r.participantId,materialInfo:o}:void 0})),a=s.filter(e=>e instanceof Error).length,c=s.filter(e=>!e).length;this.logger.info`Completed wrapping for ${V(o.size).notPII().forCertain()} participants. ${V(a).notPII().forCertain()} errors and ${V(c).notPII().forCertain()} had no material available to send.`;const l=s.filter(e=>e&&!(e instanceof Error));r.push(...l)}}r.length&&this.qrSession.putmaterialRequest(r)}}var Rp;!function(e){e.NOT_FOUND_ERROR="NotFoundError",e.DEVICES_NOT_FOUND_ERROR="DevicesNotFoundError",e.NOT_READABLE_ERROR="NotReadableError",e.TRACK_START_ERROR="TrackStartError",e.CONSTRAINED_NOT_SATISFIED_ERROR="ConstraintNotSatisfiedError",e.OVERCONSTRAINED_ERROR="OverconstrainedError",e.NOT_ALLOWED_ERROR="NotAllowedError",e.PERMISSION_DENIED_ERROR="PermissionDeniedError",e.TYPE_ERROR="TypeError"}(Rp||(Rp={}));const Mp={height:{ideal:yl.high.resolution}};function Tp(e){return{...Mp,...e}}const Dp=window.AudioContext||window.webkitAudioContext;class Ep{constructor(e,t,n){var r,i;void 0===e&&(e=window.navigator.mediaDevices),void 0===t&&(t=!!(null===(r=RTCRtpSender.getCapabilities("video"))||void 0===r?void 0:r.codecs.some(e=>"video/H264"===e.mimeType))),void 0===n&&(n=!!(null===(i=RTCRtpReceiver.getCapabilities("video"))||void 0===i?void 0:i.codecs.some(e=>"video/H264"===e.mimeType))),Object.defineProperty(this,"mediaDevices",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"supportsH264Encoding",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"supportsH264Decoding",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_logger",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audioContext",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"onAudioStateDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"onVideoStateDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"onAvailableDevicesDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"_audioMediaStream",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_videoMediaStream",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_shouldAudioBeMuted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_lastAudioDeviceId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_lastVideoDeviceId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_orientation",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._logger=qt({log(){}}),null==e||e.addEventListener("devicechange",()=>{this.onAvailableDevicesDidChange.notifyListeners()})}set logger(e){this._logger=e.child`UserMediaStreamManager`().package`Media`.subsystem`AV`}get logger(){return this._logger}createAudioContextIfNeeded(){this.audioContext||(this.audioContext=new Dp)}get audioMediaStream(){return this._audioMediaStream}set audioMediaStream(e){this.logger.activity(this.logger).begin`Set audio stream`,this.logger.info`Creating new audio stream id: ${Ca(null==e?void 0:e.id)}`,this._audioMediaStream&&this._audioMediaStream.getTracks().forEach(e=>this.stopTrack(e)),this._audioMediaStream=e,this.onAudioStateDidChange.notifyListeners()}get videoMediaStream(){return this._videoMediaStream}set videoMediaStream(e){this.logger.activity(this.logger).begin`Set video stream`,this.logger.info`Creating new video stream id: ${Ca(null==e?void 0:e.id)}`,this._videoMediaStream&&this._videoMediaStream.getTracks().forEach(e=>this.stopTrack(e)),this._videoMediaStream=e,this.onVideoStateDidChange.notifyListeners()}pauseTrack(e){this.logger.activity(this.logger).begin`Tracks`,this._logger.info`Pausing ${V(e.kind).constant()} track id: ${_a(e.id)}, label: ${Ua(e.label)}`,e.enabled=!1}unpauseTrack(e){this.logger.activity(this.logger).begin`Tracks`,this._logger.info`Unpausing ${V(e.kind).constant()} track id: ${_a(e.id)}, label: ${Ua(e.label)}`,e.enabled=!0}stopTrack(e){this.logger.activity(this.logger).begin`Tracks`,this._logger.info`Stopping ${V(e.kind).constant()} track id: ${_a(e.id)}, label: ${Ua(e.label)}`,e.enabled=!1,e.stop()}getVideoTracks(){return this.videoMediaStream?this.videoMediaStream.getVideoTracks():[]}getAudioTracks(){return this.audioMediaStream?this.audioMediaStream.getAudioTracks():[]}set shouldAudioBeMuted(e){this._shouldAudioBeMuted=e,this.onAudioStateDidChange.notifyListeners()}get shouldAudioBeMuted(){return this._shouldAudioBeMuted}syncAudioMuted(){this._shouldAudioBeMuted!==this.audioIsMuted&&(this._shouldAudioBeMuted?this.muteAudioStreams():this.unmuteAudioStreams())}get currentAudioDeviceId(){const e=this.getAudioTracks();for(let t=0;t<e.length;t++){const n=e[t];if("live"===n.readyState){return n.getSettings().deviceId||null}}return null}get currentVideoDeviceId(){const e=this.getVideoTracks();for(let t=0;t<e.length;t++){const n=e[t];if("live"===n.readyState){return n.getSettings().deviceId||null}}return null}set orientation(e){this.logger.activity(this.logger).begin`Flip`,this.logger.info`Got video orientation: ${V(e).notPII().forCertain()}`,this._orientation=e}get orientation(){return this._orientation}async getMediaDevices(e){try{const t=await this.mediaDevices.enumerateDevices();this.logger.activity(this.logger).begin`Devices`;const n=t=>t.kind===e,r=e=>n(e)?e.label.toString():e.label.toString().split("").map(e=>e+"").join("");return this.logger.info`Filtering for ${V(e).constant()} devices: ${hc(t.map(r).join(", "))}`,t.filter(n)}catch(e){return this.handleMediaError(e)}}async requestAudioInputPermission(){try{const e=await this.mediaDevices.getUserMedia({audio:!0});return this.audioMediaStream=e,this.logger.activity(this.logger).begin`Request Audio`,this.logger.info`Got audio stream id: ${Ca(e.id)}`,e.getAudioTracks().forEach(t=>{this.logger.info`Got audio track for stream ${Ca(e.id)} with ID: ${_a(t.id)} and label: ${Ua(t.label)}`}),this.syncAudioMuted(),e}catch(e){return this.handleMediaError(e)}}async requestVideoPermission(){try{const e=await this.mediaDevices.getUserMedia({video:Tp({facingMode:"user"})});return this.videoMediaStream=e,this.logger.activity(this.logger).begin`Request Video`,this.logger.info`Got video stream id: ${Ca(e.id)}`,e.getVideoTracks().forEach(t=>{this.logger.info`Got video track for stream ${Ca(e.id)} with ID: ${_a(t.id)} and label: ${Ua(t.label)}`}),e}catch(e){return this.handleMediaError(e)}}async requestAudioVideoPermissions(){try{const e=await this.mediaDevices.getUserMedia({video:Tp({facingMode:"user"}),audio:!0});return this.videoMediaStream=new MediaStream(e.getVideoTracks()),this.audioMediaStream=new MediaStream(e.getAudioTracks()),this.logger.activity(this.logger).begin`Request Audio/Video`,this.logger.info`Got audio/video stream id: ${Ca(e.id)}`,e.getAudioTracks().forEach(t=>{this.logger.info`Got audio track for stream ${Ca(e.id)} with ID: ${_a(t.id)} and label: ${Ua(t.label)}`}),e.getVideoTracks().forEach(t=>{this.logger.info`Got video track for stream ${Ca(e.id)} with ID: ${_a(t.id)} and label: ${Ua(t.label)}`}),this.syncAudioMuted(),e}catch(e){return this.handleMediaError(e)}}async switchAudioInputDevice(e){if(this.syncAudioMuted(),"default"===e)return this.logger.activity(this.logger).begin`Audio Device Switch`,this.logger.info`User requested media default device.`,this.requestAudioInputPermission();if(e===this.currentAudioDeviceId&&this.audioMediaStream)return this.logger.info`User requested same as current device id: ${V(e).device()}.`,this.audioMediaStream;try{this.logger.info`User requested device id: ${V(e).device()}.`;const t=await this.mediaDevices.getUserMedia({audio:{deviceId:{exact:e}}});return this.audioMediaStream=t,t}catch(e){return this.handleMediaError(e)}}switchAudioDeviceWithoutStream(e){this.logger.activity(this.logger).begin`Switch Audio Device`,this.logger.info`User requested device id: ${V(e).device()} while muted.`,this.syncAudioMuted(),this._lastAudioDeviceId=e}switchVideoDeviceWithoutStream(e){this.logger.activity(this.logger).begin`Switch Video Device`,this.logger.info`User requested device id: ${V(e).device()} while video was off.`,this._lastVideoDeviceId=e}async switchVideoDevice(e){if("default"===e)return this.logger.activity(this.logger).begin`Switch Video Device`,this.logger.info`User requested media default device.`,this.requestVideoPermission();if(e===this.currentVideoDeviceId&&this.videoIsEnabled&&this.videoMediaStream)return this.logger.info`User requested same as current device id: ${V(e).device()}.`,this.videoMediaStream;try{this.logger.info`User requested device id: ${V(e).device()}.`,this.stopVideoStreams();const t=await this.mediaDevices.getUserMedia({video:Tp({deviceId:{exact:e}})});return this.videoMediaStream=t,t}catch(e){return this.handleMediaError(e)}}get videoIsPaused(){return this.videoIsEnabled&&this.getVideoTracks().every(e=>!e.enabled)}get videoIsEnabled(){return this.supportsH264Encoding&&this.getVideoTracks().some(e=>"ended"!==e.readyState)}get audioIsMuted(){return this.audioIsEnabled&&this.getAudioTracks().every(e=>!e.enabled)}get audioIsEnabled(){return this.getAudioTracks().some(e=>"ended"!==e.readyState)}pauseVideoStreams(){this.logger.activity(this.logger).begin`Video`,this.logger.info`Pausing video streams`,this.videoIsPaused||(this.getVideoTracks().forEach(e=>this.pauseTrack(e)),this.onVideoStateDidChange.notifyListeners())}stopVideoStreams(){this.logger.activity(this.logger).begin`Video`,this.logger.info`Stopping video streams`,this._lastVideoDeviceId=this.currentVideoDeviceId,this.getVideoTracks().forEach(e=>this.stopTrack(e)),this.onVideoStateDidChange.notifyListeners()}muteAudioStreams(){this.logger.activity(this.logger).begin`Audio`,this.logger.info`Muting audio streams`;const e=this.getAudioTracks();var t;e.length?e.some(e=>e.enabled)?e.forEach(e=>this.pauseTrack(e)):this.logger.info`Audio tracks (${V(e.length).notPII().forCertain()} total) are all disabled. So there is nothing to mute. shouldAudioBeMuted flag is ${t=this.shouldAudioBeMuted,void 0===t?"":V(t).notPII().forCertain()}`:this.logger.info`No outgoing audio tracks to mute, or no enabled tracks`,this.shouldAudioBeMuted||(this.shouldAudioBeMuted=!0,this.logger.info`shouldAudioBeMuted flag is set explicitly`)}stopAudioStreams(){this.logger.activity(this.logger).begin`Audio`,this.logger.info`Stopping audio streams`,this._lastAudioDeviceId=this.currentAudioDeviceId,this.getAudioTracks().forEach(e=>this.stopTrack(e)),this.onAudioStateDidChange.notifyListeners()}unpauseVideoStreams(){this.logger.activity(this.logger).begin`Video`,this.logger.info`Unpausing video streams`,this.videoIsPaused&&(this.getVideoTracks().forEach(e=>this.unpauseTrack(e)),this.onVideoStateDidChange.notifyListeners())}async resumeVideoStreams(){this.logger.activity(this.logger).begin`Video`,this.logger.info`Resuming video streams`;try{const e=this._lastVideoDeviceId&&"default"!==this._lastVideoDeviceId?{video:Tp({deviceId:{exact:this._lastVideoDeviceId}})}:{video:Tp({facingMode:"user"})},t=await this.mediaDevices.getUserMedia(e);this.videoMediaStream=t,this.logger.info`Resumed video stream: ${Ca(t.id)}`}catch(e){this.handleMediaError(e)}}unmuteAudioStreams(){this.logger.activity(this.logger).begin`Audio`,this.logger.info`Unmuting audio streams`;const e=this.getAudioTracks();e.length?(e.forEach(e=>this.unpauseTrack(e)),this.shouldAudioBeMuted=!1):this.logger.info`No outgoing audio tracks to unmute`}async resumeAudioStreams(){this.logger.activity(this.logger).begin`Audio`,this.logger.info`Resuming audio streams`;try{const e=this._lastAudioDeviceId&&"default"!==this._lastAudioDeviceId?{audio:{deviceId:{exact:this._lastAudioDeviceId}}}:{audio:!0},t=await this.mediaDevices.getUserMedia(e);this.audioMediaStream=t,this.logger.info`Resumed audio stream: ${Ca(t.id)}`}catch(e){this.handleMediaError(e)}}async doAFlip(){try{const e=this.getVideoTracks()[0].getCapabilities().facingMode[0];if(this.logger.activity(this.logger).begin`Flip`,this.logger.info`Attempting to flip from ${uc(e)} to opposite`,"user"===e||"left"===e||"right"===e){this.stopVideoStreams(),this.orientation="environment";const e=await this.mediaDevices.getUserMedia({video:Tp({facingMode:{exact:"environment"}})});return this.videoMediaStream=e,this.logger.info`Flip from user to environment was successful.`,!0}if("environment"===e){this.stopVideoStreams(),this.orientation="user";const e=await this.mediaDevices.getUserMedia({video:Tp({facingMode:{ideal:"user"}})});return this.videoMediaStream=e,this.logger.info`Flip from environment to user was successful.`,!0}return e?(this.logger.warn`Unable to flip for another reason. Flip is now disabled.`,!1):(this.logger.warn`Unable to flip, since we don't have a facing mode. Flip is now disabled.`,this.orientation=null,!1)}catch(e){return this.resumeVideoStreams(),this.handleMediaError(e),!1}}async canFlip(){var e,t;const n=await this.getMediaDevices("videoinput");if(this.logger.activity(this.logger).begin`Flip`,n instanceof Error)return this.logger.info`Flip disabled because no video devices were detected.`,!1;if(n.length<2)return this.logger.info`Flip disabled because we only have a single video device`,!1;const r=null===(e=this.videoMediaStream)||void 0===e?void 0:e.getTracks();if(!r||0===r.length)return this.orientation=null,this.logger.info`Flip disabled because we do not have tracks or video permissions.`,!1;const i=null===(t=r[0].getCapabilities().facingMode)||void 0===t?void 0:t[0];return i?(this.logger.info`Flip enabled. Initialized with orientation: ${uc(i).constant()}`,"environment"===i?(this.orientation="environment",!0):(this.orientation="user",!0)):(this.logger.info`Flip disabled because we do not have a facing mode (likely the device is not capable)`,this.orientation=null,!1)}shouldMirror(){var e,t;const n=null===(e=this.videoMediaStream)||void 0===e?void 0:e.getTracks();this.logger.activity(this.logger).begin`Self View`;const r=this.shouldMirror;if(!n||0===n.length)return 0!==r.last&&(r.last=0,this.logger.info`We should mirror since we don't have tracks yet.`),!0;const i=null===(t=n[0].getCapabilities().facingMode)||void 0===t?void 0:t[0],o="environment"!==i;return r.last!==o&&(r.last=o,this.logger.info`Mirroring set to ${V(o).constant()}, as we face the ${uc(i).constant()}`),o}handleMediaError(e){const t=e.name;return t==Rp.NOT_FOUND_ERROR||t==Rp.DEVICES_NOT_FOUND_ERROR||t==Rp.NOT_READABLE_ERROR||t==Rp.TRACK_START_ERROR||t==Rp.OVERCONSTRAINED_ERROR||t==Rp.CONSTRAINED_NOT_SATISFIED_ERROR||t==Rp.NOT_ALLOWED_ERROR||t==Rp.PERMISSION_DENIED_ERROR||Rp.TYPE_ERROR,e}}const Ap=new TextEncoder;class jp{constructor(e,t=null){Object.defineProperty(this,"provider",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"passThrough",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"idsConfig",{enumerable:!0,configurable:!0,writable:!0,value:Rc(this.provider)})}async register(e,t,n=wn(this.provider)){if(this.passThrough)return this.passThrough.register(e,t);{const e=Se`not allowed`;return n.reportError({webCourierRegister:e.toString()}),new Ce(e)}}async query(e,t,n=this.idsConfig.IDSQueryMaxRetryNumber,r=vn(this.provider),i=wn(this.provider)){const o=r.child`IDSWebCourierTransport`.id``().begin`Query`().package`Messaging`.subsystem`IDS`.category`Query`,s=await this.queryOnce(t,o);if(s instanceof Error){const e=Se`Query failed. Reason: ${V(s.message).session()}`;return i.reportError({webCourierQuery:e.toString()}),o.error(e),s}const{status:a,"retry-interval":c=this.idsConfig.IDSQueryDefaultRetryInterval}=s;if(a===Ss.SUCCESS)return s;if(a===Ss.DO_NOT_RETRY||a===Ss.NEVER_RETRY){const e=Se`Query failed with status ${V(a).session()}`;return i.reportError({webCourierQuery:e.toString()}),o.error(e)}if(n>0&&c<this.idsConfig.IDSQueryMaxRetryInterval)return o.info`Waiting ${V(c).session()}s before retrying the query.`,await Ln(1e3*c),this.query(e,t,a===Ss.RETRY_OVER_LIMIT?n-1:0,r,i);{const e=Se`Query failed maximum retries with status ${V(a).session()}`;return i.reportError({webCourierQuery:e.toString()}),o.error(e)}}async queryOnce(e,t){var n,r,i,o;const s=zs(this.provider),a=Gs(this.provider),c=Jr(),l=t.begin`queryOnce`.id`${V(c).user()}`(),d={webRequest:{uuid:Xr(c),headers:{"x-protocol-version":"1","Content-Type":"application/json"},payload:Ap.encode(JSON.stringify({uris:e.uris,"self-uri":e["self-uri"],topic:e.topic}))}};l.debug`Sending query...`,a.send({webQueryRequest:d}),l.debug`waiting for response`;const u=await s.waitFor(function(e,t){return async n=>{var r;const i="other"===n.type?null===(r=n.message.webQueryResponse)||void 0===r?void 0:r.webResponse:null;return!!i&&(!(!i.uuid||Zr(i.uuid)!==e)&&(t.silly`received query response with matching UUID`,!0))}}(c,l),this.idsConfig.IDSQueryTimeout,Se`Waiting for query response`);if(u instanceof Error)return l.info`IDS Query Error: ${u}`,u;const p=u.message.webQueryResponse;if(200!==(null===(n=p.webResponse)||void 0===n?void 0:n.status))return l.info`IDS Query Error: webResponse status ${null===(r=p.webResponse)||void 0===r?void 0:r.status}`,new Error("IDS Query Error: webResponse status "+(null===(i=p.webResponse)||void 0===i?void 0:i.status));const h=null===(o=u.message.webQueryResponse.webResponse)||void 0===o?void 0:o.payload;if(!h)return l.warn`IDS Query Error: webQueryResponse is missing payload field`,new Error("IDS Query Error: webQueryResponse is missing payload field");const f=(()=>{try{return JSON.parse((new TextDecoder).decode(h))}catch{return null}})();if(!f)return l.warn`IDS Query Error: failed to parse webQueryResponse payload as JSON`,new Error("IDS Query Error: failed to parse webQueryResponse payload as JSON");if(!Np(f)&&(!Bp(g=f)||0!==g.status))return l.warn`IDS Query Error: JSON payload had invalid shape`,new Error("IDS Query Error: JSON payload had invalid shape");var g;l.debug`Got non-error response. Reading...`;const b=function(e){var t;if(Np(e))return{status:e.status,results:{},"retry-interval":e["retry-interval"]};const n={status:e.status,results:{},"retry-interval":void 0};for(const r in e.results){const i=e.results[r],o=(null!==(t=i.identities)&&void 0!==t?t:[]).map(e=>{const t=e["client-data"];return{"push-token":e["push-token"],"session-token":e["session-token"],"session-token-expires-seconds":e["session-token-expires-seconds"],"session-token-refresh-seconds":e["session-token-refresh-seconds"],"client-data":{...t,"public-message-identity-key":t["public-message-identity-key"],"public-message-ngm-device-prekey-data-key":t["public-message-ngm-device-prekey-data-key"],"ngm-public-identity":t["ngm-public-identity"]},"kt-loggable-data":e["kt-loggable-data"]}});n.results[r]={status:i.status,identities:o}}return n}(f);return l.http`Status: ${V(b.status).notPII().forCertain()}`,l.verbose`Read in as ${V(b).sensitive()}`,b}}function Np(e){return!!Bp(e)&&(0!==e.status&&("number"==typeof e&&("string"==typeof e.message&&"number"==typeof e["retry-interval"])))}function Bp(e){return"object"==typeof e&&null!==e}const _p=new Uint8Array(8),xp=new DataView(_p.buffer,_p.byteOffset,_p.byteLength);function Up(e,t,n,r,i){for(;i>0;){const o=r>>>3,s=7&r,a=t>>>3,c=7&t,l=s-c,d=Math.min(i,8-s,8-c),u=255<<8-(s+d)&255>>>s,p=255<<8-s,h=e[a],f=l>0?h>>>l:h<<-l;n[o]=n[o]&p|f&u,i-=d,r+=d,t+=d}}class Lp{constructor(e=0,t=new Uint8Array(Math.max(32,e))){Object.defineProperty(this,"bitOffset",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"byteOffset",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"buffer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.size=e,this.buffer=t}get totalBitLength(){return 8*this.buffer.byteLength}ensureSpaceFor(e){if(this.bitOffset+e>8*this.buffer.byteLength){const e=new Uint8Array(2*this.buffer.length);e.set(this.buffer),this.buffer=e}}writeBit(e){this.ensureSpaceFor(1);const t=this.bitOffset>>>3,n=e<<7-(7&this.bitOffset),r=~n;this.buffer[t]=this.buffer[t]&r|n,this.bitOffset++,this.size=Math.max(this.bitOffset,this.size)}copyFrom(e,t,n){this.ensureSpaceFor(n),Up(e,t,this.buffer,this.bitOffset,n),this.bitOffset+=n,this.size=Math.max(this.bitOffset,this.size)}writeUInt(e,t){xp.setUint32(0,t);const n=32-e;this.copyFrom(_p,n,e)}readUInt(e){return xp.setUint32(0,0),Up(this.buffer,this.bitOffset,_p,32-e,e),this.bitOffset+=e,xp.getUint32(0)}read(e,t=new Uint8Array(Math.ceil(e/8)),n=0){return Up(this.buffer,this.bitOffset,t,n,e),t}toString(){return Array.from(this.buffer).slice(0,Math.ceil(this.size/8)).map(e=>"0b"+e.toString(2).padStart(8,"0")).join(" ")}}async function Kp(e,t){const n=new Lp,r=(new TextEncoder).encode("NGMPrekeySignature");n.copyFrom(r,0,8*r.length);const i=await Oo(e);if(i instanceof Error)return i;n.copyFrom(i,0,8*i.length);const o=new Float64Array([t]),s=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);return n.copyFrom(s,0,8*s.length),n.buffer.slice(0,Math.ceil(n.size/8))}class qp{constructor(e,t,n){Object.defineProperty(this,"dataKey",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"timestamp",{enumerable:!0,configurable:!0,writable:!0,value:n})}async isValidlySignedBy(e){const t=await Kp(this.dataKey,this.timestamp);if(t instanceof Error)return t;let n;try{n=await crypto.subtle.verify({name:"ECDSA",hash:"SHA-256"},e,this.signature,t)}catch(e){return Qr(e)}if(!n)return new Ce(Se`Signature invalid`);return!(Date.now()/1e3-this.timestamp>12355200)||new Ce(Se`The encryption prekey is older than the last allowed date.`)}}const Vp=br.Reader,Fp=br.Writer,Gp=br.util,Hp=br.roots.default||(br.roots.default={}),Wp=Hp.KeyTransparencyLoggableData=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ngmPublicIdentity=Gp.newBuffer([]),e.prototype.ngmVersion=0,e.prototype.ktVersion=0,e.encode=function(e,t){return t||(t=Fp.create()),null!=e.ngmPublicIdentity&&Object.hasOwnProperty.call(e,"ngmPublicIdentity")&&t.uint32(10).bytes(e.ngmPublicIdentity),null!=e.ngmVersion&&Object.hasOwnProperty.call(e,"ngmVersion")&&t.uint32(16).uint32(e.ngmVersion),null!=e.ktVersion&&Object.hasOwnProperty.call(e,"ktVersion")&&t.uint32(24).uint32(e.ktVersion),t},e.decode=function(e,t){e instanceof Vp||(e=Vp.create(e));let n=void 0===t?e.len:e.pos+t,r=new Hp.KeyTransparencyLoggableData;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.ngmPublicIdentity=e.bytes();break;case 2:r.ngmVersion=e.uint32();break;case 3:r.ktVersion=e.uint32();break;default:e.skipType(7&t)}}return r},e})();async function Qp(e){const t=yo(bo.PublicDeviceIdentity,e);return t instanceof Error?t:await async function(e){return So(e,"ECDSA")}(t.signingKey)}async function zp(e){var t,n;const r=yo(Wp,e);if(r instanceof Error)return r;const i=await Qp(r.ngmPublicIdentity);return i instanceof Error?i:{keyTransparencyVersion:null!==(t=r.ktVersion)&&void 0!==t?t:0,ngmVersion:null!==(n=r.ngmVersion)&&void 0!==n?n:0,key:i}}async function Jp(e){if(e instanceof Error)return e;const t=await async function(e){const t=await Oo(e);return t instanceof Error?t:mo(bo.PublicDeviceIdentity,{signingKey:t})}(e.key);if(t instanceof Error)return t;const n=e.keyTransparencyVersion,r=e.ngmVersion;return mo(Wp,{ngmPublicIdentity:t,ktVersion:n,ngmVersion:r})}class Yp extends Error{constructor(e,t,n=Se`${e}: ${t}`){super(n.toString()),Object.defineProperty(this,"originalError",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"isLoggable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"logString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.logString=n,t.stack&&(this.stack=t.stack)}}class Zp{constructor(e){Object.defineProperty(this,"stream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.stream=new Lp(8*e.length,e)}_readLength(){if(this.stream.bitOffset>=this.stream.size)return null;let e=this.stream.readUInt(8);if(e<128);else if(129===e){if(this.stream.size-this.stream.bitOffset<8)return null;e=this.stream.readUInt(8)}else if(130===e){if(this.stream.size-this.stream.bitOffset<16)return null;e=this.stream.readUInt(16)}else{if(131!==e)return null;if(this.stream.size-this.stream.bitOffset<24)return null;e=this.stream.readUInt(24)}return e}readLength(){const e=this.stream.bitOffset,t=this._readLength();return null===t&&(this.stream.bitOffset=e),t}_readTag(){const e=this.stream.readUInt(8);let t=31&e;if(31===t){const e=127<<25;let n=0;do{if(this.stream.bitOffset>=this.stream.size||t&e)return null;n=this.stream.readUInt(8),t=t<<7|127&n}while(128&n);if(t&e<<4)return null}const n=(224&e)<<24|t,r=this.readLength();if(null===r)return null;if(this.stream.bitOffset+8*r>this.stream.size)return null;const i={tag:n,data:new Uint8Array(this.stream.buffer.buffer,this.stream.buffer.byteOffset+(this.stream.bitOffset/8|0),r)};return this.stream.bitOffset+=8*r,i}readTag(){const e=this.stream.bitOffset,t=this._readTag();return null===t&&(this.stream.bitOffset=e),t}expectTag(e){const t=this.stream.bitOffset,n=this.readTag();return n?n.tag!==e?(this.stream.bitOffset=t,null):n:null}readInteger(){const e=this.expectTag(2);if(null===e)return e;const t=e.data;if(0===e.data.length)return null;const n="0x"+rn(t);return BigInt(n)}}function Xp(e){if(null===e)return e;const t=e.data[0]<<8|e.data[1];return t>e.data.length+2?null:e.data.slice(2,t+2)}class eh{constructor(){Object.defineProperty(this,"stream",{enumerable:!0,configurable:!0,writable:!0,value:new Lp})}get size(){return Math.ceil(this.stream.size/8)}writeLength(e){e<128?this.stream.writeUInt(8,e):e<=255?(this.stream.writeUInt(8,129),this.stream.writeUInt(8,e)):e<=65535?(this.stream.writeUInt(8,130),this.stream.writeUInt(16,e)):e<=16777215&&(this.stream.writeUInt(8,131),this.stream.writeUInt(24,e))}writeByte(e){this.stream.writeUInt(8,e)}writeInteger(e){this.writeByte(2),this.writeLength(e.length);for(const t of e)this.writeByte(t)}writeData(e,t){this.writeByte(e),this.writeLength(t.length);for(const e of t)this.writeByte(e)}writeLengthValidatedBuffer(e,t){this.writeByte(e),this.writeLength(t.length+2),this.stream.writeUInt(16,t.length);for(const e of t)this.writeByte(e)}writeDER(e,t){this.writeData(e,t.copy())}copy(){return this.stream.buffer.slice(0,this.size)}}var th;async function nh(e){if(e instanceof Error)return e;const t=new Zp(e).expectTag(16|1<<29);if(!t)return new Ce(Se`Not a DER Constructed Sequence`);const n=new Zp(t.data),r=Xp(n.expectTag(2<<30|th.SigningID));if(!r)return new Ce(Se`Expected signing id`);const i=Xp(n.expectTag(2<<30|th.EncryptionID)),o=new Zp(i).expectTag(16|1<<29);if(!o)return new Ce(Se`Expected nested Constructed Sequence`);const s=new Zp(o.data),a=s.readInteger(),c=s.readInteger();if(!a||!c)return new Ce(Se`Could not parse mod and exponent`);let l=a.toString(16);l.length%2!=0&&(l="0"+l);let d=c.toString(16);d.length%2!=0&&(d="0"+d);const u=$n(on(l)),p={alg:"RSA-OAEP-256",e:dr($n(on(d))),ext:!0,key_ops:["encrypt","decrypt"],kty:"RSA",n:dr(u)};try{const e=await crypto.subtle.importKey("raw",r,{name:"ECDSA",namedCurve:"P-256"},!0,[]);return{signingKey:e,dataKey:await crypto.subtle.importKey("jwk",p,{name:"RSA-OAEP",hash:"SHA-256"},!0,[])}}catch(e){return h=Se`importLegacyIdentity > importKey`,f=Qr(e),new Yp(h,f)}var h,f}function rh(e){if(128&e[0]){const t=new Uint8Array(e.length+1);return t[0]=0,t.set(e,1),t}return e}!function(e){e[e.SigningID=1]="SigningID",e[e.EncryptionID=2]="EncryptionID"}(th||(th={}));class ih{constructor(e,t){Object.defineProperty(this,"uri",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"pushToken",{enumerable:!0,configurable:!0,writable:!0,value:t})}}class oh extends ih{constructor(e,t,{signingKeyPair:n,preKeyPair:r,connectionKeyPair:i,legacyIdentity:o,previousIdentities:s,extraQueryProps:a}){super(e,t),Object.defineProperty(this,"signingKeyPair",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"preKeyPair",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"connectionKeyPair",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"legacyIdentity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"previousIdentities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extraQueryProps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signingKeyPair=n,this.preKeyPair=r,this.connectionKeyPair=i,this.legacyIdentity=o,this.previousIdentities=null!=s?s:[],this.extraQueryProps=null!=a?a:{}}get publicSigningKey(){return this.signingKeyPair.publicKey}get publicLegacyIdentity(){return this.legacyIdentity.publicIdentity}get identities(){return[this,...this.previousIdentities]}get preKeyPairs(){return this.identities.map(e=>e.preKeyPair)}get publicPreKeys(){return this.preKeyPairs.map(e=>e.publicKey)}}class sh extends ih{constructor(e,t,{publicSigningKey:n,publicPreKey:r,publicLegacyIdentity:i}){super(e,t),Object.defineProperty(this,"publicSigningKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"publicPreKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"publicLegacyIdentity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.publicSigningKey=n,this.publicPreKey=r,this.publicLegacyIdentity=i}}function ah(e,t){return`${e}#${t}`}class ch{constructor(e,t,{topic:n,counter:r,sessionToken:i,expires:o,refresh:s}){Object.defineProperty(this,"ours",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"theirs",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"counter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topic",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sessionToken",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"expires",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refresh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.counter=r,this.topic=n,this.sessionToken=i,this.expires=o,this.refresh=s}get hasExpired(){return Date.now()>this.expires}get wantsRefresh(){return Date.now()>this.refresh}}class lh{constructor(e,t,n){Object.defineProperty(this,"endpoints",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"expires",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"refresh",{enumerable:!0,configurable:!0,writable:!0,value:n})}get isValid(){return!this.hasExpired}get hasExpired(){return Date.now()>this.expires}get wantsRefresh(){return Date.now()>this.refresh}}class dh{constructor(){Object.defineProperty(this,"outgoingCounter",{enumerable:!0,configurable:!0,writable:!0,value:1})}incrementOutgoingCounter(){return this.outgoingCounter++,this.outgoingCounter}}const uh=new Map;class ph{constructor(e,t){Object.defineProperty(this,"identity",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"outgoingCounters",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),uh.has(e.uri)||uh.set(e.uri,new Map),this.outgoingCounters=uh.get(e.uri),this.logger=t.child`IDSOutgoingCounterStore`.id`${Yi(e.uri)}`(),this.logger.silly`Created new IDSOutgoingCounterStore`}getOutgoingCounterFor(e){if(this.outgoingCounters.has(e.uri))return this.outgoingCounters.get(e.uri);const t=new dh;return this.outgoingCounters.set(e.uri,t),this.logger.silly`Created new counter for ${Yi(e.uri)}`,t}}class hh{constructor(e=1,t=[255]){Object.defineProperty(this,"upperBufferIndex",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"validValuesBuffer",{enumerable:!0,configurable:!0,writable:!0,value:t})}processIncomingCounter(e){let t=this.upperBufferIndex-this.validValuesBuffer.length;const n=8*t,r=8*this.upperBufferIndex-1;if(e<n)return!1;if(e>=n&&e<=r){const n=(e/8|0)-t;let r=this.validValuesBuffer[n];const i=e%8;return!!(1&r>>i)&&(r&=255&~(1<<i),this.validValuesBuffer[n]=r,!0)}const i=1+(e/8|0),o=i-this.upperBufferIndex;let s=this.validValuesBuffer.length+o;s>12500&&(s=12500);let a=0,c=this.validValuesBuffer.length;o<12500&&(c=12500-o,c=Math.min(this.validValuesBuffer.length,c),a=this.validValuesBuffer.length-c),this.validValuesBuffer=[...this.validValuesBuffer.slice(a,c+a),...Array(s-c).fill(255)],this.upperBufferIndex=i,t=this.upperBufferIndex-s;const l=(e/8|0)-t;let d=this.validValuesBuffer[l];return d&=~(1<<e%8),this.validValuesBuffer[l]=255&d,!0}}class fh{constructor(e,t,n){Object.defineProperty(this,"ours",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"theirs",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"outgoingCounter",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"buffer",{enumerable:!0,configurable:!0,writable:!0,value:new hh})}incrementOutgoingCounter(){return this.outgoingCounter.incrementOutgoingCounter()}validateIncomingCounter(e){return this.buffer.processIncomingCounter(e)}}var gh;!function(e){e[e.Unknown=0]="Unknown",e[e.Join=1]="Join",e[e.Leave=2]="Leave",e[e.UpdateMember=3]="UpdateMember",e[e.UpdateParticipantData=4]="UpdateParticipantData"}(gh||(gh={}));const{allocateon:bh}=fn,yh=bh?{allocateon:bh}:{};class mh extends Ds{constructor(e,t=e.identity){super(e),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"identity",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"encryptor",{enumerable:!0,configurable:!0,writable:!0,value:Go(this)}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this).child`IDSNiceMessageFactory`()})}async withPayload(e,t,n=Mr.NiceData){const r=(await Promise.all(t.map(async t=>{const n=this.identity,r=t.counter.incrementOutgoingCounter();this.logger.verbose`Preparing message for endpoint ${Yi(t.theirs.uri)} with counter value ${V(r).sessionID()}`;const i=await this.encryptor.encrypt(n,t.theirs,{message:e,counter:r});return i instanceof Error?i:{P:i,sT:sr(t.sessionToken),t:sr(t.theirs.pushToken),tP:t.theirs.uri}}))).filter(e=>!(e instanceof Error));return{E:"pair-ec",c:n,v:6,U:Yr(),i:js(),sP:this.identity.uri,ua:"Mozilla",dtl:r}}async withUnencryptedPayload(e,t,n=Mr.NiceData){const r=t.map(t=>({P:e,sT:sr(t.sessionToken),t:sr(t.theirs.pushToken),tP:t.theirs.uri}));return{E:"none",c:n,v:6,U:Yr(),i:js(),sP:this.identity.uri,ua:"Mozilla",dtl:r}}endpointToDtl(e){return e.map(e=>({sT:sr(e.sessionToken),t:sr(e.theirs.pushToken),tP:e.theirs.uri}))}qrAlloc(e,t=Jr()){const n=this.endpointToDtl(e),r=new Set(n.map(e=>e.tP)).size,i=Xr(t);return i instanceof Error?i:{c:Rr.Generic,U:Yr(),i:js(),sP:this.identity.uri,dtl:n,qai:Ns.FaceTimeMulti,qat:3,qgid:t,qids:i,qgmc:r,qr:0,qv:6,...yh}}qrReAlloc(e,t,n,r,i,o){const s=this.qrAlloc(e,t);return s instanceof Error?s:{...s,qr:4,qpec:n,qpat:r,qpip:i,qpt:o,...yh}}joinNotification(e,t,n,r,i,o,s,a,c){const l=vp(e,r,c),d=mo(Ju.ConversationParticipantDidJoinContext,{members:this.conversationMembers(i),message:{shouldSuppressInCallUI:!1,activeParticipants:wp(e,[r,...o],c)},isGondolaCallingAvailable:!0}),u=[...i.keys()],p={};[...s.entries()].forEach(([e,t])=>{p[e]=t});const h={"join-notification-key":gh.Join,"fanout-groupID-key":t,"fanout-groupMembers-key":u,s:n,"is-initiator-key":r.isCallInitiator,"participant-id-key":r.participantId,"participant-data-key":l,"uri-to-participant-id-key":p,"client-context-data-key":d};return a&&(h.rtmpk=a,h.rtmpwm=1),h}leaveNotification(e,t,n,r){return{"join-notification-key":gh.Leave,"fanout-groupID-key":e,"fanout-groupMembers-key":r,s:t,"is-initiator-key":n.isCallInitiator,"participant-id-key":n.participantId}}memberUpdateNotification(e,t,n,r,i,o,s,a,c,l){const d=vp(e,r,l),u=this.conversationMembers(i,e=>!c.includes(e)),p=this.conversationMembers(i,e=>c.includes(e)),h=mo(Ju.ConversationParticipantDidJoinContext,{members:u,message:{type:Ju.ConversationMessage.ConversationMessageType.AddMember,shouldSuppressInCallUI:!1,activeParticipants:wp(e,[r,...o],l),reportData:{conversationID:s,timebase:a},...p.length>0?{addedMembers:p}:{}}}),f=[...i.keys()];return{"join-notification-key":gh.UpdateMember,"fanout-groupID-key":t,"fanout-groupMembers-key":f,s:n,"is-initiator-key":r.isCallInitiator,"participant-id-key":r.participantId,"participant-data-key":d,"client-context-data-key":h}}participantDataUpdateNotification(e,t,n,r,i,o){const s=vp(e,r,o),a=mo(Ju.ConversationParticipantDidJoinContext,{members:this.conversationMembers(i),message:{shouldSuppressInCallUI:!1,activeParticipants:[{identifier:r.participantId,avcData:s}]}}),c=[...i.keys()];return{"join-notification-key":gh.UpdateParticipantData,"fanout-groupID-key":t,"fanout-groupMembers-key":c,s:n,"is-initiator-key":r.isCallInitiator,"participant-id-key":r.participantId,"participant-data-key":s,"client-context-data-key":a}}preKeyDistributionMessage(e,t,n){return{"fanout-groupID-key":e,s:t,rtmpk:n,rtmpwm:1}}mkmDistributionMessage(e,t,n,r,i,o,s,a,c){const l={"fanout-groupID-key":e,s:t};return s||(l.rtmkm=n,l.rtallmkm=[...i],l.rtallmkmuri=[...o]),r&&(l.rtskm={sks:r.sks,ski:r.ski,skm:r.skm,rtmpwm:1,skgc:a,participantID:c}),l}preKeyRecoveryRequest(e,t){return{"fanout-groupID-key":e,s:t,rtpkrreq:!0}}mkmRecoveryRequest(e,t,n){return{"fanout-groupID-key":e,s:t,rtkrreq:!0,rtmpk:n,rtmpwm:1}}conversationMembers(e,t=(()=>!0)){return[...e.entries()].filter(([e])=>t(e)).map(([e,t])=>({handle:yp(e),nickname:t}))}}const vh=a(e=>new mh(e));function wh(e,t){return e instanceof Uint8Array?e:t(e)}class Ph extends Ho{constructor(e,t,n=[]){super([ks.useInstance(e),Sh.use(e=>e),vn.useInstance(e.logger),us.useInstance(e.metrics),wn.useInstance(e.feedbackWS),ms.useInstance(e.environment),Go.useInstance(e.encryptor),...n]),Object.defineProperty(this,"identity",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"isLoggable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this)}),Object.defineProperty(this,"metrics",{enumerable:!0,configurable:!0,writable:!0,value:us(this)}),Object.defineProperty(this,"feedbackWS",{enumerable:!0,configurable:!0,writable:!0,value:wn(this)}),Object.defineProperty(this,"ids",{enumerable:!0,configurable:!0,writable:!0,value:ks(this)}),Object.defineProperty(this,"environment",{enumerable:!0,configurable:!0,writable:!0,value:ms(this)}),Object.defineProperty(this,"push",{enumerable:!0,configurable:!0,writable:!0,value:Gs(this.ids)}),Object.defineProperty(this,"replayCountersByHashKey",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"queryMetadataByHashKey",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"endpointMapsByURI",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"nice",{enumerable:!0,configurable:!0,writable:!0,value:vh(this)}),Object.defineProperty(this,"onQueryRatelimited",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"outgoingCounterStore",{enumerable:!0,configurable:!0,writable:!0,value:new ph(this.identity,this.logger)}),Object.defineProperty(this,"queriesMade",{enumerable:!0,configurable:!0,writable:!0,value:0})}get logString(){return Se`[IDSController ${Yi(this.identity.uri)} pushToken=${V(this.identity.pushToken).userID(Ir)}]`}async replayCounterFor(e){const t=await async function(e,t){const n=t.publicSigningKey,r=t.publicPreKey;return rn(Eo((await Promise.all([Oo(e.signingKeyPair.publicKey),Oo(n.key),Oo(r.dataKey)])).map(e=>$n(e))))}(this.identity,e);if(t instanceof Error)return t;const n=this.replayCountersByHashKey.get(t);if(n)return n;const r=this.outgoingCounterStore.getOutgoingCounterFor(e),i=new fh(this.identity,e,r);return this.replayCountersByHashKey.set(t,i),i}existingEndpointSetsByTopicForRemoteURI(e){const t=this.endpointMapsByURI.get(e);if(t)return t;const n=new Map;return this.endpointMapsByURI.set(e,n),n}existingEndpointSetForRemoteURIAndTopic(e,t){const n=this.existingEndpointSetsByTopicForRemoteURI(e).get(t);return null!=n?n:null}async validEndpointsFor(e,t,n=this.logger){return(await this.endpointsFor(e,t,void 0,n)).filter(e=>!(e instanceof Error))}async endpointsFor(e,t,n=6e4,r=this.logger){const i=this.logger.activity(r).begin`endpointsFor`();Array.isArray(e)||(e=[e]),i.debug`Topic: ${V(t).notPII().forCertain()} (${V(e.length).notPII().forCertain()} URIs)`,e=Array.from(new Set(e)),i.verbose`deduped to ${V(e).user()}`,i.silly`URIs:`;const o=[],s=[],a=[];for(const n of e){i.silly`- ${Yi(n)}`;const e=this.existingEndpointSetForRemoteURIAndTopic(n,t);(null==e?void 0:e.isValid)?(i.silly`  has valid existing set of endpoints`,e.wantsRefresh?(i.silly`  ... it wants refresh`,o.push(n),s.push(n)):i.silly`  `,a.push(...e.endpoints)):(i.silly`  no existing valid set of endpoints for uri/topic`,o.push(n)),i.silly``}return o.length>s.length?(i.verbose`query must block: set to query has items not in set to refresh`,this.query(e,t,n)):(s.length>0&&(i.verbose`query can be async: already have results for all URIs`,this.query(s,t,n)),i.silly`returning existing results`,a)}async endpointFor(e,t,n,r=this.logger){const i=this.logger.activity(r).begin`endpointFor`(),o=await this.endpointsFor(e,t,void 0,i);i.info`${V(o.length).notPII().forCertain()} possible source endpoints`;const s=o.find(e=>!(e instanceof Error)&&rn(e.theirs.pushToken)===n);if(!s){const t=Se`Could not find an endpoint for incoming message`;return this.feedbackWS.reportError({idsEndpointFor:t.toString()}),new Gu(e,i.error(t))}return i.info`Found endpoint.`,s}async queryDidCompleteForURI(e,t,n,r,i){const o=this.logger.activity(i).begin`queryDidCompleteForURI`.id`${Yi(e)}`(),s=ah(e,t),a=r.get(s);if(!a)return o.warn`IDS URI Query completed but no query metadata found. Topic: ${V(t).constant()}`,[];o.debug`query complete. waiting for unboxing...`;const c=await n;o.debug`done.`,o.debug``;const l=this.queryMetadataByHashKey.get(s);if(l&&l.ctr>a.ctr)return o.debug`found newer result; skipping this one`,a.resolve(await l.promise),l.promise;const d=c.filter(e=>e instanceof ch);if(o.debug`found ${V(d.length).notPII().forCertain()} non-errors`,d.length){const n=new lh(d,Math.min(...d.map(e=>e.expires)),Math.min(...d.map(e=>e.refresh)));this.existingEndpointSetsByTopicForRemoteURI(e).set(t,n)}else o.warn`no endpoints found`;return o.debug`resolving...`,a.resolve(c),a.timestamp=-1/0,c}queryResultFor(e,t,n,r){let i;if(0!=n){const t=this.logQueryResultError(e,void 0,Se`Uri ${Yi(e)}`);i=[Promise.resolve(t)]}else i=r.map(async n=>{if(n instanceof Error)return this.logQueryResultError(e,n,Se`IDS Error`);const r=t=>this.logQueryResultError(e,void 0,Se`Could not create remote identity: missing ${V(t)}`);function i(e,t){return null==e?r(t):e}const o=wh(n["push-token"],lr);if(o instanceof Error)return this.logQueryResultError(e,o,Se`Push Token`);const s=wh(n["session-token"],lr);if(s instanceof Error)return this.logQueryResultError(e,s,Se`Session Token`);let a=await async function(e){return e instanceof Error?e:e?zp(lr(e)):new Ce(Se`NGM signing key is empty`)}(i(n["kt-loggable-data"],Se`Signing Key`));if(a instanceof Error){const e=wh(i(n["kt-loggable-data"]||n["client-data"]["ngm-public-identity"],Se`Signing Key`),lr);a=await zp(e)}if(a instanceof Error)return this.logQueryResultError(e,a,Se`Signing Key`);const c=wh(i(n["client-data"]["public-message-ngm-device-prekey-data-key"],Se`Pre Key`),lr);if(c instanceof Error)return this.logQueryResultError(e,c,Se`Pre Key`);const l=await async function(e){if(!e)return new Ce(Se`NGM signing key is empty`);const t=yo(bo.PublicDevicePrekey,e);if(t instanceof Error)return t;const n=await Po(t.prekey);if(n instanceof Error)return n;const r=t.timestamp,i=t.prekeySignature;return new qp(n,i,r)}(c);if(l instanceof Error)return this.logQueryResultError(e,l,Se`Pre Key`);const d=await nh(wh(i(n["client-data"]["public-message-identity-key"],Se`Legacy Identity`),lr)),u=d instanceof Error?this.logQueryResultError(e,d,Se`Legacy Identity`):d,p=new sh(e,o,{publicSigningKey:a,publicPreKey:l,publicLegacyIdentity:u}),h=await this.replayCounterFor(p);if(h instanceof Error)return this.logQueryResultError(e,h,Se`Counter`);const f=n["session-token-expires-seconds"],g=n["session-token-refresh-seconds"],b=new ch(this.identity,p,{topic:t,counter:h,sessionToken:s,expires:Date.now()+1e3*(f>0?f:3600),refresh:Date.now()+1e3*(g>0?g:3600)});return this.logger.info`Updating endpoint to a new copy...`,b});return i}async query(e,t,n=6e4){const r=Date.now()-n,i=[],o=[];for(const n of e){const e=ah(n,t),s=this.queryMetadataByHashKey.get(e);!s||s.timestamp<r?i.push(n):o.push(s.promise)}let s=Promise.resolve([]);if(i.length>0){const e=this.willQuery(i,t),n={"self-uri":this.identity.uri,topic:t,uris:i,...this.identity.extraQueryProps};this.logger.info`IDS<--Web [Query]: ${V(JSON.stringify(n,void 0,4)).user()}`;const r=await Fn(this.environment.query(this.identity.pushToken,n),6e4,Se`IDS Query timeout`);s=this.didQuery(i,t,r,e)}return(await Promise.all([s,...o])).flat()}willQuery(e,t){const n=++this.queriesMade,r=new Map,i=[];for(const o of e){const e=ah(o,t);let s;const a=new Promise(e=>{s=e}),c=Date.now(),l={ctr:n,promise:a,resolve:s,timestamp:c};this.queryMetadataByHashKey.set(e,l),r.set(e,l),i.push(a)}return r}async didQuery(e,t,n,r,i=this.logger){i.http`IDS-->Web [Query]: ${n}`,i.verbose`URIs:`;for(const t of e)i.verbose`- ${Yi(t)}`;if(n instanceof Error)return i.warn`Query Error: ${n}`,n instanceof $s&&(i.warn`rate limited`,this.onQueryRatelimited.notifyListeners(n)),(await Promise.all(e.map(e=>{const o=Se`${Yi(e)}`;return this.feedbackWS.reportError({idsDidQuery:o.toString()}),this.queryDidCompleteForURI(e,t,Promise.resolve([new Gu(e,n,o)]),r,i)}).flat())).flat();e.every(e=>{var t,r,i;return 0===(null!==(i=null===(r=null===(t=n.results[e])||void 0===t?void 0:t.identities)||void 0===r?void 0:r.length)&&void 0!==i?i:0)})&&i.warn`No identities found for a pseudonym url`,i.verbose``,i.verbose`Results:`;const o=[];for(const s of e){const e=n.results[s];if(e){const n=this.queryResultFor(s,t,e.status,e.identities);o.push(...await this.queryDidCompleteForURI(s,t,Promise.all(n),r,i))}else{const e=this.queryResultFor(s,t,0,[]);o.push(...await this.queryDidCompleteForURI(s,t,Promise.all(e),r,i))}}return o}logQueryResultError(e,t,n){return this.feedbackWS.reportError({idsQueryResultFor:n.toString()}),new Gu(e,t,n)}}const Sh=a(e=>{throw new Ce(Se`IDSController cannot be auto-instantiated. An existing instance must be passed to the provider: ${e}`)}),$h=[3e3,6e3,9e3];class Oh{constructor(e,t,n,r,i=$h){Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"remoteParticipant",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"preKey",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"remainingRetries",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"_isComplete",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"resolvable",{enumerable:!0,configurable:!0,writable:!0,value:Dr()}),Object.defineProperty(this,"_promise",{enumerable:!0,configurable:!0,writable:!0,value:Fn(this.resolvable.promise,5e3,Se`Timeout waiting for MKM`)}),Object.defineProperty(this,"participantID",{enumerable:!0,configurable:!0,writable:!0,value:this.remoteParticipant.participantId}),Object.defineProperty(this,"_knownKeyIds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._knownKeyIds=new Set(n),this.promise.then(e=>{this._isComplete=!0,e instanceof Error||e.forEach(e=>this._knownKeyIds.add(Qn(e.mki,!0)))})}get isComplete(){return this._isComplete}get knownKeyIds(){return this._knownKeyIds}get promise(){return this._promise}resolve(e){this.resolvable.resolve(e)}covers(e,t=new Set){if(this.preKey!==e)return!1;for(const e of t)if(!this.knownKeyIds.has(e))return!1;return!0}requestByMergingNewer(e,t=$h){const n=new Set;for(const t of e.knownKeyIds)n.add(t);for(const e of this.knownKeyIds)n.add(e);return new Oh(e.logger,this.remoteParticipant,n,e.preKey,t)}nextRetry(){if(0===this.remainingRetries.length)return null;const e=this.remainingRetries.slice(1),t=this.remainingRetries[0];return[new Oh(this.logger,this.remoteParticipant,this.knownKeyIds,this.preKey,e),new Promise(e=>{setTimeout(()=>{e()},t)})]}}class kh extends Ds{constructor(e){super(e),Object.defineProperty(this,"idsGroupSession",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this).child`MKMRecovery`().package`Messaging`.subsystem`IDS`.category`Keys`}),Object.defineProperty(this,"recoveryRequests",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"pendingRecoveryRequests",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"idsController",{enumerable:!0,configurable:!0,writable:!0,value:Sh(this.idsGroupSession)}),Object.defineProperty(this,"nice",{enumerable:!0,configurable:!0,writable:!0,value:vh(this.idsController)}),Object.defineProperty(this,"idsConfig",{enumerable:!0,configurable:!0,writable:!0,value:Rc(this.idsGroupSession)}),Object.defineProperty(this,"pushTopic",{enumerable:!0,configurable:!0,writable:!0,value:Ns.FaceTimeMulti})}mkmNeedsRecovery(e,t,n=this.logger){n.info`mkmNeedsRecovery`;for(const r of e)this.mkmDidTimeOutForParticipant(r,t,n)}async mkmDidTimeOutForParticipant(e,t,n=this.logger){const r=this.logger.activity(n).begin`mkmDidTimeOutForParticipant`.id`${to(e)} keyID: ${oo(t)})`();this.recover(e,new Set([t]),r)}async recover(e,t=new Set,n=this.logger){const r=this.logger.activity(n).begin`recover`();r.info`waiting for remote & local participant...`;const[i,o]=await Promise.all([this.idsGroupSession.waitForRemoteParticipantWithId(e,100),this.idsGroupSession.waitForLocalParticipant()]);if(o instanceof Error)return r.warn`localParticipant: Encountered error: ${o}`,o;if(i instanceof Error)return r.warn`remoteParticipant: Encountered error: ${i}`,i;r.info`Getting our current prekey...`;const s=await o.waitForCurrentPreKeyPair();if(s instanceof Error)return r.warn`preKey: Encountered error: ${s}`,s;const a=this.recoveryRequests.get(e);if(null==a?void 0:a.covers(s.publicKey,t))return void r.info`An existing recoveryRequest covers this case (state: ${a.isComplete?Se`complete`:Se`inflight`})`;const c=new Oh(r,i,t,s.publicKey,$h),l=this.pendingRecoveryRequests.get(e);l?r.info`Has existing pending request`:r.info`No existing pending request`;const d=l?l.requestByMergingNewer(c):c;r.info`Putting into pendingRecoveryRequests...`,this.pendingRecoveryRequests.set(e,d),r.info`sendPendingRequestIfNeeded...`,await this.sendPendingRequestIfNeeded(e)}async sendPendingRequestIfNeeded(e){var t;const n=this.recoveryRequests.get(e);if(!1===(null==n?void 0:n.isComplete))return;const r=this.pendingRecoveryRequests.get(e);this.pendingRecoveryRequests.delete(e),r&&((null===(t=this.recoveryRequests.get(e))||void 0===t?void 0:t.covers(r.preKey,r.knownKeyIds))||(this.recoveryRequests.set(e,r),await this.sendMKMRecoveryRequest(r.remoteParticipant,r.preKey,r.logger)))}async sendPendingRequest(e,t=Promise.resolve()){const n=e.logger.begin`sendPendingRequest`.id`${V(e.remainingRetries.length).notPII().forCertain()} retries remaining`();n.verbose`moving request into active requests immediately...`,this.recoveryRequests.set(e.participantID,e),this.pendingRecoveryRequests.delete(e.participantID),n.verbose`waiting for passed promise...`,await t,n.info`Sending request`,await this.sendMKMRecoveryRequest(e.remoteParticipant,e.preKey,e.logger)}async sendMKMRecoveryRequest(e,t,n){const r=n.begin`sendMKMRecoveryRequest`();r.info`Finding endpoints for URI`;const i=await this.idsController.validEndpointsFor(e.uri,this.pushTopic),o=await crypto.subtle.exportKey("raw",t),s=new Uint8Array(o),a=this.nice.mkmRecoveryRequest(this.idsGroupSession.groupId,this.idsGroupSession.groupId,s);this.idsConfig.IDSUsePushForKeyExchange&&(r.info`Sending recovery request push`,await this.idsGroupSession.sendPushToEndpoints(r,i,a,Mr.NiceGroupSessionMKM,"MKMRecoveryRequest"))}didReceiveMKMForParticipant(e,t){const n=this.recoveryRequests.get(e.participantId);n&&(n.logger.info`didReceiveMKMForParticipant`,n.resolve(new Set(t)),this.sendPendingRequestIfNeeded(e.participantId))}didReceiveInvalidMKMForParticipant(e,t){const n=this.recoveryRequests.get(e.participantId);if(!n)return;const r=n.logger.begin`didReceiveInvalidMKMForParticipant`();r.verbose`resolving promise...`,n.resolve(t),r.info`checking for retry...`;const i=n.nextRetry();if(!i)return;r.info`retrying...`;const[o,s]=i,a=this.pendingRecoveryRequests.get(e.participantId);this.pendingRecoveryRequests.delete(e.participantId);const c=a?o.requestByMergingNewer(a,o.remainingRetries):o;this.sendPendingRequest(c,s)}close(){this.recoveryRequests.clear(),this.pendingRecoveryRequests.clear()}}const Ih=a(e=>new kh(e));function Ch(e,t){return!(e.size>t.size)&&[...e].every(e=>t.has(e))}class Rh extends Ds{constructor(e,t=[],n=new Set,r){super(e),Object.defineProperty(this,"groupMemberURIs",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"cacheStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"idsConfig",{enumerable:!0,configurable:!0,writable:!0,value:Rc(this)}),this.cacheStore=new Lu(this.provider,t),r&&this.groupMemberURIs.add(r)}get mkms(){return this.cacheStore.mkms}receiveRemoteMKMsAndParticipantURIs(e,t){const n=(r=this.groupMemberURIs,i=t,r.size===i.size&&Ch(r,i));var r,i;const o=!n&&Ch(this.groupMemberURIs,t);n?this.cacheStore.addMKMs(e):o&&(this.groupMemberURIs=t,this.cacheStore.clear(!1),this.cacheStore.addMKMs(e))}async payloadToBroadcastForRemoteParticipant(e){const{uri:t,currentPreKey:n}=e;if(n&&this.groupMemberURIs.has(t)){const e=(await Promise.all(this.sampleMKMsToBroadcast().map(e=>e.wrapBy(n)))).filter(e=>!(e instanceof Error));return{allMKMs:e,allURIs:e.length>0?[...this.groupMemberURIs]:[]}}return{allMKMs:[],allURIs:[]}}sampleMKMsToBroadcast(){const e=[...this.cacheStore.mkms];return e.length<=this.idsConfig.MKMCacheDefaultSampleSize?e:(function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}(e),e.slice(0,this.idsConfig.MKMCacheDefaultSampleSize))}}class Mh extends Ds{constructor(e){super(e),Object.defineProperty(this,"blockedMKIs",{enumerable:!0,configurable:!0,writable:!0,value:new Set})}retireMKM(e){const t=Qn(e.mki,!0),n=Date.now();this.blockedMKIs.add({keyId:t,timestamp:n})}}const Th=a(e=>new Mh(e));class Dh extends Ds{constructor(e){super(e),Object.defineProperty(this,"idsConfig",{enumerable:!0,configurable:!0,writable:!0,value:Rc(this)}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this).child`IDSLocalParticipantMKMController`().package`Messaging`.subsystem`IDS`.category`Keys`}),Object.defineProperty(this,"mkmBlocklist",{enumerable:!0,configurable:!0,writable:!0,value:Th(this.provider)}),Object.defineProperty(this,"_isRunning",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_nextLocalMKM",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_currentLocalMKM",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"activeTimers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"onNextMKMDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"onCurrentMKMDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa})}get isRunning(){return this._isRunning}get nextLocalMKM(){return this._nextLocalMKM}set nextLocalMKM(e){this._nextLocalMKM=e,this.onNextMKMDidChange.notifyListeners(e)}get currentLocalMKM(){return this._currentLocalMKM}set currentLocalMKM(e){null!==this._currentLocalMKM&&this.mkmBlocklist.retireMKM(this._currentLocalMKM),this._currentLocalMKM=e,this.onCurrentMKMDidChange.notifyListeners(e)}start(){this.logger.info`Start (already running=${this._isRunning?Se`yes`:Se`no`})`;const e=this._isRunning?this.idsConfig.MKMRollDuration:this.idsConfig.InitialMKMDistributeDuration;return this._isRunning=!0,this.generateNewKeys(e)}async generateNewKeys(e=this.idsConfig.MKMRollDuration){return this.logger.info`generateNewKeys`,this.clearAllTimers(),this.logger.verbose`generating next mkm`,this.nextLocalMKM=await tp.create(),this.currentLocalMKM=this.nextLocalMKM,this.isRunning&&(this.logger.info`scheduling next key generation`,this.activeTimers.push(window.setTimeout(()=>{this.logger.info`roll duration reached; generating new keys`,this.generateNewKeys()},e))),this._nextLocalMKM}clearAllTimers(){this.activeTimers.forEach(e=>window.clearTimeout(e)),this.activeTimers.length=0}stop(){this.logger.info`Stop`,this._isRunning=!1,this.clearAllTimers()}reset(){this.logger.info`reset`,this.nextLocalMKM=null,this.currentLocalMKM=null,this.stop()}}class Eh extends Ds{constructor(e){super(e),Object.defineProperty(this,"idsConfig",{enumerable:!0,configurable:!0,writable:!0,value:Rc(this)}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this).child`IDSLocalParticipantPreKeyController`().package`Messaging`.subsystem`IDS`.category`Keys`}),Object.defineProperty(this,"_isRunning",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_currentPreKeyPair",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_previousPreKeyPair",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"preKeyRollTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oldPreKeyExpirationTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onCurrentPreKeyDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"onPreviousPreKeyDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa})}get isRunning(){return this._isRunning}get currentPreKeyPair(){return this._currentPreKeyPair}set currentPreKeyPair(e){this._currentPreKeyPair=e,e&&this.onCurrentPreKeyDidChange.notifyListeners(e)}get previousPreKeyPair(){return this._previousPreKeyPair}set previousPreKeyPair(e){this._previousPreKeyPair!==e&&(this._previousPreKeyPair=e,this.onPreviousPreKeyDidChange.notifyListeners(e))}start(){return this.logger.info`Start`,this._isRunning=!0,this.generateNewKeys()}async generateNewKeys(){return this.logger.info`generateNewKeys`,this.clearAllTimers(),this.previousPreKeyPair=this._currentPreKeyPair,this.oldPreKeyExpirationTimer=window.setTimeout(()=>{this.logger.info`old key expire`,this.previousPreKeyPair=null},this.idsConfig.PreviousPrekeyExpireDuration),this.logger.verbose`create identity`,this.currentPreKeyPair=await this.createEphemeralDeviceIdentity(),this.isRunning&&(this.logger.verbose`starting timer for next cycle`,this.preKeyRollTimer=window.setTimeout(()=>{this.logger.info`... prekey timer up`,this.generateNewKeys()},this.idsConfig.PreKeyExpireDuration)),this._currentPreKeyPair}stop(){this.logger.info`Stop`,this._isRunning=!1,this.clearAllTimers()}clearAllTimers(){clearTimeout(this.preKeyRollTimer),clearTimeout(this.oldPreKeyExpirationTimer)}async createEphemeralDeviceIdentity(){return await crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}}var Ah=n(13),jh=n.n(Ah);class Nh extends Ho{constructor(e,t,n){super(),Object.defineProperty(this,"participantId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"uri",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"pushToken",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"active",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"everActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"blocked",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"nickname",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"avcBlob",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_sanitizedURI",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ssrcToStreamID(e){var t,n,r;return null!==(r=null===(n=null===(t=this.avcBlob)||void 0===t?void 0:t.streamGroups.flatMap(({streams:e})=>e).find(t=>t&&"rtpSSRC"in t&&t.rtpSSRC===e))||void 0===n?void 0:n.streamID)&&void 0!==r?r:null}get sanitizedURI(){return void 0===this._sanitizedURI&&(this._sanitizedURI=this.computeSanitizedURI()),this._sanitizedURI}computeSanitizedURI(){const{uri:e}=this;return!e||ha(e)?null:/^tel:/i.test(e)?(e=>{const t=e.replace(/^(tel:)/,"");return new jh.a(t).getNumber("international")||t})(e):e.replace(/^mailto:/i,"")}}class Bh extends Nh{constructor(e,t,n,r,i){super(t,n,r),Object.defineProperty(this,"provider",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"isCallInitiator",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"isLocalParticipant",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"participantUUID",{enumerable:!0,configurable:!0,writable:!0,value:Jr()}),Object.defineProperty(this,"isLoggable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"idsConfig",{enumerable:!0,configurable:!0,writable:!0,value:Rc(this.provider)}),Object.defineProperty(this,"onCurrentPreKeyDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"_currentPreKeyPairResolver",{enumerable:!0,configurable:!0,writable:!0,value:Dr()}),Object.defineProperty(this,"_currentPreKeyPair",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_previousPreKeyPair",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"onNextMKMDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"_nextMKM",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"onNextSKMDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"_nextSKM",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"onCurrentMKMDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"_currentMKM",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"skmResolvable",{enumerable:!0,configurable:!0,writable:!0,value:Dr()}),Object.defineProperty(this,"preKeyController",{enumerable:!0,configurable:!0,writable:!0,value:new Eh(this.provider)}),Object.defineProperty(this,"mkmController",{enumerable:!0,configurable:!0,writable:!0,value:new Dh(this.provider)}),Object.defineProperty(this,"disposePreKeyListeners",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"mkmListeners",{enumerable:!0,configurable:!0,writable:!0,value:[]})}get logString(){return Se`[IDSLocalParticipant (Us) nickname=${lo(this.nickname)} uri=${Yi(this.uri)} participantId=${to(this.participantId)} pushToken=${V(this.pushToken).userID(Ir)}]`}get currentPreKeyPair(){return this._currentPreKeyPair}setCurrentPreKeyPair(e){this._currentPreKeyPair=e,e&&(this._currentPreKeyPairResolver.resolve(e),this.onCurrentPreKeyDidChange.notifyListeners(e.publicKey))}async waitForCurrentPreKeyPair(){return this._currentPreKeyPair?this._currentPreKeyPair:await Fn(this._currentPreKeyPairResolver.promise,1e4,Se`Timeout waiting for current preKey`)}get previousPreKeyPair(){return this._previousPreKeyPair}set previousPreKeyPair(e){this._previousPreKeyPair=e}get nextMKM(){return this._nextMKM}set nextMKM(e){this._nextMKM=e,e&&this.onNextMKMDidChange.notifyListeners(e)}set currentMKM(e){this._currentMKM=e,e&&this.onCurrentMKMDidChange.notifyListeners(e)}get currentMKM(){return this._currentMKM}useCurrentMKM(e){return this._currentMKM&&e(this._currentMKM),this.onCurrentMKMDidChange.listen(t=>e(t))}async waitForCurrentSKM(){return this.skmResolvable.promise}get preKeyRollerIsRunning(){return this.preKeyController.isRunning}get mkmRollerIsRunning(){return this.mkmController.isRunning}async startPreKeyRollover(){return this.disposePreKeyListeners.forEach(e=>e()),this.disposePreKeyListeners.length=0,this.disposePreKeyListeners.push(this.preKeyController.onCurrentPreKeyDidChange.listen(e=>{this.setCurrentPreKeyPair(e)}),this.preKeyController.onPreviousPreKeyDidChange.listen(e=>{this.previousPreKeyPair=e})),this.preKeyController.start()}stopPreKeyRollover(){this.preKeyController.stop(),this.disposePreKeyListeners.forEach(e=>e()),this.disposePreKeyListeners.length=0}resetPreKey(){this.stopPreKeyRollover()}async startMKMRollover(){this.skmResolvable=Dr(),this.disposeMKMListeners(),this.mkmListeners.push(this.mkmController.onNextMKMDidChange.listen(e=>{this.nextMKM=e}),this.mkmController.onCurrentMKMDidChange.listen(e=>{this.currentMKM=e})),await Promise.all([this.mkmController.start(),op.create().then(e=>{this.skmResolvable.resolve(e),this.onNextSKMDidChange.notifyListeners(e)})])}resetMKM(){this.disposeMKMListeners(),this.mkmController.reset()}stopMKMRollover(){this.disposeMKMListeners(),this.mkmController.stop()}disposeMKMListeners(){this.mkmListeners.forEach(e=>e()),this.mkmListeners.length=0}}class _h extends Nh{constructor(){super(...arguments),Object.defineProperty(this,"isLoggable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"isRemoteParticipant",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"onParticipantUUIDDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"_participantUUID",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"currentPreKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"currentSKM",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"handoffParticipantFor",{enumerable:!0,configurable:!0,writable:!0,value:null})}get logString(){return Se`[IDSRemoteParticipant nickname=${lo(this.nickname)} uri=${Yi(this.uri)} participantId=${to(this.participantId)} pushToken=${V(this.pushToken).userID(Ir)}]`}get shortDescription(){const e=this.nickname,t=this.sanitizedURI;return e?Se`${lo(e)}`:t?Se`${Yi(t)}`:Se`qrid=${to(this.participantId)}`}set participantUUID(e){this._participantUUID=e,e&&this.onParticipantUUIDDidChange.notifyListeners(e)}get participantUUID(){return this._participantUUID}resetParticipant(){this.avcBlob=null,this.currentPreKey=null,this.currentSKM=null,this.active=!1,this.handoffParticipantFor=null}}class xh extends Ho{constructor(e,t,n,r,i,o=[],s=Ns.FaceTimeMulti,a=!1){super([Sh.use(()=>n),Uh.use(e=>e),vn.use(()=>vn(n.ids)),wn.use(()=>wn(n.ids)),Gs.use(()=>Gs(n.ids)),Qi.use(()=>Qi(n.ids)),...o]),Object.defineProperty(this,"callID",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"groupId",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"idsController",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"delegate",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"isCallInitiator",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"pushTopic",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"isLightweight",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"isLoggable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"ids",{enumerable:!0,configurable:!0,writable:!0,value:this.idsController.ids}),Object.defineProperty(this,"idsConfig",{enumerable:!0,configurable:!0,writable:!0,value:Rc(this.ids)}),Object.defineProperty(this,"_localParticipant",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"timeFromStreamFirstDataToMKM",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_remoteParticipants",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"onLocalParticipantDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"onRemoteParticipantsDidChange",{enumerable:!0,configurable:!0,writable:!0,value:new pa}),Object.defineProperty(this,"hasJoined",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"generationCounter",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logger",{enumerable:!0,configurable:!0,writable:!0,value:vn(this).child`IDSGroupSession`().package`Messaging`.subsystem`IDS`.category`GroupSession`}),Object.defineProperty(this,"nice",{enumerable:!0,configurable:!0,writable:!0,value:vh(this.idsController)}),Object.defineProperty(this,"ps",{enumerable:!0,configurable:!0,writable:!0,value:Gs(this)}),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:Qi(this)}),Object.defineProperty(this,"mkmCache",{enumerable:!0,configurable:!0,writable:!0,value:new Rh(this)}),Object.defineProperty(this,"mkmStore",{enumerable:!0,configurable:!0,writable:!0,value:Ku(this)}),Object.defineProperty(this,"skmStore",{enumerable:!0,configurable:!0,writable:!0,value:Fu(this)}),Object.defineProperty(this,"mkmRecovery",{enumerable:!0,configurable:!0,writable:!0,value:Ih(this)}),Object.defineProperty(this,"storedPreKeys",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"storedPreKeysById",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"activeParticipantIds",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"remoteParticipantsByIDPromiseMap",{enumerable:!0,configurable:!0,writable:!0,value:new rd(Se`Timeout waiting for participant with ID`,1e4)}),Object.defineProperty(this,"remoteParticipantsByPushTokenPromiseMap",{enumerable:!0,configurable:!0,writable:!0,value:new rd(Se`Timeout waiting for participant with pushToken`,1e4)}),Object.defineProperty(this,"localParticipantResolver",{enumerable:!0,configurable:!0,writable:!0,value:Dr()}),Object.defineProperty(this,"updateMemberNotificationResolver",{enumerable:!0,configurable:!0,writable:!0,value:Dr()}),Object.defineProperty(this,"_allKnownGroupMembers",{enumerable:!0,configurable:!0,writable:!0,value:new Map([[this.idsController.identity.uri,{nickname:null}]])}),Object.defineProperty(this,"allocations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"addedParticipantsWhoNeedOurPreKey",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"hasScheduledPreKeyDelivery",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"waitingForLastParticipantTimeout",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.timeFromStreamFirstDataToMKM=new Sn}get logString(){return Se`[IDSGroupSession groupId=${ao(this.groupId)} callID=${V(this.callID).sessionID()} (${V(this.remoteParticipants.length).session()} participants; ${V(this.activeParticipants.length).session()} active; ${V(this.groupMemberURIs.size).session()} known URIs)]`}close(){this.mkmRecovery.close()}get localParticipant(){return this._localParticipant}get remoteParticipants(){return[...this._remoteParticipants]}async activeParticipantsChanged(e){const t=new Set(e);if(zo(Array.from(this.activeParticipantIds).sort(),e.sort()))return!1;this.activeParticipantIds=t;const n=!(!this._localParticipant||!this._localParticipant.active),r=!(!this._localParticipant||!t.has(this._localParticipant.participantId));return this._localParticipant&&(this._localParticipant.active=r),await this.updateActiveParticipantsAsNeeded(this.logger),this.recoverPreKeys(!n&&r),this.isLightweight||this.recoverAVCBlobs(e),0===t.size&&this.isLastParticipantRemaining(),!0}async updateActiveParticipantsAsNeeded(e){const t=this.logger.activity(e).begin`updateActiveParticipantsAsNeeded`(),n=this._remoteParticipants.filter(e=>e.active!==this.activeParticipantIds.has(e.participantId)),r=await Promise.all(n.map(async e=>e.active?(e.active=!1,this.participantDidBecomeInactive(e,t)):(e.active=!0,e.everActive=!0,this.participantDidBecomeActive(e,t))));n.length&&this.delegate.handleActiveParticipantsChange();const i=r.find(e=>e instanceof Error);if(i)return i}async participantDidBecomeActive(e,t){const n=this.logger.activity(t).begin`participantDidBecomeActive`.id`${to(e.participantId)}`();return this.sendMKMToParticipant(e.pushToken,e.uri,n)}participantDidBecomeInactive(e,t){}recoverPreKeys(e){this._remoteParticipants.forEach(t=>{t.active&&!t.currentPreKey&&(this.delegate.attemptMaterialRecovery(t),e?this.sendPreKeyRecoveryRequest(t):setTimeout(()=>{t.currentPreKey||this.sendPreKeyRecoveryRequest(t)},1e3))})}recoverAVCBlobs(e){e.forEach(async e=>{const t=await this.waitForRemoteParticipantWithId(e);t instanceof Error?this.logger.error`Could not find remote participant for id ${to(e)} in recoverAVCBlobs`:t.active&&!t.avcBlob&&(this.delegate.attemptMaterialRecovery(t),this.sendAVCBlobRequest(t))})}participantsBlocked(e){new Set(e).forEach(e=>{const t=this.getRemoteParticipantByParticipantId(e);t&&(t.active=!1,t.blocked=!0)}),this.rollAndSendNewMKMToAllActiveParticipants(),this.delegate.handleActiveParticipantsChange()}get activeParticipants(){return this._remoteParticipants.filter(e=>e.active)}async remoteEndpoints(){this.logger.silly`remoteEndpoints()`;const e=[...new Set(this._remoteParticipants.map(e=>e.uri))];if(this.logger.silly`uris: ${V(e).user()}`,0===e.length)return[];const t=await this.idsController.validEndpointsFor(e,this.pushTopic);return this.logger.silly`remoteEndpoints() -> ${t}`,t}getRemoteParticipantByParticipantId(e){return this._remoteParticipants.find(t=>t.participantId===e)||null}async waitForRemoteParticipantWithId(e,t){const n=this.getRemoteParticipantByParticipantId(e);if(n)return this.remoteParticipantsByIDPromiseMap.resolve(e,n),n;const r=await this.remoteParticipantsByIDPromiseMap.waitFor(e,t);return r instanceof Un?(this.logger.info`Timeout waiting for ${to(e)}`,new Ms(Se`Push for non existing participant ${to(e)} in the session.`)):r}async waitForRemoteParticipantWithPushTokenAndURI(e,t,n){var r;const i=null!==(r=this._remoteParticipants.find(n=>n.pushToken===e&&n.uri===t))&&void 0!==r?r:null;if(i)return this.remoteParticipantsByPushTokenPromiseMap.resolve(i.pushToken,i),i;const o=await this.remoteParticipantsByPushTokenPromiseMap.waitFor(e,n);return o instanceof Error&&this.logger.warn`Error waiting for ${e}`,o}async waitForLocalParticipant(){if(this.logger.silly`waitForLocalParticipant()`,this._localParticipant)return this._localParticipant;const e=await Fn(this.localParticipantResolver.promise,1e4,Se`Timeout waiting for local participant`);return this.logger.silly`local participant: ${e}`,e}async waitForUpdateMemberNotification(){return await this.updateMemberNotificationResolver.promise}get groupMemberURIs(){return new Set([...this._allKnownGroupMembers.keys()])}get groupMemberUriToNicknameMap(){return new Map(Array.from(this._allKnownGroupMembers.entries()).map(([e,t])=>[e,t.nickname]))}setLocalParticipantNickname(e){this._allKnownGroupMembers.set(this.idsController.identity.uri,{nickname:e}),this.localParticipant&&(this.localParticipant.nickname=e)}get activeParticipantIdToAvcBlobMap(){const e=new Map;return this.activeParticipants.forEach(t=>{t.avcBlob&&e.set(t.participantId,t.avcBlob)}),this._localParticipant&&this._localParticipant.avcBlob&&e.set(this._localParticipant.participantId,this._localParticipant.avcBlob),e}get uriToParticipantIdMap(){const e=new Map;if(this.remoteParticipants.forEach(t=>{const n=e.get(t.uri);n?n.push(t.participantId):e.set(t.uri,[t.participantId])}),this._localParticipant){const t=e.get(this._localParticipant.uri);t?t.push(this._localParticipant.participantId):e.set(this._localParticipant.uri,[this._localParticipant.participantId])}return e}async updateAllocations(e,t){const n=new Map;let r=!1;t.forEach(t=>{var i;const{participantId:o,uri:s,pushToken:a}=t;if(o==e){if(this._localParticipant)return;const n=new Bh(this,e,s,a,this.isCallInitiator);n.nickname=null!==(i=this.groupMemberUriToNicknameMap.get(s))&&void 0!==i?i:null,this._localParticipant=n,this.localParticipantResolver.resolve(this._localParticipant),this.onLocalParticipantDidChange.notifyListeners(this._localParticipant),this._localParticipant.onCurrentPreKeyDidChange.listen(e=>{this.logger.info`preKey rolled`,this.sendNewPreKeyToAllRemoteParticipants(e)}),this._localParticipant.onNextMKMDidChange.listen(e=>{this.logger.info`mkm rolled; new MKI: ${V(Zr(e.mki)).sensitive()}`,this.sendNewMKMToAllActiveParticipants(e)}),this._localParticipant.onNextSKMDidChange.listen(e=>{this.skmStore.addSKM(e)}),this.logger.info`Local participant is created with allocation ${V(t)}`,r=!0}else if(n.has(s)){const e=n.get(s);e.find(e=>e.participantId==o)||(e.push(t),this.logger.info`Allocation ${V(t)} is added to ${Yi(s)}`)}else n.set(s,[t]),this.logger.info`Allocation ${V(t)} is added to ${Yi(s)}`}),this.allocations=n;const i=await this.updateRemoteParticipants();if(i instanceof Error)return i;r&&(this.rollAndSendNewPreKeyToAllParticipants(),this.rollAndSendNewMKMToAllActiveParticipants())}addRemoteParticipant(e){this._remoteParticipants.push(e),this.mkmCache.receiveRemoteMKMsAndParticipantURIs([],this.groupMemberURIs),this.logger.info`addRemoteParticipant`,this.addedParticipantsWhoNeedOurPreKey.push(e),this.schedulePreKeyDeliveryIfNeeded()}schedulePreKeyDeliveryIfNeeded(){this.hasScheduledPreKeyDelivery||(this.logger.info`scheduling prekey delivery to new participants...`,this.hasScheduledPreKeyDelivery=!0,window.setTimeout(()=>{this.hasScheduledPreKeyDelivery=!1;const e=[...this.addedParticipantsWhoNeedOurPreKey];this.addedParticipantsWhoNeedOurPreKey.length=0,this.logger.info`sending prekey to ${V(e.length).session()} participants`,this.sendPreKeyToParticipants(e)},1))}removeRemoteParticipant(e){const t=this._remoteParticipants.indexOf(e);-1!==t&&(this._remoteParticipants.splice(t,1),this.resetMKMCache())}resetMKMCache(){var e;this.mkmCache=new Rh(this,[],this.groupMemberURIs,null===(e=this.localParticipant)||void 0===e?void 0:e.uri)}dbg_addLetMeInRequestorToGroupMembers(e,t){return this._allKnownGroupMembers.set(e,{nickname:null!=t?t:null}),this.updateRemoteParticipants()}async updateMediaBlob(e){const t=await this.waitForLocalParticipant();if(t instanceof Error)return t;t.avcBlob=e,this.sendParticipantDataUpdateNotification()}async sendJoinNotification(e,t=this.logger){const n=this.logger.activity(t).begin`sendJoinNotification`();n.http`sendJoinNotification`;const[r,i]=await Promise.all([this.waitForLocalParticipant(),this.remoteEndpoints()]);if(r instanceof Error)return r;e&&(r.avcBlob=e);const o=await r.waitForCurrentPreKeyPair();if(o instanceof Error)return o;const s=new Uint8Array(await crypto.subtle.exportKey("raw",o.publicKey)),a=this.nice.joinNotification(this.callID,this.groupId,this.groupId,r,this.groupMemberUriToNicknameMap,this.remoteParticipants,this.uriToParticipantIdMap,s,this.isLightweight);await this.sendPushToEndpoints(n,i,a,Mr.NiceGroupSessionJoin,"JoinNotification"),this.hasJoined=!0,this._remoteParticipants.filter(e=>e.active).forEach(e=>{this.delegate.onInitialParticipantJoinReceived(e.participantId)}),this.delegate.handleActiveParticipantsChange()}async sendLeaveNotification(e=this.logger){const t=this.logger.activity(e).begin`sendLeaveNotification`();t.http`sendLeaveNotification`;const[n,r]=await Promise.all([this.waitForLocalParticipant(),this.remoteEndpoints()]);if(n instanceof Error)return n;n.stopPreKeyRollover(),n.resetMKM();const i=this.nice.leaveNotification(this.groupId,this.groupId,n,[...this.groupMemberURIs]);await this.sendPushToEndpoints(t,r,i,Mr.NiceGroupSessionLeave,"LeaveNotification")}async sendMemberUpdateNotification(e,t,n,r=!1,i=[],o=this.logger){const s=this.logger.activity(o).begin`sendMemberUpdateNotification`();s.http`sendMemberUpdateNotification`;const[a,c]=await Promise.all([this.waitForLocalParticipant(),this.remoteEndpoints()]);if(a instanceof Error)return a;if(r){if(!a.mkmRollerIsRunning)throw s.error`isJoining=true, and we have localParticipant, but mkmRoller is not running`;if(!a.nextMKM)throw s.error`isJoining=true, and we have localParticipant, but no mkm`;if(a.nextMKM!==a.currentMKM)throw s.error`isJoining=true, and we have localParticipant, but invalid mkm`;const e=await a.waitForCurrentPreKeyPair();if(e instanceof Error)throw e;this.sendNewPreKeyToAllRemoteParticipants(e.publicKey),await this.sendNewMKMToAllActiveParticipants(a.nextMKM)}else this.rollAndSendNewMKMToAllActiveParticipants();n&&(a.avcBlob=n);const l=this.nice.memberUpdateNotification(this.callID,this.groupId,this.groupId,a,this.groupMemberUriToNicknameMap,this.activeParticipants,e,t,i,this.isLightweight);await this.sendPushToEndpoints(s,c,l,Mr.NiceGroupSessionUpdate,"MemberUpdateNotification")}async sendParticipantDataUpdateNotification(e=this.logger){const t=this.logger.activity(e).begin`sendParticipantDataUpdateNotification`();t.http`sendParticipantDataUpdateNotification`;const[n,r]=await Promise.all([this.waitForLocalParticipant(),this.remoteEndpoints()]);if(n instanceof Error)return n;if(!n.avcBlob)return;const i=this.nice.participantDataUpdateNotification(this.callID,this.groupId,this.groupId,n,this.groupMemberUriToNicknameMap,this.isLightweight);await this.sendPushToEndpoints(t,r,i,Mr.NiceGroupSessionMessage,"ParticipantDataUpdateNotification")}async sendPreKeyRecoveryRequest(e,t=this.logger){const n=this.logger.activity(t).begin`sendPreKeyRecoveryRequest`();n.http`sendPreKeyRecoveryRequest`;const r=await this.idsController.validEndpointsFor(e.uri,this.pushTopic),i=this.nice.preKeyRecoveryRequest(this.groupId,this.groupId);await this.sendPushToEndpoints(n,r,i,Mr.NiceGroupSessionPrekey,"PreKeyRecoveryRequest")}async rollAndSendNewPreKeyToAllParticipants(){const e=await this.waitForLocalParticipant();if(e instanceof Error)return e;e.stopPreKeyRollover(),await e.startPreKeyRollover()}async sendNewPreKeyToAllRemoteParticipants(e,t=this.logger){const n=this.logger.activity(t).begin`sendNewPreKeyToAllRemoteParticipants`();n.http`sendNewPreKeyToAllRemoteParticipants`;const[r,i]=await Promise.all([crypto.subtle.exportKey("raw",e),this.remoteEndpoints()]);n.silly`building preKeyDistributionMessage`;const o=this.nice.preKeyDistributionMessage(this.groupId,this.groupId,new Uint8Array(r));n.silly`sending push`,await this.sendPushToEndpoints(n,i,o,Mr.NiceGroupSessionPrekey,"NewPreKeyToAllRemotesNotification")}async rollAndSendNewMKMToAllActiveParticipants(){const e=await this.waitForLocalParticipant();if(e instanceof Error)return e;await e.startMKMRollover()}async sendNewMKMToAllActiveParticipants(e,t=this.logger){const n=this.logger.activity(t).begin`sendNewMKMToAllActiveParticipants`.id`${ro(e.mki)}`();n.http`sendNewMKMToAllActiveParticipants`,n.debug`waiting for local participant...`;const r=await this.waitForLocalParticipant();if(r instanceof Error)return r;const i=await r.waitForCurrentSKM();n.debug`mapping over active participants...`;const o=(await Promise.all(this.activeParticipants.map(async t=>{var r;const{currentPreKey:o,participantId:s,uri:a}=t;if(n.silly`checking for prekey (qrid: ${to(s)})`,!o)return void n.info`Failed to sendNewMKMToAllActiveParticipants ${to(s)}: missing their preKey`;n.silly`getting endpoints...`;const[c,l,d]=await Promise.all([this.idsController.validEndpointsFor(a,this.pushTopic),e.wrapBy(o),null==i?void 0:i.wrapBy(o)]);if(l instanceof Error||d instanceof Error)return n.warn`Failed to sendNewMKMToAllActiveParticipants ${to(s)}: cannot wrap key`,l instanceof Error?l:d;const{allMKMs:u,allURIs:p}=await this.mkmCache.payloadToBroadcastForRemoteParticipant(t),h=this.nice.mkmDistributionMessage(this.groupId,this.groupId,l,d,u,p,this.isLightweight,this.generationCounter,null===(r=this.localParticipant)||void 0===r?void 0:r.participantId);return this.sendPushToEndpoints(n,c,h,Mr.NiceGroupSessionMKM,"NewMKMToAllActivesNotification")}))).filter(e=>e instanceof Error);return o.length>0?o[0]:void 0}async sendMKMToParticipant(e,t,n=this.logger){var r,i,o,s;const a=this.logger.activity(n).begin`sendMKMToParticipant`.id`${ro(null!==(o=null===(i=null===(r=this.localParticipant)||void 0===r?void 0:r.currentMKM)||void 0===i?void 0:i.mki)&&void 0!==o?o:null)}`();a.http`sendMKMToParticipant`;const c=await this.waitForRemoteParticipantWithPushTokenAndURI(e,t);if(c instanceof Un)return a.warn`remoteParticipant timeout: ${c}`,c;if(a.silly`checking if blocked...`,c.blocked)return a.error`Attempting to send mkm to blocked participant ${Yi(c.uri)}`;a.silly`getting their prekey`;const l=c.currentPreKey;if(!l)return void a.debug`Failed to sendMKMToParticipant ${to(c.participantId)}: missing their preKey`;a.silly`wait for local participant`;const d=await this.waitForLocalParticipant();if(d instanceof Error)return a.warn`localParticipant error: ${d}`,d;a.silly`getting our key material`;const u=d.currentMKM;if(!u)return void a.info`Failed to sendMKMToParticipant ${to(c.participantId)}: missing our MKM`;const p=await d.waitForCurrentSKM();a.silly`mki: ${ro(u.mki)}`,a.silly`getting endpoints & wrapping keys`;const[h,f,g]=await Promise.all([this.idsController.validEndpointsFor(c.uri,this.pushTopic),u.wrapBy(l),null==p?void 0:p.wrapBy(l)]);if(f instanceof Error||g instanceof Error)return a.warn`Failed to sendMKMToParticipant ${to(c.participantId)}: cannot wrap key`,f instanceof Error?f:g;a.silly`building payload`;const{allMKMs:b,allURIs:y}=await this.mkmCache.payloadToBroadcastForRemoteParticipant(c);a.silly`building mkmDistributionMessage`;const m=this.nice.mkmDistributionMessage(this.groupId,this.groupId,f,g,b,y,this.isLightweight,this.generationCounter,null===(s=this.localParticipant)||void 0===s?void 0:s.participantId);return a.silly`sending push`,await this.sendPushToEndpoints(a,h,m,Mr.NiceGroupSessionMKM,"MKMToPeerNotification")}async sendPreKeyToParticipant(e,t){this.logger.activity(t).begin`sendPreKeyToParticipant`().http`sendPreKeyToParticipant`;const[n]=await this.sendPreKeyToParticipants([e],t);return n}async sendPreKeyToParticipants(e,t=this.logger){const n=this.logger.activity(t).begin`sendPreKeyToParticipants`();n.http`sendPreKeyToParticipants`;const r=e.filter(e=>!e.blocked);n.silly`waiting for local participant`;const i=await this.waitForLocalParticipant();if(i instanceof Error)return n.warn`localParticipant error: ${i}`,e.map(e=>i);n.silly`waiting for our prekey`;const o=await i.waitForCurrentPreKeyPair();if(o instanceof Error)return n.warn`our prekey error: ${o}`,e.map(e=>o);n.silly`waiting for endpoints`;const[s,a]=await Promise.all([crypto.subtle.exportKey("raw",o.publicKey),this.idsController.validEndpointsFor(r.map(e=>e.uri),this.pushTopic)]);n.silly`building payload`;const c=this.nice.preKeyDistributionMessage(this.groupId,this.groupId,new Uint8Array(s));return n.silly`sending push`,await this.sendPushToEndpoints(n,a,c,Mr.NiceGroupSessionPrekey,"PreKeyToPeerNotification"),e.map(e=>e.blocked?new Ce(Se`Attempting to send preKey to blocked participant ${Yi(e.uri)}`):void 0)}async sendAVCBlobRequest(e,t=this.logger){const n=this.logger.activity(t).begin`sendAVCBlobRequest`();n.http`sendAVCBlobRequest`;const r=await this.idsController.validEndpointsFor(e.uri,this.pushTopic),{ConversationMessageType:i}=Ju.ConversationMessage,o={type:i.ResendAVCBlobRequest,conversationGroupUUIDString:this.groupId};await this.sendPushToEndpoints(n,r,o,Mr.NiceData,"AVCBlobRequest",!0)}async handleIDSGroupSessionMessage(e,t,n,r){const i=this.logger.begin`IDS message`.id`${Yi(t)}`();i.http`handleIDSGroupSessionMessage`,i.debug`Contents: ${n}`;let o=!1,s=!1;if("rtmpk"in n){const{rtmpk:r,rtmpwm:a=0}=n;if(r){if(i.http`  with prekey`,this.idsConfig.IDSUsePushForKeyExchange){if(o=await this.receivePreKey(e,t,r,a,i),o instanceof Error)return o}else i.error`prekey received over push, but will not be saved. This should never happen in a production log.`,o=!0;i.verbose`planning to send MKMs to participant`,s=!0}}if("join-notification-key"in n){if(i.http`  has join-notification-key`,"rtmkm"in n&&i.warn`  unexpected rtmkm in message`,n["join-notification-key"]==gh.Leave){if(setTimeout(()=>{},500),i.http`  is leave notification`,o=await this.receiveLeaveNotification(n),s=!0,o instanceof Error)return o}else if(n["join-notification-key"]==gh.UpdateMember){if(i.http`  is member update`,o=await this.receiveMemberUpdateNotification(n),s=!0,o instanceof Error)return o}else if(i.http`  participant update...`,o=await this.receiveParticipantUpdate(n),o instanceof Error)return o}else if("rtmkm"in n)if(i.http`has rtmkm`,this.idsConfig.IDSUsePushForKeyExchange){if(o=await this.receiveMKMs(e,t,n,r,i),o instanceof Error)return o}else o=!0;else if("rtskm"in n)if(this.idsConfig.IDSUsePushForKeyExchange){if(o=await this.receiveSKM(e,t,n),o instanceof Error)return o}else i.error`MKMs received over push, but will not be saved. This should never happen in a production log.`,o=!0;else if("rtpkrreq"in n&&(i.http`has rtpkrreq`,o=await this.receivePreKeyRecoveryRequest(e,t,n,i),o instanceof Error))return o;if("rtkrreq"in n||"rtskmrreq"in n){const{rtkrreq:e,rtskmrreq:t=!1}=n;i.http`has mkm request. rtkrreq: ${V(e).notPII().forCertain()} rtskmrreq: ${V(t).notPII().forCertain()}`,o=!0,s=s||e||t}if(s){i.http`now sending mkms to participant`;const n=await this.sendMKMToParticipant(sr(e),t,i);if(n)return n}return o}async handleCSDMessages(e,t,n){const r=this.logger.begin`CSD message`.id`${Yi(t)}`();r.debug`Getting CSD message: ${n}`;const{type:i}=n,{ConversationMessageType:o}=Ju.ConversationMessage;return i==o.ResendAVCBlobRequest?(r.debug`is an AVC blob recovery request`,this.handleAVCBlobRequest(e,t)):i==o.ResendAVCBlobResponse?(r.debug`is an AVC blob recovery response`,this.handleAVCBlobResponse(n)):(i===o.AddActivitySession||i===o.RemoveActivitySession)&&(r.debug`is an add activity session message`,this.handleSharePlayUpdate(e,t,n))}async handleSharePlayUpdate(e,t,n){const r=this.logger.begin`SharePlay Message`.id`${Yi(t)}`(),[i,o]=await Promise.all([this.waitForLocalParticipant(),this.waitForRemoteParticipantWithPushTokenAndURI(sr(e),t)]);if(i instanceof Error)return i;if(o instanceof Error)return o;const s=await this.idsController.validEndpointsFor(o.uri,this.pushTopic);return r.debug`is a SharePlay update`,await this.sendPushToEndpoints(this.logger,s,n,Mr.NiceData,"SharingMessage",!0),!0}async handleAVCBlobRequest(e,t){const[n,r]=await Promise.all([this.waitForLocalParticipant(),this.waitForRemoteParticipantWithPushTokenAndURI(sr(e),t)]);if(n instanceof Error)return n;if(r instanceof Error)return r;const i=await this.idsController.validEndpointsFor(r.uri,this.pushTopic),{ConversationMessageType:o}=Ju.ConversationMessage,s={type:o.ResendAVCBlobResponse,conversationGroupUUIDString:this.groupId,activeParticipants:wp(this.callID,[n],this.isLightweight)};return await this.sendPushToEndpoints(this.logger,i,s,Mr.NiceData,"AVCBlobResponse",!0),!0}async handleAVCBlobResponse(e){const{activeParticipants:t}=e;if(!t)return this.logger.debug`Missing activeParticipants`,!1;const n=(await Promise.all(t.map(async e=>this.parseActiveParticipantsAvcData(e)))).filter(e=>e instanceof Error);return!(n.length>0)||n[0]}async receiveLeaveNotification(e,t=this.logger){const n=this.logger.activity(t).begin`Leave Notification`();n.http`receiveLeaveNotification`;const{"participant-id-key":r}=e;n.debug`Waiting for remote participant with ID ${to(r)}`;const i=await this.waitForRemoteParticipantWithId(da(r));return i instanceof Error?(n.debug`Not found: ${i}`,i):(n.h3.http``,i.resetParticipant(),this.delegate.resetParticipant(i),!0)}async receiveMemberUpdateNotification(e,t=this.logger){const n=this.logger.activity(t).begin`Member Update`();n.http`receiveMemberUpdateNotification`,n.debug`receiveParticipantUpdate`;const r=await this.receiveParticipantUpdate(e,n);return r instanceof Error||this.hasJoined&&this.rollAndSendNewMKMToAllActiveParticipants(),r}async receiveParticipantUpdate(e,t=this.logger){const n=this.logger.activity(t).begin`Participant Update`();n.http`receiveParticipantUpdate`;const{"client-context-data-key":r,"participant-data-key":i,"participant-id-key":o,"fanout-groupMembers-key":s}=e;let a=new Map;if(r){n.debug`Has client context data. Parsing...`;const e=da(o),t=await this.parseClientContextData(e,r,n);if(t instanceof Error)return n.warn`Parse failed: ${t}`,t;a=t}if(i.byteLength>0){n.debug`Has participant data. Parsing...`;const e=da(o),t=await this.parseParticipantData(e,i,!0,n);if(t instanceof Error)return n.warn`Parse failed: ${t}`,t}if(!this.hasJoined){n.verbose`!hasJoined; joining...`,n.debug`waiting for local participant`;const e=await this.waitForLocalParticipant();if(e instanceof Error)return n.error`Error waiting for local participant: ${e}`,e;const t=[...new Set(this.remoteParticipants.filter(t=>t.uri!==e.uri).map(e=>{var t;return null!==(t=e.nickname)&&void 0!==t?t:e.uri}))];n.debug`informing delegate of call join received`,this.delegate.handleNewCallJoinReceived(t)}if(s)for(const e of s)this._allKnownGroupMembers.has(e)||n.silly`group member is missing ${Yi(e)}`;if(e["join-notification-key"]==gh.Join){const e=da(o);this.delegate.onOtherParticipantJoinReceived(e,a)}return!0}async receiveSKM(e,t,n){const r=n.rtskm;if(!r)return!1;const i=this.waitForRemoteParticipantWithPushTokenAndURI(sr(e),t),o=await this.waitForLocalParticipant();if(o instanceof Error)return o;const[s,a]=await Promise.all([o.waitForCurrentPreKeyPair(),o.previousPreKeyPair]);if(s instanceof Error)return s;let c=await np(r,s);return c instanceof Error&&a&&(c=await np(r,a)),c instanceof Error?c:(this.skmStore.addSKM(c),(async()=>{const e=await i;e instanceof _h&&(e.currentSKM=c)})(),!0)}async receiveMKMs(e,t,n,r,i){const o=this.logger.activity(i).begin`receiveMKMs`();o.http`receiveMKMs`;const{rtmkm:s,rtallmkm:a=[],rtallmkmuri:c=[],rtskm:l}=n;o.debug`wait for remote participant`;const d=this.waitForRemoteParticipantWithPushTokenAndURI(sr(e),t);o.silly`wait for local participant`;const u=await this.waitForLocalParticipant();if(u instanceof Error)return u;o.silly`waiting for our prekey pair`;const[p,h]=await Promise.all([u.waitForCurrentPreKeyPair(),u.previousPreKeyPair]);if(p instanceof Error)return p;o.debug`attempting to unwrap mkm with both the current and prior prekey`;let f=await Zu(s,p,r);if(f instanceof Error&&h&&(f=await Zu(s,h,r)),f instanceof Error)return(async()=>{const e=await d;e instanceof _h&&(o.warn`Failed to unwrap MKM for remote participant ${to(e.participantId)}: ${V(f.message).personal()}`,this.mkmRecovery.didReceiveInvalidMKMForParticipant(e,f))})(),f;if(l){o.silly`found an skm, storing for later usage`;let e=await np(l,p);if(e instanceof Error&&h&&(e=await np(l,h)),e instanceof Error)return e;this.skmStore.addSKM(e),(async()=>{const t=await d;t instanceof _h?t.currentSKM=e:o.warn`Received SKM for participant who doesn't exist, could not save`})()}o.silly`unwrapping all other received mkms`;const g=(await Promise.all(a.map(async e=>{o.silly`mki: ${ro(e.mki)}`;let t=await Zu(e,p,r);return t instanceof Error&&h&&(t=await Zu(e,h,r)),t}))).filter(e=>!(e instanceof Error)),b=u.currentMKM,y=u.uri,m=b?[b]:[],v=y?[y]:[];o.silly`adding to MKM cache and store`;const{timeFromStreamFirstDataToMKM:w}=this;return null!==w&&(this.idsController.feedbackWS.reportPerf("timeFromStreamFirstDataToMKM",{duration:Math.floor(w.duration)}),this.timeFromStreamFirstDataToMKM=null),(async()=>{const e=await d;e instanceof _h&&this.delegate.reportPushMaterialsReceived(e.participantId,Ac.MaterialInfo.MaterialType.MKM)})(),this.mkmCache.receiveRemoteMKMsAndParticipantURIs([...g,f,...m],new Set([...c,...v])),this.mkmStore.addMKMs([...g,f,...m]),!0}async receivePreKey(e,t,n,r,i){if(this.logger.activity(i).begin`receivePreKey`().http`receivePreKey`,1!=r)return this.logger.error`Received invalid MKMWrapMode ${V(r).device()}`;const o=sr(e),s=this.remoteParticipants.find(e=>e.pushToken===o&&e.uri===t),a=await async function(e){try{return await crypto.subtle.importKey("raw",e,{name:"ECDH",namedCurve:"P-256"},!0,[])}catch(e){return Qr(e)}}(n);return a instanceof Error?a:(s?(s.currentPreKey=a,this.delegate.reportPushMaterialsReceived(s.participantId,Ac.MaterialInfo.MaterialType.PREKEY)):(this.logger.verbose`Received preKey for unfamiliar participant. Storing for later use.`,this.storedPreKeys.set(o,a)),!0)}async receivePreKeyDirectly(e,t){const n=this.getRemoteParticipantByParticipantId(e);if(n){const e=await this.verifyPreKey(n,t);if(e)return n.currentPreKey=e,!0}else this.logger.verbose`Received preKey for unfamiliar participant. Storing for later use.`,this.storedPreKeysById.set(e,t);return!1}async verifyPreKey(e,t){this.logger.verbose`Verifying received preKey`;const n=await this.idsController.endpointsFor(e.uri,this.pushTopic);if(0===n.length)return this.logger.warn`Can't verify received preKey, no endpoints, discarding`,null;for(const e of n){if(e instanceof Gu){this.logger.warn`Skipping IDS endpoint cause of IDSQueryError`;continue}const n=await t.verify(e.theirs.publicSigningKey.key);if(!(n instanceof Error))return this.logger.verbose`Verified received preKey`,n}return this.logger.warn`Can't verify received preKey, discarding`,null}async receivePreKeyRecoveryRequest(e,t,n,r){const i=this.logger.activity(r).begin`receivePreKeyRecoveryRequest`();if(i.http`receivePreKeyRecoveryRequest`,!n.rtpkrreq)return!0;i.debug`waiting for remote participant...`;const o=await this.waitForRemoteParticipantWithPushTokenAndURI(sr(e),t);return o instanceof Error?o:(i.http`sending prekey`,this.sendPreKeyToParticipant(o,i),!0)}async parseClientContextData(e,t,n=this.logger){var r,i,o,s,a,c,l,d,u,p,h,f;const g=this.logger.activity(n).begin`parseClientContextData`();g.verbose`parseClientContextData`;const b=new Map;g.debug`parsing protobuf...`;const y=yo(Ju.ConversationParticipantDidJoinContext,t);if(y instanceof Error)return g.warn`Parse error: ${y}`,y;if(y.participantAssociation){if(!y.participantAssociation.identifier)return new Error("Did join context did not have a participant ID for handoff");const t=da(e);b.set(t,da(y.participantAssociation.identifier))}g.debug`parsing conversation members...`,g.silly`Members: ${V(y.members).user()}`;const m=await this.parseConversationMembers(y.members,g);if(m)return m;g.debug`parsing avc data for each participant...`;const v=await Promise.all(null!==(o=null===(i=null===(r=y.message)||void 0===r?void 0:r.activeParticipants)||void 0===i?void 0:i.map(async e=>this.parseActiveParticipantsAvcData(e,g)))&&void 0!==o?o:[]);if(g.debug`is it AddMember?`,(null===(s=y.message)||void 0===s?void 0:s.type)===Ju.ConversationMessage.ConversationMessageType.AddMember){const e=null!==(a=y.message.addedMembers)&&void 0!==a?a:[];g.debug`yes.`,g.h2.debug`Add Member`,g.debug`adding the addedMembers`;const t=await this.parseConversationMembers(null!=e?e:[],g);if(t)return t;for(const t of e)g.mark`[New Participant ${lo(null!==(c=t.nickname)&&void 0!==c?c:null)} uri=${null!==(d=Yi(null===(l=t.handle)||void 0===l?void 0:l.value))&&void 0!==d?d:null}]`,g.h3.debug`[New Participant] ${lo(null!==(u=t.nickname)&&void 0!==u?u:null)} (${Yi(null!==(h=null===(p=t.handle)||void 0===p?void 0:p.value)&&void 0!==h?h:null)}) has joined`}g.debug`is there reportdata?`,(null===(f=y.message)||void 0===f?void 0:f.reportData)&&(g.debug`triggering resolver (if not already triggered)`,this.updateMemberNotificationResolver.resolve(y.message.reportData)),g.debug`any errors with the AVC data?`;const w=v.filter(e=>e instanceof Error);return w.length>0?(g.warn`Error: ${w[0]}`,w[0]):(g.debug`done`,b)}async parseActiveParticipantsAvcData(e,t=this.logger){const n=this.logger.activity(t).begin`parseActiveParticipantsAvcData`();n.verbose`parseActiveParticipantsAvcData`;const{identifier:r,avcData:i}=e;if(r){if(i)return this.parseParticipantData(da(r),i,!0,n);n.debug`Missing avc data`}else n.debug`Missing participant id`}async parseParticipantData(e,t,n,r=this.logger){const i=this.logger.activity(r).begin`parseParticipantData`.id`${to(e)}`();i.silly`Parsing participant data bplist`;const o=this.bp.parse(t);if(o instanceof Error)return i.warn`Error parsing participant data bplist: ${o}`,o;const{b2n:s,vcSessionParticipantKeyUUID:a}=o;if(!n||this.idsConfig.IDSUsePushForKeyExchange){if(i.silly`checking for media blob`,s){i.silly`handling v2 media blob`;const t=await this.handleMediaBlobBytes(e,a,s);if(t instanceof Error)return i.silly`Error handling v2 media blob: ${t}`,t}else if(!this.isLightweight)throw i.error`Invalid AVC Blob version!`}else i.warn`Not checking for media blob as push for key exchange is disabled`}async handleMediaBlobBytes(e,t,n,r=this.logger){var i;const o=this.logger.activity(r).begin`handleMediaBlobBytes`.id`${to(e)}`();if(o.silly`is the participant us?`,e===(null===(i=this._localParticipant)||void 0===i?void 0:i.participantId))return void o.silly`yes. nothing to do.`;o.silly`waiting for remote participant ${Xi(t)}`;const s=await this.waitForRemoteParticipantWithId(e);if(s instanceof Error)return o.warn`Timeout waiting for participant: ${V(s).user()}`,s;s.participantUUID=t,o.silly`parsing media blob`;const a=yo(Uc,n);if(a instanceof Error)return this.logger.info`Failed to decode avc blob for participant with id ${to(e)}`,a;o.silly`checking stream groups`,0!==a.streamGroups.flatMap(e=>e.streams).length?(a.streamGroups.flatMap(e=>e.streams).filter(e=>e&&!e.streamID).forEach(e=>e.streamID=65535&e.rtpSSRC),s.avcBlob=a,o.silly`notifying delegate of media blob`,this.delegate.handleMediaBlob(e,a)):o.silly`no stream groups`}removeKnownGroupMembers(e){let t=!1;for(const n of e)this._allKnownGroupMembers.has(n)&&(this._allKnownGroupMembers.delete(n),t=!0);t&&this.updateRemoteParticipants()}addKnownGroupMembers(e){let t=!1;for(const n of e)this._allKnownGroupMembers.has(n)||(this._allKnownGroupMembers.set(n,{nickname:null}),t=!0);t&&this.updateRemoteParticipants()}async parseConversationMembers(e,t=this.logger){const n=this.logger.activity(t).begin`parseConversationMembers`();e.forEach(({handle:e,nickname:t})=>{var r,i;n.silly`parsing handle... ${V(e).user()} (nickname=${lo(t)})`;const o=function(e){if(!e)return null;const{type:t,value:n}=e;return t&&n?function(e,t){switch(e){case Ju.Handle.HandleType.PhoneNumber:return"tel:"+t;case Ju.Handle.HandleType.EmailAddress:return"mailto:"+t;default:return t}}(t,n):null}(e);if(!o)return void n.silly`failed.`;const s=null===(r=this._allKnownGroupMembers.get(o))||void 0===r?void 0:r.nickname;this._allKnownGroupMembers.set(o,{nickname:null!==(i=null!=t?t:s)&&void 0!==i?i:null})}),n.h3.silly`Known Member URIs:`;for(const e of this._allKnownGroupMembers.keys())n.silly`- ${Yi(e)}`;return n.silly``,n.silly``,this.updateRemoteParticipants()}async updateRemoteParticipants(e=this.logger){const t=this.logger.activity(e).begin`updateRemoteParticipants`();t.info`Updating remote participants...`,t.info`Known Member URIs:`;for(const e of this._allKnownGroupMembers.keys())t.silly`- ${Yi(e)}`;return await Promise.all(Array.from(this._allKnownGroupMembers.entries()).flatMap(([e,{nickname:n}])=>{t.silly`processing allocations for ${Yi(e)}...`;const r=this.allocations.get(e);return r?r.map(async e=>{var r,i;const{participantId:o,uri:s,pushToken:a}=e;if(t.silly`participant id: ${to(o)} (ours=${to(null===(r=this._localParticipant)||void 0===r?void 0:r.participantId)})`,s===this.idsController.identity.uri&&(!this._localParticipant||o===(null===(i=this._localParticipant)||void 0===i?void 0:i.participantId)))return;const c=this._remoteParticipants.find(e=>e.participantId===o);if(c)t.silly`updating nickname on existing`,c.nickname=null!=n?n:c.nickname;else{t.silly`creating IDSRemoteParticipant`;const e=new _h(o,s,a);if(n&&(e.nickname=n),this.storedPreKeys.has(a))t.silly`found new participant's preKey in storage`,e.currentPreKey=this.storedPreKeys.get(a),this.storedPreKeys.delete(a),this.delegate.reportPushMaterialsReceived(e.participantId,Ac.MaterialInfo.MaterialType.PREKEY);else if(this.storedPreKeysById.has(o)){t.silly`found new participant's preKey in QR storage`;const n=this.storedPreKeysById.get(o);this.storedPreKeysById.delete(o),this.verifyPreKey(e,n).then(t=>{t&&(e.currentPreKey=t)})}t.silly`adding to remote participants`,this.addRemoteParticipant(e),t.silly`resolving promises`,this.remoteParticipantsByIDPromiseMap.resolve(o,e),this.remoteParticipantsByPushTokenPromiseMap.resolve(a,e)}}):(t.info`did not find any allocation for ${Yi(e)}`,[])})),this.onRemoteParticipantsDidChange.notifyListeners(this.remoteParticipants),await this.updateActiveParticipantsAsNeeded(t)}async sendPushToEndpoints(e,t,n,r,i,o=!1){const s=this.logger.activity(e).begin`sendPushToEndpoints`();s.http`sendPushToEndpoints (${V(t.length).session()} endpoints)`;const a=[],c=o?mo(Ju.ConversationMessage,n):this.bp.write(n);s.debug`Encoded payload for push: isCSDMessage was ${o}`;const l=Math.ceil(t.length/5);for(let e=0;e<l;e++){const o=t.slice(5*e,5*(e+1));s.debug`Building nice payload for sending push`,a.push(this.nice.withPayload(c,o,r).then(e=>{s.debug`Begin sending push to remote endpoints`,this.ps.sendPush(this.pushTopic,e,i),s.debug`Sending push to remote endpoints ${o.map(e=>Yi(e.theirs.uri))}`,s.info`${n}`}))}await Promise.all(a)}maxDecryptionTimeoutReached(e,t){this.logger.info`Decryption timeout reached while waiting for ${oo(e)} from remote participant ${to(t)}`,this.delegate.handleMaxDecryptionTimeoutReached(t)}connectionClosed(){if(!this.localParticipant)return;const e=this.localParticipant.participantUUID,t=Jr();this.localParticipant.participantUUID=t,this.logger.info`Changed participantUUID from ${Xi(e)} to ${Xi(t)}`}async isLastParticipantRemaining(){if(this.waitingForLastParticipantTimeout)this.logger.silly`isLastParticipantRemaining called while waiting for timeout`;else{if(this.waitingForLastParticipantTimeout=!0,this.logger.info`All other participants have left call. Initiating timeout.`,await qn(this.idsConfig.LastParticipantRemainingTimeout,Se``),this.activeParticipantIds.size>0)return this.logger.info`We recovered from missing participants within the timeout. We will not disconnect.`,void(this.waitingForLastParticipantTimeout=!1);this.logger.info`All participants have left call. Disconnecting...`,this.delegate.leaveCall(_n.NoReason)}}async diagnose(e){var t,n;e.h2.info`IDSGroupSession: gid=${this.groupId}`,e.info`Local Participant: ${to(null===(t=this._localParticipant)||void 0===t?void 0:t.participantId)} ${V(Yi(null===(n=this._localParticipant)||void 0===n?void 0:n.uri))}`,e.info``,e.h4.info`Member URIs`;for(const[t,n]of this.groupMemberUriToNicknameMap)e.info`- ${Yi(t)}: ${lo(n)}`;e.info``,e.h4.info`AVC Blob Map`,e.info`${V(this.activeParticipantIdToAvcBlobMap.entries()).personal()}`,e.info``,e.h4.info`IDS Config`,e.info`${V(Rc(this)).notPII().forCertain()}`}}const Uh=a(e=>{throw new Ce(Se`IDSGroupSession cannot be auto-instantiated. An existing instance must be passed to the provider: ${e}`)});function Lh(e){return"object"==typeof e&&null!==e}function Kh(e){return gr.a.fromBytesBE(Array.from(Wn(e)))}function qh(e){return Qn(e.toBytesBE(),e.unsigned)}function Vh(e,t){if(!e)throw new Error("Assertion failed: "+(null!=t?t:"Unknown"))}function Fh(e,t,n){Vh(!(e instanceof t),n)}function Gh(e,t){throw new Error("Asserted unreachable code was reached: "+(null!=t?t:"Unknown"))}async function Hh(e){const t=new Promise(t=>{const n=e.createDataChannel("PubSubPluginRpc",{protocol:"rpc"});if("open"===n.readyState)return void t(n);if("connecting"!==n.readyState)return void t(null);const r=()=>{n.removeEventListener("close",i),n.removeEventListener("open",r),t(n)},i=()=>{n.removeEventListener("close",i),n.removeEventListener("open",r),t(null)};n.addEventListener("close",i),n.addEventListener("open",r)}),n=new Promise(e=>{window.setTimeout(()=>e(null),5e3)});return Promise.race([t,n])}async function Wh(e,t,n){const r=new Promise(t=>{const n=()=>{e.removeEventListener("message",r),e.removeEventListener("close",n),t(!1)};e.addEventListener("close",n);const r=i=>{var o;try{const s=Ac.RpcResponse.decode(new Uint8Array(i.data));if(!0!==(null===(o=s.setupAck)||void 0===o?void 0:o.success))return e.removeEventListener("message",r),e.removeEventListener("close",n),void t(!1);e.removeEventListener("message",r),e.removeEventListener("close",n),t(!0)}catch{e.removeEventListener("message",r),e.removeEventListener("close",n),t(!1)}};e.addEventListener("message",r)});e.send(Ac.RpcRequest.encode({setup:{pluginName:t,path:n,traceId:Yr()}}).finish());const i=new Promise(e=>{window.setTimeout(()=>e(!1),5e3)});return Promise.race([r,i])}function Qh(e){return"bigint"==typeof e?e:"number"==typeof e?BigInt(e):qh(e)}async function zh(e,t){const n=await crypto.subtle.exportKey("raw",e.publicKey),r=new Uint8Array(n),i=new Uint8Array(17);i[0]=0;const o=Wn(t);i.set(o,1),crypto.getRandomValues(i.subarray(9));const s=new Uint8Array(await crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},e.privateKey,i)),a=s.length/2,c=s.subarray(0,a),l=s.subarray(a),d=s[0]>127,u=s[a]>127,p=a+(d?1:0),h=a+(u?1:0);let f=0;const g=new Uint8Array(p+h+2+2+4);return g[f++]=1,g[f++]=3,g[f++]=48,g[f++]=p+h+4,g[f++]=2,g[f++]=p,d&&(g[f++]=0),g.set(c,f),f+=a,g[f++]=2,g[f++]=h,u&&(g[f++]=0),g.set(l,f),f+=a,{publicKey:r,nonce:i,signature:g}}async function Jh(e,t,n,r){const i=vn(e);i.info`Creating IDS push connection`;const o=await Io(),s=await Jp({key:o.publicKey,ngmVersion:12,keyTransparencyVersion:0});if(s instanceof Error)return i.debug`Failed to export NGM device signing key: ${s}`,s;const a=await async function(){const e=await Io(!0),t=await crypto.subtle.generateKey({name:"RSA-OAEP",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])},!0,["encrypt","decrypt"]);return{signingKey:e,dataKey:t,publicIdentity:{signingKey:e.publicKey,dataKey:t.publicKey}}}(),c=await async function(e){let t,n;try{t=await crypto.subtle.exportKey("jwk",e.dataKey),n=new Uint8Array(await crypto.subtle.exportKey("raw",e.signingKey))}catch(e){return Qr(e)}const r=rh($n(ur(t.n))),i=rh($n(ur(t.e))),o=new eh;o.writeInteger(r),o.writeInteger(i);const s=new eh;s.writeDER(48,o);const a=new eh;a.writeLengthValidatedBuffer(129,n),a.writeLengthValidatedBuffer(130,s.copy());const c=new eh;return c.writeDER(48,a),c.copy()}(a.publicIdentity);if(c instanceof Error)return i.debug`Failed to export legacy identity: ${c}`,c;const l=await Co(),d=await async function(e,t){const n=Date.now()/1e3,r=await Kp(e,n);if(r instanceof Error)return r;let i;try{i=new Uint8Array(await crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},t,r))}catch(e){return Qr(e)}const o=await Oo(e);return o instanceof Error?o:mo(bo.PublicDevicePrekey,{prekey:o,prekeySignature:i,timestamp:n})}(l.publicKey,o.privateKey);if(d instanceof Error)return i.debug`Failed to export public device prekey`,d;const u=await crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"]),p=new ca(e,r);e.set(la.useInstance(p));let h=null;const f=await(async()=>{let t=0;for(;;){const n=t+1;i.debug`Attempting connection to IDS push...`;const r=await zh(u,null!=h?h:BigInt(Date.now()));if(r instanceof Error)return i.debug`Failed to generate and sign WebCourier nonce`,r;const o={publicKey:r.publicKey,nonce:r.nonce,signature:r.signature,newConnectionRequest:{tokenExpirationSeconds:86400}},s=await Promise.race([p.connectWithMessage(o),new Promise(e=>window.setTimeout(()=>{e(new Error("IDS: Push connection connection timed out on attempt "+n))},1e4))]);if(s instanceof sa){if(h=s.serverTimestamp,i.debug`IDS push connection error: ${s}`,ra(e).close(),3==t++)return s}else{if(!(s instanceof Error))return i.debug`IDS push connection succeeded`,{pushToken:s.pushToken};if(i.debug`IDS push connection error: ${s}`,ra(e).close(),3==t++)return s}}})();if(f instanceof Error)return i.warn`IDS connect result error: ${f}`,f;const g=zs(e).waitFor(async e=>"other"===e.type&&!!e.message.webBootstrapResponse,1e4),b=Gs(e),y=Yr();b.send({webBootstrapRequest:{webRequest:{uuid:y,headers:{"x-protocol-version":"1","Content-Type":"application/json"},payload:(new TextEncoder).encode(JSON.stringify({"client-data":{"is-web-client":!0,"ngm-public-identity":sr(s),"public-message-identity-key":sr(c),"public-message-identity-ngm-version":12,"public-message-identity-version":2,"public-message-ngm-device-prekey-data-key":sr(d)},"feature-id":"Wrangler",uri:t}))}}});const m=await g;if(m instanceof Error)return i.warn`IDS bootstrap result error: ${m}`,m;const v=m.message.webBootstrapResponse;if(!v)return i.warn`IDS bootstrap result error: null bootstrapResponse`,new Error("Bootstrap response was null");const w=v.webResponse;if(!w)return i.warn`IDS bootstrap result error: null webResponse`,new Error("Bootstrap webResponse was null");const P=w.payload;if(!P)return i.warn`IDS bootstrap result error: null payload`,new Error("Bootstrap payload was null");const S=(()=>{try{return JSON.parse((new TextDecoder).decode(P))}catch{return null}})();if(!S)return i.warn`IDS bootstrap result error: JSON failed to parse`,new Error("Bootstrap response JSON failed to parse");if(Bp($=S)&&0!==$.status&&"number"==typeof $&&"string"==typeof $.message&&"number"==typeof $["retry-interval"])return i.warn`Bootstrap failed with error: ${S.message}`,new Error("Bootstrap failed with error: "+S.message);var $;if(!function(e){return!!Bp(e)&&(0===e.status&&(!!Array.isArray(e.identities)&&"string"==typeof e["assigned-uri"]))}(S))return i.warn`Bootstrap failed with error: unknown`,new Error("Bootstrap failed with error: unknown");const O=S["assigned-uri"];if(!O)return i.debug`IDS bootstrap result missing uri`,new Error("Initial register response is empty");const k=new oh(O,f.pushToken,{signingKeyPair:o,preKeyPair:l,connectionKeyPair:u,legacyIdentity:a,extraQueryProps:{}});p.setReconnectHandler(t=>async function(e,t,n){if(!e.has(la))return new Ce(Se`Can't reconnect as was never connected`);const r=la(e),{pushToken:i,connectionKeyPair:o,uri:s}=t;if(!o)return new Ce(Se`Can't reconnect as don't have token or key`);if(!ha(s))return new Ce(Se`Identity can not be reconnected`);const a=vn(e).begin`attemptReconnection`();a.info`Attempting reconnect.`;const c=await zh(o,null!=n?n:BigInt(Date.now()));if(c instanceof Error)return a.debug`Failed to generate and sign WebCourier nonce`,c;const l=sr(i),d={publicKey:c.publicKey,nonce:c.nonce,signature:c.signature,connectWithPushToken:{pushToken:l}};a.info`Attempting to reinitiate push connection: ${V(d)}`;const u=ra(e).reconnect(d);return u instanceof Error?u:(await r.reconnect(u),u.timeToFirstMessage)}(e,k,t));const I=Ps(e).controllersByURI;if(I.has(O))return i.debug`IDS controller store already has this uri`,new Error("Registered an already-existing URI");const C=new Ph(e,k);I.set(O,C);const R=C.willQuery([t],n),M=function(e,t){const n=t.identities.map(e=>{const t=e["client-data"];return{"push-token":e["push-token"],"session-token":e["session-token"],"session-token-expires-seconds":e["session-token-expires-seconds"],"session-token-refresh-seconds":e["session-token-refresh-seconds"],"client-data":{...t,"public-message-identity-key":t["public-message-identity-key"],"public-message-ngm-device-prekey-data-key":t["public-message-ngm-device-prekey-data-key"],"ngm-public-identity":t["ngm-public-identity"]},"kt-loggable-data":e["kt-loggable-data"]}});return{status:t.status,results:{[e]:{status:t.status,identities:n}}}}(t,S);return C.didQuery([t],n,M,R),i.debug`IDS controller successfully created`,C}function Yh(e){return"bigint"==typeof e?e:"number"==typeof e?BigInt(e):qh(e)}const Zh=br.Reader,Xh=br.Writer,ef=br.util,tf=br.roots.default||(br.roots.default={}),nf=tf.cp=(()=>{const e={};return e.Record=function(){function e(e){if(this.destinationParticipantIDs=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic="",e.prototype.data=ef.newBuffer([]),e.prototype.seqNum=null,e.prototype.destinationParticipantIDs=ef.emptyArray,e.prototype.encryptionID=null,e.prototype.sentEpochMillis=ef.Long?ef.Long.fromBits(0,0,!1):0,e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.seqNum&&Object.hasOwnProperty.call(e,"seqNum")&&tf.cp.SequenceNumber.encode(e.seqNum,t.uint32(26).fork()).ldelim(),null!=e.destinationParticipantIDs&&e.destinationParticipantIDs.length){t.uint32(34).fork();for(let n=0;n<e.destinationParticipantIDs.length;++n)t.fixed64(e.destinationParticipantIDs[n]);t.ldelim()}return null!=e.encryptionID&&Object.hasOwnProperty.call(e,"encryptionID")&&tf.cp.EncryptionID.encode(e.encryptionID,t.uint32(42).fork()).ldelim(),null!=e.sentEpochMillis&&Object.hasOwnProperty.call(e,"sentEpochMillis")&&t.uint32(49).fixed64(e.sentEpochMillis),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.Record;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topic=e.string();break;case 2:r.data=e.bytes();break;case 3:r.seqNum=tf.cp.SequenceNumber.decode(e,e.uint32());break;case 4:if(r.destinationParticipantIDs&&r.destinationParticipantIDs.length||(r.destinationParticipantIDs=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.destinationParticipantIDs.push(e.fixed64())}else r.destinationParticipantIDs.push(e.fixed64());break;case 5:r.encryptionID=tf.cp.EncryptionID.decode(e,e.uint32());break;case 6:r.sentEpochMillis=e.fixed64();break;default:e.skipType(7&t)}}return r},e}(),e.KeyValue=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.dataValue=ef.newBuffer([]),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.dataValue&&Object.hasOwnProperty.call(e,"dataValue")&&t.uint32(18).bytes(e.dataValue),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.KeyValue;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.key=e.string();break;case 2:r.dataValue=e.bytes();break;default:e.skipType(7&t)}}return r},e}(),e.SequenceNumber=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.publisherParticipantID=ef.Long?ef.Long.fromBits(0,0,!1):0,e.prototype.seqNum=ef.Long?ef.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=Xh.create()),null!=e.publisherParticipantID&&Object.hasOwnProperty.call(e,"publisherParticipantID")&&t.uint32(9).fixed64(e.publisherParticipantID),null!=e.seqNum&&Object.hasOwnProperty.call(e,"seqNum")&&t.uint32(16).uint64(e.seqNum),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.SequenceNumber;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.publisherParticipantID=e.fixed64();break;case 2:r.seqNum=e.uint64();break;default:e.skipType(7&t)}}return r},e}(),e.EncryptionID=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uuid=ef.newBuffer([]),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(10).bytes(e.uuid),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.EncryptionID;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.uuid=e.bytes();break;default:e.skipType(7&t)}}return r},e}(),e.ResponseStatus=function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN"]=0,t[e[1]="IGNORED"]=1,t[e[3]="PLUGIN_BOUNCING"]=3,t[e[4]="UNKNOWN_TOPIC"]=4,t[e[5]="INVALID_REQUEST"]=5,t[e[6]="NOT_AUTHORIZED"]=6,t[e[7]="QUOTA_EXCEEDED"]=7,t[e[8]="MISSING_ENCRYPTION_IDS"]=8,t[e[1e3]="OK"]=1e3,t}(),e.PubSub=function(){function e(e,t,n){br.rpc.Service.call(this,e,t,n)}return(e.prototype=Object.create(br.rpc.Service.prototype)).constructor=e,Object.defineProperty(e.prototype.listenSystemEvents=function e(t,n){return this.rpcCall(e,tf.google.protobuf.Empty,tf.cp.SystemEvent,t,n)},"name",{value:"ListenSystemEvents"}),Object.defineProperty(e.prototype.subscribe=function e(t,n){return this.rpcCall(e,tf.cp.SubscribeRequest,tf.cp.SubscribeResponse,t,n)},"name",{value:"Subscribe"}),Object.defineProperty(e.prototype.publish=function e(t,n){return this.rpcCall(e,tf.cp.PublishRequest,tf.cp.PublishResponse,t,n)},"name",{value:"Publish"}),Object.defineProperty(e.prototype.createTopic=function e(t,n){return this.rpcCall(e,tf.cp.CreateTopicRequest,tf.cp.CreateTopicResponse,t,n)},"name",{value:"CreateTopic"}),Object.defineProperty(e.prototype.upsertTopicMetadata=function e(t,n){return this.rpcCall(e,tf.cp.UpsertTopicMetadataRequest,tf.cp.UpsertTopicMetadataResponse,t,n)},"name",{value:"UpsertTopicMetadata"}),Object.defineProperty(e.prototype.fetchTopics=function e(t,n){return this.rpcCall(e,tf.cp.FetchTopicsRequest,tf.cp.FetchTopicsResponse,t,n)},"name",{value:"FetchTopics"}),Object.defineProperty(e.prototype.listenTopicSubscribers=function e(t,n){return this.rpcCall(e,tf.cp.TopicSubscribersRequest,tf.cp.TopicSubscribers,t,n)},"name",{value:"ListenTopicSubscribers"}),e}(),e.TopicSubscribersRequest=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.topicTerminationAck=null,Object.defineProperty(e.prototype,"operation",{get:ef.oneOfGetter(t=["topicTerminationAck"]),set:ef.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.topicTerminationAck&&Object.hasOwnProperty.call(e,"topicTerminationAck")&&tf.cp.TopicSubscribersRequest.TopicTerminatedAck.encode(e.topicTerminationAck,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.TopicSubscribersRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topicTerminationAck=tf.cp.TopicSubscribersRequest.TopicTerminatedAck.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.TopicTerminatedAck=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topicName="",e.encode=function(e,t){return t||(t=Xh.create()),null!=e.topicName&&Object.hasOwnProperty.call(e,"topicName")&&t.uint32(10).string(e.topicName),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.TopicSubscribersRequest.TopicTerminatedAck;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topicName=e.string();break;default:e.skipType(7&t)}}return r},e}(),e}(),e.TopicSubscribers=function(){function e(e){if(this.topic=[],this.terminateTopic=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic=ef.emptyArray,e.prototype.terminateTopic=ef.emptyArray,e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.topic&&e.topic.length)for(let n=0;n<e.topic.length;++n)tf.cp.TopicSubscribers.TopicSubscribersInfo.encode(e.topic[n],t.uint32(10).fork()).ldelim();if(null!=e.terminateTopic&&e.terminateTopic.length)for(let n=0;n<e.terminateTopic.length;++n)tf.cp.TopicSubscribers.TerminateTopic.encode(e.terminateTopic[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.TopicSubscribers;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topic&&r.topic.length||(r.topic=[]),r.topic.push(tf.cp.TopicSubscribers.TopicSubscribersInfo.decode(e,e.uint32()));break;case 2:r.terminateTopic&&r.terminateTopic.length||(r.terminateTopic=[]),r.terminateTopic.push(tf.cp.TopicSubscribers.TerminateTopic.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.TopicSubscribersInfo=function(){function e(e){if(this.subscriberParticipantIDs=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic="",e.prototype.subscriberParticipantIDs=ef.emptyArray,e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),null!=e.subscriberParticipantIDs&&e.subscriberParticipantIDs.length){t.uint32(18).fork();for(let n=0;n<e.subscriberParticipantIDs.length;++n)t.fixed64(e.subscriberParticipantIDs[n]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.TopicSubscribers.TopicSubscribersInfo;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topic=e.string();break;case 2:if(r.subscriberParticipantIDs&&r.subscriberParticipantIDs.length||(r.subscriberParticipantIDs=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.subscriberParticipantIDs.push(e.fixed64())}else r.subscriberParticipantIDs.push(e.fixed64());break;default:e.skipType(7&t)}}return r},e}(),e.TerminateTopic=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topicName="",e.encode=function(e,t){return t||(t=Xh.create()),null!=e.topicName&&Object.hasOwnProperty.call(e,"topicName")&&t.uint32(10).string(e.topicName),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.TopicSubscribers.TerminateTopic;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topicName=e.string();break;default:e.skipType(7&t)}}return r},e}(),e}(),e.SystemEvent=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.topicCreated="",e.prototype.topicDestroyed="",Object.defineProperty(e.prototype,"event",{get:ef.oneOfGetter(t=["topicCreated","topicDestroyed"]),set:ef.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.topicCreated&&Object.hasOwnProperty.call(e,"topicCreated")&&t.uint32(10).string(e.topicCreated),null!=e.topicDestroyed&&Object.hasOwnProperty.call(e,"topicDestroyed")&&t.uint32(18).string(e.topicDestroyed),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.SystemEvent;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topicCreated=e.string();break;case 2:r.topicDestroyed=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.SubscribeRequest=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.initialize=null,e.prototype.recordAck=null,Object.defineProperty(e.prototype,"operation",{get:ef.oneOfGetter(t=["initialize","recordAck"]),set:ef.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.initialize&&Object.hasOwnProperty.call(e,"initialize")&&tf.cp.SubscribeRequest.Initialize.encode(e.initialize,t.uint32(10).fork()).ldelim(),null!=e.recordAck&&Object.hasOwnProperty.call(e,"recordAck")&&tf.cp.SubscribeRequest.RecordAck.encode(e.recordAck,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.SubscribeRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.initialize=tf.cp.SubscribeRequest.Initialize.decode(e,e.uint32());break;case 2:r.recordAck=tf.cp.SubscribeRequest.RecordAck.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.Initialize=function(){function e(e){if(this.knownSeqNums=[],this.knownEncryptionIDs=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic="",e.prototype.knownSeqNums=ef.emptyArray,e.prototype.localEncryptionID=null,e.prototype.knownEncryptionIDs=ef.emptyArray,e.prototype.subscriberParticipantID=ef.Long?ef.Long.fromBits(0,0,!1):0,e.prototype.saltVerifiedSubscriberParticipantID=ef.Long?ef.Long.fromBits(0,0,!1):0,e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),null!=e.knownSeqNums&&e.knownSeqNums.length)for(let n=0;n<e.knownSeqNums.length;++n)tf.cp.SequenceNumber.encode(e.knownSeqNums[n],t.uint32(18).fork()).ldelim();if(null!=e.localEncryptionID&&Object.hasOwnProperty.call(e,"localEncryptionID")&&tf.cp.EncryptionID.encode(e.localEncryptionID,t.uint32(26).fork()).ldelim(),null!=e.knownEncryptionIDs&&e.knownEncryptionIDs.length)for(let n=0;n<e.knownEncryptionIDs.length;++n)tf.cp.EncryptionID.encode(e.knownEncryptionIDs[n],t.uint32(34).fork()).ldelim();return null!=e.subscriberParticipantID&&Object.hasOwnProperty.call(e,"subscriberParticipantID")&&t.uint32(41).fixed64(e.subscriberParticipantID),null!=e.saltVerifiedSubscriberParticipantID&&Object.hasOwnProperty.call(e,"saltVerifiedSubscriberParticipantID")&&t.uint32(49).fixed64(e.saltVerifiedSubscriberParticipantID),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.SubscribeRequest.Initialize;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topic=e.string();break;case 2:r.knownSeqNums&&r.knownSeqNums.length||(r.knownSeqNums=[]),r.knownSeqNums.push(tf.cp.SequenceNumber.decode(e,e.uint32()));break;case 3:r.localEncryptionID=tf.cp.EncryptionID.decode(e,e.uint32());break;case 4:r.knownEncryptionIDs&&r.knownEncryptionIDs.length||(r.knownEncryptionIDs=[]),r.knownEncryptionIDs.push(tf.cp.EncryptionID.decode(e,e.uint32()));break;case 5:r.subscriberParticipantID=e.fixed64();break;case 6:r.saltVerifiedSubscriberParticipantID=e.fixed64();break;default:e.skipType(7&t)}}return r},e}(),e.RecordAck=function(){function e(e){if(this.seqNumsAck=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seqNumsAck=ef.emptyArray,e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.seqNumsAck&&e.seqNumsAck.length)for(let n=0;n<e.seqNumsAck.length;++n)tf.cp.SequenceNumber.encode(e.seqNumsAck[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.SubscribeRequest.RecordAck;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.seqNumsAck&&r.seqNumsAck.length||(r.seqNumsAck=[]),r.seqNumsAck.push(tf.cp.SequenceNumber.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e}(),e.SubscribeResponse=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.initializeAck=null,e.prototype.record=null,e.prototype.topicUpdate=null,Object.defineProperty(e.prototype,"operation",{get:ef.oneOfGetter(t=["initializeAck","record","topicUpdate"]),set:ef.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.initializeAck&&Object.hasOwnProperty.call(e,"initializeAck")&&tf.cp.SubscribeResponse.InitializeAck.encode(e.initializeAck,t.uint32(10).fork()).ldelim(),null!=e.record&&Object.hasOwnProperty.call(e,"record")&&tf.cp.Record.encode(e.record,t.uint32(18).fork()).ldelim(),null!=e.topicUpdate&&Object.hasOwnProperty.call(e,"topicUpdate")&&tf.cp.SubscribeResponse.TopicUpdate.encode(e.topicUpdate,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.SubscribeResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.initializeAck=tf.cp.SubscribeResponse.InitializeAck.decode(e,e.uint32());break;case 2:r.record=tf.cp.Record.decode(e,e.uint32());break;case 3:r.topicUpdate=tf.cp.SubscribeResponse.TopicUpdate.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.InitializeAck=function(){function e(e){if(this.otherSubscriberParticipantIDs=[],this.metadata=[],this.missingEncryptionIDs=[],this.otherSaltVerifiedSubscriberParticipantIDs=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.status=0,e.prototype.error="",e.prototype.otherSubscriberParticipantIDs=ef.emptyArray,e.prototype.metadata=ef.emptyArray,e.prototype.topicCatchupSummary=null,e.prototype.missingEncryptionIDs=ef.emptyArray,e.prototype.subscriberSeqNum=null,e.prototype.otherSaltVerifiedSubscriberParticipantIDs=ef.emptyArray,e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).int32(e.status),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&t.uint32(18).string(e.error),null!=e.otherSubscriberParticipantIDs&&e.otherSubscriberParticipantIDs.length){t.uint32(26).fork();for(let n=0;n<e.otherSubscriberParticipantIDs.length;++n)t.fixed64(e.otherSubscriberParticipantIDs[n]);t.ldelim()}if(null!=e.metadata&&e.metadata.length)for(let n=0;n<e.metadata.length;++n)tf.cp.KeyValue.encode(e.metadata[n],t.uint32(34).fork()).ldelim();if(null!=e.topicCatchupSummary&&Object.hasOwnProperty.call(e,"topicCatchupSummary")&&tf.cp.SubscribeResponse.InitializeAck.TopicCatchupSummary.encode(e.topicCatchupSummary,t.uint32(42).fork()).ldelim(),null!=e.missingEncryptionIDs&&e.missingEncryptionIDs.length)for(let n=0;n<e.missingEncryptionIDs.length;++n)tf.cp.SubscribeResponse.InitializeAck.MissingEncryptionID.encode(e.missingEncryptionIDs[n],t.uint32(50).fork()).ldelim();if(null!=e.subscriberSeqNum&&Object.hasOwnProperty.call(e,"subscriberSeqNum")&&tf.cp.SequenceNumber.encode(e.subscriberSeqNum,t.uint32(58).fork()).ldelim(),null!=e.otherSaltVerifiedSubscriberParticipantIDs&&e.otherSaltVerifiedSubscriberParticipantIDs.length){t.uint32(66).fork();for(let n=0;n<e.otherSaltVerifiedSubscriberParticipantIDs.length;++n)t.fixed64(e.otherSaltVerifiedSubscriberParticipantIDs[n]);t.ldelim()}return t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.SubscribeResponse.InitializeAck;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.status=e.int32();break;case 2:r.error=e.string();break;case 3:if(r.otherSubscriberParticipantIDs&&r.otherSubscriberParticipantIDs.length||(r.otherSubscriberParticipantIDs=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.otherSubscriberParticipantIDs.push(e.fixed64())}else r.otherSubscriberParticipantIDs.push(e.fixed64());break;case 4:r.metadata&&r.metadata.length||(r.metadata=[]),r.metadata.push(tf.cp.KeyValue.decode(e,e.uint32()));break;case 5:r.topicCatchupSummary=tf.cp.SubscribeResponse.InitializeAck.TopicCatchupSummary.decode(e,e.uint32());break;case 6:r.missingEncryptionIDs&&r.missingEncryptionIDs.length||(r.missingEncryptionIDs=[]),r.missingEncryptionIDs.push(tf.cp.SubscribeResponse.InitializeAck.MissingEncryptionID.decode(e,e.uint32()));break;case 7:r.subscriberSeqNum=tf.cp.SequenceNumber.decode(e,e.uint32());break;case 8:if(r.otherSaltVerifiedSubscriberParticipantIDs&&r.otherSaltVerifiedSubscriberParticipantIDs.length||(r.otherSaltVerifiedSubscriberParticipantIDs=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)r.otherSaltVerifiedSubscriberParticipantIDs.push(e.fixed64())}else r.otherSaltVerifiedSubscriberParticipantIDs.push(e.fixed64());break;default:e.skipType(7&t)}}return r},e.TopicCatchupSummary=function(){function e(e){if(this.seqNums=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.participantID=ef.Long?ef.Long.fromBits(0,0,!1):0,e.prototype.seqNums=ef.emptyArray,e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.participantID&&Object.hasOwnProperty.call(e,"participantID")&&t.uint32(9).fixed64(e.participantID),null!=e.seqNums&&e.seqNums.length)for(let n=0;n<e.seqNums.length;++n)tf.cp.SequenceNumber.encode(e.seqNums[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.SubscribeResponse.InitializeAck.TopicCatchupSummary;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.participantID=e.fixed64();break;case 2:r.seqNums&&r.seqNums.length||(r.seqNums=[]),r.seqNums.push(tf.cp.SequenceNumber.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.MissingEncryptionID=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.participantID=ef.Long?ef.Long.fromBits(0,0,!1):0,e.prototype.encryptionID=null,e.encode=function(e,t){return t||(t=Xh.create()),null!=e.participantID&&Object.hasOwnProperty.call(e,"participantID")&&t.uint32(9).fixed64(e.participantID),null!=e.encryptionID&&Object.hasOwnProperty.call(e,"encryptionID")&&tf.cp.EncryptionID.encode(e.encryptionID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.SubscribeResponse.InitializeAck.MissingEncryptionID;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.participantID=e.fixed64();break;case 2:r.encryptionID=tf.cp.EncryptionID.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e}(),e.TopicUpdate=function(){function e(e){if(this.metadata=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.event=0,e.prototype.metadata=ef.emptyArray,e.prototype.participantID=ef.Long?ef.Long.fromBits(0,0,!1):0,e.prototype.isSaltVerifiedID=!1,e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.event&&Object.hasOwnProperty.call(e,"event")&&t.uint32(8).int32(e.event),null!=e.metadata&&e.metadata.length)for(let n=0;n<e.metadata.length;++n)tf.cp.KeyValue.encode(e.metadata[n],t.uint32(18).fork()).ldelim();return null!=e.participantID&&Object.hasOwnProperty.call(e,"participantID")&&t.uint32(25).fixed64(e.participantID),null!=e.isSaltVerifiedID&&Object.hasOwnProperty.call(e,"isSaltVerifiedID")&&t.uint32(32).bool(e.isSaltVerifiedID),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.SubscribeResponse.TopicUpdate;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.event=e.int32();break;case 2:r.metadata&&r.metadata.length||(r.metadata=[]),r.metadata.push(tf.cp.KeyValue.decode(e,e.uint32()));break;case 3:r.participantID=e.fixed64();break;case 4:r.isSaltVerifiedID=e.bool();break;default:e.skipType(7&t)}}return r},e.UpdateEvent=function(){const e={},t=Object.create(e);return t[e[0]="SubscriberAdded"]=0,t[e[1]="SubscriberRemoved"]=1,t[e[2]="MetadataChanged"]=2,t}(),e}(),e}(),e.PublishRequest=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.record=null,e.prototype.updatedEncryptionID=null,Object.defineProperty(e.prototype,"operation",{get:ef.oneOfGetter(t=["record","updatedEncryptionID"]),set:ef.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.record&&Object.hasOwnProperty.call(e,"record")&&tf.cp.Record.encode(e.record,t.uint32(10).fork()).ldelim(),null!=e.updatedEncryptionID&&Object.hasOwnProperty.call(e,"updatedEncryptionID")&&tf.cp.PublishRequest.UpdatedEncryptionID.encode(e.updatedEncryptionID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.PublishRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.record=tf.cp.Record.decode(e,e.uint32());break;case 2:r.updatedEncryptionID=tf.cp.PublishRequest.UpdatedEncryptionID.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.UpdatedEncryptionID=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic="",e.prototype.encryptionID=null,e.encode=function(e,t){return t||(t=Xh.create()),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),null!=e.encryptionID&&Object.hasOwnProperty.call(e,"encryptionID")&&tf.cp.EncryptionID.encode(e.encryptionID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.PublishRequest.UpdatedEncryptionID;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topic=e.string();break;case 2:r.encryptionID=tf.cp.EncryptionID.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e}(),e.PublishResponse=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.status=0,e.prototype.error="",e.prototype.seqNumAck=null,e.encode=function(e,t){return t||(t=Xh.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).int32(e.status),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&t.uint32(18).string(e.error),null!=e.seqNumAck&&Object.hasOwnProperty.call(e,"seqNumAck")&&tf.cp.SequenceNumber.encode(e.seqNumAck,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.PublishResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.status=e.int32();break;case 2:r.error=e.string();break;case 3:r.seqNumAck=tf.cp.SequenceNumber.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e.UpsertTopicMetadataRequest=function(){function e(e){if(this.metadata=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic="",e.prototype.metadata=ef.emptyArray,e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),null!=e.metadata&&e.metadata.length)for(let n=0;n<e.metadata.length;++n)tf.cp.KeyValue.encode(e.metadata[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.UpsertTopicMetadataRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topic=e.string();break;case 2:r.metadata&&r.metadata.length||(r.metadata=[]),r.metadata.push(tf.cp.KeyValue.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.UpsertTopicMetadataResponse=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.status=0,e.prototype.error="",e.encode=function(e,t){return t||(t=Xh.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).int32(e.status),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&t.uint32(18).string(e.error),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.UpsertTopicMetadataResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.status=e.int32();break;case 2:r.error=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.CreateTopicRequest=function(){function e(e){if(this.metadata=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic="",e.prototype.metadata=ef.emptyArray,e.prototype.participantIDSalt="",e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),null!=e.metadata&&e.metadata.length)for(let n=0;n<e.metadata.length;++n)tf.cp.KeyValue.encode(e.metadata[n],t.uint32(18).fork()).ldelim();return null!=e.participantIDSalt&&Object.hasOwnProperty.call(e,"participantIDSalt")&&t.uint32(26).string(e.participantIDSalt),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.CreateTopicRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.topic=e.string();break;case 2:r.metadata&&r.metadata.length||(r.metadata=[]),r.metadata.push(tf.cp.KeyValue.decode(e,e.uint32()));break;case 3:r.participantIDSalt=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.CreateTopicResponse=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.status=0,e.prototype.error="",e.prototype.topicConfig=null,e.encode=function(e,t){return t||(t=Xh.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).int32(e.status),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&t.uint32(18).string(e.error),null!=e.topicConfig&&Object.hasOwnProperty.call(e,"topicConfig")&&tf.cp.CreateTopicResponse.ClientTopicConfig.encode(e.topicConfig,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.CreateTopicResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.status=e.int32();break;case 2:r.error=e.string();break;case 3:r.topicConfig=tf.cp.CreateTopicResponse.ClientTopicConfig.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.ClientTopicConfig=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.maxRecordDataSizeBytes=ef.Long?ef.Long.fromBits(0,0,!0):0,e.prototype.maxPublishQueueSize=ef.Long?ef.Long.fromBits(0,0,!0):0,e.prototype.maxDecryptionQueueSize=ef.Long?ef.Long.fromBits(0,0,!0):0,e.prototype.maxPrimaryRpcStreamTries=0,e.prototype.retryPrimaryRpcStreamIntervalMillis=0,e.prototype.maxRefreshDataCryptorTries=0,e.prototype.refreshDataCryptorIntervalSeconds=0,e.prototype.gracefulShutdownWindowSeconds=0,e.encode=function(e,t){return t||(t=Xh.create()),null!=e.maxRecordDataSizeBytes&&Object.hasOwnProperty.call(e,"maxRecordDataSizeBytes")&&t.uint32(8).uint64(e.maxRecordDataSizeBytes),null!=e.maxPublishQueueSize&&Object.hasOwnProperty.call(e,"maxPublishQueueSize")&&t.uint32(16).uint64(e.maxPublishQueueSize),null!=e.maxDecryptionQueueSize&&Object.hasOwnProperty.call(e,"maxDecryptionQueueSize")&&t.uint32(24).uint64(e.maxDecryptionQueueSize),null!=e.maxPrimaryRpcStreamTries&&Object.hasOwnProperty.call(e,"maxPrimaryRpcStreamTries")&&t.uint32(32).uint32(e.maxPrimaryRpcStreamTries),null!=e.retryPrimaryRpcStreamIntervalMillis&&Object.hasOwnProperty.call(e,"retryPrimaryRpcStreamIntervalMillis")&&t.uint32(40).uint32(e.retryPrimaryRpcStreamIntervalMillis),null!=e.maxRefreshDataCryptorTries&&Object.hasOwnProperty.call(e,"maxRefreshDataCryptorTries")&&t.uint32(48).uint32(e.maxRefreshDataCryptorTries),null!=e.refreshDataCryptorIntervalSeconds&&Object.hasOwnProperty.call(e,"refreshDataCryptorIntervalSeconds")&&t.uint32(56).uint32(e.refreshDataCryptorIntervalSeconds),null!=e.gracefulShutdownWindowSeconds&&Object.hasOwnProperty.call(e,"gracefulShutdownWindowSeconds")&&t.uint32(64).uint32(e.gracefulShutdownWindowSeconds),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.CreateTopicResponse.ClientTopicConfig;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.maxRecordDataSizeBytes=e.uint64();break;case 2:r.maxPublishQueueSize=e.uint64();break;case 3:r.maxDecryptionQueueSize=e.uint64();break;case 4:r.maxPrimaryRpcStreamTries=e.uint32();break;case 5:r.retryPrimaryRpcStreamIntervalMillis=e.uint32();break;case 6:r.maxRefreshDataCryptorTries=e.uint32();break;case 7:r.refreshDataCryptorIntervalSeconds=e.uint32();break;case 8:r.gracefulShutdownWindowSeconds=e.uint32();break;default:e.skipType(7&t)}}return r},e}(),e}(),e.FetchTopicsRequest=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Xh.create()),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.FetchTopicsRequest;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e}(),e.FetchTopicsResponse=function(){function e(e){if(this.topics=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.status=0,e.prototype.error="",e.prototype.topics=ef.emptyArray,e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).int32(e.status),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&t.uint32(18).string(e.error),null!=e.topics&&e.topics.length)for(let n=0;n<e.topics.length;++n)t.uint32(26).string(e.topics[n]);return t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.FetchTopicsResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.status=e.int32();break;case 2:r.error=e.string();break;case 3:r.topics&&r.topics.length||(r.topics=[]),r.topics.push(e.string());break;default:e.skipType(7&t)}}return r},e}(),e.NearbySessionMessageType=function(){const e={},t=Object.create(e);return t[e[0]="unknown"]=0,t[e[1]="joinRequest"]=1,t[e[2]="joinResponse"]=2,t[e[3]="connectionRequest"]=3,t[e[4]="connectionResponse"]=4,t[e[5]="groupMessage"]=5,t}(),e.SessionMessage=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.type=0,e.prototype.data=ef.newBuffer([]),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(26).bytes(e.data),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.SessionMessage;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.uint32();break;case 2:r.type=e.int32();break;case 3:r.data=e.bytes();break;default:e.skipType(7&t)}}return r},e}(),e.ConnectionRequest=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.identifier="",e.prototype.handle="",e.prototype.displayName="",e.prototype.userInfo=ef.newBuffer([]),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.identifier&&Object.hasOwnProperty.call(e,"identifier")&&t.uint32(10).string(e.identifier),null!=e.handle&&Object.hasOwnProperty.call(e,"handle")&&t.uint32(18).string(e.handle),null!=e.displayName&&Object.hasOwnProperty.call(e,"displayName")&&t.uint32(26).string(e.displayName),null!=e.userInfo&&Object.hasOwnProperty.call(e,"userInfo")&&t.uint32(34).bytes(e.userInfo),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.ConnectionRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.identifier=e.string();break;case 2:r.handle=e.string();break;case 3:r.displayName=e.string();break;case 4:r.userInfo=e.bytes();break;default:e.skipType(7&t)}}return r},e}(),e.ConnectionResponse=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Xh.create()),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.ConnectionResponse;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e.Content=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.identifier="",e.prototype.handle="",e.prototype.denied=null,e.prototype.approved=null,Object.defineProperty(e.prototype,"operation",{get:ef.oneOfGetter(t=["denied","approved"]),set:ef.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.identifier&&Object.hasOwnProperty.call(e,"identifier")&&t.uint32(10).string(e.identifier),null!=e.handle&&Object.hasOwnProperty.call(e,"handle")&&t.uint32(18).string(e.handle),null!=e.denied&&Object.hasOwnProperty.call(e,"denied")&&tf.cp.ConnectionResponse.Content.DeniedContent.encode(e.denied,t.uint32(26).fork()).ldelim(),null!=e.approved&&Object.hasOwnProperty.call(e,"approved")&&tf.cp.ConnectionResponse.Content.ApprovalContent.encode(e.approved,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.ConnectionResponse.Content;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.identifier=e.string();break;case 2:r.handle=e.string();break;case 3:r.denied=tf.cp.ConnectionResponse.Content.DeniedContent.decode(e,e.uint32());break;case 4:r.approved=tf.cp.ConnectionResponse.Content.ApprovalContent.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.ApprovalContent=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.handleString="",e.prototype.publicKey=ef.newBuffer([]),e.prototype.sourceProviderID="",e.prototype.sourceProviderName="",e.encode=function(e,t){return t||(t=Xh.create()),null!=e.handleString&&Object.hasOwnProperty.call(e,"handleString")&&t.uint32(10).string(e.handleString),null!=e.publicKey&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(18).bytes(e.publicKey),null!=e.sourceProviderID&&Object.hasOwnProperty.call(e,"sourceProviderID")&&t.uint32(26).string(e.sourceProviderID),null!=e.sourceProviderName&&Object.hasOwnProperty.call(e,"sourceProviderName")&&t.uint32(34).string(e.sourceProviderName),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.ConnectionResponse.Content.ApprovalContent;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.handleString=e.string();break;case 2:r.publicKey=e.bytes();break;case 3:r.sourceProviderID=e.string();break;case 4:r.sourceProviderName=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.DeniedContent=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Xh.create()),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.ConnectionResponse.Content.DeniedContent;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e}(),e}(),e}(),e.JoinRequest=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.publicKey=ef.newBuffer([]),e.prototype.encryptedData=ef.newBuffer([]),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.publicKey&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(10).bytes(e.publicKey),null!=e.encryptedData&&Object.hasOwnProperty.call(e,"encryptedData")&&t.uint32(18).bytes(e.encryptedData),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.JoinRequest;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.publicKey=e.bytes();break;case 2:r.encryptedData=e.bytes();break;default:e.skipType(7&t)}}return r},e.Content=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.identifier="",e.prototype.handle="",e.prototype.displayName="",e.prototype.userInfo=ef.newBuffer([]),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.identifier&&Object.hasOwnProperty.call(e,"identifier")&&t.uint32(10).string(e.identifier),null!=e.handle&&Object.hasOwnProperty.call(e,"handle")&&t.uint32(18).string(e.handle),null!=e.displayName&&Object.hasOwnProperty.call(e,"displayName")&&t.uint32(26).string(e.displayName),null!=e.userInfo&&Object.hasOwnProperty.call(e,"userInfo")&&t.uint32(34).bytes(e.userInfo),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.JoinRequest.Content;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.identifier=e.string();break;case 2:r.handle=e.string();break;case 3:r.displayName=e.string();break;case 4:r.userInfo=e.bytes();break;default:e.skipType(7&t)}}return r},e}(),e}(),e.JoinResponse=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.handle="",e.prototype.encryptedData=ef.newBuffer([]),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.handle&&Object.hasOwnProperty.call(e,"handle")&&t.uint32(10).string(e.handle),null!=e.encryptedData&&Object.hasOwnProperty.call(e,"encryptedData")&&t.uint32(18).bytes(e.encryptedData),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.JoinResponse;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.handle=e.string();break;case 2:r.encryptedData=e.bytes();break;default:e.skipType(7&t)}}return r},e.Content=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.identifier="",e.prototype.denied=null,e.prototype.approved=null,Object.defineProperty(e.prototype,"operation",{get:ef.oneOfGetter(t=["denied","approved"]),set:ef.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.identifier&&Object.hasOwnProperty.call(e,"identifier")&&t.uint32(10).string(e.identifier),null!=e.denied&&Object.hasOwnProperty.call(e,"denied")&&tf.cp.JoinResponse.Content.DeniedContent.encode(e.denied,t.uint32(26).fork()).ldelim(),null!=e.approved&&Object.hasOwnProperty.call(e,"approved")&&tf.cp.JoinResponse.Content.ApprovalContent.encode(e.approved,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.JoinResponse.Content;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.identifier=e.string();break;case 3:r.denied=tf.cp.JoinResponse.Content.DeniedContent.decode(e,e.uint32());break;case 4:r.approved=tf.cp.JoinResponse.Content.ApprovalContent.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.ApprovalContent=function(){function e(e){if(this.memberHandles=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sessionIdentifier="",e.prototype.memberHandles=ef.emptyArray,e.prototype.userInfo=ef.newBuffer([]),e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.sessionIdentifier&&Object.hasOwnProperty.call(e,"sessionIdentifier")&&t.uint32(10).string(e.sessionIdentifier),null!=e.memberHandles&&e.memberHandles.length)for(let n=0;n<e.memberHandles.length;++n)t.uint32(18).string(e.memberHandles[n]);return null!=e.userInfo&&Object.hasOwnProperty.call(e,"userInfo")&&t.uint32(26).bytes(e.userInfo),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.JoinResponse.Content.ApprovalContent;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.sessionIdentifier=e.string();break;case 2:r.memberHandles&&r.memberHandles.length||(r.memberHandles=[]),r.memberHandles.push(e.string());break;case 3:r.userInfo=e.bytes();break;default:e.skipType(7&t)}}return r},e}(),e.DeniedContent=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Xh.create()),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.JoinResponse.Content.DeniedContent;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e}(),e}(),e}(),e.Member=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.handle="",e.prototype.tokenID="",e.encode=function(e,t){return t||(t=Xh.create()),null!=e.handle&&Object.hasOwnProperty.call(e,"handle")&&t.uint32(10).string(e.handle),null!=e.tokenID&&Object.hasOwnProperty.call(e,"tokenID")&&t.uint32(18).string(e.tokenID),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.Member;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.handle=e.string();break;case 2:r.tokenID=e.string();break;default:e.skipType(7&t)}}return r},e}(),e.Group=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}let t;return e.prototype.initialize=null,e.prototype.memberAdded=null,e.prototype.memberRemoved=null,e.prototype.memberLeft=null,Object.defineProperty(e.prototype,"event",{get:ef.oneOfGetter(t=["initialize","memberAdded","memberRemoved","memberLeft"]),set:ef.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.initialize&&Object.hasOwnProperty.call(e,"initialize")&&tf.cp.Group.Initialization.encode(e.initialize,t.uint32(10).fork()).ldelim(),null!=e.memberAdded&&Object.hasOwnProperty.call(e,"memberAdded")&&tf.cp.Group.MemberAdded.encode(e.memberAdded,t.uint32(18).fork()).ldelim(),null!=e.memberRemoved&&Object.hasOwnProperty.call(e,"memberRemoved")&&tf.cp.Group.MemberRemoved.encode(e.memberRemoved,t.uint32(26).fork()).ldelim(),null!=e.memberLeft&&Object.hasOwnProperty.call(e,"memberLeft")&&tf.cp.Group.MemberLeft.encode(e.memberLeft,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.Group;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.initialize=tf.cp.Group.Initialization.decode(e,e.uint32());break;case 2:r.memberAdded=tf.cp.Group.MemberAdded.decode(e,e.uint32());break;case 3:r.memberRemoved=tf.cp.Group.MemberRemoved.decode(e,e.uint32());break;case 4:r.memberLeft=tf.cp.Group.MemberLeft.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.Initialization=function(){function e(e){if(this.members=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.groupUUID=ef.newBuffer([]),e.prototype.members=ef.emptyArray,e.encode=function(e,t){if(t||(t=Xh.create()),null!=e.groupUUID&&Object.hasOwnProperty.call(e,"groupUUID")&&t.uint32(10).bytes(e.groupUUID),null!=e.members&&e.members.length)for(let n=0;n<e.members.length;++n)tf.cp.Member.encode(e.members[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.Group.Initialization;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.groupUUID=e.bytes();break;case 2:r.members&&r.members.length||(r.members=[]),r.members.push(tf.cp.Member.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e}(),e.MemberAdded=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.groupUUID=ef.newBuffer([]),e.prototype.member=null,e.encode=function(e,t){return t||(t=Xh.create()),null!=e.groupUUID&&Object.hasOwnProperty.call(e,"groupUUID")&&t.uint32(10).bytes(e.groupUUID),null!=e.member&&Object.hasOwnProperty.call(e,"member")&&tf.cp.Member.encode(e.member,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.Group.MemberAdded;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.groupUUID=e.bytes();break;case 2:r.member=tf.cp.Member.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e.MemberRemoved=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.groupUUID=ef.newBuffer([]),e.prototype.member=null,e.encode=function(e,t){return t||(t=Xh.create()),null!=e.groupUUID&&Object.hasOwnProperty.call(e,"groupUUID")&&t.uint32(10).bytes(e.groupUUID),null!=e.member&&Object.hasOwnProperty.call(e,"member")&&tf.cp.Member.encode(e.member,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.Group.MemberRemoved;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.groupUUID=e.bytes();break;case 2:r.member=tf.cp.Member.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e}(),e.MemberLeft=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.groupUUID=ef.newBuffer([]),e.encode=function(e,t){return t||(t=Xh.create()),null!=e.groupUUID&&Object.hasOwnProperty.call(e,"groupUUID")&&t.uint32(10).bytes(e.groupUUID),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.cp.Group.MemberLeft;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.groupUUID=e.bytes();break;default:e.skipType(7&t)}}return r},e}(),e}(),e})();tf.google=(()=>{const e={};return e.protobuf=function(){const e={};return e.Empty=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=Xh.create()),t},e.decode=function(e,t){e instanceof Zh||(e=Zh.create(e));let n=void 0===t?e.len:e.pos+t,r=new tf.google.protobuf.Empty;for(;e.pos<n;){let t=e.uint32();e.skipType(7&t)}return r},e}(),e}(),e})();class rf{constructor(e,t,n,r,i){var o;this.rtcPeerConnection=e,this.state=t,this.delegate=n,this.logger=r,this.ackQueue=[],this.encryptQueue=[],this.deferredItemQueue=[],this.channel=null,this.handleClose=()=>{if(!this.channel)return void this.logger.warn`[Send] Received close event for publish channel, but channel is null`;this.channel.removeEventListener("close",this.handleClose),this.channel.removeEventListener("message",this.handlePublishResponse),this.channel=null;const e=[...this.ackQueue,...this.encryptQueue.map(e=>e[0]),...this.deferredItemQueue];this.delegate.publishStreamDidClose(this,e,!0)},this.isConnecting=!0,this.handlePublishResponse=e=>{var t,n;if(this.logger.info`[Send] Received publish response`,!(e.data instanceof ArrayBuffer))return void this.logger.warn`[Send] Ignored publish response; not of type ArrayBuffer`;const r=(()=>{try{const t=Ac.RpcResponse.decode(new Uint8Array(e.data));return nf.PublishResponse.decode(t.serializedResponse)}catch{return null}})();if(!r)return void this.logger.warn`[Send] Ignored publish response; failed to decode protobuf`;const i=()=>{var e,t;const n=null===(e=r.seqNumAck)||void 0===e?void 0:e.seqNum;Vh(n);const i=this.ackQueue.shift();if(!i)throw this.logger.error`[Send] Unexpected, queue empty, seqNumAck=${null===(t=r.seqNumAck)||void 0===t?void 0:t.seqNum}`,new Error("Received ack and queue is empty!");this.logger.info`[Send] received ack expect=${i.seqNum} actual=${qh(n)}`,Vh(i.seqNum===qh(n),`SendItem seqNum=${i.seqNum} != response seqNum=${n}`)};switch(r.status){case nf.ResponseStatus.OK:i(),++this.state.selfSeqNumServerAcked;break;case nf.ResponseStatus.IGNORED:i(),++this.state.selfSeqNumServerAcked,this.logger.info`[Send] Ignored, responseSeqNum=${null===(t=r.seqNumAck)||void 0===t?void 0:t.seqNum}`;break;case nf.ResponseStatus.PLUGIN_BOUNCING:this.logger.info`[Send] Rejected, upcoming server-bounce`;break;case nf.ResponseStatus.NOT_AUTHORIZED:this.logger.warn`[Send] Failed, not-authorized, error=${r.error}`,this.close();break;case nf.ResponseStatus.UNKNOWN_TOPIC:this.logger.error`[Send] Failed, unknown-topic`,this.close();break;case nf.ResponseStatus.QUOTA_EXCEEDED:const e=null===(n=this.ackQueue[0])||void 0===n?void 0:n.seqNum;this.logger.error`[Send] Failed, quota-exceeded, seqNumRejected=${e} error=${r.error}`,this.close();break;case nf.ResponseStatus.UNKNOWN:case nf.ResponseStatus.INVALID_REQUEST:case nf.ResponseStatus.MISSING_ENCRYPTION_IDS:this.logger.error`[Send] Failed, unexpected response-status, code=${r.status} error=${r.error}`;break;default:Gh(r.status)}},this.sendEncryptQueueTask=null;for(const e of i)this.send(e.data,{participantIds:null!==(o=e.toParticipantIDs)&&void 0!==o?o:void 0,previousSeqNumUnacked:e.previousSeqNumUnacked||void 0});this.connectWithRetries(e)}close(){const e=this.channel;if(e)return this.channel=null,e.removeEventListener("close",this.handleClose),e.removeEventListener("message",this.handlePublishResponse),void(async()=>{await this.sendEncryptQueueTask,"connected"===this.rtcPeerConnection.connectionState&&e.send(Ac.RpcRequest.encode({done:!0}).finish()),e.close();const t=[...this.ackQueue,...this.encryptQueue.map(e=>e[0]),...this.deferredItemQueue];this.delegate.publishStreamDidClose(this,t,!1)})();if(this.isConnecting){this.isConnecting=!1;const e=[...this.ackQueue,...this.encryptQueue.map(e=>e[0]),...this.deferredItemQueue];this.delegate.publishStreamDidClose(this,e,!1)}else;}async connectWithRetries(e){const t=this.state.topicConfig.retryPrimaryRpcStreamIntervalMillis,n=this.state.topicConfig.maxPrimaryRpcStreamTries;for(let r=0;r<n;++r){if(0!==r&&(this.logger.info`[Send] Publish stream connection attempt ${r} failed; retrying in ${t} milliseconds`,await new Promise(e=>window.setTimeout(e,t)),!this.isConnecting))return void this.logger.info`[Send] Publish stream was closed after waiting for connectionRetryTime`;const n=await Hh(e);if(!this.isConnecting)return this.logger.info`[Send] Publish stream was closed while attempting to connect`,void(null==n||n.close());if(!n){this.logger.info`[Send] Publish stream failed to get ready state data channel`;continue}const i=await Wh(n,"PubSub","/cp.PubSub/Publish");return this.isConnecting?i?(this.logger.info`[Send] Established publish stream`,n.addEventListener("close",this.handleClose),n.addEventListener("message",this.handlePublishResponse),this.channel=n,this.isConnecting=!1,void this.attemptSendDeferredQueueFlush()):(this.logger.info`[Send] Publish stream failed to register plugin`,void n.close()):(this.logger.info`[Send] Publish stream was closed while attempting to connect`,void n.close())}this.close()}async sendUpdatedEncryptionId(e){this.logger.info`[Send] Updating our encryption id to ${e.ski}`,this.channel?this.channel.send(Ac.RpcRequest.encode({serializedRequest:nf.PublishRequest.encode({updatedEncryptionID:{topic:this.state.pubSubTopic,encryptionID:{uuid:e.ski}}}).finish()}).finish()):this.logger.warn`[Send] Attempting to send updated encryption id over a closed PublishStream; ignoring.`}send(e,t){var n,i;if(!this.channel&&!this.isConnecting)return void this.logger.warn`[Send] Attempting to send data over a closed FastSyncConnection; dropping sent message.`;if(this.ackQueue.length+this.encryptQueue.length+this.deferredItemQueue.length>this.state.topicConfig.maxPublishQueueSize)throw this.logger.warn`[Send] Send queue maximum length exceeded`,new Error("Send queue maximum length exceeded");if(e.byteLength>this.state.topicConfig.maxRecordDataSizeBytes)throw this.logger.warn`[Send] Payload maximum length exceeded`,new Error("Payload maximum length exceeded");const o=null==t?void 0:t.messageIdentifier,s=new r.BPlistParser,a=void 0!==o?s.write({message:{t:{n:o,v:e}}}):s.write({message:{d:e}}),c=Yh(++this.state.selfSeqNum),l={data:a,toParticipantIDs:null!==(n=null==t?void 0:t.participantIds)&&void 0!==n?n:null,seqNum:c,previousSeqNumUnacked:null!==(i=null==t?void 0:t.previousSeqNumUnacked)&&void 0!==i?i:null,publishedAt:null};if(!this.channel||(null==t?void 0:t.enqueueOnly))return void this.deferredItemQueue.push(l);this.logger.info`[Send] enqueueing for decryption seqNum=${c}`;const d=this.encryptSendItem(l);this.encryptQueue.push([l,d]),this.runSendEncryptQueue()}async encryptSendItem(e){var t;const n=null===(t=this.state.localParticipant)||void 0===t?void 0:t.waitForCurrentSKM(),r=await n;if(!r)return this.logger.error`[Send] Unexpected encryption failure, no SKM for local participant seqNum=${e.seqNum}`,null;const i=await async function(e,t,n,r){const i=await(async()=>{try{return await crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:r.sks,info:(new TextEncoder).encode(t)},r.skm,{name:"AES-GCM",length:256},!1,["encrypt"])}catch(e){return Qr(e)}})();if(i instanceof Error)return i;const o=new Uint8Array(9);o[0]=1,o.set(Wn(n),1);const s=new Uint8Array(12);crypto.getRandomValues(s);const a=await crypto.subtle.encrypt({name:"AES-GCM",iv:s,additionalData:o},i,e);if(a instanceof Error)return a;const c=new Uint8Array(a),l=new Uint8Array(a.byteLength+13);return l[0]=1,l.set(s,1),l.set(c,13),l}(e.data,this.state.pubSubTopic,e.seqNum,r);return i instanceof Error?(this.logger.error`[Send] Unexpected encryption failure, dropping message seqNum=${e.seqNum}`,null):[i,r.ski]}attemptSendDeferredQueueFlush(){if(this.channel){if(0!==this.deferredItemQueue.length){this.state.selfSeqNum>this.state.selfSeqNumServerAcked&&(this.logger.info`[Send] Rewinding seqNum from=${this.state.selfSeqNum} to=${this.state.selfSeqNumServerAcked}`,this.state.selfSeqNum=this.state.selfSeqNumServerAcked),this.logger.info`[Send] Flushing sendQueue`;for(const e of this.deferredItemQueue){const t=this.encryptSendItem(e);this.encryptQueue.push([e,t])}this.deferredItemQueue.length=0,this.runSendEncryptQueue()}}else this.logger.info`[Send] sendQueue flush ignored`}runSendEncryptQueue(){if(this.sendEncryptQueueTask)return this.sendEncryptQueueTask;let e=()=>{};const t=new Promise(t=>{e=t});return this.sendEncryptQueueTask=t,(async()=>{var t,n;try{for(;;){const e=this.encryptQueue.shift();if(!e){this.logger.info`[Send] Finished all encrypt queue tasks`;break}if(!this.channel){this.logger.warn`[Send] Connection was closed prior to decrypting; dropping message.`;continue}const r=await e[1];if(!r){this.logger.error`[Send] Encrypt task failed; dropping message`;continue}const i=e[0];this.logger.info`[Send] finishing decryption seqNum=${i.seqNum}`;const o=i.previousSeqNumUnacked;if(null!==o&&o<=this.state.selfSeqNumServerAcked){this.logger.info`[Send] Dropping previously sent message with seqNum=${o}`;continue}if(!this.channel){this.logger.warn`[Send] Connection was closed while decrypting; dropping message.`;continue}if(!i.seqNum){this.logger.warn`[Send] Seqnum is missing from sendItem, dropping sent message`;continue}const s=this.state.pubSubTopic,a=this.state.localParticipantId,c=Date.now(),l=null!==(n=null===(t=i.toParticipantIDs)||void 0===t?void 0:t.map(e=>Kh(e)))&&void 0!==n?n:[],d=Ac.RpcRequest.encode({serializedRequest:nf.PublishRequest.encode({record:{topic:s,data:r[0],seqNum:{publisherParticipantID:Kh(a),seqNum:Kh(i.seqNum)},destinationParticipantIDs:l,encryptionID:{uuid:r[1]},sentEpochMillis:gr.a.fromNumber(c)}}).finish()}).finish();this.logger.info`[Send] sending over data channel seqNum=${i.seqNum}`,this.channel.send(d),i.publishedAt=Date.now(),this.logger.info`[Send] pushing to ackQueue seqNum=${i.seqNum}`,this.ackQueue.push(i)}}finally{this.sendEncryptQueueTask=null,e()}})(),t}}class of{constructor(){this.maxRecordDataSizeBytes=BigInt(65536),this.maxPublishQueueSize=BigInt(1e3),this.maxDecryptionQueueSize=BigInt(1e3),this.maxPrimaryRpcStreamTries=2,this.retryPrimaryRpcStreamIntervalMillis=1e3,this.maxRefreshDataCryptorTries=3,this.refreshDataCryptorIntervalSeconds=10,this.gracefulShutdownWindowSeconds=1}update(e){e.maxRecordDataSizeBytes&&(this.maxRecordDataSizeBytes=qh(e.maxRecordDataSizeBytes)),e.maxPublishQueueSize&&(this.maxPublishQueueSize=qh(e.maxPublishQueueSize)),e.maxDecryptionQueueSize&&(this.maxDecryptionQueueSize=qh(e.maxDecryptionQueueSize)),e.maxPrimaryRpcStreamTries&&(this.maxPrimaryRpcStreamTries=e.maxPrimaryRpcStreamTries),e.retryPrimaryRpcStreamIntervalMillis&&(this.retryPrimaryRpcStreamIntervalMillis=e.retryPrimaryRpcStreamIntervalMillis),e.maxRefreshDataCryptorTries&&(this.maxRefreshDataCryptorTries=e.maxRefreshDataCryptorTries),e.refreshDataCryptorIntervalSeconds&&(this.refreshDataCryptorIntervalSeconds=e.refreshDataCryptorIntervalSeconds),e.gracefulShutdownWindowSeconds&&(this.gracefulShutdownWindowSeconds=e.gracefulShutdownWindowSeconds)}}class sf{constructor(e,t,n,r){this.pubSubTopic=e,this.localParticipantId=t,this.localParticipant=n,this.skmStore=r,this.selfSeqNum=Yh(0),this.selfSeqNumServerAcked=Yh(0),this.subscriberSeqNums=new Map,this.subscriberSeqNumsAcked=new Map,this.topicMetadata=new Map,this.topicConfig=new of,this.subscribers=new Map}}class af{constructor(e,t,n,r,i){if(this.rtcPeerConnection=e,this.state=t,this.delegate=n,this.logger=r,this.subscribeInitializeResolve=null,this.receiveQueues={},this.channel=null,this.handleClose=()=>{var e,t;if(!this.channel)return void this.logger.warn`[Send] Received close event for publish channel, but channel is null`;this.channel.removeEventListener("close",this.handleClose),this.channel.removeEventListener("message",this.handleSubscribeResponse),this.channel=null;const n=[];for(const[e]of this.state.subscribers)n.push(e);this.state.subscribers.clear(),null===(t=(e=this.delegate).subscribeStreamSubscribersChanged)||void 0===t||t.call(e,this,[],n);const r=new Map(this.state.subscriberSeqNums);r.set(this.state.localParticipantId,this.state.selfSeqNumServerAcked),this.delegate.subscribeStreamDidClose(this,r,!0)},this.isConnecting=!0,this.handleSubscribeResponse=e=>{if(this.logger.info`[Recv] Received subscribe response`,!(e.target instanceof RTCDataChannel))return void this.logger.warn`[Recv] Ignored subscribe response; not from RTCDataChannel`;if(!(e.data instanceof ArrayBuffer))return void this.logger.warn`[Recv] Ignored subscribe response; not of type ArrayBuffer`;const t=(()=>{try{const t=Ac.RpcResponse.decode(new Uint8Array(e.data));return nf.SubscribeResponse.decode(t.serializedResponse)}catch{return null}})();if(!t)return void this.logger.warn`[Recv] Ignored subscribe response; failed to decode protobuf`;const n=t.initializeAck;if(n)return void this.processInitializeAck(n,e.target);const r=t.topicUpdate;if(r)return void this.processTopicUpdate(r);const i=t.record;i?this.processRecord(i):this.logger.warn`[Recv] Ignored subscribe response; all fields were undefined`},i){const e=this.state.localParticipantId,t=i.get(e);void 0!==t&&(this.state.selfSeqNum=t,this.state.selfSeqNumServerAcked=t),this.state.subscriberSeqNumsAcked=new Map(i);const n=new Map(i);n.delete(e),this.state.subscriberSeqNums=n}this.connectWithRetries()}close(){this._close(!1)}_close(e){var t,n;const r=this.channel;if(r){this.channel=null,r.removeEventListener("close",this.handleClose),r.removeEventListener("message",this.handleSubscribeResponse),"connected"===this.rtcPeerConnection.connectionState&&r.send(Ac.RpcRequest.encode({done:!0}).finish()),r.close();const i=[];for(const[e]of this.state.subscribers)i.push(e);this.state.subscribers.clear(),null===(n=(t=this.delegate).subscribeStreamSubscribersChanged)||void 0===n||n.call(t,this,[],i);const o=new Map(this.state.subscriberSeqNums);return o.set(this.state.localParticipantId,this.state.selfSeqNumServerAcked),void this.delegate.subscribeStreamDidClose(this,o,e)}if(this.isConnecting){this.isConnecting=!1;const t=new Map(this.state.subscriberSeqNums);return t.set(this.state.localParticipantId,this.state.selfSeqNumServerAcked),void this.delegate.subscribeStreamDidClose(this,t,e)}}async connectWithRetries(){const e=this.state.topicConfig.retryPrimaryRpcStreamIntervalMillis,t=1e3*this.state.topicConfig.refreshDataCryptorIntervalSeconds,n=this.state.topicConfig.maxPrimaryRpcStreamTries;for(let r=0;r<n;++r){if(0!==r&&(this.logger.info`[Recv] Subscribe stream connection attempt ${r} failed; retrying in ${e} milliseconds`,await new Promise(t=>window.setTimeout(t,e)),!this.isConnecting))return void this.logger.info`[Recv] Subscribe stream was closed after waiting for connectionRetryTime`;const i=await Hh(this.rtcPeerConnection);if(!this.isConnecting)return this.logger.info`[Recv] Subscribe stream was closed while creating data channel`,void(null==i||i.close());if(!i){this.logger.info`[Recv] Subscribe stream failed to get ready state data channel`;continue}const o=await Wh(i,"PubSub","/cp.PubSub/Subscribe");if(!this.isConnecting)return this.logger.info`[Recv] Subscribe stream was closed while attempting to connect`,void i.close();if(o){i.addEventListener("message",this.handleSubscribeResponse);for(let e=r;e<n;++e){if(e!==r&&(this.logger.info`[Recv] Subscribe stream connection attempt ${e} failed; retrying in ${t} milliseconds`,await new Promise(e=>window.setTimeout(e,t)),!this.isConnecting))return this.logger.info`[Recv] Subscribe stream was closed while waiting to retry`,void i.close();const n=await this.sendInitializeRequest(i);if(!this.isConnecting)return this.logger.info`[Recv] Subscribe stream was closed while initializing subscription`,i.removeEventListener("message",this.handleSubscribeResponse),void i.close();if(n)return this.logger.info`[Recv] Subscribe stream established`,i.addEventListener("close",this.handleClose),this.channel=i,void(this.isConnecting=!1);this.logger.info`[Recv] Subscribe stream was missing encryption keys`}break}this.logger.info`[Recv] Subscribe stream failed to register plugin`,i.close()}this.close()}async sendInitializeRequest(e){Vh(!this.channel),Vh(this.isConnecting);const t=this.state.pubSubTopic,n=this.state.localParticipant;if(!n)return this.logger.warn`[Recv] Local participant is null; skipping initialize message`,!1;const r=n.participantId,i=await n.waitForCurrentSKM(),o=[];this.state.subscriberSeqNums.forEach((e,t)=>{o.push({publisherParticipantID:Kh(t),seqNum:Kh(e)})}),o.push({publisherParticipantID:Kh(r),seqNum:Kh(this.state.selfSeqNumServerAcked)});const s=[];this.state.skmStore.skms.forEach(e=>{s.push({uuid:e.ski})});const a={uuid:i.ski},c=Ac.RpcRequest.encode({serializedRequest:nf.SubscribeRequest.encode({initialize:{topic:t,knownSeqNums:o,localEncryptionID:a,knownEncryptionIDs:s,subscriberParticipantID:Kh(r)}}).finish()}).finish();this.logger.info`[Recv] Sending initialize request knownEncryptionIDs=${s} knownSeqNums=${o}`;const l=new Promise(e=>{this.subscribeInitializeResolve=e});e.send(c);const d=new Promise(e=>{window.setTimeout(()=>e("timeout"),5e3)}),u=await Promise.race([l,d]);return"timeout"===u?(this.logger.warn`[Recv] Timed out for 5 seconds waiting for initialize response`,!1):u}processInitializeAck(e,t){var n,r,i,o,s,a,c;this.logger.info`[Recv] Received InitializeAck response`;const l=this.subscribeInitializeResolve;if(!l)return void this.logger.info`[Recv] Ignoring InitializeAck; already received one ${e}`;if(this.subscribeInitializeResolve=null,null===e.status||void 0===e.status)return void this.logger.warn`[Recv] Ignoring InitializeAck, status field is missing`;const d=this.state.localParticipantId;if(d)switch(e.status){case nf.ResponseStatus.OK:{for(const t of[...null!==(n=e.otherSubscriberParticipantIDs)&&void 0!==n?n:[],...null!==(r=e.otherSaltVerifiedSubscriberParticipantIDs)&&void 0!==r?r:[]]){const e=Qh(t);this.state.subscriberSeqNums.get(e)||e===Qh(d)||this.state.subscriberSeqNums.set(e,Yh(0))}const c=[];this.state.subscribers=new Map;for(const t of null!==(i=e.otherSubscriberParticipantIDs)&&void 0!==i?i:[]){const n=Qh(t);let r=!1;for(const n of null!==(o=e.otherSaltVerifiedSubscriberParticipantIDs)&&void 0!==o?o:[])if(n.equals(t)){r=!0;break}c.push(n),this.state.subscribers.set(n,{participantID:Qh(t),isSaltVerified:r})}if(c.push(d),this.state.subscribers.set(Qh(d),{participantID:Qh(d),isSaltVerified:!1}),null===(a=(s=this.delegate).subscribeStreamSubscribersChanged)||void 0===a||a.call(s,this,c,[]),e.subscriberSeqNum){Vh(e.subscriberSeqNum.publisherParticipantID),Vh(e.subscriberSeqNum.seqNum);const t=Qh(e.subscriberSeqNum.publisherParticipantID),n=Yh(e.subscriberSeqNum.seqNum);Vh(t===Qh(d),`Local participantID mismatch, expected=${d}, actual=${t}`),n!==BigInt(0)&&(this.state.selfSeqNum=Yh(n),this.state.selfSeqNumServerAcked=Yh(n),this.logger.info`[Recv] Updated selfSeqNum, responseSeqNum=${n}`)}if(e.metadata&&e.metadata.length>0){const t=new Map;for(const n of e.metadata)Vh(n.key),Vh(n.dataValue),t.set(n.key,n.dataValue);this.state.topicMetadata=t,this.logger.info`Setting metadata with keys ${this.state.topicMetadata}`}if(!e.topicCatchupSummary)return this.state.selfSeqNum>this.state.selfSeqNumServerAcked&&(this.logger.info`[Recv] Rewinding seqNum from=${this.state.selfSeqNum} to=${this.state.selfSeqNumServerAcked}`,this.state.selfSeqNum=this.state.selfSeqNumServerAcked),this.delegate.subscribeStreamDidSubscribe(this),void l(!0);const u=e.topicCatchupSummary;Vh(u.participantID),Vh(u.seqNums);const p=Qh(u.participantID),h=[];for(const e of u.seqNums)Vh(e.publisherParticipantID),Vh(e.seqNum),h.push([Qh(e.publisherParticipantID),Yh(e.seqNum)]);return this.logger.info`[Recv] Catchup required, fromParticipantID=${p} seqNums=${h}`,void this.delegate.subscribeStreamCatchupNeeded(this,p,e=>{switch(e){case"success":if(this.logger.info`[Recv] Catchup completed successfully`,!this.isConnecting)return void this.logger.info`[Recv] Post-catchup work aborted`;for(const[e,t]of h){if(this.state.localParticipantId!=e){const n=this.state.subscriberSeqNums.get(e);(void 0===n||n<t)&&this.state.subscriberSeqNums.set(e,t)}const n=this.state.subscriberSeqNumsAcked.get(e);(void 0===n||n<t)&&this.state.subscriberSeqNumsAcked.set(e,t)}const e=nf.SubscribeRequest.encode({recordAck:{seqNumsAck:u.seqNums}}).finish();t.send(e),this.state.selfSeqNum>this.state.selfSeqNumServerAcked&&(this.logger.info`[Recv] Rewinding seqNum from=${this.state.selfSeqNum} to=${this.state.selfSeqNumServerAcked}`,this.state.selfSeqNum=this.state.selfSeqNumServerAcked),this.delegate.subscribeStreamDidSubscribe(this),l(!0);break;case"failure":if(this.logger.info`[Recv] Catchup failed, retrying subscription`,!this.isConnecting)return void this.logger.info`[Recv] Re-subscribe aborted`;l(!1)}})}case nf.ResponseStatus.MISSING_ENCRYPTION_IDS:{if(!e.missingEncryptionIDs||0===e.missingEncryptionIDs.length)return this.logger.error`[Recv] Missing encryptionIDs, empty response from server`,void this.close();const t=[],n={};for(const r of e.missingEncryptionIDs)(null===(c=r.encryptionID)||void 0===c?void 0:c.uuid)&&r.participantID?(t.push(Qh(r.participantID)),n[r.participantID.toString()]=r.encryptionID.uuid):this.logger.warn`[Recv] Unexpected, malformed encryptionID, participantID=${r.participantID}`;return this.logger.info`[Recv] Missing encryptionIDs publisherIDToEncryptionIDs=${n}`,this.delegate.subscribeStreamNeedsSKMs(this,t),void l(!1)}case nf.ResponseStatus.UNKNOWN_TOPIC:return this.logger.error`[Recv] InitializeAck failed, topic not found`,void this.close();case nf.ResponseStatus.PLUGIN_BOUNCING:return this.logger.error`[Recv] InitializeAck failed, plugin background`,void this._close(!0);case nf.ResponseStatus.IGNORED:case nf.ResponseStatus.UNKNOWN:case nf.ResponseStatus.INVALID_REQUEST:case nf.ResponseStatus.NOT_AUTHORIZED:case nf.ResponseStatus.QUOTA_EXCEEDED:return this.logger.error`[Recv] InitializeAck failed, unexpected response-status, code=${e.status}`,void this.close();default:Gh(e.status)}else this.logger.warn`[Recv] Ignoring InitializeAck, local participant id is null`}processRecord(e){var t,n,i;const o=null===(t=e.seqNum)||void 0===t?void 0:t.publisherParticipantID,s=null===(n=e.seqNum)||void 0===n?void 0:n.seqNum;if(!s)return void this.logger.info`[Recv] Ignoring record, seqNum is null`;const a=qh(s);if(this.logger.info`[Recv] Received record response seqNum=${a}`,!o)return void this.logger.info`[Recv] Ignoring record seqNum=${a}, senderParticipantID is null`;const c=null===(i=e.encryptionID)||void 0===i?void 0:i.uuid;if(!c)return void this.logger.info`[Recv] Ignoring record seqNum=${a}, encryptionID is null`;const l=this.state.localParticipantId;if(!l)return void this.logger.info`[Recv] Ignoring record seqNum=${a}, localParticipant is null`;const d=Qh(o),u=this.state.pubSubTopic;if(!u)return void this.logger.info`[Recv] Ignoring record seqNum=${a}, topic is null`;let p=this.receiveQueues[d.toString()];p||(p=this.receiveQueues[d.toString()]=new lf),p.enqueue(async()=>{var t,n,i,a,p;const h=Qn(c,!0),f=await this.state.skmStore.waitForSKMWithKeyId(h);Fh(f,Error);const g=null===(t=e.seqNum)||void 0===t?void 0:t.seqNum;if(Vh(g instanceof gr.a),d!==l){const e=this.state.subscriberSeqNums.get(d);if(void 0===e)return void this.logger.error`[Recv] Skipping record from unknown publisher participantID=${d} seqNum=${s}`;if(e>=Yh(g))return void this.logger.warn`[Recv] Skipping old record, participantID=${d}, recordSeqNum=${g} <= currentSeqNum=${e}`;this.state.subscriberSeqNums.set(d,Yh(g))}const b=await async function(e,t,n,r){const i=e.data;if(!i)return new Error("Undefined data to decrypt in record");if(i.length-29<=0)return new Error("No data to decrypt in record");const o=await(async()=>{try{return await crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:t.sks,info:(new TextEncoder).encode(n)},t.skm,{name:"AES-GCM",length:256},!1,["decrypt"])}catch(e){return Qr(e)}})();if(o instanceof Error)return o;const s=new Uint8Array(9);s[0]=i[0],s.set(r.toBytesBE(),1);const a=await(async()=>{try{return await crypto.subtle.decrypt({name:"AES-GCM",iv:i.subarray(1,13),additionalData:s},o,i.subarray(13,i.length))}catch(e){return Qr(e)}})();return Error,a}(e,f,u,g);Fh(b,Error);const y=new Uint8Array(b),m=new r.BPlistParser;if(!m.isBPlist(y))return void this.logger.info`[Recv] Ignoring record seqNum=${g}, message is not a bplist`;const v=m.parse(y);if(v instanceof Error)return void this.logger.info`[Recv] Ignoring record seqNum=${g}, message did not parse as bplist`;if(!(cf(v)||(w=v,Lh(w)&&Lh(w.message)&&Lh(w.message.t)&&"string"==typeof w.message.t.n&&w.message.t.v instanceof Uint8Array)))return void this.logger.info`[Recv] Ignoring record seqNum=${g}, not a recognized bplist shape`;var w;const P=this.state.subscriberSeqNumsAcked.get(d);if(void 0===P||Yh(s)>P?(null===(n=this.channel)||void 0===n||n.send(Ac.RpcRequest.encode({serializedRequest:nf.SubscribeRequest.encode({recordAck:{seqNumsAck:[{publisherParticipantID:o,seqNum:s}]}}).finish()}).finish()),this.logger.info`[Recv] Sent subscribe ack for seqNum=${qh(g)}`,this.state.subscriberSeqNumsAcked.set(d,Yh(s))):this.logger.info`[Recv] Ignoring ack, seqNum to ack is less or equal to lastSeqNumAcked`,function(e,t){if(0===t.length)return!0;for(const n of t){if(qh(n)===e)return!0}return!1}(l,null!==(i=e.destinationParticipantIDs)&&void 0!==i?i:[]))try{cf(v)?(this.logger.info`[Recv] Dispatch event for data record seqNum=${qh(g)}`,this.delegate.subscribeStreamDidReceiveMessage(this,v.message.d,d)):(this.logger.info`[Recv] Dispatch event for typed data record seqNum=${qh(g)}`,this.delegate.subscribeStreamDidReceiveMessage(this,v.message.t.v,d))}catch(e){this.logger.info`[Recv] Uncaught exception was thrown during record seqNum=${g} event: ${e}`}else{const t=null!==(p=null===(a=e.destinationParticipantIDs)||void 0===a?void 0:a.map(e=>qh(e)))&&void 0!==p?p:[];this.logger.info`[Recv] Ignoring record seqNum=${qh(g)}, local participant ${l} is not the intended message recipient ${t}`}})}processTopicUpdate(e){var t,n,r,i,o,s;this.logger.info`[TopicUpdate] Received message=${e} topic=${self.name}`,Vh(e.participantID);const a=e.isSaltVerifiedID;Vh("boolean"==typeof a);const c=Qh(e.participantID);switch(e.event){case nf.SubscribeResponse.TopicUpdate.UpdateEvent.SubscriberAdded:{const e=this.state.subscriberSeqNums.get(c);void 0!==e?this.logger.info`[TopicUpdate] Subscriber re-added participant=${c} seqNum=${e}`:(this.logger.info`[TopicUpdate] Subscriber added participant=${c}`,this.state.subscriberSeqNums.set(c,Yh(0))),this.state.subscribers.set(c,{participantID:c,isSaltVerified:a}),null===(n=(t=this.delegate).subscribeStreamSubscribersChanged)||void 0===n||n.call(t,this,[c],[]);break}case nf.SubscribeResponse.TopicUpdate.UpdateEvent.SubscriberRemoved:this.logger.info`[TopicUpdate] Subscriber removed participant=${c}`,this.state.subscriberSeqNums.delete(c),this.state.subscribers.delete(c),null===(i=(r=this.delegate).subscribeStreamSubscribersChanged)||void 0===i||i.call(r,this,[],[c]);break;case nf.SubscribeResponse.TopicUpdate.UpdateEvent.MetadataChanged:{Vh(e.metadata),this.logger.info`[TopicUpdate] Metadata changed`;const t=new Set,n=new Map;for(const r of e.metadata)Vh(r.key),Vh(r.dataValue),r.dataValue.length>0?(this.state.topicMetadata.set(r.key,r.dataValue),n.set(r.key,r.dataValue)):(this.state.topicMetadata.delete(r.key),t.add(r.key));this.logger.info`[TopicUpdate] Updating metadata removedKeys=${t} upsertedKeyValues=${n}`,null===(s=(o=this.delegate).subscribeStreamMetadataUpdated)||void 0===s||s.call(o,this,t,n);break}default:this.logger.error`[TopicUpdate] Unexpected event-type, event=${e.event}`}}}function cf(e){return!!Lh(e)&&(!!Lh(e.message)&&e.message.d instanceof Uint8Array)}class lf{constructor(){this.inProgressRequest=null,this.pendingRequests=[],this.completedCount=0}get numCompleted(){return this.completedCount}get numRequests(){return this.numRequestsPending+(this.inProgressRequest?1:0)}get numRequestsPending(){return this.pendingRequests.length}enqueue(e){const t=new Promise((t,n)=>{const r={performRequest:e,resolve:t,reject:n};this.pendingRequests.push(r)});return this.performRequestsIfPossible(),t}performRequestsIfPossible(){if(null!==this.inProgressRequest)return;const e=this.pendingRequests.shift();e&&(this.inProgressRequest=e,e.performRequest().then(t=>e.resolve(t)).catch(t=>e.reject(t)).finally(()=>{this.inProgressRequest=null,this.completedCount++,this.performRequestsIfPossible()}))}}class df extends Event{constructor(e,t){super(e,t),this.data=t.data,this.source=t.source}}class uf extends Event{constructor(e,t){var n,r;super(e,t),this.added=[...null!==(n=t.added)&&void 0!==n?n:[]],this.removed=[...null!==(r=t.removed)&&void 0!==r?r:[]]}}class pf extends EventTarget{constructor(e){var t,n,r;super(),this.closeIDS=()=>{},this.unsubscribeQuickRelayTopic=()=>{},this.unsubscribeConnectionPushTopic=()=>{},this.unsubscribeSessionPushTopic=()=>{},this.closeGroupSession=()=>{},this.closeMaterialExchangeController=()=>{},this.unlistenFromQRConnection=()=>{},this.unallocBindFromQR=()=>{},this.sendLeaveNotification=()=>{},this.qrSession=null,this.qrMaterialExchangeController=null,this.publishStream=null,this.subscribeStream=null,this.sharedState=null,this.rtcPeerConnection=null,this.unackedSends=[],this._connectionState="connecting",this.subscribeStreamSubscribed=!1,this._onconnectionstatechange=null,this.__onconnectionstatechange=null,this._onmessage=null,this.__onmessage=null,this._onparticipantschange=null,this.__onparticipantschange=null;const i=e.linkPseudonym,o=e.linkPublicKey.slice(0),s=e.stableAppIdentifier,a=e.groupSessionProviderClassName,c=null!==(t=e.letMeInDisplayName)&&void 0!==t?t:void 0,l=null!==(n=e.letMeInUserInfo)&&void 0!==n?n:void 0,d=e.connectionPushTopic,u=e.sessionPushTopic,p=(()=>{switch(e.logLevel){case"error":return ht.Error;case"warn":return ht.Warn;case"info":return ht.Info;case"verbose":return ht.Verbose;case"debug":return ht.Debug;case"silly":return ht.Silly;default:return}})(),h=mn({piiPolicy:de.DEBUG_INTERNAL_ALL,level:null!=p?p:ht.Warn}),f=!!e.logLevel;this.logger=qt({log(e){f&&h.log(e)}});const g=ls(this.logger),b=new class{reportStat(){}reportPerf(){}reportError(){}reportPush(){}finishInit(){}didEncounterIssue(){}},y=null!==(r=e.environment)&&void 0!==r?r:"prod",m=(()=>{switch(y){case"sandbox":case"teamcarry":return ys.tc;case"carry":return ys.carry;case"prod":return ys.prod;default:Gh()}})(),v=vs.use(e=>new jp(e,m));vs.useInstance(m);const w=(()=>{switch(y){case"sandbox":return ea;case"teamcarry":return Xs;case"carry":return Zs;case"prod":return Ys;default:Gh()}})(),P=[v,ta.useInstance(w),Rc.useInstance(new Cc),vn.useInstance(this.logger),us.useInstance(g),wn.useInstance(b)];this.connectToIDSAndQR(i,o,s,a,c,l,d,u,P,!0)}get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this.connectionState;this._connectionState=e;if(t!==this.connectionState){const e=new Event("connectionstatechange");this.dispatchEvent(e)}}async connectToIDSAndQR(e,t,n,i,o,s,a,c,l,d){const u=this.logger;let p;const h=new Promise(e=>{p=e});let f=()=>{};const g=new Promise(e=>{f=e});let b=null;const y=new Promise(e=>{b=e});let m=()=>{};const v=new Promise(e=>{m=e});u.info`[IDS] Opening IDS push connection`;const w=await async function(e,t,n,r){const i=[1e3,5e3];let o=0;for(;;){const a=new Os(r),c=await Jh(a,e,t,n);if(c instanceof Ph)return c;if(a.close(),o>=i.length)return c;if(!((s=c)instanceof oa)||s.event.code!==Nr.BROWSER_NETWORK_UNAVAILABLE&&s.event.code!==Nr.MALFORMED_BINARY_DATA&&s.event.code!==Nr.IDS_REQUEST_FAILURE&&s.event.code!==Nr.INVALID_CONNECT_REQUEST)return c;const l=i[o++];await new Promise(e=>window.setTimeout(e,l))}var s}(e,a,[a,c,Ns.QuickRelay,Ns.QuickRelaySignaling],l);if(w instanceof Error)return u.warn`[IDS] Failed to open IDS push connection`,void this.close();this.closeIDS=()=>w.ids.close(),u.info`[IDS] Opened IDS push connection`;const P=zs(w.ids);this.unsubscribeQuickRelayTopic=P.topic(Ns.QuickRelay).subscribe(async e=>{if(u.info`[QR] Quick relay message received`,e.type!==Cs.Nice)return u.info`[QR] Quick relay message ignored; not a Nice message`,!1;if(!(e=>e.c==Rr.Generic&&"qal"in e)(e.message))return u.info`[QR] Quick relay message ignored; does not pass isQRSessionAllocateResponse`,!1;const t=await h;if(e.message.qgid!==t)return u.info`[QR] Quick relay message ignored; qgid does not match IDS group session id`,!1;const n=e.message;return(async()=>{var e;u.info`[QR] Waiting on idsGroupSessionPromise`,await g,null===(e=this.qrSession)||void 0===e||e.handleQuickRelayAllocateResponse(n)})(),!0}),this.unsubscribeConnectionPushTopic=P.topic(a).subscribe(async e=>{var t,n,r,i,o;u.info`[Push] Received a connection push topic message`;const s=e.payload;if(!s)return!1;const a=(()=>{try{return nf.SessionMessage.decode(s)}catch{return null}})();if((null==a?void 0:a.type)===nf.NearbySessionMessageType.joinResponse){if(u.info`[LMI] Received a LMI join response`,!b)return u.info`[LMI] Ignoring join response; already received one`,!0;const e=await v,n=await(async()=>{try{const t=nf.JoinResponse.decode(a.data),n=new Uint8Array(await crypto.subtle.decrypt({name:"AES-GCM",iv:t.encryptedData.subarray(0,12)},e,t.encryptedData.subarray(12)));return nf.JoinResponse.Content.decode(n)}catch{return null}})();return n?b?("string"!=typeof(null===(t=n.approved)||void 0===t?void 0:t.sessionIdentifier)?(u.info`[LMI] Join response denied access`,null==b||b(new Error("LMI access denied"))):(u.info`[LMI] Join response allowed access`,null==b||b(n.approved.sessionIdentifier)),b=null,!0):(u.info`[LMI] Ignoring join response; received one while decrypting`,!0):(u.info`[LMI] Ignoring join response; error during decode or decrypt`,!1)}if(e.type===Cs.Nice&&e.message.cc===BigInt(nf.NearbySessionMessageType.groupMessage)){u.info`[Group] Received a group membership update`;const t=await y;if(t instanceof Error)return u.info`[Group] Ignoring group member update; no session identifier`,!1;const s=e.payload;if(!s)return u.info`[Group] Ignoring group member update; no payload`,!1;const a=await g;u.info`[Group] Dispatching group membership update`;const c=(()=>{try{return nf.Group.decode(s)}catch{return null}})();if(!c)return u.info`[Group] Ignoring group member update; failed protobuf decode`,!1;if(c.initialize){u.info`[Group] Received initialize`;const e=c.initialize,r=e.groupUUID;if(!r)return u.info`[Group] Member initialize message is missing session identifier`,!1;if(Zr(r)!==t)return u.info`[Group] Member initialize message has different session identifier`,!1;const i=e.members;if(!i)return u.info`[Group] Member initialize message is missing members field`,!1;if(0===i.length)return u.info`[Group] Member initialize message has empty members`,!0;const o=[];for(const t of null!==(n=e.members)&&void 0!==n?n:[])t.handle?o.push(t.handle):u.warn`[Group] Member initialize message member was missing a handle`;return u.info`[Group] Adding initialize group members`,a.addKnownGroupMembers(o),!0}if(c.memberAdded){u.info`[Group] Received member added`;const e=c.memberAdded,n=e.groupUUID;if(!n)return u.info`[Group] Member added message is missing session identifier`,!1;if(Zr(n)!==t)return u.info`[Group] Member added message has different session identifier`,!1;const i=null===(r=e.member)||void 0===r?void 0:r.handle;return i?(u.info`[Group] Adding new group member`,a.addKnownGroupMembers([i]),!0):(u.info`[Group] Member added message is missing a handle`,!1)}if(c.memberRemoved){u.info`[Group] Received member removed`;const e=c.memberRemoved,n=e.groupUUID;if(!n)return u.info`[Group] Member removed message is missing session identifier`,!1;if(Zr(n)!==t)return u.info`[Group] Member removed message has different session identifier`,!1;const r=null===(i=e.member)||void 0===i?void 0:i.handle;return r?(u.info`[Group] Removing group member for member removed`,a.removeKnownGroupMembers([r]),!0):(u.info`[Group] Member removed message is missing a handle`,!1)}if(c.memberLeft){u.info`[Group] Received member left`;const t=null===(o=e.fromEndpoint)||void 0===o?void 0:o.theirs.uri;return t?(u.info`[Group] Removing group member for member left`,a.removeKnownGroupMembers([t]),!0):(u.info`[Group] Member left message is missing a handle`,!1)}}return!1}),this.unsubscribeSessionPushTopic=P.topic(c).subscribe(async e=>{if(u.info`[Push] IDS group session message received`,e.type!==Cs.Nice)return u.info`[Push] IDS group session message ignored; not Nice type`,!1;const t=e.payload;if(!t)return u.info`[Push] IDS group session message ignored; missing payload`,!1;const n=new r.BPlistParser;if(!n.isBPlist(t))return u.info`[Push] IDS group session message ignored; not a bplist`,!1;const i=n.parse(t);if(i instanceof Error)return u.info`[Push] IDS group session message ignored; did not parse as bplist`,!1;if(!Lh(o=i)||"string"!=typeof o["fanout-groupID-key"])return u.info`[Push] IDS group session message ignored; does not pass isIDSGroupSessionMessage`,!1;var o;const s=await g;if(i["fanout-groupID-key"]!==s.groupId)return u.info`[Push] IDS group session message ignored; not for this groupId`,!1;const a=e.message,c=zi(a.t);if(c instanceof Error)return u.info`[Push] IDS group session message ignored; missing their pushToken`,c;const l=Number(a.e/BigInt(1e6)),d=a.sP;return d?s.handleIDSGroupSessionMessage(c,d,i,l):(u.info`[Push] IDS group session message ignored; missing their endpoint`,new Error("Nice message is missing sP field"))}),u.info`[LMI] Sending join request`;const S=await w.validEndpointsFor([e],a),$=await async function(e,t,n,r,i,o){const s=vn(e.ids);s.info`Starting let me in process`;const a=await Co(!0),c=await Oo(a.publicKey);if(c instanceof Error)return s.info`Failed to export local participant's public key: ${c}`,c;const l=await Po(n);if(l instanceof Error)return s.info`Failed to import link public key data: ${l}`,l;const d=await Yu(l,a.privateKey),u=new TextEncoder,p=await crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array,info:u.encode("JoinRequests-fwk-RequestKey")},d,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),h=await crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array,info:u.encode("JoinRequests-fwk-ResponseKey")},d,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),f=nf.JoinRequest.Content.encode({identifier:Jr(),handle:e.identity.uri,displayName:r,userInfo:i}).finish(),g=new Uint8Array(12);crypto.getRandomValues(g);const b=new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:g},p,f)),y=new Uint8Array(g.byteLength+b.byteLength);y.set(g),y.set(b,g.byteLength);const m=nf.SessionMessage.encode({type:nf.NearbySessionMessageType.joinRequest,data:nf.JoinRequest.encode({publicKey:c,encryptedData:y}).finish()}).finish(),v=vh(e),w=await v.withPayload(m,t,Mr.NiceData);return e.push.sendPush(o,w,"LMIRequest"),h}(w,S,t,o,s,a);if($ instanceof Error)return u.info`Error sending let me in request`,void this.close();m($),u.info`Awaiting join response`;const O=await y;if(O instanceof Error)return u.info`Error waiting for sessionIdentifier`,void this.close();u.info`Received join response with sessionIdentifier: ${O}`;const k=await async function(e,t,n){const r=(new TextEncoder).encode(n),i=new Uint8Array(await crypto.subtle.digest("SHA-256",r)),o=Array.from(i).map(e=>e.toString(16).padStart(2,"0")).join(""),s=`${e}.${t}${o}`,a=(new TextEncoder).encode(s),c=new Uint8Array(await crypto.subtle.digest("SHA-256",a));return function(e){let t="";for(let n=0;n<4;++n)t+=(e[n]>>>4).toString(16).toUpperCase(),t+=(15&e[n]).toString(16).toUpperCase();t+="-";for(let n=4;n<6;++n)t+=(e[n]>>>4).toString(16).toUpperCase(),t+=(15&e[n]).toString(16).toUpperCase();t+="-";for(let n=6;n<8;++n)t+=(e[n]>>>4).toString(16).toUpperCase(),t+=(15&e[n]).toString(16).toUpperCase();t+="-";for(let n=8;n<10;++n)t+=(e[n]>>>4).toString(16).toUpperCase(),t+=(15&e[n]).toString(16).toUpperCase();t+="-";for(let n=10;n<16;++n)t+=(e[n]>>>4).toString(16).toUpperCase(),t+=(15&e[n]).toString(16).toUpperCase();return t}(c.slice(0,16))}(n,i,O);u.info`Awaiting QR allocation response for idsGroudSessionId ${k}`,p(k);const I=k;u.info`Received allocation response with idsGroupSessionId: ${k}`;const C=this;this.qrSession=new Uu(k,w,new class{updateAllocations(e,t){return R.updateAllocations(e,t)}async participantTrackAdded(){}onQuickRelayError(){C.close()}participantsBlocked(e){R.participantsBlocked(e)}updateMediaBlob(e){R.updateMediaBlob(e)}availableDownlinkBandwidthChanged(){}async performQRReallocation(){}async getCurrentPreKey(){if(!R.localParticipant)return null;const e=await R.localParticipant.waitForCurrentPreKeyPair();return e instanceof Error?null:e.publicKey}async receiveMaterials(e){M.receiveMaterials(e)}async handleIncomingControlChannelMessage(){return u.warn`Received control channel message in FastSync`,!1}handleConnectionFailed(){C.close()}activeParticipantsChanged(e){u.info`Active participants changed`,R.activeParticipantsChanged(e)}},navigator,d,3558);const R=new xh(js(),k,w,new class{handleMediaBlob(e,t){var n;null===(n=C.qrSession)||void 0===n||n.handleMediaBlob(e,t)}handleActiveParticipantsChange(){M.updateActiveIDSRemoteParticipants(R.activeParticipants)}handleNewCallJoinReceived(){}async handleMaxDecryptionTimeoutReached(e){u.warn`Max MKM decryption timeout reached`,C.close()}resetParticipant(){}async onInitialParticipantJoinReceived(){}async onOtherParticipantJoinReceived(){}attemptMaterialRecovery(e){M.requestNeededMaterialsForParticipant(e)}reportPushMaterialsReceived(){}async leaveCall(){C.close()}},!1,[],c,!0);this.closeGroupSession=()=>R.close(),f(R),R.onLocalParticipantDidChange.listen(()=>{M.updateActiveIDSRemoteParticipants(R.activeParticipants)}),R.onRemoteParticipantsDidChange.listen(()=>{M.updateActiveIDSRemoteParticipants(R.activeParticipants)});const M=new Cp(new class{reportQRMaterialsReceived(){}},k,w,R,this.qrSession,c,d);this.closeMaterialExchangeController=()=>M.close(),this.qrMaterialExchangeController=M;const T=await R.waitForLocalParticipant();if(T instanceof Error)return void this.close();T.onNextSKMDidChange.listen(e=>{var t;this.subscribeStreamSubscribed&&(null===(t=this.publishStream)||void 0===t||t.sendUpdatedEncryptionId(e))}),this.logger.info`localParticipant.participantId ${T.participantId}`,this.sharedState=new sf(I,Qh(T.participantId),T,R.skmStore),this.unlistenFromQRConnection=this.qrSession.withCurrentConnection(e=>{var t,n,r;null===(t=this.publishStream)||void 0===t||t.close(),this.publishStream=null,null===(n=this.subscribeStream)||void 0===n||n.close(),this.subscribeStream=null;const i=null==e?void 0:e.rtc.rtcPeerConnection;this.rtcPeerConnection=null!=i?i:null,i&&(null===(r=this.qrSession)||void 0===r||r.sessionInfoRequest([],js()),(async()=>{const e=await async function(e,t){const n=await Hh(e);if(!n)return new Error("Failed to open create topic data channel");if(!await Wh(n,"PubSub","/cp.PubSub/CreateTopic"))return new Error("Failed to register topic data channel");const r=new Promise(e=>{const r=()=>{n.removeEventListener("message",i),n.removeEventListener("close",r),e(new Error("Channel was closed while creating topic"))};n.addEventListener("close",r);const i=t=>{try{const o=Ac.RpcResponse.decode(new Uint8Array(t.data)),s=nf.CreateTopicResponse.decode(o.serializedResponse);n.removeEventListener("message",i),n.removeEventListener("close",r),n.close(),e(s)}catch{n.removeEventListener("message",i),n.removeEventListener("close",r),n.close(),e(new Error("Exception thrown while parsing create topic response"))}};n.addEventListener("message",i),n.send(Ac.RpcRequest.encode({serializedRequest:nf.CreateTopicRequest.encode({topic:t}).finish()}).finish()),n.send(Ac.RpcRequest.encode({done:!0}).finish())}),i=new Promise(e=>{window.setTimeout(()=>e(new Error("Timeout waiting for createTopic response")),5e3)}),o=await Promise.race([r,i]);return o instanceof Error?o:o.status!==nf.ResponseStatus.OK?new Error(o.error):o.topicConfig}(i,I);if(this.rtcPeerConnection!==i)return;if(e instanceof Error)return void this.close();e&&this.sharedState&&this.sharedState.topicConfig.update(e);const t=this.sharedState;t&&(this.subscribeStream=new af(i,t,this,this.logger,this.seqNumWatermark),this.publishStream=new rf(i,t,this,this.logger,this.unackedSends),"connecting"===this.connectionState&&(this.connectionState="open"))})())});const D=await this.qrSession.qrAllocBind(new Ep);if(D instanceof Error)return void this.close();this.unallocBindFromQR=()=>{var e;return null===(e=this.qrSession)||void 0===e?void 0:e.qrUnAllocBind()},M.updateAvcBlob(D);R.sendJoinNotification(D)instanceof Error?this.close():this.sendLeaveNotification=()=>R.sendLeaveNotification()}subscribeStreamCatchupNeeded(e,t,n){if(this.subscribeStream===e)return n("success")}subscribeStreamDidSubscribe(e){var t;this.subscribeStream===e&&(this.subscribeStreamSubscribed=!0,null===(t=this.publishStream)||void 0===t||t.attemptSendDeferredQueueFlush())}subscribeStreamDidReceiveMessage(e,t,n){this.subscribeStream===e&&this.dispatchEvent(new df("message",{data:t,source:n}))}subscribeStreamDidClose(e,t,n){if(this.subscribeStream!==e)return;this.subscribeStreamSubscribed=!1,this.seqNumWatermark=new Map(t);const r=this.rtcPeerConnection;"connected"===(null==r?void 0:r.connectionState)&&this.sharedState&&(n?this.subscribeStream=new af(r,this.sharedState,this,this.logger,this.seqNumWatermark):this.close())}subscribeStreamNeedsSKMs(e,t){var n;if(this.subscribeStream===e)for(const e of t)null===(n=this.qrMaterialExchangeController)||void 0===n||n.requestMaterialsForParticipant(e,[Ac.MaterialInfo.MaterialType.SKM])}subscribeStreamDidFail(e){this.subscribeStream===e&&this.close()}subscribeStreamSubscribersChanged(e,t,n){this.subscribeStream===e&&this.dispatchEvent(new uf("participantschange",{added:t,removed:n}))}publishStreamDidClose(e,t,n){if(this.publishStream!==e)return;this.unackedSends=t.map(e=>({data:e.data,toParticipantIDs:e.toParticipantIDs,previousSeqNumUnacked:e.seqNum}));const r=this.rtcPeerConnection;if("connected"===(null==r?void 0:r.connectionState)&&this.sharedState)if(n){const e=this.unackedSends;this.unackedSends=[],this.publishStream=new rf(r,this.sharedState,this,this.logger,e)}else this.close()}close(){var e,t;"closed"!==this.connectionState&&(this.connectionState="closed",null===(e=this.subscribeStream)||void 0===e||e.close(),this.subscribeStream=null,null===(t=this.publishStream)||void 0===t||t.close(),this.publishStream=null,this.sendLeaveNotification(),this.unallocBindFromQR(),this.unlistenFromQRConnection(),this.closeMaterialExchangeController(),this.closeGroupSession(),this.unsubscribeSessionPushTopic(),this.unsubscribeConnectionPushTopic(),this.unsubscribeQuickRelayTopic(),this.closeIDS())}send(e,t){if("connecting"===this.connectionState)throw this.logger.warn`[Send] Attempting to send data over a FastSyncConnection in the 'connecting' state.`,new Error("Attempting to send data over a FastSyncConnection in the 'connecting' state.");"closed"!==this.connectionState?this.publishStream?this.publishStream.send(e,{...t,enqueueOnly:!this.subscribeStreamSubscribed}):this.logger.warn`[Send] Attempting to send data over a null publishStream; dropping sent message.`:this.logger.warn`[Send] Attempting to send data over a closed FastSyncConnection; dropping sent message.`}get onconnectionstatechange(){return this._onconnectionstatechange}set onconnectionstatechange(e){if(this._onconnectionstatechange!==e&&(this.__onconnectionstatechange&&this.removeEventListener("connectionstatechange",this.__onconnectionstatechange),this._onconnectionstatechange=e,null!==e)){const t=t=>null==e?void 0:e(t);this.__onconnectionstatechange=t,this.addEventListener("connectionstatechange",t)}}get onmessage(){return this._onmessage}set onmessage(e){if(this._onmessage!==e&&(this.__onmessage&&this.removeEventListener("message",this.__onmessage),this._onmessage=e,null!==e)){const t=t=>null==e?void 0:e(t);this.__onmessage=t,this.addEventListener("message",t)}}get onparticipantschange(){return this._onparticipantschange}set onparticipantschange(e){if(this._onparticipantschange!==e&&(this.__onparticipantschange&&this.removeEventListener("participantschange",this.__onparticipantschange),this._onparticipantschange=e,null!==e)){const t=t=>null==e?void 0:e(t);this.__onparticipantschange=t,this.addEventListener("participantschange",t)}}}}])}));
//# sourceMappingURL=index.js.map

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _icloudweb_group_activities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @icloudweb/group-activities */ "./node_modules/@icloudweb/group-activities/build/index.js");
/* harmony import */ var _icloudweb_group_activities__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_icloudweb_group_activities__WEBPACK_IMPORTED_MODULE_0__);

function heartbeat(beat) {
    console.log("heartbeat() " + beat);
    SVGroupActivities.heartbeat("toc");
    return "toc";
}
function encodeToBase64(data) {
    return btoa(Array(data.length)
        .fill('')
        .map((_, i) => String.fromCharCode(data[i]))
        .join(''));
}
function decodeFromBase64(data) {
    var binaryString = atob(data);
    const length = binaryString.length;
    const dataBytes = new Uint8Array(binaryString.length);
    for (let i = 0; i < length; i++) {
        dataBytes[i] = binaryString.charCodeAt(i);
    }
    return dataBytes;
}
let fastSyncConnection;
window.FasySyncConnectionWrapper = new class {
    fastSyncConnectionNextHandle = 1;
    quickRelayHostId = null;
    fastSyncConnections = new Map();
    createSession(pseudonym, publicKey, nickname, connectionPushTopic, sessionPushTopic, joinRequest, level) {
        console.log("createSession() 3 IN JS pseudonym: ", pseudonym, " publicKey: ", publicKey, " nickname: ", nickname, " connectionPushTopic: ", connectionPushTopic, " sessionPushTopic: ", sessionPushTopic, " joinRequest: ", joinRequest, " level:", level);
        const fastSyncConnection = new _icloudweb_group_activities__WEBPACK_IMPORTED_MODULE_0__.FastSyncConnection({
            linkPseudonym: pseudonym,
            linkPublicKey: decodeFromBase64(publicKey),
            letMeInDisplayName: nickname,
            letMeInUserInfo: decodeFromBase64(joinRequest),
            connectionPushTopic: connectionPushTopic,
            sessionPushTopic: sessionPushTopic,
            stableAppIdentifier: "com.apple.mediaremoted",
            groupSessionProviderClassName: "NearbyGroupSessionProvider<RemoteControlActivity>",
            logLevel: level.length > 0 ? "silly" : "error",
            environment: "prod",
        });
        // console.log("createSession() register error listener...");
        // fastSyncConnection.addEventListener("error", (e) => {
        //     console.log("createSession() CALLBACK we got an error?", e);
        //     SVGroupActivities.onSessionError("We got an error");
        // });
        console.log("createSession() register connectionstatechange listener...");
        fastSyncConnection.addEventListener("connectionstatechange", () => {
            console.log("createSession() CALLBACK we got connectionstatechange: " + fastSyncConnection.connectionState);
            SVGroupActivities.onSessionEvent(fastSyncConnection.connectionState);
        });
        console.log("createSession() register message listener...");
        fastSyncConnection.addEventListener("message", (e) => {
            if (e.data instanceof Uint8Array) {
                let participantId = "";
                if (e.source != null) {
                    if (this.quickRelayHostId == null || this.quickRelayHostId != e.source) {
                        this.quickRelayHostId = e.source;
                        console.error('CALLBACK ENCODING FOUND quickRelayHostId: ', this.quickRelayHostId);
                    }
                    participantId = e.source.toString();
                }
                console.error('CALLBACK ENCODING message from participantId: ', participantId);
                SVGroupActivities.onSessionMessage(participantId, encodeToBase64(e.data));
            }
            else {
                console.error('CALLBACK ERROR Message Type');
            }
        });
        console.log("createSession() register participants listener...");
        fastSyncConnection.addEventListener("participantschange", (e) => {
            console.log("createSession() CALLBACK we got participantschange M numOfAdded: ", e.added.length, " numOfRemoved: ", e.removed.length);
            if (e.added.length > 0) {
                let i = 0;
                while (i < e.added.length) {
                    console.log("createSession() CALLBACK ADDED  M idx: ", i, " id: ", e.added[i]);
                    ++i;
                }
                SVGroupActivities.onParticipantsAdded(e.added.join("|"));
            }
            if (e.removed.length > 0) {
                let i = 0;
                while (i < e.removed.length) {
                    console.log("createSession() CALLBACK REMOVED idx: ", i, " id: ", e.removed[i]);
                    ++i;
                }
                SVGroupActivities.onParticipantsRemoved(e.removed.join("|"));
            }
        });
        const handle = this.fastSyncConnectionNextHandle++;
        this.fastSyncConnections.set(handle, fastSyncConnection);
        console.log("createSession() OUT we're good!");
        return handle;
    }
    sendMessage(handle, message) {
        console.log("sendMessage() IN handle: " + handle + " quickRelayHostId: " + this.quickRelayHostId + " msg: " + message);
        if (this.isSessionActive(handle)) {
            console.log("sendMessage() kFOUND active session for handle: " + handle);
            const connection = this.fastSyncConnections.get(handle);
            if (connection) {
                if (this.quickRelayHostId != null) {
                    console.log("sendMessage() sending to quickRelayHostId: " + this.quickRelayHostId);
                    connection.send(decodeFromBase64(message), {
                        participantIds: [this.quickRelayHostId]
                    });
                }
                else {
                    console.error("sendMessage() ERROR invalid quickRelayHostId");
                }
            }
        }
        else {
            console.error("sendMessage() ERROR session not active for handle: " + handle);
        }
        console.log("sendMessage() OUT");
    }
    isSessionActive(handle) {
        const fastSyncConnection = this.fastSyncConnections.get(handle);
        if (!fastSyncConnection) {
            console.log(`isSessionActive() connection for handle ${handle} does not exist`);
            return false;
        }
        if (fastSyncConnection.connectionState === "closed") {
            console.log(`isSessionActive() connection for handle ${handle} is closed`);
            return false;
        }
        console.log(`isSessionActive() connection for handle ${handle} is active`);
        return true;
    }
    isSessionCached(handle) {
        const fastSyncConnection = this.fastSyncConnections.get(handle);
        if (!fastSyncConnection) {
            console.log(`isSessionCached() connection for handle ${handle} does not exist`);
            return false;
        }
        console.log(`isSessionCached() connection for handle ${handle} is cached`);
        return true;
    }
    close(handle) {
        console.log("close() IN handle: " + handle + " quickRelayHostId: " + this.quickRelayHostId);
        if (this.isSessionActive(handle)) {
            console.log("close() FOUND active session for handle: " + handle);
            const connection = this.fastSyncConnections.get(handle);
            if (connection) {
                console.log("close() sending...");
                connection.close();
                this.fastSyncConnections.delete(handle);
            }
        }
        else if (this.isSessionCached(handle)) {
            console.log("close() FOUND cached session for handle: " + handle);
            const connection = this.fastSyncConnections.get(handle);
            if (connection) {
                console.log("close() removing handle...");
                this.fastSyncConnections.delete(handle);
            }
        }
        else {
            console.error("close() ERROR session not active for handle: " + handle);
        }
        this.quickRelayHostId = null;
        return -1;
    }
}();

})();

/******/ })()
;
//# sourceMappingURL=index.js.map